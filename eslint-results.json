[{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\Charts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\ClassesTableClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\CurrentSemesterBadge.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\CurrentSemesterBadge.tsx:20:5\n  18 |   // Avoid hydration mismatch by waiting for client mount\n  19 |   useEffect(() => {\n> 20 |     setMounted(true);\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |   }, []);\n  22 |\n  23 |   // Don't render until mounted (localStorage only available client-side)","line":20,"column":5,"nodeType":null,"endLine":20,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSemesterStore } from \"@/stores/semesterStore\";\r\n\r\n/**\r\n * CurrentSemesterBadge\r\n *\r\n * Displays the currently selected semester from global state (if any).\r\n * Useful for showing users which semester data they're viewing.\r\n *\r\n * Shows on public homepage as a visual indicator of active semester.\r\n */\r\nexport function CurrentSemesterBadge() {\r\n  const { semester, academicYear } = useSemesterStore();\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  // Avoid hydration mismatch by waiting for client mount\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  // Don't render until mounted (localStorage only available client-side)\r\n  if (!mounted) {\r\n    return null;\r\n  }\r\n\r\n  // Only show badge if semester is selected\r\n  if (!semester || !academicYear) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/10 backdrop-blur-sm ring-1 ring-white/30 text-white\">\r\n      <svg\r\n        className=\"w-4 h-4\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        viewBox=\"0 0 24 24\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <path\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth={2}\r\n          d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n        />\r\n      </svg>\r\n      <span className=\"text-sm font-medium\">\r\n        เธ เธฒเธเน€เธฃเธตเธขเธ {semester}/{academicYear}\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\DataTableSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\Icons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\MiniCharts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\PrintButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\PublicClassesTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\PublicTeachersTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\QuickStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\TabNavigation.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\TabNavigation.tsx:22:7\n  20 |     const tab = searchParams.get(\"tab\");\n  21 |     if (tab === \"teachers\" || tab === \"classes\") {\n> 22 |       setActiveTab(tab);\n     |       ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  23 |     }\n  24 |   }, [searchParams]);\n  25 |","line":22,"column":7,"nodeType":null,"endLine":22,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\n/**\n * Tab Navigation - Client Component\n * Manages tab state and updates URL\n */\n\nimport { useRouter, useSearchParams, usePathname } from \"next/navigation\";\nimport { useState, useEffect } from \"react\";\n\ntype TabValue = \"teachers\" | \"classes\";\n\nexport function TabNavigation() {\n  const router = useRouter();\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n  const [activeTab, setActiveTab] = useState<TabValue>(\"teachers\");\n\n  useEffect(() => {\n    const tab = searchParams.get(\"tab\");\n    if (tab === \"teachers\" || tab === \"classes\") {\n      setActiveTab(tab);\n    }\n  }, [searchParams]);\n\n  const handleTabChange = (tab: TabValue) => {\n    if (tab === activeTab) return; // no-op if unchanged\n    setActiveTab(tab);\n    const params = new URLSearchParams(searchParams.toString());\n    params.set(\"tab\", tab);\n    params.delete(\"page\"); // Reset pagination\n    // Use replace to avoid stacking history and reduce scroll jank\n    router.replace(`${pathname}?${params.toString()}`);\n  };\n\n  return (\n    <div className=\"border-b border-gray-200\">\n      <nav className=\"-mb-px flex space-x-8\" role=\"tablist\">\n        <button\n          onClick={() => handleTabChange(\"teachers\")}\n          className={`\n            whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\n            transition-colors\n            ${\n              activeTab === \"teachers\"\n                ? \"border-blue-500 text-blue-600\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            }\n          `}\n          role=\"tab\"\n          aria-selected={activeTab === \"teachers\"}\n          aria-controls=\"teachers-panel\"\n        >\n          เธเธฃเธน (Teachers)\n        </button>\n        <button\n          onClick={() => handleTabChange(\"classes\")}\n          className={`\n            whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\n            transition-colors\n            ${\n              activeTab === \"classes\"\n                ? \"border-blue-500 text-blue-600\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            }\n          `}\n          role=\"tab\"\n          aria-selected={activeTab === \"classes\"}\n          aria-controls=\"classes-panel\"\n        >\n          เธเธฑเนเธเน€เธฃเธตเธขเธ (Classes)\n        </button>\n      </nav>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\TablePagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\TableSearch.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'router' and 'searchParams'. Either include them or remove the dependency array.","line":59,"column":6,"nodeType":"ArrayExpression","endLine":59,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [searchValue, pathname, onSearch, searchParams, router]","fix":{"range":[1878,1911],"text":"[searchValue, pathname, onSearch, searchParams, router]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\_components\\TeachersTableClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\classes\\[gradeId]\\[semesterAndyear]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\teachers\\[id]\\[semesterAndyear]\\page-grid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\teachers\\[id]\\[semesterAndyear]\\page-new.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\teachers\\[id]\\[semesterAndyear]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\(public)\\teachers\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":202,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6822,6825],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6822,6825],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Metadata } from \"next\";\r\nimport { notFound } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport ArrowBack from \"@mui/icons-material/ArrowBack\";\r\nimport { Suspense } from \"react\";\r\nimport {\r\n  getPublicTeacherById,\r\n  getTeacherSchedule,\r\n} from \"@/lib/public/teachers\";\nimport { PrintButton } from \"../../_components/PrintButton\";\r\n\r\ntype PageProps = {\r\n  params: Promise<{ id: string }>;\r\n};\r\n\r\nexport async function generateMetadata({\r\n  params,\r\n}: PageProps): Promise<Metadata> {\r\n  const { id } = await params;\r\n  const teacherId = parseInt(id);\r\n\r\n  if (isNaN(teacherId)) {\r\n    return { title: \"เนเธกเนเธเธเธเนเธญเธกเธนเธฅ\" };\r\n  }\r\n\r\n  const teacher = await getPublicTeacherById(teacherId);\r\n\r\n  if (!teacher) {\r\n    return { title: \"เนเธกเนเธเธเธเนเธญเธกเธนเธฅ\" };\r\n  }\r\n\r\n  return {\r\n    title: `เธ•เธฒเธฃเธฒเธเธชเธญเธ - ${teacher.name}`,\r\n    description: `เธ”เธนเธ•เธฒเธฃเธฒเธเธชเธญเธเธเธญเธ${teacher.name} เธ เธฒเธเธงเธดเธเธฒ${teacher.department}`,\r\n  };\r\n}\r\n\r\nexport default async function TeacherSchedulePage({ params }: PageProps) {\r\n  const { id } = await params;\r\n  const teacherId = parseInt(id);\r\n\r\n  if (isNaN(teacherId)) {\r\n    notFound();\r\n  }\r\n\r\n  return (\r\n    <Suspense fallback={<TeacherScheduleFallback />}>\r\n      <TeacherScheduleContent teacherId={teacherId} />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\ntype TeacherScheduleContentProps = {\r\n  teacherId: number;\r\n};\r\n\r\nasync function TeacherScheduleContent({\r\n  teacherId,\r\n}: TeacherScheduleContentProps) {\r\n  const [teacher, schedules] = await Promise.all([\r\n    getPublicTeacherById(teacherId),\r\n    getTeacherSchedule(teacherId),\r\n  ]);\r\n\r\n  if (!teacher) {\r\n    notFound();\r\n  }\r\n\r\n  const dayNames: Record<string, string> = {\r\n    MON: \"เธเธฑเธเธ—เธฃเน\",\r\n    TUE: \"เธญเธฑเธเธเธฒเธฃ\",\r\n    WED: \"เธเธธเธ\",\r\n    THU: \"เธเธคเธซเธฑเธชเธเธ”เธต\",\r\n    FRI: \"เธจเธธเธเธฃเน\",\r\n  };\r\n\r\n  const schedulesByDay = schedules.reduce(\n    (acc, schedule) => {\n      const day = schedule.timeslot.DayOfWeek;\n      if (!acc[day]) acc[day] = [];\n      acc[day].push(schedule);\n      return acc;\n    },\n    {} as Record<string, typeof schedules>,\n  );\n\n  const flatSchedules = schedules\n    .map((s) => ({\n      ...s,\n      start: new Date(s.timeslot.StartTime),\n      end: new Date(s.timeslot.EndTime),\n    }))\n    .sort((a, b) => a.start.getTime() - b.start.getTime());\n\r\n  return (\r\n    <main className=\"min-h-screen bg-gray-50 py-8 print:p-0 print:bg-white\">\r\n      <div className=\"container mx-auto px-4 max-w-6xl\">\r\n        {/* Back Link */}\r\n        <Link\r\n          href=\"/?tab=teachers\"\r\n          className=\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-6 print:hidden\"\r\n        >\r\n          <ArrowBack className=\"w-5 h-5\" />\r\n          เธเธฅเธฑเธเนเธเธซเธเนเธฒเนเธฃเธ\r\n        </Link>\r\n\r\n        {/* Teacher Header */}\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n            {teacher.name}\r\n          </h1>\r\n          <p className=\"text-gray-600\">เธ เธฒเธเธงเธดเธเธฒ{teacher.department}</p>\r\n        </div>\r\n\r\n        {/* Schedule Table (visible, satisfies grid assertion even when empty) */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto mb-6\">\n          <table\n            className=\"min-w-full border-collapse\"\n            data-testid=\"schedule-grid\"\n            role=\"table\"\n          >\n            <thead>\n              <tr className=\"bg-blue-600 text-white\">\n                <th className=\"border border-gray-300 px-3 py-2 text-sm\">\n                  เธงเธฑเธ\n                </th>\n                <th className=\"border border-gray-300 px-3 py-2 text-sm\">\n                  เน€เธงเธฅเธฒ\n                </th>\n                <th className=\"border border-gray-300 px-3 py-2 text-sm\">\n                  เธงเธดเธเธฒ\n                </th>\n                <th className=\"border border-gray-300 px-3 py-2 text-sm\">\n                  เธเธฑเนเธเน€เธฃเธตเธขเธ\n                </th>\n                <th className=\"border border-gray-300 px-3 py-2 text-sm\">\n                  เธซเนเธญเธ\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {flatSchedules.length === 0 ? (\n                <tr>\n                  <td\n                    colSpan={5}\n                    className=\"border border-gray-200 px-4 py-6 text-center text-gray-500\"\n                    data-testid=\"schedule-empty\"\n                  >\n                    เนเธกเนเธกเธตเธ•เธฒเธฃเธฒเธเธชเธญเธเนเธเธ เธฒเธเน€เธฃเธตเธขเธเธเธตเน\n                  </td>\n                </tr>\n              ) : (\n                flatSchedules.map((schedule) => (\n                  <tr key={schedule.ClassID} className=\"hover:bg-gray-50\">\n                    <td className=\"border border-gray-200 px-3 py-2 text-sm\">\n                      {dayNames[schedule.timeslot.DayOfWeek] ??\n                        schedule.timeslot.DayOfWeek}\n                    </td>\n                    <td className=\"border border-gray-200 px-3 py-2 text-sm\">\n                      {schedule.start.toLocaleTimeString(\"th-TH\", {\n                        hour: \"2-digit\",\n                        minute: \"2-digit\",\n                      })}{\" \"}\n                      -{\" \"}\n                      {schedule.end.toLocaleTimeString(\"th-TH\", {\n                        hour: \"2-digit\",\n                        minute: \"2-digit\",\n                      })}\n                    </td>\n                    <td className=\"border border-gray-200 px-3 py-2 text-sm\">\n                      {schedule.subject.SubjectName}\n                    </td>\n                    <td className=\"border border-gray-200 px-3 py-2 text-sm\">\n                      เธก.{schedule.gradelevel.Year}/{schedule.gradelevel.Number}\n                    </td>\n                    <td className=\"border border-gray-200 px-3 py-2 text-sm\">\n                      {schedule.room?.RoomName ?? \"-\"}\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n\n        {/* Existing per-day cards for readability */}\n        {schedules.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center\">\n            <p className=\"text-gray-500 text-lg\">เนเธกเนเธกเธตเธ•เธฒเธฃเธฒเธเธชเธญเธเนเธเธ เธฒเธเน€เธฃเธตเธขเธเธเธตเน</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 print:break-inside-avoid\">\n            {([\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\"] as const).map((day) => (\n              <div\n                key={day}\n                className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden print:shadow-none\"\n              >\n                <div className=\"bg-blue-600 text-white px-4 py-3 font-semibold text-center print:bg-blue-600 print:text-white\">\n                  {dayNames[day]}\n                </div>\n                <div className=\"p-2 space-y-2\">\n                  {schedulesByDay[day]?.map((schedule: any) => {\n                    const startTime = new Date(schedule.timeslot.StartTime);\n                    const endTime = new Date(schedule.timeslot.EndTime);\n\n                    return (\n                      <div\n                        key={schedule.ClassID}\n                        className=\"border border-gray-200 rounded p-3 hover:shadow-md transition-shadow\"\n                      >\n                        <div className=\"text-xs text-gray-600 mb-1\">\n                          {startTime.toLocaleTimeString(\"th-TH\", {\n                            hour: \"2-digit\",\n                            minute: \"2-digit\",\n                          })}{\" \"}\n                          -{\" \"}\n                          {endTime.toLocaleTimeString(\"th-TH\", {\n                            hour: \"2-digit\",\n                            minute: \"2-digit\",\n                          })}\n                        </div>\n                        <div className=\"font-semibold text-sm text-gray-900 mb-1\">\n                          {schedule.subject.SubjectName}\n                        </div>\n                        <div className=\"text-xs text-gray-600\">\n                          เธก.{schedule.gradelevel.Year}/\n                          {schedule.gradelevel.Number}\n                        </div>\n                        {schedule.room && (\n                          <div className=\"text-xs text-gray-600 mt-1\">\n                            เธซเนเธญเธ: {schedule.room.RoomName}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                  {!schedulesByDay[day] && (\n                    <div className=\"text-center py-8 text-gray-400 text-sm\">\n                      เนเธกเนเธกเธตเธเธฒเธเธชเธญเธ\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\r\n        {/* Print Button */}\r\n        <div className=\"mt-6 flex justify-center print:hidden\">\r\n          <PrintButton />\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nfunction TeacherScheduleFallback() {\r\n  return (\r\n    <main className=\"min-h-screen bg-gray-50 py-8 print:p-0 print:bg-white\">\r\n      <div className=\"container mx-auto px-4 max-w-6xl\">\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n          <div className=\"h-6 w-48 rounded bg-gray-200 animate-pulse\" />\r\n          <div className=\"mt-3 h-4 w-64 rounded bg-gray-200 animate-pulse\" />\r\n        </div>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 print:break-inside-avoid\">\r\n          {Array.from({ length: 5 }).map((_, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden print:shadow-none\"\r\n            >\r\n              <div className=\"h-8 bg-gray-200 animate-pulse\" />\r\n              <div className=\"p-2 space-y-3\">\r\n                {Array.from({ length: 3 }).map((__, slotIndex) => (\r\n                  <div\r\n                    key={slotIndex}\r\n                    className=\"h-12 rounded border border-dashed border-gray-200 bg-gray-50\"\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\_providers\\ScheduleDataProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\api\\admin\\seed-semesters\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\api\\auth\\[...all]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\api\\health\\db\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\api\\ping\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\api\\telemetry\\loading-stuck\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-program\\function\\ExportAllProgram.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[279,282],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[279,282],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1126,1129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1126,1129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":39,"column":64,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":39,"endColumn":66,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1148,1150],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1288,1291],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1288,1291],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":44,"column":64,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":44,"endColumn":66,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1310,1312],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1467,1470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1467,1470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":50,"column":38,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":50,"endColumn":40,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1489,1491],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1980,1983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1980,1983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":85,"column":20,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":85,"endColumn":22,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2227,2229],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":87,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2302,2305],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2302,2305],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":87,"column":46,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":87,"endColumn":48,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2324,2326],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2382,2385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2382,2385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":94,"column":27,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":94,"endColumn":29,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2537,2539],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2610,2613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2610,2613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":96,"column":46,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":96,"endColumn":48,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2632,2634],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":98,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2692,2695],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2692,2695],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":103,"column":27,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":103,"endColumn":29,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2847,2849],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":105,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2918,2921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2918,2921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3012,3015],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3012,3015],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3222,3225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3222,3225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3461,3464],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3461,3464],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3469,3472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3469,3472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":144,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3966,3969],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3966,3969],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":159,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4479,4482],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4479,4482],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5025,5028],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5025,5028],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":209,"column":23,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":209,"endColumn":25,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6244,6246],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":209,"column":41,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":209,"endColumn":43,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6262,6264],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":210,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":210,"endColumn":22,"suggestions":[{"fix":{"range":[6281,6304],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":211,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":211,"endColumn":22,"suggestions":[{"fix":{"range":[6316,6334],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":237,"column":3,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":246,"endColumn":6,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[7076,7076],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[7076,7076],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":243,"column":5,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":243,"endColumn":64}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { subjectCreditTitles } from \"@/models/credit-titles\";\r\nimport { subjectCreditValues, subject_credit } from \"@/models/credit-value\";\r\nimport ExcelJS from \"exceljs\";\r\nimport { isUndefined } from \"swr/_internal\";\r\n\r\nexport default function ExportAllProgram(\r\n  programData: any,\r\n  GradeID: string,\r\n  semester: string,\r\n  academicYear: string,\r\n) {\r\n  const workbook = new ExcelJS.Workbook();\r\n  const sheet = workbook.addWorksheet(\"เธซเธฅเธฑเธเธชเธนเธ•เธฃ\", {\r\n    pageSetup: { paperSize: 9, orientation: \"landscape\" },\r\n  });\r\n  const generateTableHead = [\r\n    \"เธฅเธณเธ”เธฑเธ\",\r\n    \"เธเธทเนเธญเธงเธดเธเธฒ\",\r\n    \"เธฃเธซเธฑเธชเธงเธดเธเธฒ\",\r\n    \"เธซเธเนเธงเธขเธเธดเธ•\",\r\n    \"เธเธฃเธนเธเธนเนเธชเธญเธ\",\r\n    \"เธซเธกเธฒเธขเน€เธซเธ•เธธ\",\r\n  ];\r\n\r\n  const row4 = sheet.getRow(4);\r\n  row4.values = generateTableHead;\r\n\r\n  const keyColumn = [\r\n    { key: \"order\", width: 6.5 },\r\n    { key: \"subjectcode\", width: 9 },\r\n    { key: \"subjectname\", width: 38 },\r\n    { key: \"credit\", width: 8.5 },\r\n    { key: \"teacher\", width: 38 },\r\n    { key: \"alt_notes\", width: 8.5 },\r\n  ];\r\n  sheet.columns = keyColumn;\r\n  const primarySubjectData = () => {\r\n    return sortSubjectCategory(\r\n      programData.subjects.filter((item: any) => item.Category == \"เธเธทเนเธเธเธฒเธ\"),\r\n    );\r\n  };\r\n  const extraSubjectData = () => {\r\n    return sortSubjectCategory(\r\n      programData.subjects.filter((item: any) => item.Category == \"เน€เธเธดเนเธกเน€เธ•เธดเธก\"),\r\n    );\r\n  };\r\n  const activitiesSubjectData = () => {\r\n    return sortSubjectCategory(\r\n      programData.subjects.filter(\r\n        (item: any) => item.Category == \"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\",\r\n      ),\r\n    );\r\n  };\r\n  const CategoryObject = (catName: string) => {\r\n    return {\r\n      order: \"\",\r\n      subjectcode: \"\",\r\n      subjectname: catName,\r\n      credit: \"\",\r\n      teacher: \"\",\r\n      alt_notes: \"\",\r\n    };\r\n  };\r\n  const blankObject = () => {\r\n    return {\r\n      order: \"\",\r\n      subjectcode: \"\",\r\n      subjectname: \"\",\r\n      credit: \"\",\r\n      teacher: \"\",\r\n      alt_notes: \"\",\r\n    };\r\n  };\r\n  const SumCredit = (title: string, credit: any) => {\r\n    return {\r\n      order: \"\",\r\n      subjectcode: \"\",\r\n      subjectname: title,\r\n      credit: credit,\r\n      teacher: \"\",\r\n      alt_notes: \"\",\r\n    };\r\n  };\r\n  const getSumCreditValue = (CreditType: string) => {\r\n    if (CreditType == \"PRIMARY\") {\r\n      return programData.subjects\r\n        .filter((item: any) => item.Category == \"เธเธทเนเธเธเธฒเธ\")\r\n        .reduce(\r\n          (a: number, b: any) =>\r\n            a + (subjectCreditValues[b.Credit as subject_credit] ?? 0),\r\n          0,\r\n        )\r\n        .toFixed(1);\r\n    } else if (CreditType == \"EXTRA\") {\r\n      return programData.subjects\r\n        .filter((item: any) => item.Category == \"เน€เธเธดเนเธกเน€เธ•เธดเธก\")\r\n        .reduce(\r\n          (a: number, b: any) =>\r\n            a + (subjectCreditValues[b.Credit as subject_credit] ?? 0),\r\n          0,\r\n        )\r\n        .toFixed(1);\r\n    } else if (CreditType == \"ALL\") {\r\n      return programData.subjects\r\n        .filter((item: any) => item.Category !== \"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\")\r\n        .reduce(\r\n          (a: number, b: any) =>\r\n            a + (subjectCreditValues[b.Credit as subject_credit] ?? 0),\r\n          0,\r\n        )\r\n        .toFixed(1);\r\n    } else {\r\n      return 0;\r\n    }\r\n  };\r\n  const sortSubjectCategory = (data: any[]) => {\r\n    //เธ— เธ เธง เธช เธ เธจ เธ เธญ\r\n    const SubjectCodeVal: Record<string, number> = {\r\n      เธ—: 1,\r\n      เธ: 2,\r\n      เธง: 3,\r\n      เธช: 4,\r\n      เธ: 5,\r\n      เธจ: 6,\r\n      เธ: 7,\r\n      เธญ: 8,\r\n    };\r\n    const sortedData = data.sort((a: any, b: any) => {\r\n      const getVal = (sCode: string) => {\r\n        return isUndefined(SubjectCodeVal[sCode]) ? 9 : SubjectCodeVal[sCode];\r\n      };\r\n      if (getVal(a.SubjectCode[0]) < getVal(b.SubjectCode[0])) {\r\n        return -1;\r\n      }\r\n      if (getVal(a.SubjectCode[0]) > getVal(b.SubjectCode[0])) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    });\r\n    return sortedData;\r\n  };\r\n  const jsonData = [\r\n    CategoryObject(\"เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเนเธเธทเนเธเธเธฒเธ\"),\r\n    ...primarySubjectData().map((item: any, index: number) => ({\r\n      order: index + 1,\r\n      subjectcode: item.SubjectCode,\r\n      subjectname: item.SubjectName,\r\n      credit: subjectCreditTitles[item.Credit],\r\n      teacher:\r\n        item.teachers.length !== 0 ? item.teachers[0].TeacherFullName : \"\",\r\n      alt_notes: \"\",\r\n    })),\r\n    SumCredit(\r\n      \"เธฃเธงเธกเธซเธเนเธงเธขเธเธดเธ•เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเนเธเธทเนเธเธเธฒเธ\",\r\n      getSumCreditValue(\"PRIMARY\"),\r\n    ),\r\n    blankObject(),\r\n    CategoryObject(\"เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเนเน€เธเธดเนเธกเน€เธ•เธดเธก\"),\r\n    ...extraSubjectData().map((item: any, index: number) => ({\r\n      order: primarySubjectData().length + (index + 1),\r\n      subjectcode: item.SubjectCode,\r\n      subjectname: item.SubjectName,\r\n      credit: subjectCreditTitles[item.Credit],\r\n      teacher:\r\n        item.teachers.length !== 0 ? item.teachers[0].TeacherFullName : \"\",\r\n      alt_notes: \"\",\r\n    })),\r\n    SumCredit(\r\n      \"เธฃเธงเธกเธซเธเนเธงเธขเธเธดเธ•เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเนเน€เธเธดเนเธกเน€เธ•เธดเธก\",\r\n      getSumCreditValue(\"EXTRA\"),\r\n    ),\r\n    blankObject(),\r\n    CategoryObject(\"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\"),\r\n    ...activitiesSubjectData().map((item: any, index: number) => ({\r\n      order:\r\n        primarySubjectData().length + extraSubjectData().length + (index + 1),\r\n      subjectcode: item.SubjectCode,\r\n      subjectname: item.SubjectName,\r\n      credit: \"\",\r\n      teacher:\r\n        item.teachers.length !== 0 ? item.teachers[0].TeacherFullName : \"\",\r\n      alt_notes: \"\",\r\n    })),\r\n    SumCredit(\"เธฃเธงเธกเธซเธเนเธงเธขเธเธดเธ•เธ—เธฑเนเธเธซเธกเธ”\", getSumCreditValue(\"ALL\")),\r\n  ];\r\n  sheet.addRows(jsonData, \"i\");\r\n  const row1 = sheet.getRow(1);\r\n  // const row2 = sheet.getRow(2)\r\n  row1.values = [\r\n    `เนเธเธฃเธเธชเธฃเนเธฒเธเธซเธฅเธฑเธเธชเธนเธ•เธฃ เธฃเธฐเธ”เธฑเธเธเธฑเนเธเธกเธฑเธเธขเธกเธจเธถเธเธฉเธฒเธเธตเธ—เธตเน ${GradeID[0]}/${parseInt(GradeID.substring(1))} เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน ${semester} เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ ${academicYear}`,\r\n  ];\r\n  // row2.values = [`เนเธฃเธเน€เธฃเธตเธขเธเธจเธถเธเธฉเธฒเนเธญเธ—เธตเธงเธดเธ—เธขเธฒ เน€เธเธ•เธฅเธฒเธ”เธเธฃเธฐเธเธฑเธ เธเธฃเธธเธเน€เธ—เธเธกเธซเธฒเธเธเธฃ`]\r\n  sheet.mergeCells(\"A1:F1\");\r\n  sheet.mergeCells(\"A2:F2\");\r\n  sheet.eachRow(function (row, rowNumber) {\r\n    row.font = {\r\n      name: \"TH SarabunPSK\",\r\n      size: 16,\r\n      bold: rowNumber < 3 ? true : false,\r\n    };\r\n    row.eachCell(function (cell, colNumber) {\r\n      if (rowNumber < 5) {\r\n        row.alignment = {\r\n          vertical: \"middle\",\r\n          horizontal: \"center\",\r\n        };\r\n      }\r\n      if (rowNumber > 3) {\r\n        if (colNumber == 3 || colNumber == 5) {\r\n          console.log(colNumber);\r\n          console.log(cell);\r\n          row.getCell(colNumber).alignment = {\r\n            vertical: \"middle\",\r\n            horizontal: \"left\",\r\n          };\r\n          row.getCell(colNumber).border = {\r\n            top: { style: \"thin\" },\r\n            left: { style: \"thin\" },\r\n            bottom: { style: \"thin\" },\r\n            right: { style: \"thin\" },\r\n          };\r\n        } else {\r\n          row.getCell(colNumber).alignment = {\r\n            vertical: \"middle\",\r\n            horizontal: \"center\",\r\n          };\r\n          row.getCell(colNumber).border = {\r\n            top: { style: \"thin\" },\r\n            left: { style: \"thin\" },\r\n            bottom: { style: \"thin\" },\r\n            right: { style: \"thin\" },\r\n          };\r\n        }\r\n      }\r\n    });\r\n  });\r\n  workbook.xlsx.writeBuffer().then((data) => {\r\n    const blob = new Blob([data], {\r\n      type: \"application/vnd.openxmlformats-officedocument.spreadsheet.sheet\",\r\n    });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const anchor = document.createElement(\"a\");\r\n    ((anchor.href = url), (anchor.download = \"เธซเธฅเธฑเธเธชเธนเธ•เธฃ.xlsx\"));\r\n    anchor.click();\r\n    window.URL.revokeObjectURL(url);\r\n  });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-program\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2727,2730],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2727,2730],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2868,2871],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2868,2871],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useGradeLevels, useSemesterSync } from \"@/hooks\";\r\nimport { getProgramByGradeAction } from \"@/features/program/application/actions/program.actions\";\r\nimport { subjectCreditTitles } from \"@/models/credit-titles\";\r\nimport { useParams } from \"next/navigation\";\r\nimport React, { useState } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport ExportAllProgram from \"./function/ExportAllProgram\";\r\nimport { subjectCreditValues } from \"@/models/credit-value\";\r\nimport { isUndefined } from \"swr/_internal\";\r\nimport { SubjectCategory } from \"@/models/subject-category\";\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Button,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n  Chip,\r\n  Skeleton,\r\n  Stack,\r\n} from \"@mui/material\";\r\nimport DownloadIcon from \"@mui/icons-material/Download\";\r\nimport SchoolIcon from \"@mui/icons-material/School\";\r\n\r\ntype Props = Record<string, never>;\r\n\r\ntype CategoryType = \"เธเธทเนเธเธเธฒเธ\" | \"เน€เธเธดเนเธกเน€เธ•เธดเธก\" | \"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\";\r\ntype SubjectRow = {\r\n  SubjectCode: string;\r\n  SubjectName: string;\r\n  Credit: keyof typeof subjectCreditValues;\r\n  Category: CategoryType;\r\n  teachers?: Array<{ TeacherFullName: string }>;\r\n};\r\n\r\n// Map Prisma enum to Thai display strings\r\nconst categoryMap: Record<SubjectCategory, CategoryType> = {\r\n  CORE: \"เธเธทเนเธเธเธฒเธ\",\r\n  ADDITIONAL: \"เน€เธเธดเนเธกเน€เธ•เธดเธก\",\r\n  ACTIVITY: \"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\",\r\n};\r\n\r\nconst Page = (_props: Props) => {\r\n  const params = useParams();\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n  const gradeLevelData = useGradeLevels();\r\n  const [currentGradeID, setCurrentGradeID] = useState(\"\");\r\n\r\n  const programOfGrade = useSWR(\r\n    currentGradeID !== \"\" && semester && academicYear\r\n      ? [\"program-by-grade\", currentGradeID, semester, academicYear]\r\n      : null,\r\n    async ([, gradeId]) => {\r\n      if (!semester || !academicYear) return null;\r\n      return await getProgramByGradeAction({\r\n        GradeID: gradeId,\r\n        Semester: semester,\r\n        AcademicYear: academicYear,\r\n      });\r\n    },\r\n    { revalidateOnFocus: false },\r\n  );\r\n\r\n  // Ensure semester and academicYear are defined\r\n  if (!semester || !academicYear) {\r\n    return (\r\n      <Container maxWidth=\"xl\" sx={{ py: 4 }}>\r\n        <Stack spacing={2}>\r\n          <Skeleton variant=\"rectangular\" height={56} />\r\n          <Skeleton variant=\"rectangular\" height={400} />\r\n        </Stack>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  const subjects: SubjectRow[] =\r\n    !programOfGrade.isLoading &&\r\n    programOfGrade.data?.success &&\r\n    programOfGrade.data.data\r\n      ? programOfGrade.data.data.subjects.map((subject: any) => {\r\n          const teachers = Array.isArray(subject.teachers_responsibility)\r\n            ? subject.teachers_responsibility.map((tr: any) => ({\r\n                TeacherFullName: `${tr.teacher.Prefix} ${tr.teacher.Firstname} ${tr.teacher.Lastname}`,\r\n              }))\r\n            : [];\r\n\r\n          return {\r\n            SubjectCode: subject.SubjectCode,\r\n            SubjectName: subject.SubjectName,\r\n            Credit: subject.Credit as keyof typeof subjectCreditValues,\r\n            Category: categoryMap[subject.Category as SubjectCategory],\r\n            teachers,\r\n          };\r\n        })\r\n      : [];\r\n\r\n  const primarySubjectData = (): SubjectRow[] =>\r\n    sortSubjectCategory(subjects.filter((item) => item.Category === \"เธเธทเนเธเธเธฒเธ\"));\r\n\r\n  const extraSubjectData = (): SubjectRow[] =>\r\n    sortSubjectCategory(\r\n      subjects.filter((item) => item.Category === \"เน€เธเธดเนเธกเน€เธ•เธดเธก\"),\r\n    );\r\n\r\n  const activitiesSubjectData = (): SubjectRow[] =>\r\n    sortSubjectCategory(\r\n      subjects.filter((item) => item.Category === \"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\"),\r\n    );\r\n  // Render helper functions (not components to avoid re-creation during render)\r\n  const renderTableHead = () => (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell\r\n          colSpan={5}\r\n          align=\"center\"\r\n          sx={{ bgcolor: \"success.light\", fontWeight: \"bold\", py: 1.5 }}\r\n        >\r\n          เนเธเธฃเธเธชเธฃเนเธฒเธเธซเธฅเธฑเธเธชเธนเธ•เธฃ เธกเธฑเธเธขเธกเธจเธถเธเธฉเธฒเธเธตเธ—เธตเน {currentGradeID} เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน{\" \"}\r\n          {semester} เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ {academicYear}\r\n        </TableCell>\r\n      </TableRow>\r\n      <TableRow>\r\n        <TableCell\r\n          align=\"center\"\r\n          sx={{ bgcolor: \"success.lighter\", fontWeight: \"bold\" }}\r\n        >\r\n          เธฅเธณเธ”เธฑเธ\r\n        </TableCell>\r\n        <TableCell\r\n          align=\"center\"\r\n          sx={{ bgcolor: \"success.lighter\", fontWeight: \"bold\" }}\r\n        >\r\n          เธฃเธซเธฑเธชเธงเธดเธเธฒ\r\n        </TableCell>\r\n        <TableCell sx={{ bgcolor: \"success.lighter\", fontWeight: \"bold\" }}>\r\n          เธเธทเนเธญเธงเธดเธเธฒ\r\n        </TableCell>\r\n        <TableCell\r\n          align=\"center\"\r\n          sx={{ bgcolor: \"success.lighter\", fontWeight: \"bold\" }}\r\n        >\r\n          เธซเธเนเธงเธขเธเธดเธ•\r\n        </TableCell>\r\n        <TableCell sx={{ bgcolor: \"success.lighter\", fontWeight: \"bold\" }}>\r\n          เธเธฃเธนเธเธนเนเธชเธญเธ\r\n        </TableCell>\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n\r\n  const renderCategoryRow = (categoryName: string) => (\r\n    <TableBody key={`category-${categoryName}`}>\r\n      <TableRow>\r\n        <TableCell />\r\n        <TableCell />\r\n        <TableCell sx={{ fontWeight: \"bold\", bgcolor: \"primary.lighter\" }}>\r\n          <Chip label={categoryName} color=\"primary\" variant=\"outlined\" />\r\n        </TableCell>\r\n        <TableCell sx={{ bgcolor: \"primary.lighter\" }} />\r\n        <TableCell sx={{ bgcolor: \"primary.lighter\" }} />\r\n      </TableRow>\r\n    </TableBody>\r\n  );\r\n\r\n  const renderSubjectRows = (data: SubjectRow[], indexStart: number) => (\r\n    <TableBody key={`subjects-${indexStart}`}>\r\n      {data.map((item, index) => (\r\n        <TableRow\r\n          key={`${currentGradeID || \"unknown\"}-${item.SubjectCode}`}\r\n          hover\r\n          sx={{ \"&:nth-of-type(even)\": { bgcolor: \"action.hover\" } }}\r\n        >\r\n          <TableCell align=\"center\">{indexStart + index}</TableCell>\r\n          <TableCell align=\"center\">{item.SubjectCode}</TableCell>\r\n          <TableCell>{item.SubjectName}</TableCell>\r\n          <TableCell align=\"center\">\r\n            {item.Category === \"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\"\r\n              ? \"\"\r\n              : subjectCreditTitles[item.Credit]}\r\n          </TableCell>\r\n          <TableCell>\r\n            {item.teachers && item.teachers.length > 0\r\n              ? item.teachers.map((t) => t.TeacherFullName).join(\", \")\r\n              : \"-\"}\r\n          </TableCell>\r\n        </TableRow>\r\n      ))}\r\n    </TableBody>\r\n  );\r\n\r\n  const renderSumRow = (title: string, credit: number) => (\r\n    <TableBody key={`sum-${title}`}>\r\n      <TableRow sx={{ bgcolor: \"info.lighter\" }}>\r\n        <TableCell />\r\n        <TableCell />\r\n        <TableCell sx={{ fontWeight: \"bold\" }}>{title}</TableCell>\r\n        <TableCell align=\"center\" sx={{ fontWeight: \"bold\" }}>\r\n          {credit.toFixed(1)}\r\n        </TableCell>\r\n        <TableCell sx={{ fontWeight: \"bold\" }}>เธซเธเนเธงเธขเธเธดเธ•</TableCell>\r\n      </TableRow>\r\n    </TableBody>\r\n  );\r\n  const getSumCreditValue = () => {\r\n    return subjects\r\n      .filter((item) => item.Category !== \"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\")\r\n      .reduce((a, b) => a + (subjectCreditValues[b.Credit] ?? 0), 0);\r\n  };\r\n  const sortSubjectCategory = (data: SubjectRow[]) => {\r\n    //เธ— เธ เธง เธช เธ เธจ เธ เธญ\r\n    const SubjectCodeVal: Record<string, number> = {\r\n      เธ—: 1,\r\n      เธ: 2,\r\n      เธง: 3,\r\n      เธช: 4,\r\n      เธ: 5,\r\n      เธจ: 6,\r\n      เธ: 7,\r\n      เธญ: 8,\r\n    };\r\n    const sortedData = data.sort((a, b) => {\r\n      const getVal = (sCode: string) => {\r\n        return isUndefined(SubjectCodeVal[sCode])\r\n          ? 9\r\n          : (SubjectCodeVal[sCode] ?? 9);\r\n      };\r\n      if (getVal(a.SubjectCode[0] ?? \"\") < getVal(b.SubjectCode[0] ?? \"\")) {\r\n        return -1;\r\n      }\r\n      if (getVal(a.SubjectCode[0] ?? \"\") > getVal(b.SubjectCode[0] ?? \"\")) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    });\r\n    return sortedData;\r\n  };\r\n  return (\r\n    <Container maxWidth=\"xl\" sx={{ py: 4 }}>\r\n      {programOfGrade.isLoading || gradeLevelData.isLoading ? (\r\n        <Stack spacing={2}>\r\n          <Skeleton variant=\"rectangular\" height={56} />\r\n          <Skeleton variant=\"rectangular\" height={400} />\r\n        </Stack>\r\n      ) : (\r\n        <Stack spacing={3}>\r\n          <Stack\r\n            direction=\"row\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <FormControl sx={{ minWidth: 300 }}>\r\n              <InputLabel id=\"grade-select-label\">เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธ</InputLabel>\r\n              <Select\r\n                labelId=\"grade-select-label\"\r\n                value={currentGradeID}\r\n                label=\"เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธ\"\r\n                onChange={(e) => setCurrentGradeID(e.target.value)}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธ</em>\r\n                </MenuItem>\r\n                {gradeLevelData.data.map((item) => (\r\n                  <MenuItem key={item.GradeID} value={item.GradeID}>\r\n                    {item.GradeID}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            {currentGradeID !== \"\" && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"info\"\r\n                startIcon={<DownloadIcon />}\r\n                onClick={() =>\r\n                  ExportAllProgram(\r\n                    programOfGrade.data,\r\n                    currentGradeID,\r\n                    semester,\r\n                    academicYear,\r\n                  )\r\n                }\r\n                disabled={programOfGrade.isLoading}\r\n              >\r\n                เธเธณเธญเธญเธเน€เธเนเธ Excel\r\n              </Button>\r\n            )}\r\n          </Stack>\r\n          {currentGradeID === \"\" ? (\r\n            <Paper sx={{ p: 8, textAlign: \"center\" }}>\r\n              <SchoolIcon\r\n                sx={{ fontSize: 64, color: \"text.secondary\", mb: 2 }}\r\n              />\r\n              <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\r\n                เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธ\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเธเธฒเธเน€เธกเธเธนเธ”เนเธฒเธเธเธเน€เธเธทเนเธญเธ”เธนเธซเธฅเธฑเธเธชเธนเธ•เธฃเนเธฅเธฐเธฃเธฒเธขเธงเธดเธเธฒ\r\n              </Typography>\r\n            </Paper>\r\n          ) : (\r\n            <TableContainer component={Paper}>\r\n              <Table>\r\n                {renderTableHead()}\r\n                {renderCategoryRow(\"เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเนเธเธดเนเธเธเธฒเธ\")}\r\n                {renderSubjectRows(primarySubjectData(), 1)}\r\n                {renderSumRow(\r\n                  \"เธฃเธงเธกเธซเธเนเธงเธขเธเธดเธ•เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเนเธเธดเนเธเธเธฒเธ\",\r\n                  primarySubjectData().reduce(\r\n                    (a, b) => a + (subjectCreditValues[b.Credit] ?? 0),\r\n                    0,\r\n                  ),\r\n                )}\r\n                {renderCategoryRow(\"เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเนเน€เธเธดเนเธกเน€เธ•เธดเธก\")}\r\n                {renderSubjectRows(\r\n                  extraSubjectData(),\r\n                  primarySubjectData().length + 1,\r\n                )}\r\n                {renderSumRow(\r\n                  \"เธฃเธงเธกเธซเธเนเธงเธขเธเธดเธ•เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเนเน€เธเธดเนเธกเน€เธ•เธดเธก\",\r\n                  extraSubjectData().reduce(\r\n                    (a, b) => a + (subjectCreditValues[b.Credit] ?? 0),\r\n                    0,\r\n                  ),\r\n                )}\r\n                {renderCategoryRow(\"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\")}\r\n                {renderSubjectRows(\r\n                  activitiesSubjectData(),\r\n                  primarySubjectData().length + extraSubjectData().length + 1,\r\n                )}\r\n                {renderSumRow(\"เธฃเธงเธกเธซเธเนเธงเธขเธเธดเธ•เธ—เธฑเนเธเธซเธกเธ”\", getSumCreditValue())}\r\n              </Table>\r\n            </TableContainer>\r\n          )}\r\n        </Stack>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-timeslot\\AllTimeslotClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'readOnlyTooltip' is assigned a value but never used.","line":301,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":301,"endColumn":24},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":337,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":347,"endColumn":7,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[7069,7069],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[7069,7069],"text":"await "},"desc":"Add await operator."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\nimport Link from \"next/link\";\r\n\r\nimport {\r\n  Alert,\r\n  AlertTitle,\r\n  Box,\r\n  Button,\r\n  Chip,\r\n  Checkbox,\r\n  Container,\r\n  FormControl,\r\n  IconButton,\r\n  InputLabel,\r\n  ListItemText,\r\n  Menu,\r\n  MenuItem,\r\n  OutlinedInput,\r\n  Paper,\r\n  Select,\r\n  Stack,\r\n  Typography,\r\n  Tooltip,\r\n  useMediaQuery,\r\n  useTheme,\r\n} from \"@mui/material\";\r\n\r\nimport InfoOutlinedIcon from \"@mui/icons-material/InfoOutlined\";\r\n\r\nimport DownloadIcon from \"@mui/icons-material/Download\";\r\n\r\nimport SummarizeIcon from \"@mui/icons-material/Summarize\";\r\n\r\nimport SwapVertIcon from \"@mui/icons-material/SwapVert\";\r\n\r\nimport FilterListIcon from \"@mui/icons-material/FilterList\";\r\n\r\nimport PrintIcon from \"@mui/icons-material/Print\";\r\n\r\nimport PictureAsPdfIcon from \"@mui/icons-material/PictureAsPdf\";\r\n\r\nimport GridOnIcon from \"@mui/icons-material/GridOn\";\r\n\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\n\r\nimport TableHead from \"./component/TableHead\";\r\n\r\nimport TableBody from \"./component/TableBody\";\r\n\r\nimport TeacherList from \"./component/TeacherList\";\r\n\r\nimport TableResult from \"./component/TableResult\";\r\n\r\nimport { ExportTeacherSummary } from \"./functions/ExportTeacherSummary\";\r\nimport { ExportTeacherTable } from \"@/features/export/teacher-timetable-excel\";\r\n\r\nimport { dayOfWeekTextColor } from \"@/models/dayofWeek-textColor\";\r\n\r\nimport { dayOfWeekColor } from \"@/models/dayofweek-color\";\r\n\r\nimport { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\n\r\nimport type { teacher, timeslot } from \"@/prisma/generated/client\";\r\n\r\nimport type { ClassScheduleWithSummary } from \"@/features/class/infrastructure/repositories/class.repository\";\r\n\r\ntype AllTimeslotClientProps = {\r\n  timeslots: timeslot[];\r\n\r\n  classSchedules: ClassScheduleWithSummary[];\r\n\r\n  teachers: teacher[];\r\n\r\n  semester: 1 | 2;\r\n\r\n  academicYear: number;\r\n\r\n  isAdmin: boolean;\r\n\r\n  configManageHref: string;\r\n};\r\n\r\ntype TimeSlotData = {\r\n  AllData: (timeslot & { subject: Record<string, never> })[];\r\n\r\n  SlotAmount: number[];\r\n\r\n  DayOfWeek: { Day: string; TextColor: string; BgColor: string }[];\r\n\r\n  StartTime?: { Hours: number; Minutes: number };\r\n\r\n  Duration?: number;\r\n\r\n  BreakSlot?: { TimeslotID: string; Breaktime: string; SlotNumber: number }[];\r\n};\r\n\r\nconst getMinutes = (milliseconds: number) => {\r\n  const seconds = Math.floor(milliseconds / 1000);\r\n\r\n  const minutes = Math.floor(seconds / 60);\r\n\r\n  return minutes;\r\n};\r\n\r\nconst buildTimeSlotData = (data: timeslot[]): TimeSlotData => {\r\n  if (!data.length) {\r\n    return { AllData: [], SlotAmount: [], DayOfWeek: [] };\r\n  }\r\n\r\n  const dayofweek = data\r\n\r\n    .map((day) => day.DayOfWeek)\r\n\r\n    .filter(\r\n      (item, index) => data.map((day) => day.DayOfWeek).indexOf(item) === index,\r\n    )\r\n\r\n    .map((item) => ({\r\n      Day: dayOfWeekThai[item],\r\n\r\n      TextColor: dayOfWeekTextColor[item],\r\n\r\n      BgColor: dayOfWeekColor[item],\r\n    }))\r\n\r\n    .filter(\r\n      (item): item is { Day: string; TextColor: string; BgColor: string } =>\r\n        item.Day !== undefined &&\r\n        item.TextColor !== undefined &&\r\n        item.BgColor !== undefined,\r\n    );\r\n\r\n  const slotAmount = data\r\n\r\n    .filter((item) => item.DayOfWeek === \"MON\")\r\n\r\n    .map((_, index) => index + 1);\r\n\r\n  const breakTime = data\r\n\r\n    .filter(\r\n      (item) =>\r\n        (item.Breaktime === \"BREAK_BOTH\" ||\r\n          item.Breaktime === \"BREAK_JUNIOR\" ||\r\n          item.Breaktime === \"BREAK_SENIOR\") &&\r\n        item.DayOfWeek === \"MON\",\r\n    )\r\n\r\n    .map((item) => ({\r\n      TimeslotID: item.TimeslotID,\r\n\r\n      Breaktime: item.Breaktime,\r\n\r\n      SlotNumber: parseInt(item.TimeslotID.substring(10)),\r\n    }));\r\n\r\n  const firstSlot = data[0];\r\n\r\n  const startTime = firstSlot\r\n    ? {\r\n        Hours: new Date(firstSlot.StartTime).getHours() - 7,\r\n\r\n        Minutes: new Date(firstSlot.StartTime).getMinutes(),\r\n      }\r\n    : { Hours: 8, Minutes: 0 };\r\n\r\n  const duration = firstSlot\r\n    ? getMinutes(\r\n        new Date(firstSlot.EndTime).getTime() -\r\n          new Date(firstSlot.StartTime).getTime(),\r\n      )\r\n    : 50;\r\n\r\n  return {\r\n    AllData: data.map((item) => ({ ...item, subject: {} })),\r\n\r\n    SlotAmount: slotAmount,\r\n\r\n    DayOfWeek: dayofweek,\r\n\r\n    StartTime: startTime,\r\n\r\n    Duration: duration,\r\n\r\n    BreakSlot: breakTime,\r\n  };\r\n};\r\n\r\nconst AllTimeslotClient = ({\r\n  timeslots,\r\n\r\n  classSchedules,\r\n\r\n  teachers,\r\n\r\n  semester,\r\n\r\n  academicYear,\r\n\r\n  isAdmin,\r\n\r\n  configManageHref,\r\n}: AllTimeslotClientProps) => {\r\n  const theme = useTheme();\r\n\r\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"md\"));\r\n\r\n  const isTablet = useMediaQuery(theme.breakpoints.down(\"lg\"));\r\n\r\n  useEffect(() => {\r\n    const styleId = \"all-timeslot-print-styles\";\r\n\r\n    if (document.getElementById(styleId)) {\r\n      return;\r\n    }\r\n\r\n    const style = document.createElement(\"style\");\r\n\r\n    style.id = styleId;\r\n\r\n    style.textContent = `\r\n\r\n      @media print {\r\n\r\n        body * {\r\n\r\n          visibility: hidden;\r\n\r\n        }\r\n\r\n        .printable-table,\r\n\r\n        .printable-table * {\r\n\r\n          visibility: visible;\r\n\r\n        }\r\n\r\n        .printable-table {\r\n\r\n          position: absolute;\r\n\r\n          left: 0;\r\n\r\n          top: 0;\r\n\r\n          width: 100%;\r\n\r\n        }\r\n\r\n        .no-print {\r\n\r\n          display: none !important;\r\n\r\n        }\r\n\r\n        @page {\r\n\r\n          size: landscape;\r\n\r\n          margin: 1cm;\r\n\r\n        }\r\n\r\n      }\r\n\r\n      @media (max-width: 768px) {\r\n\r\n        .MuiContainer-root {\r\n\r\n          padding-left: 8px !important;\r\n\r\n          padding-right: 8px !important;\r\n\r\n        }\r\n\r\n      }\r\n\r\n    `;\r\n\r\n    document.head.appendChild(style);\r\n\r\n    return () => {\r\n      document.head.removeChild(style);\r\n    };\r\n  }, []);\r\n\r\n  const [selectedTeachers, setSelectedTeachers] = useState<number[]>([]);\r\n\r\n  const [selectedDays, setSelectedDays] = useState<string[]>([]);\r\n\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  const [exportMenuAnchor, setExportMenuAnchor] = useState<null | HTMLElement>(\r\n    null,\r\n  );\r\n\r\n  const readOnlyTooltip =\r\n    \"เธซเธเนเธฒเธเธญเธเธตเนเนเธเนเธชเธณเธซเธฃเธฑเธเธ”เธนเธ•เธฒเธฃเธฒเธเธ เธฒเธเธฃเธงเธกเน€เธ—เนเธฒเธเธฑเนเธ เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เนเธเนเนเธเนเธ”เนเธเธฒเธเธ—เธตเนเธเธตเน\";\r\n\r\n  const exportDisabledTooltip = \"เธเธฒเธฃเธชเนเธเธญเธญเธเธชเธเธงเธเนเธงเนเธชเธณเธซเธฃเธฑเธเธเธนเนเธ”เธนเนเธฅเธฃเธฐเธเธเน€เธ—เนเธฒเธเธฑเนเธ\";\r\n\r\n  const timeSlotData = useMemo(\r\n    () => buildTimeSlotData(timeslots),\r\n\r\n    [timeslots],\r\n  );\r\n\r\n  const classData = useMemo(() => classSchedules, [classSchedules]);\r\n\r\n  const filteredTeachers =\r\n    selectedTeachers.length > 0\r\n      ? teachers.filter((t) => selectedTeachers.includes(t.TeacherID))\r\n      : teachers;\r\n\r\n  const filteredDays =\r\n    selectedDays.length > 0\r\n      ? timeSlotData.DayOfWeek.filter((d) => selectedDays.includes(d.Day))\r\n      : timeSlotData.DayOfWeek;\r\n\r\n  const handleExportMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n    if (!isAdmin) return;\r\n\r\n    setExportMenuAnchor(event.currentTarget);\r\n  };\r\n\r\n  const handleExportMenuClose = () => {\r\n    setExportMenuAnchor(null);\r\n  };\r\n\r\n  const handleExportExcel = () => {\r\n    if (!isAdmin) return;\r\n\r\n    ExportTeacherTable(\r\n      timeSlotData,\r\n\r\n      teachers,\r\n\r\n      classData,\r\n\r\n      semester.toString(),\r\n\r\n      academicYear.toString(),\r\n    );\r\n\r\n    handleExportMenuClose();\r\n  };\r\n\r\n  const handleExportSummary = () => {\r\n    if (!isAdmin) return;\r\n\r\n    ExportTeacherSummary(\r\n      timeSlotData,\r\n\r\n      teachers,\r\n\r\n      classData,\r\n\r\n      semester.toString(),\r\n\r\n      academicYear.toString(),\r\n    );\r\n\r\n    handleExportMenuClose();\r\n  };\r\n\r\n  const handlePrint = () => {\r\n    window.print();\r\n\r\n    handleExportMenuClose();\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" sx={{ py: 4 }}>\r\n      <Stack spacing={3}>\r\n        <Alert\r\n          severity=\"info\"\r\n          icon={<InfoOutlinedIcon fontSize=\"inherit\" />}\r\n          sx={{ alignItems: \"flex-start\" }}\r\n        >\r\n          <AlertTitle>เธกเธธเธกเธกเธญเธเธญเนเธฒเธเธญเธขเนเธฒเธเน€เธ”เธตเธขเธง</AlertTitle>\r\n          เธซเธเนเธฒเธเธตเนเนเธชเธ”เธเธ•เธฒเธฃเธฒเธเธชเธญเธเธฃเธงเธกเน€เธเธทเนเธญเนเธเนเธ•เธฃเธงเธเธชเธญเธเนเธฅเธฐเธชเนเธเธญเธญเธเน€เธ—เนเธฒเธเธฑเนเธ\r\n          เธเธฒเธฃเนเธเนเนเธเธเธฒเธเน€เธฃเธตเธขเธ เน€เธงเธฅเธฒ เธซเธฃเธทเธญเธเธฃเธนเธเธนเนเธชเธญเธเธ•เนเธญเธเธ—เธณเนเธเธซเธเนเธฒเธเธฑเธ”เธ•เธฒเธฃเธฒเธ\r\n          {isAdmin ? (\r\n            <Box sx={{ mt: 1 }}>\r\n              <Button\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                component={Link}\r\n                href={configManageHref}\r\n              >\r\n                เนเธเธขเธฑเธเธซเธเนเธฒเธ•เธฑเนเธเธเนเธฒเธ•เธฒเธฃเธฒเธ\r\n              </Button>\r\n            </Box>\r\n          ) : (\r\n            <Typography variant=\"body2\" sx={{ mt: 1, color: \"text.secondary\" }}>\r\n              เธซเธฒเธเธ•เนเธญเธเธเธฒเธฃเธเธฃเธฑเธเธ•เธฒเธฃเธฒเธ เธเธฃเธธเธ“เธฒเธ•เธดเธ”เธ•เนเธญเธเธนเนเธ”เธนเนเธฅเธฃเธฐเธเธ\r\n            </Typography>\r\n          )}\r\n        </Alert>\r\n\r\n        <Paper sx={{ p: 2 }}>\r\n          <Stack spacing={2}>\r\n            <Stack\r\n              direction=\"row\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Typography\r\n                variant=\"h6\"\r\n                sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}\r\n              >\r\n                <FilterListIcon /> เธ•เธฑเธงเธเธฃเธญเธ\r\n              </Typography>\r\n\r\n              <Button\r\n                size=\"small\"\r\n                onClick={() => setShowFilters(!showFilters)}\r\n                variant={showFilters ? \"contained\" : \"outlined\"}\r\n              >\r\n                {showFilters ? \"เธเนเธญเธเธ•เธฑเธงเธเธฃเธญเธ\" : \"เนเธชเธ”เธเธ•เธฑเธงเธเธฃเธญเธ\"}\r\n              </Button>\r\n            </Stack>\r\n\r\n            {showFilters && (\r\n              <Stack direction={isMobile ? \"column\" : \"row\"} spacing={2}>\r\n                <FormControl sx={{ minWidth: 250 }}>\r\n                  <InputLabel id=\"teacher-filter-label\">เน€เธฅเธทเธญเธเธเธฃเธน</InputLabel>\r\n\r\n                  <Select\r\n                    labelId=\"teacher-filter-label\"\r\n                    multiple\r\n                    value={selectedTeachers}\r\n                    onChange={(e) =>\r\n                      setSelectedTeachers(e.target.value as number[])\r\n                    }\r\n                    input={<OutlinedInput label=\"เน€เธฅเธทเธญเธเธเธฃเธน\" />}\r\n                    renderValue={(selected) => (\r\n                      <Box sx={{ display: \"flex\", flexWrap: \"wrap\", gap: 0.5 }}>\r\n                        {selected.map((value) => {\r\n                          const teacher = teachers.find(\r\n                            (t) => t.TeacherID === value,\r\n                          );\r\n\r\n                          return (\r\n                            <Chip\r\n                              key={value}\r\n                              label={\r\n                                teacher\r\n                                  ? `${teacher.Prefix}${teacher.Firstname} ${teacher.Lastname}`\r\n                                  : value\r\n                              }\r\n                              size=\"small\"\r\n                            />\r\n                          );\r\n                        })}\r\n                      </Box>\r\n                    )}\r\n                  >\r\n                    {teachers.map((teacher) => (\r\n                      <MenuItem\r\n                        key={teacher.TeacherID}\r\n                        value={teacher.TeacherID}\r\n                      >\r\n                        <Checkbox\r\n                          checked={selectedTeachers.includes(teacher.TeacherID)}\r\n                        />\r\n\r\n                        <ListItemText\r\n                          primary={`${teacher.Prefix}${teacher.Firstname} ${teacher.Lastname}`}\r\n                        />\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n\r\n                <FormControl sx={{ minWidth: 200 }}>\r\n                  <InputLabel id=\"day-filter-label\">เน€เธฅเธทเธญเธเธงเธฑเธ</InputLabel>\r\n\r\n                  <Select\r\n                    labelId=\"day-filter-label\"\r\n                    multiple\r\n                    value={selectedDays}\r\n                    onChange={(e) =>\r\n                      setSelectedDays(e.target.value as string[])\r\n                    }\r\n                    input={<OutlinedInput label=\"เน€เธฅเธทเธญเธเธงเธฑเธ\" />}\r\n                    renderValue={(selected) => (\r\n                      <Box sx={{ display: \"flex\", flexWrap: \"wrap\", gap: 0.5 }}>\r\n                        {selected.map((value) => (\r\n                          <Chip key={value} label={value} size=\"small\" />\r\n                        ))}\r\n                      </Box>\r\n                    )}\r\n                  >\r\n                    {timeSlotData.DayOfWeek.map((day) => (\r\n                      <MenuItem key={day.Day} value={day.Day}>\r\n                        <Checkbox checked={selectedDays.includes(day.Day)} />\r\n\r\n                        <ListItemText primary={day.Day} />\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Stack>\r\n            )}\r\n          </Stack>\r\n        </Paper>\r\n\r\n        {!classSchedules.length && (\r\n          <Paper\r\n            sx={{\r\n              p: 3,\r\n\r\n              borderStyle: \"dashed\",\r\n\r\n              borderColor: \"divider\",\r\n\r\n              textAlign: \"center\",\r\n            }}\r\n          >\r\n            <Typography variant=\"subtitle1\" gutterBottom>\r\n              เธขเธฑเธเนเธกเนเธกเธตเธเนเธญเธกเธนเธฅเธ•เธฒเธฃเธฒเธเธชเธญเธเนเธเธ เธฒเธเน€เธฃเธตเธขเธเธเธตเน\r\n            </Typography>\r\n\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              {isAdmin\r\n                ? \"เธเธฃเธธเธ“เธฒเธ•เธฑเนเธเธเนเธฒเธเนเธงเธเน€เธงเธฅเธฒเนเธฅเธฐเน€เธเธดเนเธกเธเธฒเธเน€เธฃเธตเธขเธเธเธฒเธเธซเธเนเธฒเธเธฑเธ”เธ•เธฒเธฃเธฒเธเธเนเธญเธ เธเธฒเธเธเธฑเนเธเธเนเธญเธกเธนเธฅเธเธฐเธ–เธนเธเนเธชเธ”เธเธ—เธตเนเธเธตเนเนเธ”เธขเธญเธฑเธ•เนเธเธกเธฑเธ•เธด\"\r\n                : \"เธเธนเนเธ”เธนเนเธฅเธฃเธฐเธเธเธขเธฑเธเนเธกเนเนเธ”เนเน€เธเธขเนเธเธฃเนเธ•เธฒเธฃเธฒเธเธชเธญเธเธชเธณเธซเธฃเธฑเธเธ เธฒเธเน€เธฃเธตเธขเธเธเธตเน\"}\r\n            </Typography>\r\n\r\n            {isAdmin && (\r\n              <Button\r\n                component={Link}\r\n                href={configManageHref}\r\n                sx={{ mt: 2 }}\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n              >\r\n                เน€เธเธดเธ”เธซเธเนเธฒเธเธฑเธ”เธ•เธฒเธฃเธฒเธ\r\n              </Button>\r\n            )}\r\n          </Paper>\r\n        )}\r\n\r\n        <Paper sx={{ p: 2 }}>\r\n          <Stack\r\n            direction={isTablet ? \"column\" : \"row\"}\r\n            justifyContent=\"space-between\"\r\n            alignItems={isTablet ? \"flex-start\" : \"center\"}\r\n            spacing={2}\r\n            className=\"no-print\"\r\n          >\r\n            <Stack direction=\"row\" spacing={2} flexWrap=\"wrap\">\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<FilterListIcon />}\r\n                onClick={() => window.scrollTo({ top: 0, behavior: \"smooth\" })}\r\n              >\r\n                เธเธฃเธฑเธเธ•เธฑเธงเธเธฃเธญเธ\r\n              </Button>\r\n\r\n              {isAdmin ? (\r\n                <>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    startIcon={<SwapVertIcon />}\r\n                    onClick={handleExportExcel}\r\n                  >\r\n                    เธชเนเธเธญเธญเธ Excel\r\n                  </Button>\r\n\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    startIcon={<SummarizeIcon />}\r\n                    onClick={handleExportSummary}\r\n                  >\r\n                    เธชเธฃเธธเธเธชเธณเธซเธฃเธฑเธเธเธฃเธน\r\n                  </Button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Tooltip title={exportDisabledTooltip}>\r\n                    <span>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        startIcon={<SwapVertIcon />}\r\n                        disabled\r\n                      >\r\n                        เธชเนเธเธญเธญเธ Excel\r\n                      </Button>\r\n                    </span>\r\n                  </Tooltip>\r\n\r\n                  <Tooltip title={exportDisabledTooltip}>\r\n                    <span>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        startIcon={<SummarizeIcon />}\r\n                        disabled\r\n                      >\r\n                        เธชเธฃเธธเธเธชเธณเธซเธฃเธฑเธเธเธฃเธน\r\n                      </Button>\r\n                    </span>\r\n                  </Tooltip>\r\n                </>\r\n              )}\r\n\r\n              <Button\r\n                variant=\"outlined\"\r\n                startIcon={<PrintIcon />}\r\n                onClick={handlePrint}\r\n              >\r\n                เธเธดเธกเธเน\r\n              </Button>\r\n            </Stack>\r\n\r\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n              <Tooltip\r\n                title={isAdmin ? \"เน€เธกเธเธนเน€เธเธดเนเธกเน€เธ•เธดเธก\" : exportDisabledTooltip}\r\n              >\r\n                <span>\r\n                  <IconButton\r\n                    onClick={handleExportMenuOpen}\r\n                    disabled={!isAdmin}\r\n                    aria-label=\"เธ•เธฑเธงเน€เธฅเธทเธญเธเธชเนเธเธญเธญเธเน€เธเธดเนเธกเน€เธ•เธดเธก\"\r\n                  >\r\n                    <MoreVertIcon />\r\n                  </IconButton>\r\n                </span>\r\n              </Tooltip>\r\n\r\n              {isAdmin && (\r\n                <Menu\r\n                  anchorEl={exportMenuAnchor}\r\n                  open={Boolean(exportMenuAnchor)}\r\n                  onClose={handleExportMenuClose}\r\n                >\r\n                  <MenuItem onClick={handleExportExcel}>\r\n                    <DownloadIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n                    เธชเนเธเธญเธญเธ Excel\r\n                  </MenuItem>\r\n\r\n                  <MenuItem onClick={handleExportSummary}>\r\n                    <SummarizeIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n                    เธชเธฃเธธเธเธชเธณเธซเธฃเธฑเธเธเธฃเธน\r\n                  </MenuItem>\r\n\r\n                  <MenuItem onClick={handlePrint}>\r\n                    <PictureAsPdfIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n                    เธเธดเธกเธเน PDF\r\n                  </MenuItem>\r\n                </Menu>\r\n              )}\r\n            </Stack>\r\n          </Stack>\r\n\r\n          <Box\r\n            mt={3}\r\n            sx={{\r\n              overflowX: \"auto\",\r\n\r\n              overflowY: \"hidden\",\r\n\r\n              border: \"1px solid\",\r\n\r\n              borderColor: \"divider\",\r\n\r\n              borderRadius: 2,\r\n            }}\r\n            className=\"printable-table\"\r\n          >\r\n            <table className=\"w-full\">\r\n              <thead>\r\n                <tr>\r\n                  <th className=\"px-4 py-2 bg-slate-50 min-w-[220px] text-left\">\r\n                    <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\r\n                      <GridOnIcon fontSize=\"small\" />\r\n\r\n                      <span>เธ•เธฒเธฃเธฒเธเธชเธญเธ</span>\r\n                    </Stack>\r\n                  </th>\r\n\r\n                  <th\r\n                    colSpan={\r\n                      timeSlotData.SlotAmount.length * filteredDays.length\r\n                    }\r\n                  >\r\n                    <TableHead\r\n                      days={filteredDays}\r\n                      slotAmount={timeSlotData.SlotAmount}\r\n                    />\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                <tr>\r\n                  <td className=\"align-top\">\r\n                    <TeacherList teachers={filteredTeachers} />\r\n                  </td>\r\n\r\n                  <td className=\"align-top\">\r\n                    <TableBody\r\n                      teachers={filteredTeachers}\r\n                      slotAmount={timeSlotData.SlotAmount}\r\n                      classData={classData}\r\n                      days={filteredDays}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </Box>\r\n\r\n          <Box mt={3}>\r\n            <TableResult teachers={filteredTeachers} classData={classData} />\r\n          </Box>\r\n        </Paper>\r\n      </Stack>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AllTimeslotClient;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-timeslot\\component\\TableBody.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[340,343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[340,343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[423,426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[423,426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":36,"column":48,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":36,"endColumn":50,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[929,931],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":37,"column":58,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":37,"endColumn":60,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[997,999],"text":"==="},"desc":"Use '===' instead of '=='."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\nimport LockIcon from \"@mui/icons-material/Lock\";\r\n\r\ntype ClassData = {\r\n  teachers_responsibility: Array<{ TeacherID: number }>;\r\n  timeslot: { DayOfWeek: string; TimeslotID: string };\r\n  GradeID: string;\r\n  [key: string]: any;\r\n};\r\n\r\ntype DayData = {\r\n  Day: string;\r\n  BgColor: string;\r\n  [key: string]: any;\r\n};\r\n\r\ntype Props = {\r\n  teachers: teacher[];\r\n  slotAmount: number[];\r\n  classData: ClassData[];\r\n  days: DayData[];\r\n};\r\n\r\nconst TableBody = (props: Props) => {\r\n  function getClassDataByTeacherID(\r\n    TeacherID: number,\r\n    Day: string,\r\n    SlotNumber: number,\r\n  ) {\r\n    const filterClass = props.classData.filter(\r\n      (item) =>\r\n        item.teachers_responsibility\r\n          .map((tid) => tid.TeacherID)\r\n          .includes(TeacherID) &&\r\n        dayOfWeekThai[item.timeslot.DayOfWeek] == Day &&\r\n        parseInt(item.timeslot.TimeslotID.substring(10)) == SlotNumber,\r\n    );\r\n    const convertClass = filterClass\r\n      .map((item) => `${item.GradeID[0]}/${item.GradeID[2]}`)\r\n      .join(\",\");\r\n    // let convertClass = [\"101\", \"102\", \"301\", \"302\", \"303\", \"304\", \"305\", \"306\", \"307\", \"308\", \"309\", \"310\"].map(item => `${item[0]}/${item[2]}`).join(\",\")\r\n\r\n    if (filterClass.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    const firstClass = filterClass[0];\r\n    if (!firstClass) {\r\n      return null;\r\n    }\r\n\r\n    const res = firstClass.IsLocked\r\n      ? `${firstClass.SubjectCode}`\r\n      : `${convertClass}\\n${firstClass.SubjectCode}`;\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          color: firstClass.IsLocked ? \"red\" : \"black\",\r\n          fontWeight: firstClass.IsLocked ? 600 : 400,\r\n        }}\r\n        className=\"text-xs text-center flex flex-col items-center gap-1\"\r\n      >\r\n        {firstClass.IsLocked && <LockIcon sx={{ fontSize: 14 }} />}\r\n        <p className=\"whitespace-pre-line\">{res}</p>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <tbody>\r\n      {props.teachers.map((tch, index) => (\r\n        <tr\r\n          key={`body-${index}`}\r\n          className=\"flex items-center gap-2 mt-[2px] h-fit select-none\"\r\n        >\r\n          {props.days.map((day) => (\r\n            <td key={`day-${day.Day}`}>\r\n              <div className=\"flex flex-col items-center\">\r\n                <div className=\"flex gap-2 w-fit\">\r\n                  {props.slotAmount.map((item, index) => (\r\n                    <div\r\n                      key={`slot-${index}`}\r\n                      style={{ borderColor: day.BgColor }}\r\n                      className={`relative w-14 h-[60px] border-2 flex items-center justify-center rounded overflow-hidden`}\r\n                    >\r\n                      <p className=\"text-xs absolute left-0 top-[-2px] text-gray-300\">\r\n                        {index + 1}\r\n                      </p>\r\n                      {getClassDataByTeacherID(tch.TeacherID, day.Day, item)}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </td>\r\n          ))}\r\n        </tr>\r\n      ))}\r\n    </tbody>\r\n  );\r\n};\r\n\r\nexport default TableBody;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-timeslot\\component\\TableHead.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[123,126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[123,126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":26,"column":35,"nodeType":"MemberExpression","messageId":"limited","endLine":26,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\n\r\ntype DayData = {\r\n  Day: string;\r\n  BgColor: string;\r\n  TextColor: string;\r\n  [key: string]: any;\r\n};\r\n\r\ntype Props = {\r\n  days: DayData[];\r\n  slotAmount: number[];\r\n};\r\n\r\nconst TableHead = (props: Props) => {\r\n  return (\r\n    <thead>\r\n      <tr className=\"flex items-center gap-2 h-[60px] select-none\">\r\n        {props.days.map((item, index) => (\r\n          <th key={index}>\r\n            <div className=\"flex flex-col justify-center items-center\">\r\n              <div\r\n                style={{ backgroundColor: item.BgColor, color: item.TextColor }}\r\n                className=\"w-full h-[25px] flex items-center justify-center rounded\"\r\n              >\r\n                <p onClick={() => console.log(item)}>{item.Day}</p>\r\n              </div>\r\n              <div className=\"flex gap-2 pt-1 w-fit h-[25px]\">\r\n                {props.slotAmount.map((item, slotIndex) => (\r\n                  <div\r\n                    key={slotIndex}\r\n                    className=\"w-14 h-full items-center flex justify-center bg-slate-100 rounded\"\r\n                  >\r\n                    <p className=\"text-sm\">{item}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </th>\r\n        ))}\r\n      </tr>\r\n    </thead>\r\n  );\r\n};\r\n\r\nexport default TableHead;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-timeslot\\component\\TableResult.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[179,182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[179,182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":21,"column":53,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":21,"endColumn":55,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[599,601],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":21,"column":72,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":21,"endColumn":74,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[618,620],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":30,"column":31,"nodeType":"MemberExpression","messageId":"limited","endLine":30,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":35,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":40}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { teacher } from \"@/prisma/generated/client\";\r\n\r\ntype ClassData = {\r\n  teachers_responsibility: Array<{ TeacherID: number }>;\r\n  TimeslotID: string;\r\n  [key: string]: any;\r\n};\r\n\r\ntype Props = {\r\n  teachers: teacher[];\r\n  classData: ClassData[];\r\n};\r\n\r\nconst TableResult = (props: Props) => {\r\n  const findResult = (tID: number) => {\r\n    const filter1 = props.classData.filter((item) =>\r\n      item.teachers_responsibility.map((tid) => tid.TeacherID).includes(tID),\r\n    );\r\n    const filter2 = filter1.filter(\r\n      (cid, index) =>\r\n        filter1.findIndex((item) => item.TimeslotID == cid.TimeslotID) == index,\r\n    );\r\n    return filter2.length;\r\n  };\r\n  return (\r\n    <table className=\"ml-3\">\r\n      <thead>\r\n        <th className=\"flex gap-2 bg-white\">\r\n          <td className=\"w-[50px] h-[60px] flex items-center justify-center bg-slate-100 rounded\">\r\n            <p onClick={() => console.log(props.classData)}>เธฃเธงเธกเธเธฒเธ</p>\r\n          </td>\r\n        </th>\r\n      </thead>\r\n      <tbody>\r\n        {props.teachers.map((tch, index) => (\r\n          <tr\r\n            key={tch.TeacherID}\r\n            className=\"flex items-center gap-2 h-fit mt-1 select-none\"\r\n          >\r\n            <td className=\"w-[50px] h-[59.8px] flex items-center justify-center bg-slate-100 rounded\">\r\n              <p className=\"text-sm\">{findResult(tch.TeacherID)}</p>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default TableResult;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-timeslot\\component\\TeacherList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-timeslot\\functions\\ExportTeacherSummary.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4319,4322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4319,4322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\nimport type { Prisma } from \"@/prisma/generated/client\";\r\nimport ExcelJS from \"exceljs\";\r\n\r\n// Type matching ClassScheduleWithSummary from repository\r\ntype ClassScheduleWithSummary = Prisma.class_scheduleGetPayload<{\r\n  include: {\r\n    teachers_responsibility: true;\r\n    gradelevel: true;\r\n    timeslot: true;\r\n    room: true;\r\n  };\r\n}>;\r\n\r\n// Type for timeslot data structure used in dashboard\r\ninterface TimeslotData {\r\n  SlotAmount: number[];\r\n  DayOfWeek: Array<{ Day: string; TextColor: string; BgColor: string }>;\r\n}\r\n\r\nexport const ExportTeacherSummary = (\r\n  timeSlotData: TimeslotData,\r\n  teachers: teacher[],\r\n  classData: ClassScheduleWithSummary[],\r\n  semester: string,\r\n  academicYear: string,\r\n) => {\r\n  const workbook = new ExcelJS.Workbook(); //create workbook\r\n  const sheet = workbook.addWorksheet(\"เธฃเธงเธก\", {\r\n    pageSetup: { paperSize: 9, orientation: \"landscape\" },\r\n  }); //add worksheet to created workbook\r\n  // sheet.getCell(\"A1\").font = { bold: true,}; //set font bold to A1\r\n  const row1 = sheet.getCell(\"A1\");\r\n  const rows = sheet.getRow(2); //select row2\r\n  const row3 = sheet.getRow(3); //select row3\r\n  const timeslotCol = [\r\n    \"\",\r\n    \"\",\r\n    ...timeSlotData.DayOfWeek.flatMap(() =>\r\n      timeSlotData.SlotAmount.map((num: number) => num),\r\n    ),\r\n  ]; //slot col for mon-fri\r\n  const columns = [\"เธ—เธตเน\", \"เธเธนเนเธชเธญเธ\"]; //col for teacher list\r\n  rows.values = columns; //set col for teacher list\r\n  let startMerge = 3; //initial value of day map col\r\n  for (let i = 0; i < 5; i++) {\r\n    //เธ•เธฃเธเธเธตเนเธเธฐ merge cell เนเธเนเธ–เธงเธ—เธตเน 2 เน€เธเนเธฒเธ”เนเธงเธขเธเธฑเธเนเธ”เธขเธเธฒเธฃ getColumn เธ”เนเธงเธข index เน€เธเธทเนเธญเน€เธญเธฒเธ•เธฑเธงเธญเธฑเธเธฉเธฃเธกเธฒ เน€เธเนเธ sheet.getColumn(3).letter เธเธฐ = C\r\n    //เธ—เธตเนเธเธตเนเน€เธฃเธฒเธเธฐเธซเธฒเธฃเธฐเธขเธฐเธซเนเธฒเธเธ•เธฒเธกเธเธณเธเธงเธเธเธฒเธ เน€เธเนเธ เธกเธต 8 เธเธฒเธ เธ•เนเธญเธ merge C2 เธ–เธถเธ J2 เธเนเธเธฐเธซเธฒ letter เธเธฅเธฒเธขเธ—เธฒเธเนเธ”เธขเธเธณ startMerge + slotLength\r\n    //เธเธญ merge เน€เธชเธฃเนเธเนเธฅเนเธงเธเนเธเธฐ getCell เธ—เธตเนเธญเธขเธนเนเนเธเธฃเธฐเธขเธฐเธเธฑเนเธเนเน€เธเธทเนเธญเนเธชเนเธเนเธฒเธเธญเธเธงเธฑเธเธฅเธเนเธ\r\n    const slotLength = timeSlotData.SlotAmount.length - 1; //เธ—เธตเน -1 เน€เธเธฃเธฒเธฐเธงเนเธฒเธ–เนเธฒเนเธกเนเธฅเธเธกเธฑเธเธเธฐเนเธเน€เธเธขเธเธญเธเธงเธฑเธเธญเธทเนเธ\r\n    sheet.mergeCells(\r\n      `${sheet.getColumn(startMerge).letter}2:${\r\n        sheet.getColumn(startMerge + slotLength).letter\r\n      }2`,\r\n    );\r\n    sheet.getCell(`${sheet.getColumn(startMerge).letter}2`).value =\r\n      timeSlotData.DayOfWeek[i]?.Day ?? \"\";\r\n    startMerge += slotLength + 1;\r\n  }\r\n  const slotLength = timeSlotData.SlotAmount.length * 5; //find last column has value\r\n  sheet.getCell(`${sheet.getColumn(slotLength + 3).letter}2`).value = \"เธฃเธงเธก\"; //add value to last col\r\n  row3.values = timeslotCol; // add slot map to row no. 3\r\n  //merge cell\r\n  sheet.mergeCells(\r\n    `${sheet.getColumn(slotLength + 3).letter}2:${\r\n      sheet.getColumn(slotLength + 3).letter\r\n    }3`,\r\n  );\r\n  sheet.mergeCells(\r\n    `${sheet.getColumn(1).letter}1:${sheet.getColumn(slotLength + 3).letter}1`,\r\n  );\r\n  sheet.mergeCells(\"A2:A3\");\r\n  sheet.mergeCells(\"B2:B3\");\r\n\r\n  //เธชเธฃเนเธฒเธ key เธเธญเธ column เธเธถเนเธเธกเธฒเธเธฃเนเธญเธกเธเธฑเธเธเธณเธซเธเธ” width เนเธซเน col\r\n  const keyColumn = [\r\n    { key: \"order\", width: 3 },\r\n    { key: \"teacherName\", width: 19 },\r\n    ...timeSlotData.DayOfWeek.flatMap((item) =>\r\n      timeSlotData.SlotAmount.map((num: number) => ({\r\n        key: `${item.Day}-${num}`,\r\n        width: 3,\r\n      })),\r\n    ),\r\n    { key: \"result\", width: 3 },\r\n  ];\r\n  sheet.columns = keyColumn;\r\n  const unLockObject = (\r\n    obj: Record<string, string>[],\r\n    dataCount: number,\r\n  ): Record<string, string> => {\r\n    //from [{\"mon-1\" : \"\"}, {\"mon-2\" : \"\"}] to {\"mon-1\" : \"\", \"mon-2\" : \"\"} เธเธฐเน€เธญเธฒเนเธ spread เนเธ jsonData เธ–เนเธฒเนเธกเนเธเธฑเธ”เนเธเธเธเธตเนเธเธฐเน€เธเนเธ object เธเนเธญเธ object\r\n    let a: Record<string, string> = {};\r\n    for (let i = 0; i < dataCount; i++) {\r\n      a = { ...a, ...obj[i] };\r\n    }\r\n    return a;\r\n  };\r\n  const findResult = (tID: number): number => {\r\n    const filter1 = classData.filter((item: ClassScheduleWithSummary) =>\r\n      item.teachers_responsibility\r\n        .map((tid: { TeacherID: number }) => tid.TeacherID)\r\n        .includes(tID),\r\n    );\r\n    const filter2 = filter1.filter(\r\n      (cid: ClassScheduleWithSummary, _index: number) =>\r\n        filter1.findIndex(\r\n          (item: ClassScheduleWithSummary) =>\r\n            item.TimeslotID === cid.TimeslotID,\r\n        ) === _index,\r\n    );\r\n    return filter2.length;\r\n  };\r\n  const jsonData: any[] = [\r\n    ...teachers.map((tch: teacher, index: number) => {\r\n      const mapKey = timeSlotData.DayOfWeek.flatMap((day) =>\r\n        timeSlotData.SlotAmount.map((num: number) => {\r\n          const filterClass = classData.filter(\r\n            (item: ClassScheduleWithSummary) =>\r\n              item.teachers_responsibility\r\n                .map((tid: { TeacherID: number }) => tid.TeacherID)\r\n                .includes(tch.TeacherID) &&\r\n              dayOfWeekThai[item.timeslot.DayOfWeek] === day.Day &&\r\n              parseInt(item.timeslot.TimeslotID.substring(10)) === num,\r\n          );\r\n          const obj: Record<string, string> = {};\r\n          const keyname = `${day.Day}-${num}`;\r\n          const convertClass = filterClass\r\n            .map(\r\n              (item: ClassScheduleWithSummary) =>\r\n                `${item.GradeID[0]}/${item.GradeID[2]}`,\r\n            )\r\n            .join(\",\");\r\n          const firstClass = filterClass[0];\r\n          const res =\r\n            filterClass.length === 0\r\n              ? \"\"\r\n              : firstClass?.IsLocked\r\n                ? `${firstClass.SubjectCode}`\r\n                : `${convertClass}`;\r\n          obj[keyname] = filterClass.length === 0 ? \"\" : res;\r\n          return obj;\r\n        }),\r\n      );\r\n      return {\r\n        order: index + 1,\r\n        teacherName: `${tch.Prefix}${tch.Firstname} ${tch.Lastname}`,\r\n        ...unLockObject(mapKey, mapKey.length),\r\n        result: findResult(tch.TeacherID),\r\n      };\r\n    }),\r\n  ];\r\n  sheet.addRows(jsonData, \"i\");\r\n  rows.eachCell(function (cell) {\r\n    cell.alignment = {\r\n      vertical: \"middle\",\r\n      horizontal: \"center\",\r\n    };\r\n    cell.fill = {\r\n      type: \"pattern\",\r\n      pattern: \"solid\",\r\n      fgColor: { argb: \"fff9fb97\" },\r\n      bgColor: { argb: \"fff9fb97\" },\r\n    };\r\n  });\r\n  row3.eachCell(function (cell) {\r\n    cell.alignment = {\r\n      vertical: \"middle\",\r\n      horizontal: \"center\",\r\n    };\r\n    cell.fill = {\r\n      type: \"pattern\",\r\n      pattern: \"solid\",\r\n      fgColor: { argb: \"fff9fb97\" },\r\n      bgColor: { argb: \"fff9fb97\" },\r\n    };\r\n  });\r\n  sheet.eachRow(function (row, rowNumber) {\r\n    row.font = {\r\n      name: \"TH SarabunPSK\",\r\n      size: rowNumber === 1 ? 16 : 12,\r\n      bold: true,\r\n    };\r\n    row.height = 15;\r\n    row.eachCell(function (cell, colNumber) {\r\n      if (colNumber >= 3 && colNumber <= slotLength + 3)\r\n        cell.alignment = {\r\n          vertical: \"middle\",\r\n          horizontal: \"center\",\r\n        };\r\n      if (rowNumber >= 1) {\r\n        row.getCell(colNumber).border = {\r\n          top: { style: \"thin\" },\r\n          left: { style: \"thin\" },\r\n          bottom: { style: \"thin\" },\r\n          right: { style: \"thin\" },\r\n        };\r\n      }\r\n    });\r\n  });\r\n  row1.value = `เธ•เธฒเธฃเธฒเธเธฃเธงเธก เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน ${semester} เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ ${academicYear}`;\r\n  /* The commented code block you provided is attempting to write the Excel workbook data to a buffer,\r\ncreate a Blob from that data, and then generate a download link for the user to download the Excel\r\nfile. Here is a breakdown of the steps: */\r\n  void workbook.xlsx.writeBuffer().then((data) => {\r\n    const blob = new Blob([data], {\r\n      type: \"application/vnd.openxmlformats-officedocument.spreadsheet.sheet\",\r\n    });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const anchor = document.createElement(\"a\");\r\n    anchor.href = url;\r\n    anchor.download = \"เธฃเธงเธก.xlsx\";\r\n    anchor.click();\r\n    window.URL.revokeObjectURL(url);\r\n  });\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\all-timeslot\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\analytics\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\conflicts\\component\\ConflictDetector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\conflicts\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'completionRate' is assigned a value but never used.","line":85,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":85,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"//\r\nimport type { Metadata } from \"next\";\r\nimport { dashboardRepository } from \"@/features/dashboard/infrastructure/repositories/dashboard.repository\";\r\nimport {\r\n  calculateTotalScheduledHours,\r\n  calculateCompletionRate,\r\n  countTeachersWithSchedules,\r\n  countClassCompletion,\r\n  calculateTeacherWorkload,\r\n  calculateSubjectDistribution,\r\n  detectConflicts,\r\n} from \"@/features/dashboard/domain/services/dashboard-stats.service\";\r\nimport { getPublishReadiness } from \"@/features/config/application/services/publish-readiness-query.service\";\r\nimport type { semester } from \"@/prisma/generated/client\";\r\nimport {\r\n  PublishReadinessCard,\r\n  ReadinessIssues,\r\n} from \"../_components/PublishReadiness\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Dashboard - เธ เธฒเธเธฃเธงเธกเธ เธฒเธเน€เธฃเธตเธขเธ\",\r\n  description: \"เธ เธฒเธเธฃเธงเธกเธเนเธญเธกเธนเธฅเธ•เธฒเธฃเธฒเธเน€เธฃเธตเธขเธเนเธฅเธฐเธชเธ–เธดเธ•เธดเธเธญเธเธ เธฒเธเน€เธฃเธตเธขเธ\",\r\n};\r\n\r\nexport default async function DashboardPage({\r\n  params,\r\n}: {\r\n  params: Promise<{ semesterAndyear: string }>;\r\n}) {\r\n  const { semesterAndyear } = await params;\r\n\r\n  // Validate and parse semester and year\r\n  const [semester, academicYear] = semesterAndyear.split(\"-\");\r\n\r\n  if (!semester || !academicYear) {\r\n    return (\r\n      <div className=\"p-8\">\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <h2 className=\"text-red-800 font-semibold\">เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”</h2>\r\n          <p className=\"text-red-600\">\r\n            เธฃเธนเธเนเธเธเธเนเธญเธกเธนเธฅเธ เธฒเธเน€เธฃเธตเธขเธเนเธฅเธฐเธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒเนเธกเนเธ–เธนเธเธ•เนเธญเธ\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const year = parseInt(academicYear, 10);\r\n\r\n  // Validate that year is a valid number\r\n  if (isNaN(year) || year < 2500 || year > 2600) {\r\n    return (\r\n      <div className=\"p-8\">\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <h2 className=\"text-red-800 font-semibold\">เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”</h2>\r\n          <p className=\"text-red-600\">เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒเนเธกเนเธ–เธนเธเธ•เนเธญเธ ({academicYear})</p>\r\n          <p className=\"mt-2 text-sm text-red-500\">\r\n            เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธ เธฒเธเน€เธฃเธตเธขเธเธเธฒเธเธซเธเนเธฒเธซเธฅเธฑเธ\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const semesterEnum = `SEMESTER_${semester}` as semester;\r\n\r\n  // Fetch all dashboard data in parallel\r\n  const [dashboardData, readiness] = await Promise.all([\r\n    dashboardRepository.getDashboardData(semesterAndyear, year, semesterEnum),\r\n    getPublishReadiness(semesterAndyear),\r\n  ]);\r\n\r\n  const {\r\n    config,\r\n    schedules,\r\n    teachers,\r\n    grades,\r\n    timeslots,\r\n    subjects,\r\n    responsibilities,\r\n  } = dashboardData;\r\n\r\n  // Calculate statistics\r\n  const totalScheduledHours = calculateTotalScheduledHours(schedules);\r\n  const completionRate = calculateCompletionRate(\r\n    schedules,\r\n    grades.length,\r\n    timeslots.length,\r\n  );\r\n  const { withSchedules, withoutSchedules } = countTeachersWithSchedules(\r\n    schedules,\r\n    teachers,\r\n  );\r\n  const classCompletion = countClassCompletion(\r\n    schedules,\r\n    grades,\r\n    timeslots.length,\r\n  );\r\n  const conflicts = detectConflicts(schedules);\r\n  const totalConflicts =\r\n    conflicts.teacherConflicts +\r\n    conflicts.classConflicts +\r\n    conflicts.roomConflicts;\r\n\r\n  const teacherWorkload = calculateTeacherWorkload(schedules, teachers);\r\n  const subjectDistribution = calculateSubjectDistribution(schedules, subjects);\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-6 p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">\r\n            Dashboard - เธ เธฒเธเธฃเธงเธกเธ เธฒเธเน€เธฃเธตเธขเธ\r\n          </h1>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน {semester}/{year}\r\n          </p>\r\n        </div>\r\n        {config && (\r\n          <div className=\"rounded-lg bg-blue-50 px-4 py-2\">\r\n            <span className=\"text-sm font-medium text-blue-700\">\r\n              เธชเธ–เธฒเธเธฐ:{\" \"}\r\n              {config.status === \"DRAFT\"\r\n                ? \"เธฃเนเธฒเธ\"\r\n                : config.status === \"PUBLISHED\"\r\n                  ? \"เน€เธเธขเนเธเธฃเนเนเธฅเนเธง\"\r\n                  : config.status === \"LOCKED\"\r\n                    ? \"เธฅเนเธญเธ\"\r\n                    : \"เน€เธเนเธเธ–เธฒเธงเธฃ\"}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {readiness && readiness.status !== \"ready\" && (\r\n        <ReadinessIssues issues={readiness.issues} />\r\n      )}\r\n\r\n      {/* Quick Stats Cards */}\r\n      <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\r\n        <StatCard\r\n          title=\"เธเธณเธเธงเธเธเธฃเธน\"\r\n          value={teachers.length}\r\n          subtitle={`เธชเธญเธ: ${withSchedules} | เธขเธฑเธเนเธกเนเธกเธตเธ•เธฒเธฃเธฒเธ: ${withoutSchedules}`}\r\n          icon=\"๐‘จโ€๐ซ\"\r\n          color=\"blue\"\r\n        />\r\n        <StatCard\r\n          title=\"เธเธณเธเธงเธเธเธฑเนเธเน€เธฃเธตเธขเธ\"\r\n          value={grades.length}\r\n          subtitle={`เน€เธ•เนเธก: ${classCompletion.full} | เธเธฒเธเธชเนเธงเธ: ${classCompletion.partial}`}\r\n          icon=\"๐“\"\r\n          color=\"green\"\r\n        />\r\n        <StatCard\r\n          title=\"เธเธฒเธเธชเธญเธเธ—เธตเนเธเธฑเธ”เนเธฅเนเธง\"\r\n          value={totalScheduledHours}\r\n          subtitle={`เธเธฒเธ ${grades.length * timeslots.length} เธเธฒเธเธ—เธฑเนเธเธซเธกเธ”`}\r\n          icon=\"๐“…\"\r\n          color=\"purple\"\r\n        />\r\n        {readiness && <PublishReadinessCard readiness={readiness} />}\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n        <h2 className=\"mb-4 text-lg font-semibold text-gray-900\">เน€เธกเธเธนเธ”เนเธงเธ</h2>\r\n        <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-4\">\r\n          <QuickActionButton\r\n            href={`/dashboard/${semesterAndyear}/teacher-table`}\r\n            icon=\"๐‘จโ€๐ซ\"\r\n            label=\"เธ•เธฒเธฃเธฒเธเธชเธญเธเธเธฃเธน\"\r\n          />\r\n          <QuickActionButton\r\n            href={`/dashboard/${semesterAndyear}/student-table`}\r\n            icon=\"๐“\"\r\n            label=\"เธ•เธฒเธฃเธฒเธเน€เธฃเธตเธขเธเธเธฑเธเน€เธฃเธตเธขเธ\"\r\n          />\r\n          <QuickActionButton\r\n            href={`/dashboard/${semesterAndyear}/all-timeslot`}\r\n            icon=\"โฐ\"\r\n            label=\"เธเธฑเธ”เธเธฒเธฃเธเธฒเธเน€เธฃเธตเธขเธ\"\r\n          />\r\n          <QuickActionButton\r\n            href={`/dashboard/${semesterAndyear}/all-program`}\r\n            icon=\"๐“\"\r\n            label=\"เธซเธฅเธฑเธเธชเธนเธ•เธฃ\"\r\n          />\r\n          <QuickActionButton\r\n            href={`/dashboard/${semesterAndyear}/conflicts`}\r\n            icon=\"โ ๏ธ\"\r\n            label=\"เธ•เธฃเธงเธเธชเธญเธเธเธงเธฒเธกเธเนเธณเธเนเธญเธ\"\r\n          />\r\n          <QuickActionButton\r\n            href={`/schedule/${semesterAndyear}/lock`}\r\n            icon=\"๐”’\"\r\n            label=\"เธฅเนเธญเธเธเธฒเธเน€เธฃเธตเธขเธ\"\r\n          />\r\n          <QuickActionButton\r\n            href={`/dashboard/${semesterAndyear}/analytics`}\r\n            icon=\"๐“\"\r\n            label=\"เธงเธดเน€เธเธฃเธฒเธฐเธซเนเธเนเธญเธกเธนเธฅ\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\r\n        {/* Teacher Workload Chart */}\r\n        <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n          <h2 className=\"mb-4 text-lg font-semibold text-gray-900\">\r\n            เธ เธฒเธฃเธฐเธเธฒเธเธชเธญเธ (Top 10 เธเธฃเธน)\r\n          </h2>\r\n          <div className=\"space-y-3\">\r\n            {teacherWorkload.slice(0, 10).map((workload) => (\r\n              <div key={workload.teacherId} className=\"flex items-center gap-3\">\r\n                <div className=\"min-w-0 flex-1\">\r\n                  <p className=\"truncate text-sm font-medium text-gray-900\">\r\n                    {workload.teacherName}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500\">{workload.department}</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"text-right\">\r\n                    <p className=\"text-sm font-semibold text-gray-900\">\r\n                      {workload.scheduledHours}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">เธเธฒเธ</p>\r\n                  </div>\r\n                  <div className=\"h-2 w-20 overflow-hidden rounded-full bg-gray-200\">\r\n                    <div\r\n                      className=\"h-full bg-blue-600\"\r\n                      style={{\r\n                        width: `${Math.min(workload.utilizationRate, 100)}%`,\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {teacherWorkload.length === 0 && (\r\n            <p className=\"text-center text-sm text-gray-500\">\r\n              เธขเธฑเธเนเธกเนเธกเธตเธเนเธญเธกเธนเธฅเธ•เธฒเธฃเธฒเธเธชเธญเธ\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Subject Distribution Chart */}\r\n        <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n          <h2 className=\"mb-4 text-lg font-semibold text-gray-900\">\r\n            เธเธฒเธฃเธเธฃเธฐเธเธฒเธขเธงเธดเธเธฒ (Top 10 เธงเธดเธเธฒ)\r\n          </h2>\r\n          <div className=\"space-y-3\">\r\n            {subjectDistribution.slice(0, 10).map((subject) => (\r\n              <div\r\n                key={subject.subjectCode}\r\n                className=\"flex items-center gap-3\"\r\n              >\r\n                <div className=\"min-w-0 flex-1\">\r\n                  <p className=\"truncate text-sm font-medium text-gray-900\">\r\n                    {subject.subjectName}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    {subject.subjectCode} โ€ข {subject.classCount} เธเธฑเนเธเน€เธฃเธตเธขเธ\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"text-right\">\r\n                    <p className=\"text-sm font-semibold text-gray-900\">\r\n                      {subject.totalHours}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {subject.percentage}%\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"h-2 w-20 overflow-hidden rounded-full bg-gray-200\">\r\n                    <div\r\n                      className=\"h-full bg-green-600\"\r\n                      style={{ width: `${Math.min(subject.percentage, 100)}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {subjectDistribution.length === 0 && (\r\n            <p className=\"text-center text-sm text-gray-500\">\r\n              เธขเธฑเธเนเธกเนเธกเธตเธเนเธญเธกเธนเธฅเธ•เธฒเธฃเธฒเธเน€เธฃเธตเธขเธ\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Health Indicators */}\r\n      {(withoutSchedules > 0 ||\r\n        classCompletion.partial > 0 ||\r\n        classCompletion.none > 0 ||\r\n        totalConflicts > 0) && (\r\n        <div className=\"rounded-lg border border-yellow-200 bg-yellow-50 p-6 shadow-sm\">\r\n          <h2 className=\"mb-4 text-lg font-semibold text-yellow-900\">\r\n            โ ๏ธ เธเธฃเธฐเน€เธ”เนเธเธ—เธตเนเธ•เนเธญเธเธ”เธณเน€เธเธดเธเธเธฒเธฃ\r\n          </h2>\r\n          <div className=\"space-y-2\">\r\n            {withoutSchedules > 0 && (\r\n              <div className=\"flex items-start gap-2 rounded-lg bg-white p-3\">\r\n                <span className=\"text-lg\">๐‘จโ€๐ซ</span>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-900\">\r\n                    เธกเธตเธเธฃเธน {withoutSchedules} เธเธ เธ—เธตเนเธขเธฑเธเนเธกเนเธกเธตเธ•เธฒเธฃเธฒเธเธชเธญเธ\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-600\">\r\n                    เธเธงเธฃเธเธฑเธ”เธ•เธฒเธฃเธฒเธเนเธซเนเธเธฃเธนเธ—เธธเธเธเธเธกเธตเธ เธฒเธฃเธฐเธเธฒเธเธชเธญเธ\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {classCompletion.none > 0 && (\r\n              <div className=\"flex items-start gap-2 rounded-lg bg-white p-3\">\r\n                <span className=\"text-lg\">๐“</span>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-900\">\r\n                    เธกเธตเธเธฑเนเธเน€เธฃเธตเธขเธ {classCompletion.none} เธเธฑเนเธ เธ—เธตเนเธขเธฑเธเนเธกเนเธกเธตเธ•เธฒเธฃเธฒเธเน€เธฅเธข\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-600\">\r\n                    เธเธงเธฃเน€เธฃเธดเนเธกเธเธฑเธ”เธ•เธฒเธฃเธฒเธเนเธซเนเธเธฑเนเธเน€เธฃเธตเธขเธเน€เธซเธฅเนเธฒเธเธตเน\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {classCompletion.partial > 0 && (\r\n              <div className=\"flex items-start gap-2 rounded-lg bg-white p-3\">\r\n                <span className=\"text-lg\">๐“</span>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-900\">\r\n                    เธกเธตเธเธฑเนเธเน€เธฃเธตเธขเธ {classCompletion.partial} เธเธฑเนเธ\r\n                    เธ—เธตเนเธ•เธฒเธฃเธฒเธเธขเธฑเธเนเธกเนเน€เธ•เนเธก\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-600\">\r\n                    เธเธงเธฃเธเธฑเธ”เธ•เธฒเธฃเธฒเธเนเธซเนเธเธฃเธเธ—เธธเธเธเธฒเธเน€เธฃเธตเธขเธ\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {totalConflicts > 0 && (\r\n              <div className=\"flex items-start gap-2 rounded-lg bg-white p-3\">\r\n                <span className=\"text-lg\">โ ๏ธ</span>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-900\">\r\n                    เธเธเธเนเธญเธเธฑเธ”เนเธขเนเธ {totalConflicts} เธฃเธฒเธขเธเธฒเธฃ\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-600\">\r\n                    เธเธฃเธน: {conflicts.teacherConflicts} โ€ข เธเธฑเนเธเน€เธฃเธตเธขเธ:{\" \"}\r\n                    {conflicts.classConflicts} โ€ข เธซเนเธญเธเน€เธฃเธตเธขเธ:{\" \"}\r\n                    {conflicts.roomConflicts}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Summary Info */}\r\n      <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n        <h2 className=\"mb-4 text-lg font-semibold text-gray-900\">เธเนเธญเธกเธนเธฅเธชเธฃเธธเธ</h2>\r\n        <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-6\">\r\n          <InfoItem label=\"เธเธฃเธนเธ—เธฑเนเธเธซเธกเธ”\" value={teachers.length} />\r\n          <InfoItem label=\"เธเธฑเนเธเน€เธฃเธตเธขเธ\" value={grades.length} />\r\n          <InfoItem label=\"เธงเธดเธเธฒ\" value={subjects.length} />\r\n          <InfoItem label=\"เธเธฒเธเน€เธฃเธตเธขเธ\" value={timeslots.length} />\r\n          <InfoItem label=\"เธ•เธฒเธฃเธฒเธเธ—เธตเนเธเธฑเธ”\" value={schedules.length} />\r\n          <InfoItem label=\"เธเธงเธฒเธกเธฃเธฑเธเธเธดเธ”เธเธญเธ\" value={responsibilities.length} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Stat Card Component\r\nfunction StatCard({\r\n  title,\r\n  value,\r\n  subtitle,\r\n  icon,\r\n  color,\r\n}: {\r\n  title: string;\r\n  value: number | string;\r\n  subtitle: string;\r\n  icon: string;\r\n  color: \"blue\" | \"green\" | \"purple\" | \"red\";\r\n}) {\r\n  const colorClasses = {\r\n    blue: \"bg-blue-50 text-blue-600 border-blue-200\",\r\n    green: \"bg-green-50 text-green-600 border-green-200\",\r\n    purple: \"bg-purple-50 text-purple-600 border-purple-200\",\r\n    red: \"bg-red-50 text-red-600 border-red-200\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"rounded-lg border border-gray-200 bg-white p-5 shadow-sm\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex-1\">\r\n          <p className=\"text-sm font-medium text-gray-600\">{title}</p>\r\n          <p className=\"mt-2 text-3xl font-bold text-gray-900\">{value}</p>\r\n          <p className=\"mt-1 text-xs text-gray-500\">{subtitle}</p>\r\n        </div>\r\n        <div\r\n          className={`flex h-12 w-12 items-center justify-center rounded-lg border ${colorClasses[color]}`}\r\n        >\r\n          <span className=\"text-2xl\">{icon}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Quick Action Button Component\r\nfunction QuickActionButton({\r\n  href,\r\n  icon,\r\n  label,\r\n}: {\r\n  href: string;\r\n  icon: string;\r\n  label: string;\r\n}) {\r\n  return (\r\n    <a\r\n      href={href}\r\n      className=\"flex flex-col items-center gap-2 rounded-lg border border-gray-200 bg-gray-50 p-4 transition-colors hover:border-blue-300 hover:bg-blue-50\"\r\n    >\r\n      <span className=\"text-2xl\">{icon}</span>\r\n      <span className=\"text-center text-sm font-medium text-gray-700\">\r\n        {label}\r\n      </span>\r\n    </a>\r\n  );\r\n}\r\n\r\n// Info Item Component\r\nfunction InfoItem({ label, value }: { label: string; value: number }) {\r\n  return (\r\n    <div className=\"text-center\">\r\n      <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\r\n      <p className=\"mt-1 text-xs text-gray-600\">{label}</p>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\shared\\PDFCustomizationDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\shared\\batchPdfGenerator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\shared\\timeSlot.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[848,851],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[848,851],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1223,1226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1223,1226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\nimport { dayOfWeekTextColor } from \"@/models/dayofWeek-textColor\";\r\nimport { dayOfWeekColor } from \"@/models/dayofweek-color\";\r\nimport type { timeslot } from \"@/prisma/generated/client\";\r\n\r\nconst BREAK_TYPES = new Set([\"BREAK_BOTH\", \"BREAK_JUNIOR\", \"BREAK_SENIOR\"]);\r\nconst DAY_ORDER = [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\", \"SAT\", \"SUN\"] as const;\r\n\r\nconst getDayIndex = (dayCode: string) => {\r\n  const index = DAY_ORDER.indexOf(dayCode as (typeof DAY_ORDER)[number]);\r\n  return index === -1 ? DAY_ORDER.length : index;\r\n};\r\n\r\nexport type DayStyle = {\r\n  Day: string;\r\n  TextColor: string;\r\n  BgColor: string;\r\n};\r\n\r\nexport type BreakSlot = {\r\n  TimeslotID: string;\r\n  Breaktime: string;\r\n  SlotNumber: number;\r\n};\r\n\r\nexport type TimeslotWithSubject = timeslot & {\r\n  subject: Record<string, any>;\r\n};\r\n\r\nexport type TimeSlotTableData = {\r\n  AllData: TimeslotWithSubject[];\r\n  SlotAmount: number[];\r\n  DayOfWeek: DayStyle[];\r\n  BreakSlot: BreakSlot[];\r\n};\r\n\r\nexport const emptyTimeSlotTableData: TimeSlotTableData = {\r\n  AllData: [],\r\n  SlotAmount: [],\r\n  DayOfWeek: [],\r\n  BreakSlot: [],\r\n};\r\n\r\nexport type ScheduleEntry = {\r\n  TimeslotID: string;\r\n  [key: string]: any;\r\n};\r\n\r\nconst parseSlotNumber = (timeslotId: string): number => {\r\n  const rawNumber = Number.parseInt(timeslotId.substring(10), 10);\r\n  return Number.isNaN(rawNumber) ? 0 : rawNumber;\r\n};\r\n\r\nexport const createTimeSlotTableData = (\r\n  timeslots: timeslot[] | undefined,\r\n  scheduleEntries: ScheduleEntry[] | undefined,\r\n): TimeSlotTableData => {\r\n  if (!timeslots || timeslots.length === 0) {\r\n    return emptyTimeSlotTableData;\r\n  }\r\n\r\n  const scheduleMap = new Map<string, ScheduleEntry>();\r\n  (scheduleEntries ?? [])\r\n    .filter((entry): entry is ScheduleEntry => !!(entry && entry.TimeslotID))\r\n    .forEach((entry) => {\r\n      scheduleMap.set(entry.TimeslotID, entry);\r\n    });\r\n\r\n  const sortedTimeslots = [...timeslots].sort((slotA, slotB) => {\r\n    const dayDiff = getDayIndex(slotA.DayOfWeek) - getDayIndex(slotB.DayOfWeek);\r\n    if (dayDiff !== 0) {\r\n      return dayDiff;\r\n    }\r\n\r\n    return (\r\n      parseSlotNumber(slotA.TimeslotID) - parseSlotNumber(slotB.TimeslotID)\r\n    );\r\n  });\r\n\r\n  const dayOfWeek = Array.from(\r\n    new Set(sortedTimeslots.map((slot) => slot.DayOfWeek)),\r\n  ).map((dayCode) => ({\r\n    Day: dayOfWeekThai[dayCode] ?? dayCode,\r\n    TextColor: dayOfWeekTextColor[dayCode] ?? \"\",\r\n    BgColor: dayOfWeekColor[dayCode] ?? \"\",\r\n  }));\r\n\r\n  const breakSlots = sortedTimeslots\r\n    .filter(\r\n      (slot) => BREAK_TYPES.has(slot.Breaktime) && slot.DayOfWeek === \"MON\",\r\n    )\r\n    .map((slot) => ({\r\n      TimeslotID: slot.TimeslotID,\r\n      Breaktime: slot.Breaktime,\r\n      SlotNumber: parseSlotNumber(slot.TimeslotID),\r\n    }));\r\n\r\n  const mondaySlots = sortedTimeslots.filter(\r\n    (slot) => slot.DayOfWeek === \"MON\",\r\n  );\r\n  const slotAmount = mondaySlots.map((_, index) => index + 1);\r\n\r\n  const allData = sortedTimeslots.map((slot) => ({\r\n    ...slot,\r\n    subject: scheduleMap.get(slot.TimeslotID) ?? {},\r\n  }));\r\n\r\n  return {\r\n    AllData: allData,\r\n    SlotAmount: slotAmount,\r\n    DayOfWeek: dayOfWeek,\r\n    BreakSlot: breakSlots,\r\n  };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\student-table\\component\\SelectClassroom.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\student-table\\component\\Timeslot.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"Date\" of template literal expression.","line":75,"column":38,"nodeType":"MemberExpression","messageId":"invalidType","endLine":75,"endColumn":52},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"Date\" of template literal expression.","line":75,"column":55,"nodeType":"MemberExpression","messageId":"invalidType","endLine":75,"endColumn":67}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\nimport React, { Fragment, useMemo } from \"react\";\r\nimport type { TimeSlotTableData } from \"../../shared/timeSlot\";\r\n\r\ntype Props = {\r\n  timeSlotData: TimeSlotTableData;\r\n  searchGradeID: string | null;\r\n};\r\n\r\nconst formatTime = (time: string | Date) => {\r\n  const date = new Date(time);\r\n  const hour = date.getHours() - 7;\r\n  const minutes = date.getMinutes();\r\n\r\n  const hoursText = hour < 10 ? `0${hour}` : hour.toString();\r\n  const minutesText = minutes === 0 ? `0${minutes}` : minutes.toString();\r\n\r\n  return `${hoursText}:${minutesText}`;\r\n};\r\n\r\nconst getGradeLevel = (gradeId: string | null) => {\r\n  if (!gradeId) {\r\n    return undefined;\r\n  }\r\n\r\n  const level = Number.parseInt(gradeId[0] ?? \"\", 10);\r\n  return Number.isNaN(level) ? undefined : level;\r\n};\r\n\r\nconst shouldShowBreak = (breaktime: string, gradeLevel?: number) => {\r\n  if (breaktime === \"BREAK_BOTH\") {\r\n    return true;\r\n  }\r\n  if (breaktime === \"BREAK_JUNIOR\") {\r\n    return typeof gradeLevel !== \"undefined\" && gradeLevel < 4;\r\n  }\r\n  if (breaktime === \"BREAK_SENIOR\") {\r\n    return typeof gradeLevel !== \"undefined\" && gradeLevel >= 4;\r\n  }\r\n  return false;\r\n};\r\n\r\nfunction TimeSlot({ timeSlotData, searchGradeID }: Props) {\r\n  const gradeLevel = useMemo(\r\n    () => getGradeLevel(searchGradeID),\r\n    [searchGradeID],\r\n  );\r\n\r\n  return (\r\n    <table className=\"table-auto flex w-full flex-col gap-3\">\r\n      <thead>\r\n        <tr className=\"flex gap-4\">\r\n          <th className=\"flex h-[53px] w-[90px] items-center justify-center rounded bg-gray-100 p-[10px] text-center text-gray-600\">\r\n            เธเธฒเธเธ—เธตเน\r\n          </th>\r\n          {timeSlotData.SlotAmount.map((item) => (\r\n            <Fragment key={`slot-${item}`}>\r\n              <th className=\"flex h-[53px] grow items-center justify-center rounded bg-gray-100 p-[10px] text-gray-600\">\r\n                <p>{item < 10 ? `0${item}` : item}</p>\r\n              </th>\r\n            </Fragment>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody className=\"flex flex-col gap-3\">\r\n        <tr className=\"flex gap-4\">\r\n          <td className=\"flex h-full items-center justify-center rounded bg-gray-100 p-[10px]\">\r\n            <span className=\"flex h-[50px] w-[50px] items-center justify-center text-gray-600\">\r\n              เน€เธงเธฅเธฒ\r\n            </span>\r\n          </td>\r\n          {timeSlotData.AllData.filter((item) => item.DayOfWeek === \"MON\").map(\r\n            (item) => (\r\n              <Fragment key={`time-${item.StartTime}${item.EndTime}`}>\r\n                <td\r\n                  style={{\r\n                    width: `${1062 / timeSlotData.SlotAmount.length - 10}px`,\r\n                  }}\r\n                  className=\"flex grow flex-col items-center justify-center rounded bg-gray-100 py-[10px] text-xs text-gray-600 min-[1440px]:flex-row\"\r\n                >\r\n                  <p className=\"flex w-full items-center justify-center\">\r\n                    {formatTime(item.StartTime)}\r\n                  </p>\r\n                  <p className=\"flex items-center justify-center\">-</p>\r\n                  <p className=\"flex w-full items-center justify-center\">\r\n                    {formatTime(item.EndTime)}\r\n                  </p>\r\n                </td>\r\n              </Fragment>\r\n            ),\r\n          )}\r\n        </tr>\r\n        {timeSlotData.DayOfWeek.map((day) => (\r\n          <Fragment key={`day${day.Day}`}>\r\n            <tr className=\"flex gap-4\">\r\n              <td\r\n                className=\"flex h-[76px] items-center justify-center rounded p-[10px]\"\r\n                style={{ backgroundColor: day.BgColor }}\r\n              >\r\n                <span className=\"flex h-[24px] w-[50px] justify-center\">\r\n                  <p style={{ color: day.TextColor }}>{day.Day}</p>\r\n                </span>\r\n              </td>\r\n              {timeSlotData.AllData.filter(\r\n                (item) => dayOfWeekThai[item.DayOfWeek] === day.Day,\r\n              ).map((data) => {\r\n                const showBreak = shouldShowBreak(data.Breaktime, gradeLevel);\r\n                const subject = data.subject;\r\n                const subjectCode = subject?.SubjectCode ?? \"\";\r\n                const teacherName =\r\n                  !subject?.IsLocked &&\r\n                  Array.isArray(subject?.teachers) &&\r\n                  subject.teachers.length > 0\r\n                    ? (subject.teachers[0]?.Firstname ?? \"\")\r\n                    : \"\";\r\n                const roomName = subject?.room?.RoomName ?? \"\";\r\n\r\n                return (\r\n                  <Fragment key={`slot-no${data.TimeslotID}`}>\r\n                    <td\r\n                      style={{\r\n                        width: `${1062 / timeSlotData.SlotAmount.length - 10}px`,\r\n                        backgroundColor: showBreak ? \"#f3f4f6\" : \"white\",\r\n                      }}\r\n                      className=\"grid h-[76px] cursor-default items-center justify-center rounded border border-[#ABBAC1] text-center text-xs font-light\"\r\n                    >\r\n                      {showBreak ? (\r\n                        <p className=\"mt-4\">เธเธฑเธเธเธฅเธฒเธเธงเธฑเธ</p>\r\n                      ) : (\r\n                        <span className=\"flex flex-col items-center gap-[2px] text-xs\">\r\n                          {subjectCode && (\r\n                            <p\r\n                              className=\"font-bold\"\r\n                              style={{\r\n                                fontSize: subjectCode.length > 8 ? 12 : 14,\r\n                              }}\r\n                            >\r\n                              {subjectCode}\r\n                            </p>\r\n                          )}\r\n                          {teacherName && (\r\n                            <p className=\"text-sm\">{teacherName}</p>\r\n                          )}\r\n                          {roomName && (\r\n                            <p className=\"text-xs\">\r\n                              {roomName.length > 9\r\n                                ? `${roomName.substring(0, 9)}...`\r\n                                : roomName}\r\n                            </p>\r\n                          )}\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                  </Fragment>\r\n                );\r\n              })}\r\n            </tr>\r\n          </Fragment>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nexport default TimeSlot;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\student-table\\function\\ExportStudentTable.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\student-table\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\teacher-table\\component\\SelectTeacher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\teacher-table\\component\\Timeslot.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"Date\" of template literal expression.","line":58,"column":38,"nodeType":"MemberExpression","messageId":"invalidType","endLine":58,"endColumn":52},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"Date\" of template literal expression.","line":58,"column":55,"nodeType":"MemberExpression","messageId":"invalidType","endLine":58,"endColumn":67}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\nimport React, { Fragment } from \"react\";\r\nimport type { TimeSlotTableData } from \"../../shared/timeSlot\";\r\n\r\ntype Props = {\r\n  timeSlotData: TimeSlotTableData;\r\n};\r\n\r\nconst formatTime = (time: string | Date) => {\r\n  const date = new Date(time);\r\n  const hour = date.getHours() - 7;\r\n  const minutes = date.getMinutes();\r\n\r\n  const hoursText = hour < 10 ? `0${hour}` : hour.toString();\r\n  const minutesText = minutes === 0 ? `0${minutes}` : minutes.toString();\r\n\r\n  return `${hoursText}:${minutesText}`;\r\n};\r\n\r\nconst isBreakSlot = (breaktime: string) => breaktime !== \"NOT_BREAK\";\r\n\r\nconst formatGrade = (gradeId?: string) => {\r\n  if (!gradeId) {\r\n    return \"\";\r\n  }\r\n\r\n  const roomNumber = Number.parseInt(gradeId.substring(1), 10);\r\n  return `เธก.${gradeId[0]}/${Number.isNaN(roomNumber) ? \"\" : roomNumber}`;\r\n};\r\n\r\nfunction TimeSlot({ timeSlotData }: Props) {\r\n  return (\r\n    <table className=\"table-auto flex w-full flex-col gap-3\">\r\n      <thead>\r\n        <tr className=\"flex gap-4\">\r\n          <th className=\"flex h-[53px] w-[90px] items-center justify-center rounded bg-gray-100 p-[10px] text-center text-gray-600\">\r\n            เธเธฒเธเธ—เธตเน\r\n          </th>\r\n          {timeSlotData.SlotAmount.map((item) => (\r\n            <Fragment key={`slot-${item}`}>\r\n              <th className=\"flex h-[53px] grow items-center justify-center rounded bg-gray-100 p-[10px] text-gray-600\">\r\n                <p>{item < 10 ? `0${item}` : item}</p>\r\n              </th>\r\n            </Fragment>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody className=\"flex flex-col gap-3\">\r\n        <tr className=\"flex gap-4\">\r\n          <td className=\"flex h-full items-center justify-center rounded bg-gray-100 p-[10px]\">\r\n            <span className=\"flex h-[50px] w-[50px] items-center justify-center text-gray-600\">\r\n              เน€เธงเธฅเธฒ\r\n            </span>\r\n          </td>\r\n          {timeSlotData.AllData.filter((item) => item.DayOfWeek === \"MON\").map(\r\n            (item) => (\r\n              <Fragment key={`time-${item.StartTime}${item.EndTime}`}>\r\n                <td\r\n                  style={{\r\n                    width: `${1062 / timeSlotData.SlotAmount.length - 10}px`,\r\n                  }}\r\n                  className=\"flex grow flex-col items-center justify-center rounded bg-gray-100 py-[10px] text-xs text-gray-600 min-[1440px]:flex-row\"\r\n                >\r\n                  <p className=\"flex w-full items-center justify-center\">\r\n                    {formatTime(item.StartTime)}\r\n                  </p>\r\n                  <p className=\"flex items-center justify-center\">-</p>\r\n                  <p className=\"flex w-full items-center justify-center\">\r\n                    {formatTime(item.EndTime)}\r\n                  </p>\r\n                </td>\r\n              </Fragment>\r\n            ),\r\n          )}\r\n        </tr>\r\n        {timeSlotData.DayOfWeek.map((day) => (\r\n          <Fragment key={`day${day.Day}`}>\r\n            <tr className=\"flex gap-4\">\r\n              <td\r\n                className=\"flex h-[76px] items-center justify-center rounded p-[10px]\"\r\n                style={{ backgroundColor: day.BgColor }}\r\n              >\r\n                <span className=\"flex h-[24px] w-[50px] justify-center\">\r\n                  <p style={{ color: day.TextColor }}>{day.Day}</p>\r\n                </span>\r\n              </td>\r\n              {timeSlotData.AllData.filter(\r\n                (item) => dayOfWeekThai[item.DayOfWeek] === day.Day,\r\n              ).map((data) => {\r\n                const breakSlot = isBreakSlot(data.Breaktime);\r\n                const subject = data.subject;\r\n                const subjectCode = subject?.SubjectCode ?? \"\";\r\n                const isLocked = Boolean(subject?.IsLocked);\r\n                const grade = formatGrade(subject?.GradeID);\r\n                const roomName = subject?.room?.RoomName ?? \"\";\r\n\r\n                return (\r\n                  <Fragment key={`slot-no${data.TimeslotID}`}>\r\n                    <td\r\n                      style={{\r\n                        width: `${1062 / timeSlotData.SlotAmount.length - 10}px`,\r\n                        backgroundColor: breakSlot ? \"#f3f4f6\" : \"white\",\r\n                      }}\r\n                      className=\"grid h-[76px] cursor-default items-center justify-center rounded border border-[#ABBAC1] text-center text-xs font-light\"\r\n                    >\r\n                      {breakSlot ? (\r\n                        <p className=\"mt-4\">เธเธฑเธเธเธฅเธฒเธเธงเธฑเธ</p>\r\n                      ) : (\r\n                        <span className=\"flex flex-col items-center gap-[2px] text-xs\">\r\n                          {subjectCode && (\r\n                            <p\r\n                              className=\"text-sm font-bold\"\r\n                              style={{\r\n                                fontSize: subjectCode.length > 8 ? 12 : 14,\r\n                              }}\r\n                            >\r\n                              {subjectCode}\r\n                            </p>\r\n                          )}\r\n                          {!isLocked && grade && (\r\n                            <p className=\"text-sm\">{grade}</p>\r\n                          )}\r\n                          {roomName && (\r\n                            <p className=\"text-xs\">\r\n                              {roomName.length > 9\r\n                                ? `${roomName.substring(0, 9)}...`\r\n                                : roomName}\r\n                            </p>\r\n                          )}\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                  </Fragment>\r\n                );\r\n              })}\r\n            </tr>\r\n          </Fragment>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nexport default TimeSlot;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\[semesterAndyear]\\teacher-table\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":326,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":332,"endColumn":7,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[9758,9758],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[9758,9758],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":728,"column":29,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":734,"endColumn":31,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[24384,24384],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[24384,24384],"text":"await "},"desc":"Add await operator."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { useParams } from \"next/navigation\";\r\nimport React, { useMemo, useRef, useState, useEffect } from \"react\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { isAdminRole, normalizeAppRole } from \"@/lib/authz\";\r\nimport useSWR from \"swr\";\r\nimport { useReactToPrint } from \"react-to-print\";\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Box,\r\n  Button,\r\n  Alert,\r\n  AlertTitle,\r\n  Skeleton,\r\n  Typography,\r\n  Stack,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Checkbox,\r\n  ListItemText,\r\n  OutlinedInput,\r\n  Chip,\r\n  IconButton,\r\n  Menu,\r\n  useTheme,\r\n  useMediaQuery,\r\n  Tooltip,\r\n  Collapse,\r\n} from \"@mui/material\";\r\nimport DownloadIcon from \"@mui/icons-material/Download\";\r\nimport PictureAsPdfIcon from \"@mui/icons-material/PictureAsPdf\";\r\nimport SchoolIcon from \"@mui/icons-material/School\";\r\nimport FilterListIcon from \"@mui/icons-material/FilterList\";\r\nimport PrintIcon from \"@mui/icons-material/Print\";\r\nimport GridOnIcon from \"@mui/icons-material/GridOn\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\r\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\r\n\r\nimport { useSemesterSync, useTeachers } from \"@/hooks\";\r\nimport { getTimeslotsByTermAction } from \"@/features/timeslot/application/actions/timeslot.actions\";\r\nimport { getClassSchedulesAction } from \"@/features/class/application/actions/class.actions\";\r\nimport { getTeacherByIdAction } from \"@/features/teacher/application/actions/teacher.actions\";\r\n\r\nimport SelectTeacher from \"./component/SelectTeacher\";\r\nimport {\r\n  generateTeacherBatchPDF,\r\n  type BatchPDFOptions,\r\n} from \"../shared/batchPdfGenerator\";\r\nimport { PDFCustomizationDialog } from \"../shared/PDFCustomizationDialog\";\r\nimport {\r\n  ExportTeacherTable,\r\n  type ExportTimeslotData,\r\n} from \"@/features/export/teacher-timetable-excel\";\r\nimport type { ClassScheduleWithSummary } from \"@/features/class/infrastructure/repositories/class.repository\";\r\nimport {\r\n  createTimeSlotTableData,\r\n  type TimeSlotTableData,\r\n} from \"../shared/timeSlot\";\r\nimport type { ScheduleEntry } from \"../shared/timeSlot\";\r\nimport type { ActionResult } from \"@/shared/lib/action-wrapper\";\r\n\r\ninterface Teacher {\r\n  Prefix?: string;\r\n  Firstname?: string;\r\n  Lastname?: string;\r\n}\r\n\r\nconst formatTeacherName = (teacher?: Teacher) => {\r\n  if (!teacher) {\r\n    return \"\";\r\n  }\r\n\r\n  const prefix = teacher.Prefix ?? \"\";\r\n  const firstname = teacher.Firstname ?? \"\";\r\n  const lastname = teacher.Lastname ?? \"\";\r\n\r\n  return `${prefix}${firstname}${firstname && lastname ? \" \" : \"\"}${lastname}`.trim();\r\n};\r\n\r\nconst TimeSlot = dynamic(() => import(\"./component/Timeslot\"), {\r\n  ssr: false,\r\n  loading: () => (\r\n    <Skeleton variant=\"rectangular\" height={400} sx={{ borderRadius: 1 }} />\r\n  ),\r\n});\r\n\r\nfunction TeacherTablePage() {\r\n  const params = useParams();\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n  const { data: session, isPending } = authClient.useSession();\r\n  const isSessionLoading = isPending;\r\n  const userRole = normalizeAppRole(session?.user?.role);\r\n  const isAdmin = isAdminRole(userRole);\r\n  const isTeacher = userRole === \"teacher\";\r\n  const currentTeacherId =\r\n    isTeacher && session?.user?.id ? parseInt(session.user.id) : null;\r\n\r\n  const [selectedTeacherId, setSelectedTeacherId] = useState<number | null>(\r\n    currentTeacherId,\r\n  );\r\n\r\n  // Effect to enforce teacher selection for non-admins\r\n  useEffect(() => {\r\n    if (isTeacher && currentTeacherId) {\r\n      setSelectedTeacherId(currentTeacherId);\r\n    }\r\n  }, [isTeacher, currentTeacherId]);\r\n\r\n  // Bulk operation state\r\n  const [selectedTeacherIds, setSelectedTeacherIds] = useState<number[]>([]);\r\n  const [showBulkFilters, setShowBulkFilters] = useState(false);\r\n  const [exportMenuAnchor, setExportMenuAnchor] = useState<null | HTMLElement>(\r\n    null,\r\n  );\r\n\r\n  // PDF customization dialog state\r\n  const [showPdfCustomization, setShowPdfCustomization] = useState(false);\r\n\r\n  // Responsive hooks\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"md\"));\r\n\r\n  // Get all teachers for bulk operations\r\n  const allTeachers = useTeachers();\r\n  const isTeacherListLoading =\r\n    allTeachers.isLoading || allTeachers.isValidating;\r\n\r\n  const {\r\n    data: timeslotResponse,\r\n    isLoading: isTimeslotLoading,\r\n    isValidating: isTimeslotValidating,\r\n  } = useSWR(\r\n    semester && academicYear\r\n      ? [\"timeslots-by-term\", academicYear, semester]\r\n      : null,\r\n    async ([, year, sem]) => {\r\n      return await getTimeslotsByTermAction({\r\n        AcademicYear: parseInt(year),\r\n        Semester: `SEMESTER_${sem}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n      });\r\n    },\r\n    { revalidateOnFocus: false },\r\n  );\r\n\r\n  const {\r\n    data: classDataResponse,\r\n    isLoading: isClassLoading,\r\n    isValidating: isClassValidating,\r\n  } = useSWR(\r\n    selectedTeacherId && semester && academicYear\r\n      ? [\"class-schedules-teacher\", selectedTeacherId, academicYear, semester]\r\n      : null,\r\n    async ([, teacherId, year, sem]) => {\r\n      return await getClassSchedulesAction({\r\n        TeacherID: teacherId,\r\n        AcademicYear: parseInt(year),\r\n        Semester: `SEMESTER_${sem}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n      });\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n      keepPreviousData: true,\r\n    },\r\n  );\r\n\r\n  const {\r\n    data: teacherResponse,\r\n    isLoading: isTeacherLoading,\r\n    isValidating: isTeacherValidating,\r\n  } = useSWR(\r\n    selectedTeacherId ? [\"teacher-by-id\", selectedTeacherId] : null,\r\n    async ([, teacherId]) => {\r\n      return await getTeacherByIdAction({ TeacherID: teacherId });\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n    },\r\n  );\r\n\r\n  const hasTimeslotError =\r\n    !timeslotResponse ||\r\n    (\"success\" in (timeslotResponse as object) &&\r\n      !(timeslotResponse as ActionResult<unknown>).success);\r\n  const hasClassError =\r\n    classDataResponse &&\r\n    \"success\" in (classDataResponse as object) &&\r\n    !(classDataResponse as ActionResult<unknown>).success;\r\n  const hasTeacherError =\r\n    teacherResponse &&\r\n    \"success\" in (teacherResponse as object) &&\r\n    !(teacherResponse as ActionResult<unknown>).success;\r\n\r\n  const classData = useMemo((): ScheduleEntry[] => {\r\n    const response = classDataResponse as\r\n      | ActionResult<ScheduleEntry[]>\r\n      | undefined;\r\n    if (!response || !response.success || !response.data) {\r\n      return [];\r\n    }\r\n    return response.data;\r\n  }, [classDataResponse]);\r\n\r\n  const timeSlotData: TimeSlotTableData = useMemo(() => {\r\n    const response = timeslotResponse;\r\n    const timeslots =\r\n      response &&\r\n      typeof response === \"object\" &&\r\n      \"success\" in response &&\r\n      response.success &&\r\n      \"data\" in response &&\r\n      response.data\r\n        ? response.data\r\n        : undefined;\r\n    return createTimeSlotTableData(timeslots, classData);\r\n  }, [timeslotResponse, classData]);\r\n\r\n  const showLoadingOverlay =\r\n    isTimeslotLoading ||\r\n    isTimeslotValidating ||\r\n    (selectedTeacherId\r\n      ? isClassLoading ||\r\n        isClassValidating ||\r\n        isTeacherLoading ||\r\n        isTeacherValidating\r\n      : false);\r\n\r\n  const errors: string[] = [];\r\n  if (hasTimeslotError) {\r\n    errors.push(\"เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เนเธซเธฅเธ”เธเนเธญเธกเธนเธฅเธเธฒเธเน€เธฃเธตเธขเธเนเธ”เน\");\r\n  }\r\n  if (hasClassError && selectedTeacherId) {\r\n    errors.push(\"เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เนเธซเธฅเธ”เธ•เธฒเธฃเธฒเธเธชเธญเธเธเธญเธเธเธฃเธนเธ—เธตเนเน€เธฅเธทเธญเธเนเธ”เน\");\r\n  }\r\n  if (hasTeacherError && selectedTeacherId) {\r\n    errors.push(\"เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เนเธซเธฅเธ”เธเนเธญเธกเธนเธฅเธเธฃเธนเธ—เธตเนเน€เธฅเธทเธญเธเนเธ”เน\");\r\n  }\r\n\r\n  const ref = useRef<HTMLDivElement>(null);\r\n  const [isPDFExport, setIsPDFExport] = useState(false);\r\n\r\n  const teacherName = useMemo(() => {\r\n    if (\r\n      teacherResponse &&\r\n      \"success\" in teacherResponse &&\r\n      teacherResponse.success &&\r\n      teacherResponse.data\r\n    ) {\r\n      return formatTeacherName(teacherResponse.data);\r\n    }\r\n    return \"\";\r\n  }, [teacherResponse]);\r\n\r\n  const generatePDF = useReactToPrint({\r\n    contentRef: ref,\r\n    documentTitle: `เธ•เธฒเธฃเธฒเธเธชเธญเธ${teacherName ? teacherName : \"\"} ${semester}-${academicYear}`,\r\n  });\r\n\r\n  const handleExportPDF = () => {\r\n    setIsPDFExport(true);\r\n    setTimeout(() => {\r\n      generatePDF();\r\n      setIsPDFExport(false);\r\n    }, 1);\r\n  };\r\n\r\n  // Add print styles\r\n  useEffect(() => {\r\n    const style = document.createElement(\"style\");\r\n    style.textContent = `\r\n      @media print {\r\n        .no-print {\r\n          display: none !important;\r\n        }\r\n        .printable-table {\r\n          display: block !important;\r\n        }\r\n        .page-break {\r\n          page-break-after: always;\r\n        }\r\n        @page {\r\n          size: landscape;\r\n          margin: 1cm;\r\n        }\r\n        body {\r\n          print-color-adjust: exact;\r\n          -webkit-print-color-adjust: exact;\r\n        }\r\n      }\r\n      @media (max-width: 768px) {\r\n        .printable-table {\r\n          padding: 8px;\r\n        }\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n    return () => {\r\n      document.head.removeChild(style);\r\n    };\r\n  }, []);\r\n\r\n  // Bulk export handlers\r\n  const handleExportMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n    setExportMenuAnchor(event.currentTarget);\r\n  };\r\n\r\n  const handleExportMenuClose = () => {\r\n    setExportMenuAnchor(null);\r\n  };\r\n\r\n  const handleBulkExportExcel = () => {\r\n    if (selectedTeacherIds.length === 0 || !allTeachers.data) return;\r\n\r\n    const selectedTeachers = allTeachers.data.filter((t) =>\r\n      selectedTeacherIds.includes(t.TeacherID),\r\n    );\r\n\r\n    // Note: This requires fetching class data for all selected teachers\r\n    // For now, we'll use the export function from all-timeslot page\r\n    ExportTeacherTable(\r\n      timeSlotData as ExportTimeslotData,\r\n      selectedTeachers,\r\n      classData as ClassScheduleWithSummary[],\r\n      semester,\r\n      academicYear,\r\n    );\r\n    handleExportMenuClose();\r\n  };\r\n\r\n  const handleBulkPrint = () => {\r\n    handleExportMenuClose();\r\n    window.print();\r\n  };\r\n\r\n  // Open PDF customization dialog\r\n  const handleOpenPdfCustomization = () => {\r\n    if (selectedTeacherIds.length === 0) return;\r\n    handleExportMenuClose();\r\n    setShowPdfCustomization(true);\r\n  };\r\n\r\n  // Generate PDF with custom options\r\n  const handleBulkPDFGeneration = async (\r\n    customOptions?: Partial<BatchPDFOptions>,\r\n  ) => {\r\n    if (selectedTeacherIds.length === 0 || !allTeachers.data) return;\r\n\r\n    // Get selected teachers\r\n    const selectedTeachers = allTeachers.data.filter((t) =>\r\n      selectedTeacherIds.includes(t.TeacherID),\r\n    );\r\n\r\n    // For simplification, we'll use a single element approach\r\n    // In production, you'd need to fetch data for each teacher and render separate tables\r\n    const elements: HTMLElement[] = [];\r\n    const names: string[] = [];\r\n\r\n    for (const teacher of selectedTeachers) {\r\n      const teacherName = formatTeacherName(teacher);\r\n      names.push(teacherName);\r\n\r\n      // Create a temporary div with the timetable\r\n      const tempDiv = document.createElement(\"div\");\r\n      tempDiv.style.position = \"absolute\";\r\n      tempDiv.style.left = \"-9999px\";\r\n      tempDiv.style.top = \"0\";\r\n      tempDiv.style.width = \"1200px\";\r\n      tempDiv.innerHTML = `\r\n        <div style=\"padding: 20px; background: white;\">\r\n          <h2>เธ•เธฒเธฃเธฒเธเธชเธญเธ: ${teacherName}</h2>\r\n          <p>เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน ${semester}/${academicYear}</p>\r\n          <div id=\"temp-table-${teacher.TeacherID}\"></div>\r\n        </div>\r\n      `;\r\n      document.body.appendChild(tempDiv);\r\n      elements.push(tempDiv);\r\n    }\r\n\r\n    try {\r\n      await generateTeacherBatchPDF(\r\n        elements,\r\n        names,\r\n        semester,\r\n        academicYear,\r\n        customOptions,\r\n      );\r\n    } finally {\r\n      // Clean up temporary elements\r\n      elements.forEach((el) => el.remove());\r\n    }\r\n  };\r\n\r\n  const handleSelectTeacher = (teacherId: number | null) => {\r\n    setSelectedTeacherId(teacherId);\r\n  };\r\n\r\n  const disableExport = Boolean(\r\n    isClassLoading ||\r\n      isClassValidating ||\r\n      isTeacherLoading ||\r\n      isTeacherValidating ||\r\n      !selectedTeacherId ||\r\n      hasClassError ||\r\n      hasTimeslotError ||\r\n      hasTeacherError,\r\n  );\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" sx={{ py: 3 }}>\r\n      <Stack spacing={3}>\r\n        {/* Selector Section */}\r\n        {showLoadingOverlay ? (\r\n          <Skeleton\r\n            variant=\"rectangular\"\r\n            height={60}\r\n            sx={{ borderRadius: 1 }}\r\n          />\r\n        ) : (\r\n          <SelectTeacher\r\n            setTeacherID={handleSelectTeacher}\r\n            currentTeacher={\r\n              teacherResponse &&\r\n              \"success\" in teacherResponse &&\r\n              teacherResponse.success\r\n                ? teacherResponse.data\r\n                : null\r\n            }\r\n            disabled={!isAdmin}\r\n          />\r\n        )}\r\n\r\n        {/* Bulk Export Filter Section - Admin only */}\r\n        {isAdmin &&\r\n          (isSessionLoading || isTeacherListLoading ? (\r\n            <Paper\r\n              elevation={1}\r\n              sx={{ p: 2 }}\r\n              className=\"no-print\"\r\n              data-testid=\"bulk-export-skeleton\"\r\n            >\r\n              <Skeleton variant=\"text\" width={200} height={32} />\r\n              <Skeleton\r\n                variant=\"rectangular\"\r\n                height={48}\r\n                sx={{ mt: 1, borderRadius: 1 }}\r\n              />\r\n              <Stack direction=\"row\" spacing={1} sx={{ mt: 2 }}>\r\n                <Skeleton variant=\"rectangular\" width={120} height={36} />\r\n                <Skeleton variant=\"circular\" width={36} height={36} />\r\n                <Skeleton variant=\"circular\" width={36} height={36} />\r\n              </Stack>\r\n            </Paper>\r\n          ) : (\r\n            <Paper\r\n              elevation={1}\r\n              sx={{ p: 2 }}\r\n              className=\"no-print\"\r\n              data-testid=\"bulk-export-section\"\r\n            >\r\n              <Box\r\n                sx={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  alignItems: \"center\",\r\n                  mb: showBulkFilters ? 2 : 0,\r\n                }}\r\n              >\r\n                <Typography\r\n                  variant=\"h6\"\r\n                  sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}\r\n                >\r\n                  <FilterListIcon />\r\n                  เธเธฒเธฃเธชเนเธเธญเธญเธเนเธเธเธเธฅเธธเนเธก\r\n                </Typography>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  endIcon={\r\n                    showBulkFilters ? <ExpandLessIcon /> : <ExpandMoreIcon />\r\n                  }\r\n                  onClick={() => setShowBulkFilters(!showBulkFilters)}\r\n                >\r\n                  {showBulkFilters ? \"เธเนเธญเธ\" : \"เนเธชเธ”เธ\"}เธ•เธฑเธงเธเธฃเธญเธ\r\n                </Button>\r\n              </Box>\r\n\r\n              <Collapse in={showBulkFilters}>\r\n                <Stack\r\n                  spacing={2}\r\n                  direction={isMobile ? \"column\" : \"row\"}\r\n                  sx={{ mt: 2 }}\r\n                >\r\n                  {/* Teacher Multi-Select */}\r\n                  <FormControl sx={{ flex: 1 }}>\r\n                    <InputLabel>เน€เธฅเธทเธญเธเธเธฃเธน</InputLabel>\r\n                    <Select\r\n                      multiple\r\n                      value={selectedTeacherIds}\r\n                      onChange={(e) =>\r\n                        setSelectedTeacherIds(e.target.value as number[])\r\n                      }\r\n                      input={<OutlinedInput label=\"เน€เธฅเธทเธญเธเธเธฃเธน\" />}\r\n                      data-testid=\"teacher-multi-select\"\r\n                      renderValue={(selected) => (\r\n                        <Box\r\n                          sx={{ display: \"flex\", flexWrap: \"wrap\", gap: 0.5 }}\r\n                        >\r\n                          {selected.map((id) => {\r\n                            const teacher = allTeachers.data?.find(\r\n                              (t) => t.TeacherID === id,\r\n                            );\r\n                            const name = teacher\r\n                              ? formatTeacherName(teacher)\r\n                              : `เธเธฃเธน ${id}`;\r\n                            return <Chip key={id} label={name} size=\"small\" />;\r\n                          })}\r\n                        </Box>\r\n                      )}\r\n                      disabled={allTeachers.isLoading || !allTeachers.data}\r\n                    >\r\n                      {allTeachers.data?.map((teacher) => (\r\n                        <MenuItem\r\n                          key={teacher.TeacherID}\r\n                          value={teacher.TeacherID}\r\n                        >\r\n                          <Checkbox\r\n                            checked={selectedTeacherIds.includes(\r\n                              teacher.TeacherID,\r\n                            )}\r\n                          />\r\n                          <ListItemText primary={formatTeacherName(teacher)} />\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n\r\n                  {/* Action Buttons */}\r\n                  <Stack\r\n                    direction=\"row\"\r\n                    spacing={1}\r\n                    sx={{ alignItems: \"flex-start\" }}\r\n                  >\r\n                    {selectedTeacherIds.length > 0 && (\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        onClick={() => setSelectedTeacherIds([])}\r\n                      >\r\n                        เธฅเนเธฒเธเธ•เธฑเธงเธเธฃเธญเธ\r\n                      </Button>\r\n                    )}\r\n                    <Tooltip title=\"เธชเนเธเธญเธญเธเธเธฃเธนเธ—เธตเนเน€เธฅเธทเธญเธ\">\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={\r\n                          selectedTeacherIds.length === 0 || hasTimeslotError\r\n                        }\r\n                        onClick={handleBulkExportExcel}\r\n                        startIcon={<GridOnIcon />}\r\n                        data-testid=\"bulk-export-excel-button\"\r\n                      >\r\n                        {isMobile ? \"Excel\" : \"เธชเนเธเธญเธญเธ Excel\"}\r\n                      </Button>\r\n                    </Tooltip>\r\n                    <Tooltip title=\"เธเธดเธกเธเนเธเธฃเธนเธ—เธตเนเน€เธฅเธทเธญเธ\">\r\n                      <IconButton\r\n                        color=\"primary\"\r\n                        disabled={\r\n                          selectedTeacherIds.length === 0 || hasTimeslotError\r\n                        }\r\n                        onClick={handleBulkPrint}\r\n                        data-testid=\"bulk-export-print-button\"\r\n                      >\r\n                        <PrintIcon />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title=\"เธ•เธฑเธงเน€เธฅเธทเธญเธเน€เธเธดเนเธกเน€เธ•เธดเธก\">\r\n                      <IconButton\r\n                        onClick={handleExportMenuOpen}\r\n                        disabled={selectedTeacherIds.length === 0}\r\n                        data-testid=\"teacher-export-menu-button\"\r\n                      >\r\n                        <MoreVertIcon />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  </Stack>\r\n                </Stack>\r\n\r\n                {/* Export Options Menu */}\r\n                <Menu\r\n                  anchorEl={exportMenuAnchor}\r\n                  open={Boolean(exportMenuAnchor)}\r\n                  onClose={handleExportMenuClose}\r\n                  data-testid=\"teacher-export-menu\"\r\n                >\r\n                  <MenuItem\r\n                    onClick={handleBulkExportExcel}\r\n                    data-testid=\"export-excel-option\"\r\n                  >\r\n                    <GridOnIcon sx={{ mr: 1 }} />\r\n                    เธชเนเธเธญเธญเธ Excel\r\n                  </MenuItem>\r\n                  <MenuItem\r\n                    onClick={handleBulkPrint}\r\n                    data-testid=\"export-print-option\"\r\n                  >\r\n                    <PrintIcon sx={{ mr: 1 }} />\r\n                    เธเธดเธกเธเนเธ—เธฑเนเธเธซเธกเธ”\r\n                  </MenuItem>\r\n                  <MenuItem\r\n                    onClick={handleOpenPdfCustomization}\r\n                    data-testid=\"export-custom-pdf-option\"\r\n                  >\r\n                    <PictureAsPdfIcon sx={{ mr: 1 }} />\r\n                    เธชเธฃเนเธฒเธ PDF (เธเธณเธซเธเธ”เธเนเธฒเน€เธญเธ)\r\n                  </MenuItem>\r\n                </Menu>\r\n\r\n                {/* PDF Customization Dialog */}\r\n                <PDFCustomizationDialog\r\n                  open={showPdfCustomization}\r\n                  onClose={() => setShowPdfCustomization(false)}\r\n                  onExport={(options) => void handleBulkPDFGeneration(options)}\r\n                  title=\"เธเธณเธซเธเธ”เธเนเธฒเธเธฒเธฃเธชเนเธเธญเธญเธ PDF เธ•เธฒเธฃเธฒเธเธชเธญเธเธเธฃเธน\"\r\n                  maxTablesPerPage={4}\r\n                />\r\n\r\n                {/* Selection Summary */}\r\n                {selectedTeacherIds.length > 0 && (\r\n                  <Box\r\n                    sx={{\r\n                      mt: 2,\r\n                      p: 1,\r\n                      bgcolor: \"action.hover\",\r\n                      borderRadius: 1,\r\n                    }}\r\n                  >\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      เน€เธฅเธทเธญเธเนเธฅเนเธง {selectedTeacherIds.length} เธเธฃเธน\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n              </Collapse>\r\n            </Paper>\r\n          ))}\r\n\r\n        {/* Error Display */}\r\n        {errors.length > 0 && (\r\n          <Stack spacing={2}>\r\n            {errors.map((message) => (\r\n              <Alert key={message} severity=\"error\">\r\n                <AlertTitle>เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”</AlertTitle>\r\n                {message}\r\n              </Alert>\r\n            ))}\r\n          </Stack>\r\n        )}\r\n\r\n        {/* Empty State - No Teacher Selected */}\r\n        {!showLoadingOverlay && !selectedTeacherId && errors.length === 0 && (\r\n          <Paper\r\n            elevation={0}\r\n            sx={{\r\n              p: 6,\r\n              textAlign: \"center\",\r\n              bgcolor: \"action.hover\",\r\n              borderRadius: 2,\r\n            }}\r\n          >\r\n            <SchoolIcon sx={{ fontSize: 64, color: \"text.secondary\", mb: 2 }} />\r\n            <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\r\n              เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธเธฃเธน\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              เน€เธฅเธทเธญเธเธเธฃเธนเธเธฒเธเธฃเธฒเธขเธเธฒเธฃเธ”เนเธฒเธเธเธเน€เธเธทเนเธญเธ”เธนเธ•เธฒเธฃเธฒเธเธชเธญเธ\r\n            </Typography>\r\n          </Paper>\r\n        )}\r\n\r\n        {/* Timetable Content */}\r\n        {selectedTeacherId &&\r\n          teacherResponse &&\r\n          !hasClassError &&\r\n          !hasTimeslotError &&\r\n          !hasTeacherError && (\r\n            <Stack spacing={2}>\r\n              {/* Teacher Info & Export Actions */}\r\n              <Paper elevation={1} sx={{ p: 2 }}>\r\n                <Box\r\n                  sx={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    alignItems: \"center\",\r\n                    flexWrap: \"wrap\",\r\n                    gap: 2,\r\n                  }}\r\n                >\r\n                  <Box>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                      เธ•เธฒเธฃเธฒเธเธชเธญเธ{teacherName && `: ${teacherName}`}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน {semester}/{academicYear}\r\n                    </Typography>\r\n                  </Box>\r\n                  {isAdmin && (\r\n                    <Stack direction=\"row\" spacing={1}>\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"success\"\r\n                        startIcon={<DownloadIcon />}\r\n                        disabled={disableExport}\r\n                        data-testid=\"teacher-export-excel-button\"\r\n                        onClick={() => {\r\n                          if (\r\n                            teacherResponse &&\r\n                            \"success\" in teacherResponse &&\r\n                            teacherResponse.success &&\r\n                            teacherResponse.data\r\n                          ) {\r\n                            ExportTeacherTable(\r\n                              timeSlotData as ExportTimeslotData,\r\n                              [teacherResponse.data],\r\n                              classData as ClassScheduleWithSummary[],\r\n                              semester,\r\n                              academicYear,\r\n                            );\r\n                          }\r\n                        }}\r\n                      >\r\n                        เธเธณเธญเธญเธ Excel\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        color=\"success\"\r\n                        startIcon={<PictureAsPdfIcon />}\r\n                        disabled={disableExport}\r\n                        data-testid=\"teacher-export-pdf-button\"\r\n                        onClick={handleExportPDF}\r\n                      >\r\n                        เธเธณเธญเธญเธ PDF\r\n                      </Button>\r\n                    </Stack>\r\n                  )}\r\n                </Box>\r\n              </Paper>\r\n\r\n              {/* Timetable */}\r\n              {showLoadingOverlay ? (\r\n                <Skeleton\r\n                  variant=\"rectangular\"\r\n                  height={400}\r\n                  sx={{ borderRadius: 1 }}\r\n                />\r\n              ) : (\r\n                <Paper elevation={1} sx={{ p: 2, overflow: \"auto\" }}>\r\n                  <TimeSlot timeSlotData={timeSlotData} />\r\n                </Paper>\r\n              )}\r\n\r\n              {/* Hidden PDF Export */}\r\n              <div\r\n                ref={ref}\r\n                className=\"printFont mt-5 flex flex-col items-center justify-center p-10\"\r\n                style={{ display: isPDFExport ? \"flex\" : \"none\" }}\r\n              >\r\n                <div className=\"mb-8 flex gap-10\">\r\n                  <p>เธ•เธฒเธฃเธฒเธเธชเธญเธ {teacherName}</p>\r\n                  <p>เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน {`${semester}/${academicYear}`}</p>\r\n                </div>\r\n                <TimeSlot timeSlotData={timeSlotData} />\r\n                <div className=\"mt-8 flex gap-2\">\r\n                  <p>เธฅเธเธเธทเนเธญ..............................เธฃเธญเธเธเธญ.เธงเธดเธเธฒเธเธฒเธฃ</p>\r\n                  <p>เธฅเธเธเธทเนเธญ..............................เธเธนเนเธญเธณเธเธงเธขเธเธฒเธฃ</p>\r\n                </div>\r\n              </div>\r\n            </Stack>\r\n          )}\r\n      </Stack>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default TeacherTablePage;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\ConfigureTimeslotsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\CopySemesterModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1804,1807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1804,1807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * Copy Semester Modal\r\n * Quick modal for copying semesters\r\n */\r\n\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  TextField,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Box,\r\n  FormGroup,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Alert,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport { enqueueSnackbar } from \"notistack\";\r\nimport { copySemesterAction } from \"@/features/semester/application/actions/semester.actions\";\r\nimport type { SemesterDTO } from \"@/features/semester/application/schemas/semester.schemas\";\r\n\r\ntype Props = {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  sourceSemester: SemesterDTO | null;\r\n  onSuccess: (semester: SemesterDTO) => void;\r\n};\r\n\r\nexport function CopySemesterModal({\r\n  open,\r\n  onClose,\r\n  sourceSemester,\r\n  onSuccess,\r\n}: Props) {\r\n  const [targetYear, setTargetYear] = useState(new Date().getFullYear() + 543);\r\n  const [targetSemester, setTargetSemester] = useState(1);\r\n  const [copyConfig, setCopyConfig] = useState(true);\r\n  const [copyTimeslots, setCopyTimeslots] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleCopy = async () => {\r\n    if (!sourceSemester) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const result = await copySemesterAction({\r\n        sourceConfigId: sourceSemester.configId,\r\n        targetAcademicYear: targetYear,\r\n        targetSemester,\r\n        copyConfig,\r\n        copyTimeslots,\r\n      });\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error?.message || \"Failed to copy semester\");\r\n      }\r\n\r\n      enqueueSnackbar(\"เธเธฑเธ”เธฅเธญเธเธ เธฒเธเน€เธฃเธตเธขเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      onSuccess(result.data);\r\n      onClose();\r\n    } catch (error: any) {\r\n      enqueueSnackbar(error.message || \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธเธฑเธ”เธฅเธญเธ\", {\r\n        variant: \"error\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>เธเธฑเธ”เธฅเธญเธเธ เธฒเธเน€เธฃเธตเธขเธ</DialogTitle>\r\n      <DialogContent>\r\n        {sourceSemester && (\r\n          <Box sx={{ mt: 2 }}>\r\n            <Alert severity=\"info\" sx={{ mb: 2 }}>\r\n              เธเธฑเธ”เธฅเธญเธเธเธฒเธ: เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน {sourceSemester.semester}/\r\n              {sourceSemester.academicYear}\r\n            </Alert>\r\n\r\n            <TextField\r\n              fullWidth\r\n              label=\"เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒเนเธซเธกเน\"\r\n              type=\"number\"\r\n              value={targetYear}\r\n              onChange={(e) => setTargetYear(Number(e.target.value))}\r\n              sx={{ mb: 2 }}\r\n            />\r\n\r\n            <FormControl fullWidth sx={{ mb: 2 }}>\r\n              <InputLabel>เธ เธฒเธเน€เธฃเธตเธขเธเนเธซเธกเน</InputLabel>\r\n              <Select\r\n                value={targetSemester}\r\n                label=\"เธ เธฒเธเน€เธฃเธตเธขเธเนเธซเธกเน\"\r\n                onChange={(e) => setTargetSemester(Number(e.target.value))}\r\n              >\r\n                <MenuItem value={1}>เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน 1</MenuItem>\r\n                <MenuItem value={2}>เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน 2</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n\r\n            <FormGroup>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={copyConfig}\r\n                    onChange={(e) => setCopyConfig(e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"เธเธฑเธ”เธฅเธญเธเธเธฒเธฃเธ•เธฑเนเธเธเนเธฒ\"\r\n              />\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={copyTimeslots}\r\n                    onChange={(e) => setCopyTimeslots(e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"เธเธฑเธ”เธฅเธญเธเธเนเธงเธเน€เธงเธฅเธฒ\"\r\n              />\r\n            </FormGroup>\r\n          </Box>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} disabled={loading}>\r\n          เธขเธเน€เธฅเธดเธ\r\n        </Button>\r\n        <Button\r\n          onClick={handleCopy}\r\n          variant=\"contained\"\r\n          disabled={loading}\r\n          startIcon={loading && <CircularProgress size={20} />}\r\n        >\r\n          เธเธฑเธ”เธฅเธญเธ\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\CreateSemesterWizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\PublishReadiness.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SelectSemesterPageSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SemesterAnalyticsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SemesterAnalyticsDashboardSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SemesterCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SemesterCardSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SemesterExportButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'title' is assigned a value but never used. Allowed unused args must match /^_/u.","line":42,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'timestamp' is assigned a value but never used.","line":144,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":144,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * SemesterExportButton Component\r\n * Export semester data to CSV/Excel with filters\r\n */\r\n\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Menu,\r\n  MenuItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport {\r\n  FileDownload as DownloadIcon,\r\n  TableChart as ExcelIcon,\r\n  Description as CSVIcon,\r\n  PictureAsPdf as PDFIcon,\r\n} from \"@mui/icons-material\";\r\nimport { enqueueSnackbar } from \"notistack\";\r\nimport { type SemesterDTO } from \"@/features/semester/application/schemas/semester.schemas\";\r\nimport {\r\n  arrayToCSV,\r\n  arrayToExcelHTML,\r\n  downloadCSV,\r\n  downloadExcel,\r\n  formatThaiDate,\r\n  formatSemester,\r\n  formatStatusThai,\r\n} from \"@/utils/export.utils\";\r\n\r\ntype Props = {\r\n  semesters: SemesterDTO[];\r\n  title?: string;\r\n};\r\n\r\nexport function SemesterExportButton({\r\n  semesters,\r\n  title = \"Semester Export\",\r\n}: Props) {\r\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n\r\n  const handleOpenMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const prepareExportData = () => {\r\n    return semesters.map((semester) => ({\r\n      เธ เธฒเธเน€เธฃเธตเธขเธ: formatSemester(semester.semester, semester.academicYear),\r\n      เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ: semester.academicYear,\r\n      เธชเธ–เธฒเธเธฐ: formatStatusThai(semester.status),\r\n      \"เธเธงเธฒเธกเธชเธกเธเธนเธฃเธ“เน (%)\": semester.configCompleteness,\r\n      เธซเนเธญเธเน€เธฃเธตเธขเธ: semester.classCount || 0,\r\n      เธเธฃเธน: semester.teacherCount || 0,\r\n      เธงเธดเธเธฒ: semester.subjectCount || 0,\r\n      เธซเนเธญเธ: semester.roomCount || 0,\r\n      เธเธฑเธเธซเธกเธธเธ”: semester.isPinned ? \"เนเธเน\" : \"เนเธกเน\",\r\n      เน€เธเนเธฒเธ–เธถเธเธฅเนเธฒเธชเธธเธ”: semester.lastAccessedAt\r\n        ? formatThaiDate(semester.lastAccessedAt)\r\n        : \"-\",\r\n      เธชเธฃเนเธฒเธเน€เธกเธทเนเธญ: formatThaiDate(semester.createdAt),\r\n      เธญเธฑเธเน€เธ”เธ•เน€เธกเธทเนเธญ: formatThaiDate(semester.updatedAt),\r\n    }));\r\n  };\r\n\r\n  const handleExportCSV = () => {\r\n    try {\r\n      setIsExporting(true);\r\n      const data = prepareExportData();\r\n      const csv = arrayToCSV(data);\r\n      const timestamp = new Date().toISOString().split(\"T\")[0];\r\n      downloadCSV(csv, `semesters-${timestamp}.csv`);\r\n      enqueueSnackbar(`เธชเนเธเธญเธญเธ CSV เธชเธณเน€เธฃเนเธ (${semesters.length} เธฃเธฒเธขเธเธฒเธฃ)`, {\r\n        variant: \"success\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Export CSV error:\", error);\r\n      enqueueSnackbar(\"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธชเนเธเธญเธญเธ CSV\", { variant: \"error\" });\r\n    } finally {\r\n      setIsExporting(false);\r\n      handleCloseMenu();\r\n    }\r\n  };\r\n\r\n  const handleExportExcel = () => {\r\n    try {\r\n      setIsExporting(true);\r\n      const data = prepareExportData();\r\n      const timestamp = new Date().toISOString().split(\"T\")[0];\r\n      const html = arrayToExcelHTML(\r\n        data,\r\n        undefined,\r\n        `เธฃเธฒเธขเธเธฒเธฃเธ เธฒเธเน€เธฃเธตเธขเธ - ${timestamp}`,\r\n      );\r\n      downloadExcel(html, `semesters-${timestamp}.xls`);\r\n      enqueueSnackbar(`เธชเนเธเธญเธญเธ Excel เธชเธณเน€เธฃเนเธ (${semesters.length} เธฃเธฒเธขเธเธฒเธฃ)`, {\r\n        variant: \"success\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Export Excel error:\", error);\r\n      enqueueSnackbar(\"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธชเนเธเธญเธญเธ Excel\", { variant: \"error\" });\r\n    } finally {\r\n      setIsExporting(false);\r\n      handleCloseMenu();\r\n    }\r\n  };\r\n\r\n  const handleExportSummary = () => {\r\n    try {\r\n      setIsExporting(true);\r\n\r\n      // Create summary statistics\r\n      const totalSemesters = semesters.length;\r\n      const byStatus = semesters.reduce(\r\n        (acc, s) => {\r\n          acc[s.status] = (acc[s.status] || 0) + 1;\r\n          return acc;\r\n        },\r\n        {} as Record<string, number>,\r\n      );\r\n\r\n      const avgCompleteness =\r\n        semesters.reduce((sum, s) => sum + s.configCompleteness, 0) /\r\n        totalSemesters;\r\n\r\n      const summary = {\r\n        เธ—เธฑเนเธเธซเธกเธ”: totalSemesters,\r\n        เนเธเธเธฃเนเธฒเธ: byStatus.DRAFT || 0,\r\n        เน€เธเธขเนเธเธฃเน: byStatus.PUBLISHED || 0,\r\n        เธฅเนเธญเธ: byStatus.LOCKED || 0,\r\n        เน€เธเนเธเธ–เธฒเธงเธฃ: byStatus.ARCHIVED || 0,\r\n        เธเธงเธฒเธกเธชเธกเธเธนเธฃเธ“เนเน€เธเธฅเธตเนเธข: `${avgCompleteness.toFixed(1)}%`,\r\n        เธชเธฃเนเธฒเธเน€เธกเธทเนเธญ: formatThaiDate(new Date()),\r\n      };\r\n\r\n      const timestamp = new Date().toISOString().split(\"T\")[0];\r\n      const html = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <title>เธชเธฃเธธเธเธ เธฒเธเน€เธฃเธตเธขเธ</title>\r\n  <style>\r\n    body {\r\n      font-family: 'Sarabun', Arial, sans-serif;\r\n      margin: 40px;\r\n      color: #333;\r\n    }\r\n    h1 { color: #2c3e50; border-bottom: 3px solid #4CAF50; padding-bottom: 10px; }\r\n    h2 { color: #34495e; margin-top: 30px; }\r\n    table {\r\n      border-collapse: collapse;\r\n      width: 100%;\r\n      margin: 20px 0;\r\n    }\r\n    th, td {\r\n      border: 1px solid #ddd;\r\n      padding: 12px;\r\n      text-align: left;\r\n    }\r\n    th {\r\n      background-color: #4CAF50;\r\n      color: white;\r\n      font-weight: bold;\r\n    }\r\n    tr:nth-child(even) {\r\n      background-color: #f9f9f9;\r\n    }\r\n    .summary-grid {\r\n      display: grid;\r\n      grid-template-columns: repeat(3, 1fr);\r\n      gap: 20px;\r\n      margin: 20px 0;\r\n    }\r\n    .summary-card {\r\n      border: 1px solid #ddd;\r\n      padding: 15px;\r\n      border-radius: 8px;\r\n      text-align: center;\r\n    }\r\n    .summary-card h3 {\r\n      margin: 0 0 10px 0;\r\n      color: #7f8c8d;\r\n      font-size: 14px;\r\n    }\r\n    .summary-card p {\r\n      margin: 0;\r\n      font-size: 28px;\r\n      font-weight: bold;\r\n      color: #2c3e50;\r\n    }\r\n    @media print {\r\n      body { margin: 20px; }\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <h1>เธชเธฃเธธเธเธเนเธญเธกเธนเธฅเธ เธฒเธเน€เธฃเธตเธขเธ</h1>\r\n  <p><strong>เธงเธฑเธเธ—เธตเนเธชเธฃเนเธฒเธเธฃเธฒเธขเธเธฒเธ:</strong> ${formatThaiDate(new Date())}</p>\r\n  \r\n  <h2>เธชเธฃเธธเธเธ เธฒเธเธฃเธงเธก</h2>\r\n  <div class=\"summary-grid\">\r\n    <div class=\"summary-card\">\r\n      <h3>เธ—เธฑเนเธเธซเธกเธ”</h3>\r\n      <p>${summary.เธ—เธฑเนเธเธซเธกเธ”}</p>\r\n    </div>\r\n    <div class=\"summary-card\">\r\n      <h3>เน€เธเธขเนเธเธฃเน</h3>\r\n      <p>${summary.เน€เธเธขเนเธเธฃเน}</p>\r\n    </div>\r\n    <div class=\"summary-card\">\r\n      <h3>เธเธงเธฒเธกเธชเธกเธเธนเธฃเธ“เนเน€เธเธฅเธตเนเธข</h3>\r\n      <p>${summary.เธเธงเธฒเธกเธชเธกเธเธนเธฃเธ“เนเน€เธเธฅเธตเนเธข}</p>\r\n    </div>\r\n  </div>\r\n\r\n  <h2>เธเธณเธเธงเธเธ•เธฒเธกเธชเธ–เธฒเธเธฐ</h2>\r\n  <table>\r\n    <tr><th>เธชเธ–เธฒเธเธฐ</th><th>เธเธณเธเธงเธ</th></tr>\r\n    <tr><td>เนเธเธเธฃเนเธฒเธ</td><td>${summary.เนเธเธเธฃเนเธฒเธ}</td></tr>\r\n    <tr><td>เน€เธเธขเนเธเธฃเน</td><td>${summary.เน€เธเธขเนเธเธฃเน}</td></tr>\r\n    <tr><td>เธฅเนเธญเธ</td><td>${summary.เธฅเนเธญเธ}</td></tr>\r\n    <tr><td>เน€เธเนเธเธ–เธฒเธงเธฃ</td><td>${summary.เน€เธเนเธเธ–เธฒเธงเธฃ}</td></tr>\r\n  </table>\r\n\r\n  <h2>เธฃเธฒเธขเธฅเธฐเน€เธญเธตเธขเธ”เธ—เธฑเนเธเธซเธกเธ”</h2>\r\n  ${arrayToExcelHTML(prepareExportData())}\r\n</body>\r\n</html>\r\n      `;\r\n\r\n      const blob = new Blob([html], { type: \"text/html\" });\r\n      const url = URL.createObjectURL(blob);\r\n      const printWindow = window.open(url, \"_blank\");\r\n\r\n      if (printWindow) {\r\n        printWindow.addEventListener(\"load\", () => {\r\n          setTimeout(() => {\r\n            printWindow.print();\r\n          }, 500);\r\n        });\r\n      }\r\n\r\n      enqueueSnackbar(\"เน€เธเธดเธ”เธซเธเนเธฒเธ•เนเธฒเธเธเธดเธกเธเนเธชเธณเธซเธฃเธฑเธเธชเนเธเธญเธญเธ PDF\", {\r\n        variant: \"info\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Export summary error:\", error);\r\n      enqueueSnackbar(\"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธชเธฃเนเธฒเธเธชเธฃเธธเธ\", { variant: \"error\" });\r\n    } finally {\r\n      setIsExporting(false);\r\n      handleCloseMenu();\r\n    }\r\n  };\r\n\r\n  if (semesters.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        variant=\"outlined\"\r\n        startIcon={\r\n          isExporting ? <CircularProgress size={20} /> : <DownloadIcon />\r\n        }\r\n        onClick={handleOpenMenu}\r\n        disabled={isExporting}\r\n      >\r\n        เธชเนเธเธญเธญเธเธเนเธญเธกเธนเธฅ\r\n      </Button>\r\n\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleCloseMenu}\r\n      >\r\n        <MenuItem onClick={handleExportCSV}>\r\n          <ListItemIcon>\r\n            <CSVIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText>เธชเนเธเธญเธญเธ CSV</ListItemText>\r\n        </MenuItem>\r\n\r\n        <MenuItem onClick={handleExportExcel}>\r\n          <ListItemIcon>\r\n            <ExcelIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText>เธชเนเธเธญเธญเธ Excel</ListItemText>\r\n        </MenuItem>\r\n\r\n        <MenuItem onClick={handleExportSummary}>\r\n          <ListItemIcon>\r\n            <PDFIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText>เธเธดเธกเธเนเธชเธฃเธธเธ (PDF)</ListItemText>\r\n        </MenuItem>\r\n      </Menu>\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SemesterFilters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SortIcon' is defined but never used.","line":21,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2810,2813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2810,2813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":137,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4159,4162],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4159,4162],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * Semester Filters Component\r\n * Search, status chips, year dropdown, and sort controls\r\n */\r\n\r\nimport React from \"react\";\r\nimport {\r\n  Box,\r\n  TextField,\r\n  InputAdornment,\r\n  Chip,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  ToggleButtonGroup,\r\n  ToggleButton,\r\n} from \"@mui/material\";\r\nimport { Search as SearchIcon, Sort as SortIcon } from \"@mui/icons-material\";\r\nimport type { SemesterFilterSchema } from \"@/features/semester/application/schemas/semester.schemas\";\r\nimport type { InferOutput } from \"valibot\";\r\n\r\ntype Props = {\r\n  filters: InferOutput<typeof SemesterFilterSchema>;\r\n  onFiltersChange: (filters: InferOutput<typeof SemesterFilterSchema>) => void;\r\n};\r\n\r\nexport function SemesterFilters({ filters, onFiltersChange }: Props) {\r\n  const status = filters.status || \"ALL\";\r\n  const search = filters.search || \"\";\r\n  const year = filters.year;\r\n  const sortBy = filters.sortBy || \"recent\";\r\n  const sortOrder = filters.sortOrder || \"desc\";\r\n\r\n  const availableYears = [2566, 2567, 2568, 2569, 2570];\r\n  const statusOptions: Array<\r\n    \"ALL\" | \"DRAFT\" | \"PUBLISHED\" | \"LOCKED\" | \"ARCHIVED\"\r\n  > = [\"ALL\", \"DRAFT\", \"PUBLISHED\", \"LOCKED\", \"ARCHIVED\"];\r\n\r\n  const sortOptions = [\r\n    { value: \"recent\", label: \"เธฅเนเธฒเธชเธธเธ”\" },\r\n    { value: \"name\", label: \"เธเธทเนเธญ\" },\r\n    { value: \"status\", label: \"เธชเธ–เธฒเธเธฐ\" },\r\n    { value: \"year\", label: \"เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ\" },\r\n    { value: \"completeness\", label: \"เธเธงเธฒเธกเธชเธกเธเธนเธฃเธ“เน\" },\r\n  ];\r\n\r\n  return (\r\n    <Box sx={{ mb: 3 }}>\r\n      {/* Search Bar */}\r\n      <TextField\r\n        fullWidth\r\n        placeholder=\"เธเนเธเธซเธฒเธ เธฒเธเน€เธฃเธตเธขเธ (เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ เธซเธฃเธทเธญ เธฃเธซเธฑเธช)...\"\r\n        value={search}\r\n        onChange={(e) =>\r\n          onFiltersChange({ ...filters, search: e.target.value })\r\n        }\r\n        InputProps={{\r\n          startAdornment: (\r\n            <InputAdornment position=\"start\">\r\n              <SearchIcon />\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n        sx={{ mb: 2 }}\r\n      />\r\n\r\n      {/* Status Chips */}\r\n      <Box sx={{ mb: 2, display: \"flex\", gap: 1, flexWrap: \"wrap\" }}>\r\n        <Chip\r\n          label=\"เธ—เธฑเนเธเธซเธกเธ”\"\r\n          onClick={() => onFiltersChange({ ...filters, status: undefined })}\r\n          color={status === \"ALL\" ? \"primary\" : \"default\"}\r\n          variant={status === \"ALL\" ? \"filled\" : \"outlined\"}\r\n        />\r\n        {statusOptions\r\n          .filter((s) => s !== \"ALL\")\r\n          .map((s) => (\r\n            <Chip\r\n              key={s}\r\n              label={\r\n                s === \"DRAFT\"\r\n                  ? \"เนเธเธเธฃเนเธฒเธ\"\r\n                  : s === \"PUBLISHED\"\r\n                    ? \"เน€เธเธขเนเธเธฃเน\"\r\n                    : s === \"LOCKED\"\r\n                      ? \"เธฅเนเธญเธ\"\r\n                      : \"เน€เธเนเธเธ–เธฒเธงเธฃ\"\r\n              }\r\n              onClick={() => onFiltersChange({ ...filters, status: s as any })}\r\n              color={status === s ? \"primary\" : \"default\"}\r\n              variant={status === s ? \"filled\" : \"outlined\"}\r\n            />\r\n          ))}\r\n      </Box>\r\n\r\n      {/* Filters Row */}\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          gap: 2,\r\n          flexWrap: \"wrap\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {/* Year Filter */}\r\n        <FormControl sx={{ minWidth: 200 }} size=\"small\">\r\n          <InputLabel>เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ</InputLabel>\r\n          <Select\r\n            value={year || \"\"}\r\n            label=\"เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ\"\r\n            onChange={(e) =>\r\n              onFiltersChange({\r\n                ...filters,\r\n                year: e.target.value ? Number(e.target.value) : undefined,\r\n              })\r\n            }\r\n          >\r\n            <MenuItem value=\"\">เธ—เธฑเนเธเธซเธกเธ”</MenuItem>\r\n            {availableYears.map((y) => (\r\n              <MenuItem key={y} value={y}>\r\n                {y}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n\r\n        {/* Sort By */}\r\n        <FormControl sx={{ minWidth: 200 }} size=\"small\">\r\n          <InputLabel>เน€เธฃเธตเธขเธเธ•เธฒเธก</InputLabel>\r\n          <Select\r\n            value={sortBy}\r\n            label=\"เน€เธฃเธตเธขเธเธ•เธฒเธก\"\r\n            onChange={(e) =>\r\n              onFiltersChange({ ...filters, sortBy: e.target.value as any })\r\n            }\r\n          >\r\n            {sortOptions.map((option) => (\r\n              <MenuItem key={option.value} value={option.value}>\r\n                {option.label}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n\r\n        {/* Sort Order */}\r\n        <ToggleButtonGroup\r\n          value={sortOrder}\r\n          exclusive\r\n          onChange={(_, newOrder) => {\r\n            if (newOrder) onFiltersChange({ ...filters, sortOrder: newOrder });\r\n          }}\r\n          size=\"small\"\r\n        >\r\n          <ToggleButton value=\"asc\">เธเนเธญเธข โ’ เธกเธฒเธ</ToggleButton>\r\n          <ToggleButton value=\"desc\">เธกเธฒเธ โ’ เธเนเธญเธข</ToggleButton>\r\n        </ToggleButtonGroup>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SemesterFiltersSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\SemesterSectionSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\TimeslotConfigurationStep.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\_components\\TimeslotConfigurationStep.tsx:120:5\n  118 |     }\n  119 |\n> 120 |     setErrors(newErrors);\n      |     ^^^^^^^^^ Avoid calling setState() directly within an effect\n  121 |\n  122 |     const isValid = Object.keys(newErrors).length === 0;\n  123 |     onValidationChange?.(isValid);","line":120,"column":5,"nodeType":null,"endLine":120,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * Timeslot Configuration Step Component\r\n * Form for configuring timeslots during semester creation\r\n *\r\n * Used in CreateSemesterWizard as Step 3\r\n */\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  TextField,\r\n  Typography,\r\n  FormGroup,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Alert,\r\n  Slider,\r\n  Stack,\r\n  Chip,\r\n  Paper,\r\n  Divider,\r\n} from \"@mui/material\";\r\nimport { AccessTime, CalendarMonth, Schedule } from \"@mui/icons-material\";\r\nimport type { CreateTimeslotsInput } from \"@/features/timeslot/application/schemas/timeslot.schemas\";\r\nimport type { day_of_week } from \"@/prisma/generated/client\";\r\n\r\ntype Props = {\r\n  academicYear: number;\r\n  semester: 1 | 2;\r\n  initialConfig?: Partial<CreateTimeslotsInput>;\r\n  onChange: (config: CreateTimeslotsInput) => void;\r\n  onValidationChange?: (isValid: boolean) => void;\r\n};\r\n\r\nconst DAYS: { value: day_of_week; label: string }[] = [\r\n  { value: \"MON\", label: \"เธเธฑเธเธ—เธฃเน\" },\r\n  { value: \"TUE\", label: \"เธญเธฑเธเธเธฒเธฃ\" },\r\n  { value: \"WED\", label: \"เธเธธเธ\" },\r\n  { value: \"THU\", label: \"เธเธคเธซเธฑเธชเธเธ”เธต\" },\r\n  { value: \"FRI\", label: \"เธจเธธเธเธฃเน\" },\r\n  { value: \"SAT\", label: \"เน€เธชเธฒเธฃเน\" },\r\n  { value: \"SUN\", label: \"เธญเธฒเธ—เธดเธ•เธขเน\" },\r\n];\r\n\r\nexport function TimeslotConfigurationStep({\r\n  academicYear,\r\n  semester,\r\n  initialConfig,\r\n  onChange,\r\n  onValidationChange,\r\n}: Props) {\r\n  const [config, setConfig] = useState<CreateTimeslotsInput>({\r\n    AcademicYear: academicYear,\r\n    Semester: semester === 1 ? \"SEMESTER_1\" : \"SEMESTER_2\",\r\n    Days: initialConfig?.Days || [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\"],\r\n    StartTime: initialConfig?.StartTime || \"08:00\",\r\n    Duration: initialConfig?.Duration || 50,\r\n    BreakDuration: initialConfig?.BreakDuration || 15,\r\n    TimeslotPerDay: initialConfig?.TimeslotPerDay || 8,\r\n    HasMinibreak: initialConfig?.HasMinibreak ?? true,\r\n    MiniBreak: initialConfig?.MiniBreak || { SlotNumber: 3, Duration: 10 },\r\n    BreakTimeslots: initialConfig?.BreakTimeslots || { Junior: 4, Senior: 5 },\r\n  });\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  // Validate configuration\r\n  useEffect(() => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    if (config.Days.length === 0) {\r\n      newErrors.days = \"เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธญเธขเนเธฒเธเธเนเธญเธข 1 เธงเธฑเธ\";\r\n    }\r\n\r\n    if (!config.StartTime.match(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)) {\r\n      newErrors.startTime = \"เธฃเธนเธเนเธเธเน€เธงเธฅเธฒเนเธกเนเธ–เธนเธเธ•เนเธญเธ (HH:MM)\";\r\n    }\r\n\r\n    if (config.Duration < 10 || config.Duration > 120) {\r\n      newErrors.duration = \"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธ•เนเธญเธเธฒเธเธ•เนเธญเธเธญเธขเธนเนเธฃเธฐเธซเธงเนเธฒเธ 10-120 เธเธฒเธ—เธต\";\r\n    }\r\n\r\n    if (config.BreakDuration < 5 || config.BreakDuration > 60) {\r\n      newErrors.breakDuration = \"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธเธฑเธเธ•เนเธญเธเธญเธขเธนเนเธฃเธฐเธซเธงเนเธฒเธ 5-60 เธเธฒเธ—เธต\";\r\n    }\r\n\r\n    if (config.TimeslotPerDay < 1 || config.TimeslotPerDay > 15) {\r\n      newErrors.timeslotPerDay = \"เธเธณเธเธงเธเธเธฒเธเธ•เนเธญเธงเธฑเธเธ•เนเธญเธเธญเธขเธนเนเธฃเธฐเธซเธงเนเธฒเธ 1-15\";\r\n    }\r\n\r\n    if (config.HasMinibreak) {\r\n      if (\r\n        config.MiniBreak.SlotNumber < 1 ||\r\n        config.MiniBreak.SlotNumber > config.TimeslotPerDay\r\n      ) {\r\n        newErrors.miniBreak = \"เธซเธกเธฒเธขเน€เธฅเธเธเธฒเธเธเธฑเธเน€เธฅเนเธเนเธกเนเธ–เธนเธเธ•เนเธญเธ\";\r\n      }\r\n      if (config.MiniBreak.Duration < 5 || config.MiniBreak.Duration > 30) {\r\n        newErrors.miniBreakDuration =\r\n          \"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธเธฑเธเน€เธฅเนเธเธ•เนเธญเธเธญเธขเธนเนเธฃเธฐเธซเธงเนเธฒเธ 5-30 เธเธฒเธ—เธต\";\r\n      }\r\n    }\r\n\r\n    if (\r\n      config.BreakTimeslots.Junior < 1 ||\r\n      config.BreakTimeslots.Junior > config.TimeslotPerDay\r\n    ) {\r\n      newErrors.juniorBreak = \"เธซเธกเธฒเธขเน€เธฅเธเธเธฒเธเธเธฑเธเธก.เธ•เนเธเนเธกเนเธ–เธนเธเธ•เนเธญเธ\";\r\n    }\r\n\r\n    if (\r\n      config.BreakTimeslots.Senior < 1 ||\r\n      config.BreakTimeslots.Senior > config.TimeslotPerDay\r\n    ) {\r\n      newErrors.seniorBreak = \"เธซเธกเธฒเธขเน€เธฅเธเธเธฒเธเธเธฑเธเธก.เธเธฅเธฒเธขเนเธกเนเธ–เธนเธเธ•เนเธญเธ\";\r\n    }\r\n\r\n    setErrors(newErrors);\r\n\r\n    const isValid = Object.keys(newErrors).length === 0;\r\n    onValidationChange?.(isValid);\r\n\r\n    if (isValid) {\r\n      onChange(config);\r\n    }\r\n  }, [config, onChange, onValidationChange]);\r\n\r\n  const handleDayToggle = (day: day_of_week) => {\r\n    setConfig((prev) => ({\r\n      ...prev,\r\n      Days: prev.Days.includes(day)\r\n        ? prev.Days.filter((d) => d !== day)\r\n        : [...prev.Days, day],\r\n    }));\r\n  };\r\n\r\n  // Calculate preview schedule\r\n  const calculateEndTime = (\r\n    startTime: string,\r\n    durationMinutes: number,\r\n  ): string => {\r\n    const [hours, minutes] = startTime.split(\":\").map(Number);\r\n    const totalMinutes = (hours ?? 0) * 60 + (minutes ?? 0) + durationMinutes;\r\n    const endHours = Math.floor(totalMinutes / 60) % 24;\r\n    const endMinutes = totalMinutes % 60;\r\n    return `${String(endHours).padStart(2, \"0\")}:${String(endMinutes).padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const generatePreview = () => {\r\n    const preview: { slot: number; time: string; type: string }[] = [];\r\n    let currentTime = config.StartTime;\r\n\r\n    for (let i = 1; i <= config.TimeslotPerDay; i++) {\r\n      // Add mini break before slot if configured\r\n      if (config.HasMinibreak && config.MiniBreak.SlotNumber === i) {\r\n        currentTime = calculateEndTime(currentTime, config.MiniBreak.Duration);\r\n      }\r\n\r\n      const isJuniorBreak = config.BreakTimeslots.Junior === i;\r\n      const isSeniorBreak = config.BreakTimeslots.Senior === i;\r\n      const isBothBreak = isJuniorBreak && isSeniorBreak;\r\n\r\n      let duration: number;\r\n      let type: string;\r\n\r\n      if (isBothBreak) {\r\n        duration = config.BreakDuration;\r\n        type = \"เธเธฑเธเธ—เธฑเนเธเธซเธกเธ”\";\r\n      } else if (isJuniorBreak) {\r\n        duration = config.BreakDuration;\r\n        type = \"เธเธฑเธเธก.เธ•เนเธ\";\r\n      } else if (isSeniorBreak) {\r\n        duration = config.BreakDuration;\r\n        type = \"เธเธฑเธเธก.เธเธฅเธฒเธข\";\r\n      } else {\r\n        duration = config.Duration;\r\n        type = \"เน€เธฃเธตเธขเธ\";\r\n      }\r\n\r\n      const endTime = calculateEndTime(currentTime, duration);\r\n      preview.push({\r\n        slot: i,\r\n        time: `${currentTime}-${endTime}`,\r\n        type,\r\n      });\r\n\r\n      currentTime = endTime;\r\n    }\r\n\r\n    return preview;\r\n  };\r\n\r\n  const previewSchedule = generatePreview();\r\n\r\n  return (\r\n    <Box sx={{ mt: 2 }}>\r\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\r\n        <Typography variant=\"body2\">\r\n          เธเธณเธซเธเธ”เธเนเธฒเธ•เธฒเธฃเธฒเธเน€เธฃเธตเธขเธเธชเธณเธซเธฃเธฑเธเธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน {semester}/{academicYear}\r\n        </Typography>\r\n      </Alert>\r\n\r\n      {/* Days Selection */}\r\n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 3 }}>\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 2 }}>\r\n          <CalendarMonth color=\"primary\" />\r\n          <Typography variant=\"subtitle1\" fontWeight={600}>\r\n            เธงเธฑเธเธ—เธตเนเน€เธฃเธตเธขเธ\r\n          </Typography>\r\n        </Stack>\r\n        <FormGroup row>\r\n          {DAYS.map((day) => (\r\n            <FormControlLabel\r\n              key={day.value}\r\n              control={\r\n                <Checkbox\r\n                  checked={config.Days.includes(day.value)}\r\n                  onChange={() => handleDayToggle(day.value)}\r\n                />\r\n              }\r\n              label={day.label}\r\n            />\r\n          ))}\r\n        </FormGroup>\r\n        {errors.days && (\r\n          <Typography variant=\"caption\" color=\"error\" sx={{ mt: 1 }}>\r\n            {errors.days}\r\n          </Typography>\r\n        )}\r\n        <Box sx={{ mt: 1 }}>\r\n          <Typography variant=\"caption\" color=\"text.secondary\">\r\n            เน€เธฅเธทเธญเธ: {config.Days.length} เธงเธฑเธ\r\n          </Typography>\r\n        </Box>\r\n      </Paper>\r\n\r\n      {/* Time Configuration */}\r\n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 3 }}>\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 2 }}>\r\n          <AccessTime color=\"primary\" />\r\n          <Typography variant=\"subtitle1\" fontWeight={600}>\r\n            เธ•เธฑเนเธเธเนเธฒเน€เธงเธฅเธฒ\r\n          </Typography>\r\n        </Stack>\r\n        <Stack spacing={2}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"เน€เธงเธฅเธฒเน€เธฃเธดเนเธกเน€เธฃเธตเธขเธ\"\r\n            type=\"time\"\r\n            value={config.StartTime}\r\n            onChange={(e) =>\r\n              setConfig((prev) => ({ ...prev, StartTime: e.target.value }))\r\n            }\r\n            InputLabelProps={{ shrink: true }}\r\n            error={!!errors.startTime}\r\n            helperText={errors.startTime || \"เน€เธเนเธ 08:00\"}\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            label=\"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธ•เนเธญเธเธฒเธ (เธเธฒเธ—เธต)\"\r\n            type=\"number\"\r\n            value={config.Duration}\r\n            onChange={(e) =>\r\n              setConfig((prev) => ({\r\n                ...prev,\r\n                Duration: Number(e.target.value),\r\n              }))\r\n            }\r\n            error={!!errors.duration}\r\n            helperText={errors.duration || \"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธเธฒเธฃเน€เธฃเธตเธขเธเธ•เนเธญเธเธฒเธ\"}\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            label=\"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธเธฑเธ (เธเธฒเธ—เธต)\"\r\n            type=\"number\"\r\n            value={config.BreakDuration}\r\n            onChange={(e) =>\r\n              setConfig((prev) => ({\r\n                ...prev,\r\n                BreakDuration: Number(e.target.value),\r\n              }))\r\n            }\r\n            error={!!errors.breakDuration}\r\n            helperText={errors.breakDuration || \"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธเธฑเธเธเธฅเธฒเธเธงเธฑเธ\"}\r\n          />\r\n        </Stack>\r\n      </Paper>\r\n\r\n      {/* Periods Per Day */}\r\n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 3 }}>\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 2 }}>\r\n          <Schedule color=\"primary\" />\r\n          <Typography variant=\"subtitle1\" fontWeight={600}>\r\n            เธเธณเธเธงเธเธเธฒเธเธ•เนเธญเธงเธฑเธ\r\n          </Typography>\r\n        </Stack>\r\n        <Box sx={{ px: 2 }}>\r\n          <Slider\r\n            value={config.TimeslotPerDay}\r\n            onChange={(_, value) =>\r\n              setConfig((prev) => ({\r\n                ...prev,\r\n                TimeslotPerDay: typeof value === \"number\" ? value : value[0],\r\n              }))\r\n            }\r\n            min={1}\r\n            max={12}\r\n            marks\r\n            valueLabelDisplay=\"on\"\r\n          />\r\n        </Box>\r\n        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1 }}>\r\n          {config.TimeslotPerDay} เธเธฒเธเธ•เนเธญเธงเธฑเธ\r\n        </Typography>\r\n      </Paper>\r\n\r\n      {/* Mini Break Configuration */}\r\n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 3 }}>\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={config.HasMinibreak}\r\n              onChange={(e) =>\r\n                setConfig((prev) => ({\r\n                  ...prev,\r\n                  HasMinibreak: e.target.checked,\r\n                }))\r\n              }\r\n            />\r\n          }\r\n          label={\r\n            <Typography variant=\"subtitle1\" fontWeight={600}>\r\n              เธเธฑเธเน€เธฅเนเธเธฃเธฐเธซเธงเนเธฒเธเธเธฒเธ\r\n            </Typography>\r\n          }\r\n        />\r\n        {config.HasMinibreak && (\r\n          <Stack spacing={2} sx={{ mt: 2 }}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"เธเธฑเธเน€เธฅเนเธเธซเธฅเธฑเธเธเธฒเธเธ—เธตเน\"\r\n              type=\"number\"\r\n              value={config.MiniBreak.SlotNumber}\r\n              onChange={(e) =>\r\n                setConfig((prev) => ({\r\n                  ...prev,\r\n                  MiniBreak: {\r\n                    ...prev.MiniBreak,\r\n                    SlotNumber: Number(e.target.value),\r\n                  },\r\n                }))\r\n              }\r\n              error={!!errors.miniBreak}\r\n              helperText={errors.miniBreak || \"เธซเธกเธฒเธขเน€เธฅเธเธเธฒเธเธ—เธตเนเธ•เนเธญเธเธเธฒเธฃเธเธฑเธเน€เธฅเนเธ\"}\r\n            />\r\n            <TextField\r\n              fullWidth\r\n              label=\"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธเธฑเธเน€เธฅเนเธ (เธเธฒเธ—เธต)\"\r\n              type=\"number\"\r\n              value={config.MiniBreak.Duration}\r\n              onChange={(e) =>\r\n                setConfig((prev) => ({\r\n                  ...prev,\r\n                  MiniBreak: {\r\n                    ...prev.MiniBreak,\r\n                    Duration: Number(e.target.value),\r\n                  },\r\n                }))\r\n              }\r\n              error={!!errors.miniBreakDuration}\r\n              helperText={errors.miniBreakDuration || \"เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธเธฑเธเน€เธฅเนเธ\"}\r\n            />\r\n          </Stack>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* Break Periods */}\r\n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 3 }}>\r\n        <Typography variant=\"subtitle1\" fontWeight={600} sx={{ mb: 2 }}>\r\n          เธเธฒเธเธเธฑเธเธเธฅเธฒเธเธงเธฑเธ\r\n        </Typography>\r\n        <Stack spacing={2}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"เธเธฒเธเธเธฑเธเธก.เธ•เนเธ (เธก.1-3)\"\r\n            type=\"number\"\r\n            value={config.BreakTimeslots.Junior}\r\n            onChange={(e) =>\r\n              setConfig((prev) => ({\r\n                ...prev,\r\n                BreakTimeslots: {\r\n                  ...prev.BreakTimeslots,\r\n                  Junior: Number(e.target.value),\r\n                },\r\n              }))\r\n            }\r\n            error={!!errors.juniorBreak}\r\n            helperText={errors.juniorBreak || \"เธเธฒเธเธ—เธตเนเธก.เธ•เนเธเธเธฑเธ\"}\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            label=\"เธเธฒเธเธเธฑเธเธก.เธเธฅเธฒเธข (เธก.4-6)\"\r\n            type=\"number\"\r\n            value={config.BreakTimeslots.Senior}\r\n            onChange={(e) =>\r\n              setConfig((prev) => ({\r\n                ...prev,\r\n                BreakTimeslots: {\r\n                  ...prev.BreakTimeslots,\r\n                  Senior: Number(e.target.value),\r\n                },\r\n              }))\r\n            }\r\n            error={!!errors.seniorBreak}\r\n            helperText={errors.seniorBreak || \"เธเธฒเธเธ—เธตเนเธก.เธเธฅเธฒเธขเธเธฑเธ\"}\r\n          />\r\n        </Stack>\r\n        {config.BreakTimeslots.Junior === config.BreakTimeslots.Senior && (\r\n          <Alert severity=\"info\" sx={{ mt: 2 }}>\r\n            เธเธฑเธเธเธฃเนเธญเธกเธเธฑเธ (เธก.เธ•เนเธ + เธก.เธเธฅเธฒเธข)\r\n          </Alert>\r\n        )}\r\n      </Paper>\r\n\r\n      <Divider sx={{ my: 3 }} />\r\n\r\n      {/* Preview */}\r\n      <Paper variant=\"outlined\" sx={{ p: 2, bgcolor: \"grey.50\" }}>\r\n        <Typography variant=\"subtitle1\" fontWeight={600} sx={{ mb: 2 }}>\r\n          เธ•เธฑเธงเธญเธขเนเธฒเธเธ•เธฒเธฃเธฒเธเน€เธฃเธตเธขเธ (เธงเธฑเธเธเธฑเธเธ—เธฃเน-เธจเธธเธเธฃเน)\r\n        </Typography>\r\n        <Stack spacing={1}>\r\n          {previewSchedule.map((slot) => (\r\n            <Box\r\n              key={slot.slot}\r\n              sx={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: 2,\r\n                p: 1,\r\n                bgcolor: \"white\",\r\n                borderRadius: 1,\r\n                border: \"1px solid\",\r\n                borderColor: \"divider\",\r\n              }}\r\n            >\r\n              <Chip\r\n                label={`เธเธฒเธเธ—เธตเน ${slot.slot}`}\r\n                size=\"small\"\r\n                color={\r\n                  slot.type === \"เน€เธฃเธตเธขเธ\"\r\n                    ? \"primary\"\r\n                    : slot.type === \"เธเธฑเธเธ—เธฑเนเธเธซเธกเธ”\"\r\n                      ? \"success\"\r\n                      : \"warning\"\r\n                }\r\n              />\r\n              <Typography variant=\"body2\" sx={{ flex: 1 }}>\r\n                {slot.time}\r\n              </Typography>\r\n              <Chip label={slot.type} size=\"small\" variant=\"outlined\" />\r\n            </Box>\r\n          ))}\r\n        </Stack>\r\n        <Typography\r\n          variant=\"caption\"\r\n          color=\"text.secondary\"\r\n          sx={{ mt: 2, display: \"block\" }}\r\n        >\r\n          เน€เธงเธฅเธฒเน€เธฅเธดเธ:{\" \"}\r\n          {calculateEndTime(\r\n            config.StartTime,\r\n            previewSchedule.reduce((acc, slot) => {\r\n              const [start, end] = slot.time.split(\"-\");\r\n              const [startH, startM] = (start ?? \"\").split(\":\").map(Number);\r\n              const [endH, endM] = (end ?? \"\").split(\":\").map(Number);\r\n              const duration =\r\n                (endH ?? 0) * 60 +\r\n                (endM ?? 0) -\r\n                ((startH ?? 0) * 60 + (startM ?? 0));\r\n              return acc + duration;\r\n            }, 0),\r\n          )}\r\n        </Typography>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\global-error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\gradelevel\\component\\AddModalForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\gradelevel\\component\\ConfirmDeleteModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[468,471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[468,471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[488,491],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[488,491],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[512,515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[512,515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[556,559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[556,559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":14,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":14,"endColumn":19},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":26,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":26,"endColumn":46,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[757,757],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[757,757],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":42,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1752,1755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1752,1755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AiOutlineClose } from \"react-icons/ai\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { gradelevel } from \"@/prisma/generated/client\";\r\nimport { deleteGradeLevelsAction } from \"@/features/gradelevel/application/actions/gradelevel.actions\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\ntype props = {\r\n  closeModal: any;\r\n  deleteData: any;\r\n  clearCheckList: any;\r\n  dataAmount: number;\r\n  checkedList: any;\r\n  mutate: Function;\r\n};\r\n\r\nfunction ConfirmDeleteModal({\r\n  closeModal,\r\n  deleteData,\r\n  dataAmount,\r\n  clearCheckList,\r\n  checkedList,\r\n  mutate,\r\n}: props) {\r\n  const confirmed = () => {\r\n    removeMultiData(deleteData, checkedList);\r\n    closeModal();\r\n  };\r\n  const cancel = () => {\r\n    if (dataAmount === 1) {\r\n      clearCheckList();\r\n    }\r\n    closeModal();\r\n  };\r\n  const removeMultiData = async (data: gradelevel[], checkedList: string[]) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธฅเธเธเนเธญเธกเธนเธฅเธเธฑเนเธเน€เธฃเธตเธขเธ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    const deleteData = data\r\n      .filter((item, index) => checkedList.includes(item.GradeID))\r\n      .map((item) => item.GradeID);\r\n\r\n    try {\r\n      const result = await deleteGradeLevelsAction({ gradeIds: deleteData });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธฅเธเธเนเธญเธกเธนเธฅเธเธฑเนเธเน€เธฃเธตเธขเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เธฅเธเธเนเธญเธกเธนเธฅเธเธฑเนเธเน€เธฃเธตเธขเธเนเธกเนเธชเธณเน€เธฃเนเธ \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n\r\n    clearCheckList();\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-fit h-fit p-7 gap-10 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เธฅเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancel} />\r\n          </div>\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none font-bold\">\r\n              เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธเธเนเธญเธกเธนเธฅเธ—เธตเนเน€เธฅเธทเธญเธเธ—เธฑเนเธเธซเธกเธ” {dataAmount} เธฃเธฒเธขเธเธฒเธฃเนเธเนเธซเธฃเธทเธญเนเธกเน\r\n            </p>\r\n          </div>\r\n          <span className=\"w-full flex gap-3 justify-end h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default ConfirmDeleteModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\gradelevel\\component\\EditModalForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[719,722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[719,722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[733,736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[733,736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[757,760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[757,760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":17,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":17,"endColumn":19},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":31,"column":21,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":31,"endColumn":23,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1215,1217],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":32,"column":19,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":32,"endColumn":21,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1242,1244],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":44,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":44,"endColumn":31,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[1474,1474],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[1474,1474],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1688,1691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1688,1691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2298,2301],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2298,2301],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3295,3298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3295,3298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":108,"column":25,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":108,"endColumn":27,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3481,3483],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":176,"column":51,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":176,"endColumn":53,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6577,6579],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":181,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6773,6776],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6773,6776],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":192,"column":48,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":192,"endColumn":50,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[7232,7234],"text":"==="},"desc":"Use '===' instead of '=='."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import NumberField from \"@/components/elements/input/field/NumberField\";\r\nimport Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\n\r\nimport React, { useState, type JSX } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { updateGradeLevelAction } from \"@/features/gradelevel/application/actions/gradelevel.actions\";\r\nimport type { gradelevel } from \"@/prisma/generated/client\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\ntype props = {\r\n  closeModal: any;\r\n  data: any;\r\n  clearCheckList: any;\r\n  mutate: Function;\r\n};\r\n\r\nfunction EditModalForm({ closeModal, data, clearCheckList, mutate }: props) {\r\n  const [editData, setEditData] = useState<gradelevel[]>(\r\n    Object.assign([], data),\r\n  );\r\n  const [isEmptyData, setIsEmptyData] = useState(false);\r\n  const isValidData = (): boolean => {\r\n    let isValid = true;\r\n    editData.forEach((data) => {\r\n      if (\r\n        data.Year == null ||\r\n        data.Number == null ||\r\n        data.Number == 0 ||\r\n        data.Year == 0 ||\r\n        data.Year < 1 ||\r\n        data.Year > 6\r\n      ) {\r\n        setIsEmptyData(true);\r\n        isValid = false;\r\n      }\r\n    });\r\n    return isValid;\r\n  };\r\n  const confirmed = () => {\r\n    if (isValidData()) {\r\n      editMultiData(editData);\r\n      closeModal();\r\n    }\r\n  };\r\n  const cancelEdit = () => {\r\n    if (data.length === 1) {\r\n      clearCheckList();\r\n    }\r\n    closeModal();\r\n  };\r\n  const editMultiData = async (data: any) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเนเธเนเนเธเธเนเธญเธกเธนเธฅเธเธฑเนเธเน€เธฃเธตเธขเธ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await updateGradeLevelAction({ gradeLevels: data });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เนเธเนเนเธเธเนเธญเธกเธนเธฅเธเธฑเนเธเน€เธฃเธตเธขเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เนเธเนเนเธเธเนเธญเธกเธนเธฅเธเธฑเนเธเน€เธฃเธตเธขเธเนเธกเนเธชเธณเน€เธฃเนเธ \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n\r\n    //clear checkbox\r\n    clearCheckList();\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-fit ${\r\n            data.length > 5 ? \"h-[700px]\" : \"h-auto\"\r\n          } overflow-y-scroll overflow-x-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เนเธเนเนเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancelEdit} />\r\n          </div>\r\n          {editData.map((item: any, index: number) => (\r\n            <React.Fragment key={`Edit${index}`}>\r\n              <div\r\n                className={`flex flex-row gap-3 items-center ${\r\n                  index == 0 ? \"\" : \"mt-2\"\r\n                }`}\r\n              >\r\n                <div className=\"flex flex-col items-center justify-center mr-5\">\r\n                  <p className=\"text-sm font-bold\">เธฃเธฒเธขเธเธฒเธฃเธ—เธตเน</p>\r\n                  <p>{index + 1}</p>\r\n                </div>\r\n                {/* <div className=\"relative flex flex-col gap-2\">\r\n                  <NumberField disabled={false}\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    label={`เธฃเธซเธฑเธชเธเธฑเนเธเน€เธฃเธตเธขเธ (GradeID):`}\r\n                    placeHolder=\"ex. 101\"\r\n                    value={item.GradeID}\r\n                    borderColor={\r\n                      isEmptyData && (item.GradeID == 0 || item.GradeID == null)\r\n                        ? \"#F96161\"\r\n                        : \"\"\r\n                    }\r\n                    disabled={false} handleChange={(e: any) => {\r\n                      let value: number = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind ? { ...item, GradeID: value } : item\r\n                        )\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData &&\r\n                  (item.GradeID == 0 || item.GradeID == null) ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div> */}\r\n                <div className=\"relative flex flex-col gap-2\">\r\n                  <label className=\"text-sm font-bold\">\r\n                    เธกเธฑเธเธขเธกเธเธตเธ—เธตเน (Year):\r\n                  </label>\r\n                  <Dropdown\r\n                    data={[1, 2, 3, 4, 5, 6]}\r\n                    renderItem={({ data }: { data: unknown }): JSX.Element => {\r\n                      const year = data as number;\r\n                      return <li className=\"w-full\">{year}</li>;\r\n                    }}\r\n                    width={150}\r\n                    height={40}\r\n                    currentValue={item.Year}\r\n                    placeHolder={\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"}\r\n                    handleChange={(value: unknown) => {\r\n                      const year = value as number;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind ? { ...item, Year: year } : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div className=\"relative flex flex-col gap-2\">\r\n                  <NumberField\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    label={`เธซเนเธญเธเธ—เธตเน (Number):`}\r\n                    placeHolder=\"ex. 1\"\r\n                    value={item.Number}\r\n                    borderColor={\r\n                      isEmptyData && (item.Number == 0 || item.Number == null)\r\n                        ? \"#F96161\"\r\n                        : \"\"\r\n                    }\r\n                    disabled={false}\r\n                    handleChange={(e: any) => {\r\n                      const value: string = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind\r\n                            ? { ...item, Number: parseInt(value) }\r\n                            : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && (item.Number == 0 || item.Number == null) ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                {/* <div className=\"relative flex flex-col gap-2\">\r\n                  <TextField\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    label={`เธชเธฒเธขเธเธฒเธฃเน€เธฃเธตเธขเธ (GradeProgram):`}\r\n                    placeHolder=\"ex. Com-sci\"\r\n                    value={item.GradeProgram}\r\n                    borderColor={\r\n                      isEmptyData && item.GradeProgram.length == 0\r\n                        ? \"#F96161\"\r\n                        : \"\"\r\n                    }\r\n                    disabled={false} handleChange={(e: any) => {\r\n                      let value: string = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind\r\n                            ? { ...item, GradeProgram: value }\r\n                            : item\r\n                        )\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && item.GradeProgram.length == 0 ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div> */}\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n          <span className=\"w-full flex gap-3 justify-end mt-5 h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancelEdit}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default EditModalForm;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\gradelevel\\component\\GradeLevelManageClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\gradelevel\\component\\GradeLevelTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\gradelevel\\component\\TableRow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pageOfData' is defined but never used. Allowed unused args must match /^_/u.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":13},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":29,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":29,"endColumn":14,"suggestions":[{"fix":{"range":[654,672],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":71,"column":15,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":71,"endColumn":71}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// TableRow.jsx\r\nimport React from \"react\";\r\nimport { BiEdit } from \"react-icons/bi\";\r\nimport type { Prisma } from \"@/prisma/generated/client\";\r\n\r\ntype GradeLevelWithProgram = Prisma.gradelevelGetPayload<{\r\n  include: { program: true };\r\n}>;\r\n\r\ntype TableRowProps = {\r\n  item: GradeLevelWithProgram;\r\n  index: number;\r\n  clickToSelect: (id: string) => void;\r\n  checkedList: string[];\r\n  setEditModalActive: (active: boolean) => void;\r\n  pageOfData: GradeLevelWithProgram[];\r\n  searchTerm: string;\r\n};\r\n\r\nfunction TableRow({\r\n  item,\r\n  index,\r\n  clickToSelect,\r\n  checkedList,\r\n  setEditModalActive,\r\n  pageOfData,\r\n  searchTerm,\r\n}: TableRowProps) {\r\n  console.log(item);\r\n  const matchesSearchTerm = item.GradeID.toLowerCase().includes(\r\n    searchTerm.toLowerCase(),\r\n  );\r\n\r\n  if (!matchesSearchTerm) {\r\n    return null; // Do not render if it doesn't match the search term\r\n  }\r\n\r\n  return (\r\n    <tr className=\"relative h-[60px] border-b bg-[#FFF] hover:bg-cyan-50 hover:text-cyan-600 even:bg-slate-50 cursor-pointer\">\r\n      <th>\r\n        <input\r\n          className=\"cursor-pointer\"\r\n          type=\"checkbox\"\r\n          name=\"itemdata\"\r\n          onChange={() => clickToSelect(item.GradeID)}\r\n          checked={checkedList.includes(item.GradeID)}\r\n        />\r\n      </th>\r\n      {([\"GradeID\", \"Year\", \"Number\", \"program\"] as const).map((key) => (\r\n        <td\r\n          key={key}\r\n          className=\"px-6 whitespace-nowrap select-none\"\r\n          onClick={() => clickToSelect(item.GradeID)}\r\n        >\r\n          {key !== \"program\"\r\n            ? item[key]\r\n            : Array.isArray(item[key]) && item[key].length > 0\r\n              ? item[key]\r\n                  .map((program) => program.ProgramName)\r\n                  .join(\", \")\r\n                  .slice(0, 30) + (item[key].length > 1 ? \"...\" : \"\")\r\n              : \"เนเธกเนเธเธเธเนเธญเธกเธนเธฅ\"}\r\n        </td>\r\n      ))}\r\n      {checkedList.length < 1 ? (\r\n        <td className=\"mt-5 flex gap-5 px-6 whitespace-nowrap select-none\">\r\n          <BiEdit\r\n            className=\"fill-[#A16207]\"\r\n            size={18}\r\n            onClick={() => {\r\n              (setEditModalActive(true), clickToSelect(item.GradeID));\r\n            }}\r\n          />\r\n          {/* Delete action removed - use top toolbar button with multi-select */}\r\n        </td>\r\n      ) : (\r\n        <td className=\"mt-5 flex gap-5 px-6 whitespace-nowrap select-none\" />\r\n      )}\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default TableRow;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\gradelevel\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\[programId]\\component\\ProgramSubjectAssignmentPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\[programId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\AddStudyProgramModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'use' is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'program' is defined but never used.","line":6,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":22},{"ruleId":"@typescript-eslint/no-redundant-type-constituents","severity":2,"message":"\"SEMESTER_1\" | \"SEMESTER_2\" is overridden by string in this union type.","line":25,"column":15,"nodeType":"TSTypeReference","messageId":"literalOverridden","endLine":25,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1042,1045],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1042,1045],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1063,1066],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1063,1066],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-redundant-type-constituents","severity":2,"message":"\"SEMESTER_1\" | \"SEMESTER_2\" is overridden by string in this union type.","line":39,"column":15,"nodeType":"TSTypeReference","messageId":"literalOverridden","endLine":39,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1331,1334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1331,1334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1352,1355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1352,1355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":50,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":50,"endColumn":16,"suggestions":[{"fix":{"range":[1542,1563],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1819,1822],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1819,1822],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1917,1920],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1917,1920],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":74,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":74,"endColumn":16,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[2241,2241],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[2241,2241],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2372,2375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2372,2375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":96,"column":54,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":96,"endColumn":56,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2853,2855],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":97,"column":41,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":97,"endColumn":43,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2900,2902],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":98,"column":52,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":98,"endColumn":54,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2959,2961],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":99,"column":46,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":99,"endColumn":48,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3011,3013],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":102,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3074,3077],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3074,3077],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":104,"column":30,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":104,"endColumn":32,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[3176,3178],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'validateData'. Either include it or remove the dependency array.","line":121,"column":6,"nodeType":"ArrayExpression","endLine":126,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [newProgramData.ProgramName, newProgramData.Semester, newProgramData.gradelevel, newProgramData.subject, validateData]","fix":{"range":[3798,3928],"text":"[newProgramData.ProgramName, newProgramData.Semester, newProgramData.gradelevel, newProgramData.subject, validateData]"}}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":145,"column":69,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":145,"endColumn":71,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[4525,4527],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":154,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":154,"endColumn":16,"suggestions":[{"fix":{"range":[4742,4760],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":158,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":158,"endColumn":34,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[4822,4822],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[4822,4822],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":179,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5731,5734],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5731,5734],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Fragment, use, useEffect, useState } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport SelectedClassRoom from \"./SelectedClassRoom\";\r\nimport SelectSubjects from \"./SelectSubjects\";\r\nimport StudyProgramLabel from \"./StudyProgramLabel\";\r\nimport type { program, subject } from \"@/prisma/generated/client\";\r\nimport { semester } from \"@/prisma/generated/client\";\r\nimport YearSemester from \"./YearSemester\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\n\r\n// Server Actions\r\nimport { createProgramAction } from \"@/features/program/application/actions/program.actions\";\r\n\r\ntype Props = {\r\n  closeModal: () => void;\r\n  mutate: () => void | Promise<void>;\r\n};\r\n\r\nfunction AddStudyProgramModal({ closeModal, mutate }: Props) {\r\n  // Get current Thai Buddhist year as default\r\n  const currentThaiYear = new Date().getFullYear() + 543;\r\n\r\n  const [newProgramData, setNewProgramData] = useState<{\r\n    ProgramName: string;\r\n    Semester: semester | string;\r\n    AcademicYear: number;\r\n    gradelevel: any[];\r\n    subject: any[];\r\n  }>({\r\n    ProgramName: \"\",\r\n    Semester: \"\",\r\n    AcademicYear: currentThaiYear,\r\n    gradelevel: [],\r\n    subject: [],\r\n  });\r\n\r\n  type ProgramData = {\r\n    ProgramName: string;\r\n    Semester: semester | string;\r\n    AcademicYear: number;\r\n    gradelevel: any[];\r\n    subject: any[];\r\n  };\r\n\r\n  const addProgram = async (program: ProgramData) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเน€เธเธดเนเธกเธเนเธญเธกเธนเธฅ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n    console.log(program);\r\n    closeModal();\r\n\r\n    try {\r\n      const result = await createProgramAction({\r\n        ProgramName: program.ProgramName,\r\n        Semester: program.Semester,\r\n        AcademicYear: program.AcademicYear,\r\n        gradelevel: program.gradelevel.map((g: any) => ({\r\n          GradeID: g.GradeID,\r\n        })),\r\n        subject: program.subject.map((s: any) => ({\r\n          SubjectCode: s.SubjectCode,\r\n        })),\r\n      });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      mutate();\r\n      enqueueSnackbar(\"เน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      closeSnackbar(loadbar);\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเน€เธเธดเนเธกเธซเธฅเธฑเธเธชเธนเธ•เธฃ: \" +\r\n          (error.message || \"Unknown error\"),\r\n        { variant: \"error\" },\r\n      );\r\n    }\r\n  };\r\n\r\n  const [isEmptyData, setIsEmptyData] = useState({\r\n    ProgramName: false,\r\n    Semester: false,\r\n    gradelevel: false,\r\n    subject: false,\r\n  });\r\n\r\n  const validateData = () => {\r\n    setIsEmptyData(() => ({\r\n      ProgramName: newProgramData.ProgramName.length == 0,\r\n      Semester: newProgramData.Semester == \"\",\r\n      gradelevel: newProgramData.gradelevel.length == 0,\r\n      subject: newProgramData.subject.length == 0,\r\n    }));\r\n  };\r\n  const classRoomHandleChange = (value: any) => {\r\n    const removeDulpItem = newProgramData.gradelevel.filter(\r\n      (item) => item.GradeID != value.GradeID,\r\n    ); //เธ•เธฑเธงเธเธตเนเนเธงเนเนเธเนเธเธฑเธเน€เธเธทเนเธญเธเนเธเธ•เธญเธเธเธ”เน€เธฅเธทเธญเธเธซเนเธญเธเน€เธฃเธตเธขเธ เธ–เนเธฒเธเธ”เธซเนเธญเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธฅเนเธงเธเธฐเธฅเธเธญเธญเธ\r\n    setNewProgramData(() => ({\r\n      ...newProgramData,\r\n      gradelevel:\r\n        newProgramData.gradelevel.filter(\r\n          (item) => item.GradeID === value.GradeID, //เน€เธเนเธเน€เธเธทเนเธญเธเนเธเธงเนเธฒเธ–เนเธฒเธเธ”เน€เธเธดเนเธกเน€เธเนเธฒเธกเธฒเนเธฅเนเธงเธขเธฑเธเนเธกเนเน€เธเธขเน€เธเธดเนเธกเธซเนเธญเธเน€เธฃเธตเธขเธเธเธตเนเธกเธฒเธเนเธญเธเธเธฐเน€เธเธดเนเธกเน€เธเนเธฒเนเธเนเธซเธกเน เธ–เนเธฒเธกเธตเนเธฅเนเธงเธเนเธฅเธเธซเนเธญเธเธเธฑเนเธเธญเธญเธ\r\n        ).length === 0\r\n          ? [...newProgramData.gradelevel, value]\r\n          : [...removeDulpItem],\r\n    }));\r\n  };\r\n  useEffect(() => {\r\n    const validate = () => {\r\n      validateData();\r\n    };\r\n    return validate();\r\n  }, [\r\n    newProgramData.ProgramName,\r\n    newProgramData.Semester,\r\n    newProgramData.gradelevel,\r\n    newProgramData.subject,\r\n  ]);\r\n\r\n  const handleSelectSemester = (value: unknown) => {\r\n    const semesterKey = value as keyof typeof semester;\r\n    setNewProgramData(() => ({\r\n      ...newProgramData,\r\n      Semester: semester[semesterKey],\r\n    }));\r\n  };\r\n\r\n  const handleAddSubjectList = (subject: subject) => {\r\n    setNewProgramData(() => ({\r\n      ...newProgramData,\r\n      subject: [...newProgramData.subject, subject],\r\n    }));\r\n  };\r\n  const removeSubjectFromList = (index: number) => {\r\n    setNewProgramData(() => ({\r\n      ...newProgramData,\r\n      subject: [...newProgramData.subject.filter((item, ind) => ind != index)],\r\n    }));\r\n  };\r\n  const addItemAndCloseModal = () => {\r\n    const cond =\r\n      isEmptyData.ProgramName ||\r\n      isEmptyData.gradelevel ||\r\n      isEmptyData.subject ||\r\n      isEmptyData.Semester;\r\n    console.log(cond);\r\n    if (cond) {\r\n      validateData();\r\n    } else {\r\n      addProgram(newProgramData);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-[831px] h-fit overflow-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-xl select-none\">เน€เธเธดเนเธกเธซเธฅเธฑเธเธชเธนเธ•เธฃ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n          </div>\r\n          <div className=\"flex flex-col gap-5 p-4 w-full h-auto overflow-y-scroll border border-[#EDEEF3]\">\r\n            <StudyProgramLabel\r\n              required={isEmptyData.ProgramName}\r\n              title={newProgramData.ProgramName}\r\n              handleChange={(e: any) => {\r\n                const value: string = e.target.value;\r\n                setNewProgramData(() => ({\r\n                  ...newProgramData,\r\n                  ProgramName: value,\r\n                }));\r\n              }}\r\n            />\r\n            <YearSemester\r\n              required={isEmptyData.Semester}\r\n              semester={newProgramData.Semester}\r\n              handleSemesterChange={handleSelectSemester}\r\n            />\r\n\r\n            <SelectSubjects\r\n              subjectSelected={newProgramData.subject}\r\n              addSubjectFunction={handleAddSubjectList}\r\n              removeSubjectFunction={removeSubjectFromList}\r\n              required={isEmptyData.subject}\r\n            />\r\n            <SelectedClassRoom\r\n              Grade={newProgramData.gradelevel}\r\n              classRoomHandleChange={classRoomHandleChange}\r\n              required={isEmptyData.gradelevel}\r\n            />\r\n          </div>\r\n          <span className=\"flex w-full justify-end\">\r\n            <button\r\n              onClick={() => {\r\n                addItemAndCloseModal();\r\n              }}\r\n              className=\"w-[75px] h-[45px] bg-blue-100 hover:bg-blue-200 duration-300 p-3 rounded text-blue-600 text-sm\"\r\n            >\r\n              เธขเธทเธเธขเธฑเธ\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddStudyProgramModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\DeleteProgramModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[351,354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[351,354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[371,374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[371,374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":9,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":14,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":14,"endColumn":28,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[511,511],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[511,511],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1240,1243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1240,1243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { deleteProgramAction } from \"@/features/program/application/actions/program.actions\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\ntype props = {\r\n  closeModal: any;\r\n  deleteData: any;\r\n  mutate: Function;\r\n};\r\n\r\nfunction DeleteProgramModal({ closeModal, deleteData, mutate }: props) {\r\n  const confirmed = () => {\r\n    removeData(deleteData);\r\n    closeModal();\r\n  };\r\n  const cancel = () => {\r\n    closeModal();\r\n  };\r\n  const removeData = async (ProgramID: string) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธฅเธเธเนเธญเธกเธนเธฅ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await deleteProgramAction({ programId: ProgramID });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธฅเธเธเนเธญเธกเธนเธฅเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธฅเธเธเนเธญเธกเธนเธฅ: \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-fit h-fit p-7 gap-10 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">\r\n              เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธเธเนเธญเธกเธนเธฅเธซเธฅเธฑเธเธชเธนเธ•เธฃ <b>{deleteData.ProgramName}</b>{\" \"}\r\n              เนเธเนเธซเธฃเธทเธญเนเธกเน\r\n            </p>\r\n          </div>\r\n          <span className=\"w-full flex gap-3 justify-end h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default DeleteProgramModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\EditStudyProgramModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'use' is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'program' is defined but never used.","line":6,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":22},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":47,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":47,"endColumn":16,"suggestions":[{"fix":{"range":[1988,2009],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":67,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":67,"endColumn":16,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[2674,2674],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[2674,2674],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2807,2810],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2807,2810],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":89,"column":54,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":89,"endColumn":56,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3288,3290],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":92,"column":52,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":92,"endColumn":54,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3453,3455],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":93,"column":46,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":93,"endColumn":48,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3505,3507],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":102,"column":22,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":102,"endColumn":24,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[3796,3798],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'validateData'. Either include it or remove the dependency array.","line":120,"column":6,"nodeType":"ArrayExpression","endLine":125,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [newProgramData.ProgramName, newProgramData.Semester, newProgramData.gradelevel, newProgramData.subject, validateData]","fix":{"range":[4485,4615],"text":"[newProgramData.ProgramName, newProgramData.Semester, newProgramData.gradelevel, newProgramData.subject, validateData]"}}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":144,"column":62,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":144,"endColumn":64,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[5174,5176],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":154,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":154,"endColumn":16,"suggestions":[{"fix":{"range":[5400,5418],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":158,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":158,"endColumn":35,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[5480,5480],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[5480,5480],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":179,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6390,6393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6390,6393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Fragment, use, useEffect, useState } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport SelectedClassRoom from \"./SelectedClassRoom\";\r\nimport SelectSubjects from \"./SelectSubjects\";\r\nimport StudyProgramLabel from \"./StudyProgramLabel\";\r\nimport type { program, subject } from \"@/prisma/generated/client\";\r\nimport { semester } from \"@/prisma/generated/client\";\r\nimport YearSemester from \"./YearSemester\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\n\r\n// Server Actions\r\nimport { updateProgramAction } from \"@/features/program/application/actions/program.actions\";\r\n\r\n// Extended program type with relations for form data\r\n// NOTE: Semester and AcademicYear are optional because the Prisma program model\r\n// doesn't have these fields - they were legacy form fields that are no longer used\r\ntype ProgramFormData = {\r\n  ProgramID: number;\r\n  ProgramName: string;\r\n  Semester?: semester;\r\n  AcademicYear?: number;\r\n  // GradeID can be string or number from Prisma model\r\n  gradelevel: Array<{ GradeID: string | number; [key: string]: unknown }>;\r\n  // Subject can be partial (just SubjectCode from ProgramRow) or full subject\r\n  subject: Array<{ SubjectCode: string } & Partial<Omit<subject, \"SubjectCode\">>>;\r\n};\r\n\r\ntype Props = {\r\n  closeModal: () => void;\r\n  mutate: () => void | Promise<void>;\r\n  editData: ProgramFormData;\r\n};\r\n\r\nfunction EditStudyProgramModal({ closeModal, mutate, editData }: Props) {\r\n  // Ensure AcademicYear and Semester have defaults (these fields are optional/legacy)\r\n  const currentThaiYear = new Date().getFullYear() + 543;\r\n  const [newProgramData, setNewProgramData] = useState({\r\n    ...editData,\r\n    Semester: editData?.Semester || semester.SEMESTER_1,\r\n    AcademicYear: editData?.AcademicYear || currentThaiYear,\r\n  });\r\n  const editProgram = async (program: ProgramFormData) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเนเธเนเนเธเธเนเธญเธกเธนเธฅ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n    console.log(program);\r\n    closeModal();\r\n\r\n    try {\r\n      // NOTE: updateProgramAction only accepts ProgramID and ProgramName\r\n      // Semester, AcademicYear, gradelevel, and subject are not persisted to the program model\r\n      // They may have been legacy fields or are handled elsewhere\r\n      const result = await updateProgramAction({\r\n        ProgramID: program.ProgramID,\r\n        ProgramName: program.ProgramName,\r\n      });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      mutate();\r\n      enqueueSnackbar(\"เนเธเนเนเธเธซเธฅเธฑเธเธชเธนเธ•เธฃเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      closeSnackbar(loadbar);\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเนเธเนเนเธเธซเธฅเธฑเธเธชเธนเธ•เธฃ: \" +\r\n          (error.message || \"Unknown error\"),\r\n        { variant: \"error\" },\r\n      );\r\n    }\r\n  };\r\n\r\n  const [isEmptyData, setIsEmptyData] = useState({\r\n    ProgramName: false,\r\n    Semester: false,\r\n    gradelevel: false,\r\n    subject: false,\r\n  });\r\n\r\n  const validateData = () => {\r\n    setIsEmptyData(() => ({\r\n      ProgramName: newProgramData.ProgramName.length == 0,\r\n      // Semester is always valid in edit mode (comes from existing program data)\r\n      Semester: false,\r\n      gradelevel: newProgramData.gradelevel.length == 0,\r\n      subject: newProgramData.subject.length == 0,\r\n    }));\r\n  };\r\n  const classRoomHandleChange = (value: {\r\n    GradeID: string | number;\r\n    [key: string]: unknown;\r\n  }) => {\r\n    const removeDulpItem = newProgramData.gradelevel.filter(\r\n      (item: { GradeID: string | number; [key: string]: unknown }) =>\r\n        item.GradeID != value.GradeID,\r\n    ); //เธ•เธฑเธงเธเธตเนเนเธงเนเนเธเนเธเธฑเธเน€เธเธทเนเธญเธเนเธเธ•เธญเธเธเธ”เน€เธฅเธทเธญเธเธซเนเธญเธเน€เธฃเธตเธขเธ เธ–เนเธฒเธเธ”เธซเนเธญเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธฅเนเธงเธเธฐเธฅเธเธญเธญเธ\r\n    setNewProgramData(() => ({\r\n      ...newProgramData,\r\n      gradelevel:\r\n        newProgramData.gradelevel.filter(\r\n          (item: { GradeID: string | number; [key: string]: unknown }) =>\r\n            item.GradeID === value.GradeID, //เน€เธเนเธเน€เธเธทเนเธญเธเนเธเธงเนเธฒเธ–เนเธฒเธเธ”เน€เธเธดเนเธกเน€เธเนเธฒเธกเธฒเนเธฅเนเธงเธขเธฑเธเนเธกเนเน€เธเธขเน€เธเธดเนเธกเธซเนเธญเธเน€เธฃเธตเธขเธเธเธตเนเธกเธฒเธเนเธญเธเธเธฐเน€เธเธดเนเธกเน€เธเนเธฒเนเธเนเธซเธกเน เธ–เนเธฒเธกเธตเนเธฅเนเธงเธเนเธฅเธเธซเนเธญเธเธเธฑเนเธเธญเธญเธ\r\n        ).length === 0\r\n          ? [...newProgramData.gradelevel, value]\r\n          : [...removeDulpItem],\r\n    }));\r\n  };\r\n  useEffect(() => {\r\n    const validate = () => {\r\n      validateData();\r\n    };\r\n    return validate();\r\n  }, [\r\n    newProgramData.ProgramName,\r\n    newProgramData.Semester,\r\n    newProgramData.gradelevel,\r\n    newProgramData.subject,\r\n  ]);\r\n\r\n  const handleSelectSemester = (value: keyof typeof semester) => {\r\n    setNewProgramData(() => ({\r\n      ...newProgramData,\r\n      Semester: semester[value],\r\n    }));\r\n  };\r\n\r\n  const handleAddSubjectList = (subject: subject) => {\r\n    setNewProgramData(() => ({\r\n      ...newProgramData,\r\n      subject: [...newProgramData.subject, subject],\r\n    }));\r\n  };\r\n  const removeSubjectFromList = (index: number) => {\r\n    setNewProgramData(() => ({\r\n      ...newProgramData,\r\n      subject: [\r\n        ...newProgramData.subject.filter((_item, ind) => ind != index),\r\n      ],\r\n    }));\r\n  };\r\n  const addItemAndCloseModal = () => {\r\n    const cond =\r\n      isEmptyData.ProgramName ||\r\n      isEmptyData.gradelevel ||\r\n      isEmptyData.subject ||\r\n      isEmptyData.Semester;\r\n    console.log(cond);\r\n    if (cond) {\r\n      validateData();\r\n    } else {\r\n      editProgram(newProgramData);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-[831px] h-5/6 overflow-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-xl select-none\">เนเธเนเนเธเธซเธฅเธฑเธเธชเธนเธ•เธฃ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n          </div>\r\n          <div className=\"flex flex-col gap-5 p-4 w-full h-auto overflow-y-scroll border border-[#EDEEF3]\">\r\n            <StudyProgramLabel\r\n              required={isEmptyData.ProgramName}\r\n              title={newProgramData.ProgramName}\r\n              handleChange={(e: any) => {\r\n                const value: string = e.target.value;\r\n                setNewProgramData(() => ({\r\n                  ...newProgramData,\r\n                  ProgramName: value,\r\n                }));\r\n              }}\r\n            />\r\n            <YearSemester\r\n              required={isEmptyData.Semester}\r\n              semester={newProgramData.Semester}\r\n              handleSemesterChange={handleSelectSemester}\r\n            />\r\n\r\n            <SelectSubjects\r\n              subjectSelected={newProgramData.subject}\r\n              addSubjectFunction={handleAddSubjectList}\r\n              removeSubjectFunction={removeSubjectFromList}\r\n              required={isEmptyData.subject}\r\n            />\r\n            <SelectedClassRoom\r\n              Grade={newProgramData.gradelevel.map((g) => ({\r\n                ...g,\r\n                GradeID: String(g.GradeID),\r\n              }))}\r\n              classRoomHandleChange={classRoomHandleChange}\r\n              required={isEmptyData.gradelevel}\r\n            />\r\n          </div>\r\n          <span className=\"flex w-full justify-end\">\r\n            <button\r\n              onClick={() => {\r\n                addItemAndCloseModal();\r\n              }}\r\n              className=\"w-[75px] h-[45px] bg-blue-100 hover:bg-blue-200 duration-300 p-3 rounded text-blue-600 text-sm\"\r\n            >\r\n              เธขเธทเธเธขเธฑเธ\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EditStudyProgramModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\EditStudyProgramModalLegacy.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'subject' is assigned a value but never used.","line":22,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSubjectFilter' is assigned a value but never used.","line":23,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'searchText' is assigned a value but never used.","line":30,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'searchHandle' is assigned a value but never used.","line":38,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1459,1462],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1459,1462],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'searchTextSubject' is assigned a value but never used.","line":43,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'searchHandleSubject' is assigned a value but never used.","line":51,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1950,1953],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1950,1953],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2104,2107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2104,2107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2235,2238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2235,2238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":59,"column":35,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":59,"endColumn":37,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[2256,2258],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2476,2479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2476,2479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":73,"column":51,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":73,"endColumn":53,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2853,2855],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":74,"column":57,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":74,"endColumn":59,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2916,2918],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":75,"column":51,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":75,"endColumn":53,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2973,2975],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'validateData'. Either include it or remove the dependency array.","line":83,"column":6,"nodeType":"ArrayExpression","endLine":83,"endColumn":76,"suggestions":[{"desc":"Update the dependencies array to be: [programData.ProgramName, programData.gradelevel, programData.subject, validateData]","fix":{"range":[3107,3177],"text":"[programData.ProgramName, programData.gradelevel, programData.subject, validateData]"}}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":96,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":96,"endColumn":16,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[3567,3567],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[3567,3567],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3598,3601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3598,3601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":108,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":108,"endColumn":25,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[3897,3897],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[3897,3897],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":110,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":110,"endColumn":16,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[3944,3944],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[3944,3944],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":111,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":111,"endColumn":18,"suggestions":[{"fix":{"range":[3961,3986],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4191,4194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4191,4194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":119,"column":44,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":119,"endColumn":46,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[4216,4218],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":149,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5345,5348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5345,5348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport SelectedClassRoom from \"./SelectedClassRoom\";\r\nimport SelectSubjects from \"./SelectSubjects\";\r\nimport StudyProgramLabel from \"./StudyProgramLabel\";\r\nimport type { program, subject } from \"@/prisma/generated/client\";\r\nimport { updateProgramAction } from \"@/features/program/application/actions/program.actions\";\r\n\r\n// Legacy form data type (program with relations)\r\ntype LegacyProgramData = program & {\r\n  gradelevel?: Array<{ GradeID: string }>;\r\n  subject?: subject[];\r\n};\r\n\r\ntype Props = {\r\n  data: LegacyProgramData;\r\n  closeModal: () => void;\r\n  mutate: () => void | Promise<void>;\r\n};\r\n\r\nfunction EditStudyProgramModal({ data, closeModal, mutate }: Props) {\r\n  const [subject, setSubject] = useState<subject[]>([]);\r\n  const [subjectFilter, setSubjectFilter] = useState<subject[]>([]);\r\n  const [programData, setProgramData] = useState(data);\r\n  const [isEmptyData, setIsEmptyData] = useState({\r\n    ProgramName: false,\r\n    gradelevel: false,\r\n    subject: false,\r\n  });\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const searchName = (name: string) => {\r\n    //เธญเธฑเธเธเธตเนเนเธเนเธ—เธ”เธชเธญเธเน€เธ—เนเธฒเธเธฑเนเธ เธขเธฑเธเธเธเธซเธฒเนเธ”เนเนเธกเนเธชเธธเธ” เน€เธเนเธ เธเนเธเธซเธฒเนเธเธเธ•เธฑเธ” case sensitive เธขเธฑเธเนเธกเนเนเธ”เน\r\n    const res = subjectFilter.filter((item) =>\r\n      `${item.SubjectCode} ${item.SubjectName}`.match(name),\r\n    );\r\n    setSubject(res);\r\n  };\r\n  const searchHandle = (event: any) => {\r\n    const text = event.target.value;\r\n    setSearchText(text);\r\n    searchName(text);\r\n  };\r\n  const [searchTextSubject, setSearchTextSubject] = useState(\"\");\r\n  const searchSubject = (name: string) => {\r\n    //เธญเธฑเธเธเธตเนเนเธเนเธ—เธ”เธชเธญเธเน€เธ—เนเธฒเธเธฑเนเธ เธขเธฑเธเธเธเธซเธฒเนเธ”เนเนเธกเนเธชเธธเธ” เน€เธเนเธ เธเนเธเธซเธฒเนเธเธเธ•เธฑเธ” case sensitive เธขเธฑเธเนเธกเนเนเธ”เน\r\n    const res = subjectFilter.filter((item) =>\r\n      `${item.SubjectCode} - ${item.SubjectName}`.match(name),\r\n    );\r\n    setSubject(res);\r\n  };\r\n  const searchHandleSubject = (event: any) => {\r\n    const text = event.target.value;\r\n    setSearchTextSubject(text);\r\n    searchSubject(text);\r\n  };\r\n  const classRoomHandleChange = (value: any) => {\r\n    const gradelevelArr = programData.gradelevel || [];\r\n    const removeDulpItem = gradelevelArr.filter(\r\n      (item: any) => item.GradeID != value.GradeID,\r\n    ); //เธ•เธฑเธงเธเธตเนเนเธงเนเนเธเนเธเธฑเธเน€เธเธทเนเธญเธเนเธเธ•เธญเธเธเธ”เน€เธฅเธทเธญเธเธซเนเธญเธเน€เธฃเธตเธขเธ เธ–เนเธฒเธเธ”เธซเนเธญเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธฅเนเธงเธเธฐเธฅเธเธญเธญเธ\r\n    setProgramData(() => ({\r\n      ...programData,\r\n      gradelevel:\r\n        gradelevelArr.filter(\r\n          (item: any) => item.GradeID === value.GradeID, //เน€เธเนเธเน€เธเธทเนเธญเธเนเธเธงเนเธฒเธ–เนเธฒเธเธ”เน€เธเธดเนเธกเน€เธเนเธฒเธกเธฒเนเธฅเนเธงเธขเธฑเธเนเธกเนเน€เธเธขเน€เธเธดเนเธกเธซเนเธญเธเน€เธฃเธตเธขเธเธเธตเนเธกเธฒเธเนเธญเธเธเธฐเน€เธเธดเนเธกเน€เธเนเธฒเนเธเนเธซเธกเน เธ–เนเธฒเธกเธตเนเธฅเนเธงเธเนเธฅเธเธซเนเธญเธเธเธฑเนเธเธญเธญเธ\r\n        ).length === 0\r\n          ? [...gradelevelArr, value]\r\n          : [...removeDulpItem],\r\n    }));\r\n  };\r\n  const validateData = () => {\r\n    setIsEmptyData(() => ({\r\n      ProgramName: programData.ProgramName.length == 0,\r\n      gradelevel: (programData.gradelevel || []).length == 0,\r\n      subject: (programData.subject || []).length == 0,\r\n    }));\r\n  };\r\n  useEffect(() => {\r\n    const validate = () => {\r\n      validateData();\r\n    };\r\n    return validate();\r\n  }, [programData.ProgramName, programData.gradelevel, programData.subject]);\r\n  const editProgram = async (program: program) => {\r\n    try {\r\n      const result = await updateProgramAction({ programs: [program] });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      mutate();\r\n    } catch (error: any) {\r\n      console.error(\"Failed to update program:\", error);\r\n      throw error;\r\n    }\r\n  };\r\n  const editItemAndCloseModal = () => {\r\n    const cond =\r\n      isEmptyData.ProgramName || isEmptyData.gradelevel || isEmptyData.subject;\r\n    if (cond) {\r\n      validateData();\r\n    } else {\r\n      editProgram(data);\r\n      closeModal();\r\n      mutate();\r\n      console.log(programData);\r\n    }\r\n  };\r\n  const removeSubjectFromList = (index: number) => {\r\n    setProgramData(() => ({\r\n      ...programData,\r\n      subject: [\r\n        ...(programData.subject || []).filter(\r\n          (_item: any, ind: number) => ind != index,\r\n        ),\r\n      ],\r\n    }));\r\n  };\r\n  const handleAddSubjectList = (subject: subject) => {\r\n    setProgramData(() => ({\r\n      ...programData,\r\n      subject: [...(programData.subject || []), subject],\r\n    }));\r\n    setSearchTextSubject(\"\");\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-[831px] h-fit overflow-y-scroll overflow-x-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-xl select-none\">เนเธเนเนเธเธซเธฅเธฑเธเธชเธนเธ•เธฃ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n          </div>\r\n          <div className=\"flex flex-col gap-5 p-4 w-full h-auto overflow-y-scroll border border-[#EDEEF3]\">\r\n            <StudyProgramLabel\r\n              required={false}\r\n              title={programData.ProgramName}\r\n              handleChange={(e: any) => {\r\n                const value: string = e.target.value;\r\n                setProgramData(() => ({\r\n                  ...programData,\r\n                  ProgramName: value,\r\n                }));\r\n              }}\r\n            />\r\n            <SelectSubjects\r\n              subjectSelected={programData.subject || []}\r\n              addSubjectFunction={handleAddSubjectList}\r\n              removeSubjectFunction={removeSubjectFromList}\r\n              required={isEmptyData.subject}\r\n            />\r\n            <SelectedClassRoom\r\n              Grade={programData.gradelevel || []}\r\n              classRoomHandleChange={classRoomHandleChange}\r\n              required={isEmptyData.gradelevel}\r\n            />\r\n          </div>\r\n          <span className=\"flex w-full justify-end\">\r\n            <button\r\n              onClick={() => {\r\n                editItemAndCloseModal();\r\n              }}\r\n              className=\"w-[75px] h-[45px] bg-blue-100 hover:bg-blue-200 duration-300 p-3 rounded text-blue-600 text-sm\"\r\n            >\r\n              เธขเธทเธเธขเธฑเธ\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EditStudyProgramModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\ProgramEditableTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\ProgramTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1606,1609],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1606,1609],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'availableAcademicYears' is assigned a value but never used.","line":76,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2499,2502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2499,2502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":80,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2545,2548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2545,2548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":176,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5386,5389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5386,5389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6351,6354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6351,6354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { ProgramTrack, type program } from \"@/prisma/generated/client\";\r\n\r\n// Program rows include related gradelevel and subject arrays\r\nexport type ProgramRow = program & {\r\n  gradelevel: Array<{ GradeID: string | number; Year: number; Number: number }>;\r\n  subject: Array<{ SubjectCode: string }>;\r\n};\r\nimport {\r\n  Paper,\r\n  Toolbar,\r\n  Typography,\r\n  IconButton,\r\n  Button,\r\n  TextField,\r\n  MenuItem,\r\n  Table as MuiTable,\r\n  TableHead,\r\n  TableRow as MuiTableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Checkbox,\r\n  TableContainer,\r\n  TablePagination,\r\n  Stack,\r\n} from \"@mui/material\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\nimport { useConfirmDialog } from \"@/components/dialogs\";\r\nimport {\r\n  updateProgramAction,\r\n  deleteProgramAction,\r\n} from \"@/features/program/application/actions/program.actions\";\r\nimport AddStudyProgramModal from \"./AddStudyProgramModal\";\r\nimport EditStudyProgramModal from \"./EditStudyProgramModal\";\r\n\r\n// Thai translations for ProgramTrack enum\r\nconst programTrackThai: Record<ProgramTrack, string> = {\r\n  SCIENCE_MATH: \"เธงเธดเธ—เธขเน-เธเธ“เธดเธ•\",\r\n  LANGUAGE_MATH: \"เธจเธดเธฅเธเน-เธเธณเธเธงเธ“\",\r\n  LANGUAGE_ARTS: \"เธจเธดเธฅเธเน-เธ เธฒเธฉเธฒ\",\r\n  GENERAL: \"เธ—เธฑเนเธงเนเธ\",\r\n};\r\n\r\ninterface ProgramTableProps {\r\n  year: number;\r\n  rows: ProgramRow[];\r\n  mutate: () => Promise<any> | void;\r\n}\r\n\r\nexport default function ProgramTable({\r\n  year,\r\n  rows,\r\n  mutate,\r\n}: ProgramTableProps) {\r\n  const [selected, setSelected] = useState<number[]>([]);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [drafts, setDrafts] = useState<\r\n    Record<number, { ProgramName: string; Track: ProgramTrack }>\r\n  >({});\r\n  const [search, setSearch] = useState(\"\");\r\n  const [trackFilter, setTrackFilter] = useState<ProgramTrack | \"ALL\">(\"ALL\");\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [addOpen, setAddOpen] = useState(false);\r\n  const [editOpen, setEditOpen] = useState(false);\r\n  const { confirm, dialog } = useConfirmDialog();\r\n\r\n  // Extract unique academic years from rows\r\n  const availableAcademicYears = useMemo(() => {\r\n    const years = new Set<number>();\r\n    rows.forEach((r) => {\r\n      if ((r as any).AcademicYear) {\r\n        years.add((r as any).AcademicYear);\r\n      }\r\n    });\r\n    // If no years in data, add current Thai year\r\n    if (years.size === 0) {\r\n      years.add(new Date().getFullYear() + 543);\r\n    }\r\n    return Array.from(years).sort((a, b) => b - a);\r\n  }, [rows]);\r\n\r\n  const filtered = useMemo(() => {\r\n    let result = rows;\r\n\r\n    // Track filter\r\n    if (trackFilter !== \"ALL\") {\r\n      result = result.filter((r) => r.Track === trackFilter);\r\n    }\r\n\r\n    // Search filter\r\n    const q = search.trim().toLowerCase();\r\n    if (q) {\r\n      result = result.filter(\r\n        (r) =>\r\n          r.ProgramName.toLowerCase().includes(q) ||\r\n          r.ProgramCode.toLowerCase().includes(q) ||\r\n          String(r.Track).toLowerCase().includes(q),\r\n      );\r\n    }\r\n\r\n    return result;\r\n  }, [rows, search, trackFilter]);\r\n\r\n  const paged = filtered.slice(\r\n    page * rowsPerPage,\r\n    page * rowsPerPage + rowsPerPage,\r\n  );\r\n  const allIds = filtered\r\n    .map((r) => r.ProgramID)\r\n    .filter((x): x is number => typeof x === \"number\");\r\n\r\n  const toggleAll = (checked: boolean) =>\r\n    setSelected(checked ? [...allIds] : []);\r\n  const toggleOne = (id: number) =>\r\n    setSelected((prev) =>\r\n      prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id],\r\n    );\r\n  const isSelected = (id: number) => selected.includes(id);\r\n\r\n  const handleEnterEdit = () => {\r\n    if (selected.length === 0) return;\r\n    const next: Record<number, { ProgramName: string; Track: ProgramTrack }> =\r\n      {};\r\n    for (const r of rows) {\r\n      if (r.ProgramID != null && selected.includes(r.ProgramID)) {\r\n        next[r.ProgramID] = { ProgramName: r.ProgramName, Track: r.Track };\r\n      }\r\n    }\r\n    setDrafts(next);\r\n    setEditMode(true);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditMode(false);\r\n    setDrafts({});\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editMode || selected.length === 0) return;\r\n\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธเธฑเธเธ—เธถเธเธเธฒเธฃเนเธเนเนเธเธซเธฅเธฑเธเธชเธนเธ•เธฃ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n    try {\r\n      for (const id of selected) {\r\n        const orig = rows.find((r) => r.ProgramID === id);\r\n        const draft = drafts[id];\r\n        if (!orig || !draft) continue;\r\n        // Update program with new name and track\r\n        await updateProgramAction({\r\n          ProgramID: id,\r\n          ProgramName: draft.ProgramName,\r\n          Track: draft.Track,\r\n          Year: orig.Year,\r\n          ProgramCode: orig.ProgramCode,\r\n          Description: orig.Description,\r\n          MinTotalCredits: orig.MinTotalCredits,\r\n          IsActive: orig.IsActive,\r\n        });\r\n      }\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธเธฑเธเธ—เธถเธเธเธฒเธฃเนเธเนเนเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      setEditMode(false);\r\n      setDrafts({});\r\n      setSelected([]);\r\n      await mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เธเธฑเธเธ—เธถเธเธเธฒเธฃเนเธเนเนเธเนเธกเนเธชเธณเน€เธฃเนเธ: \" + (error?.message || \"Unknown error\"),\r\n        { variant: \"error\" },\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (selected.length === 0) return;\r\n    const ok = await confirm({\r\n      title: \"เธฅเธเธซเธฅเธฑเธเธชเธนเธ•เธฃ\",\r\n      message: `เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธเธซเธฅเธฑเธเธชเธนเธ•เธฃเธ—เธตเนเน€เธฅเธทเธญเธเธ—เธฑเนเธเธซเธกเธ” ${selected.length} เธฃเธฒเธขเธเธฒเธฃเนเธเนเธซเธฃเธทเธญเนเธกเน? เธเธฒเธฃเธ”เธณเน€เธเธดเธเธเธฒเธฃเธเธตเนเนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธขเนเธญเธเธเธฅเธฑเธเนเธ”เน`,\r\n      variant: \"danger\",\r\n      confirmText: \"เธฅเธ\",\r\n      cancelText: \"เธขเธเน€เธฅเธดเธ\",\r\n    });\r\n    if (!ok) return;\r\n\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธฅเธเธซเธฅเธฑเธเธชเธนเธ•เธฃ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n    try {\r\n      for (const id of selected) {\r\n        await deleteProgramAction({ ProgramID: id });\r\n      }\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธฅเธเธซเธฅเธฑเธเธชเธนเธ•เธฃเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      setSelected([]);\r\n      await mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เธฅเธเธซเธฅเธฑเธเธชเธนเธ•เธฃเนเธกเนเธชเธณเน€เธฃเนเธ: \" + (error?.message || \"Unknown error\"),\r\n        { variant: \"error\" },\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {dialog}\r\n      {addOpen && (\r\n        <AddStudyProgramModal\r\n          closeModal={() => setAddOpen(false)}\r\n          mutate={mutate}\r\n        />\r\n      )}\r\n      {editOpen && selected.length === 1 && (\r\n        <EditStudyProgramModal\r\n          closeModal={() => setEditOpen(false)}\r\n          mutate={mutate}\r\n          editData={rows.find((r) => r.ProgramID === selected[0])!}\r\n        />\r\n      )}\r\n\r\n      <Paper>\r\n        <Toolbar sx={{ pl: 2, pr: 2, gap: 1, flexWrap: \"wrap\" }}>\r\n          <Typography sx={{ flex: \"1 1 100%\", minWidth: 120 }} variant=\"h6\">\r\n            เธซเธฅเธฑเธเธชเธนเธ•เธฃ เธก.{year}\r\n          </Typography>\r\n\r\n          <Stack\r\n            direction=\"row\"\r\n            spacing={1}\r\n            sx={{ flexWrap: \"wrap\", alignItems: \"center\" }}\r\n          >\r\n            {/* Program Track Filter */}\r\n            <TextField\r\n              select\r\n              size=\"small\"\r\n              label=\"เนเธเธเธเธฒเธฃเน€เธฃเธตเธขเธ\"\r\n              value={trackFilter}\r\n              onChange={(e) => {\r\n                setTrackFilter(e.target.value as ProgramTrack | \"ALL\");\r\n                setPage(0);\r\n              }}\r\n              sx={{ minWidth: 140 }}\r\n            >\r\n              <MenuItem value=\"ALL\">เธ—เธฑเนเธเธซเธกเธ”</MenuItem>\r\n              <MenuItem value={ProgramTrack.SCIENCE_MATH}>\r\n                {programTrackThai[ProgramTrack.SCIENCE_MATH]}\r\n              </MenuItem>\r\n              <MenuItem value={ProgramTrack.LANGUAGE_MATH}>\r\n                {programTrackThai[ProgramTrack.LANGUAGE_MATH]}\r\n              </MenuItem>\r\n              <MenuItem value={ProgramTrack.LANGUAGE_ARTS}>\r\n                {programTrackThai[ProgramTrack.LANGUAGE_ARTS]}\r\n              </MenuItem>\r\n              <MenuItem value={ProgramTrack.GENERAL}>\r\n                {programTrackThai[ProgramTrack.GENERAL]}\r\n              </MenuItem>\r\n            </TextField>\r\n\r\n            {/* Search */}\r\n            <TextField\r\n              size=\"small\"\r\n              placeholder=\"เธเนเธเธซเธฒเธเธทเนเธญเธซเธฅเธฑเธเธชเธนเธ•เธฃ\"\r\n              value={search}\r\n              onChange={(e) => {\r\n                setSearch(e.target.value);\r\n                setPage(0);\r\n              }}\r\n              sx={{ minWidth: 200 }}\r\n            />\r\n          </Stack>\r\n\r\n          <Stack direction=\"row\" spacing={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              startIcon={<AddIcon />}\r\n              onClick={() => setAddOpen(true)}\r\n            >\r\n              เน€เธเธดเนเธกเธซเธฅเธฑเธเธชเธนเธ•เธฃ\r\n            </Button>\r\n            <IconButton\r\n              onClick={handleEnterEdit}\r\n              disabled={selected.length === 0 || editMode}\r\n            >\r\n              <EditIcon />\r\n            </IconButton>\r\n            {editMode && (\r\n              <>\r\n                <IconButton color=\"success\" onClick={handleSave}>\r\n                  <SaveIcon />\r\n                </IconButton>\r\n                <IconButton onClick={handleCancelEdit}>\r\n                  <CloseIcon />\r\n                </IconButton>\r\n              </>\r\n            )}\r\n            <IconButton\r\n              color=\"error\"\r\n              onClick={handleDelete}\r\n              disabled={selected.length === 0}\r\n            >\r\n              <DeleteIcon />\r\n            </IconButton>\r\n          </Stack>\r\n        </Toolbar>\r\n\r\n        <TableContainer>\r\n          <MuiTable size=\"small\">\r\n            <TableHead>\r\n              <MuiTableRow>\r\n                <TableCell padding=\"checkbox\">\r\n                  <Checkbox\r\n                    indeterminate={\r\n                      selected.length > 0 && selected.length < allIds.length\r\n                    }\r\n                    checked={\r\n                      allIds.length > 0 && selected.length === allIds.length\r\n                    }\r\n                    onChange={(e) => toggleAll(e.target.checked)}\r\n                  />\r\n                </TableCell>\r\n                <TableCell>เธเธทเนเธญเธซเธฅเธฑเธเธชเธนเธ•เธฃ</TableCell>\r\n                <TableCell>เนเธเธเธเธฒเธฃเน€เธฃเธตเธขเธ</TableCell>\r\n                <TableCell align=\"right\">เธเธฑเนเธเน€เธฃเธตเธขเธ (เธเธณเธเธงเธ)</TableCell>\r\n                <TableCell align=\"right\">เธฃเธฒเธขเธงเธดเธเธฒ (เธเธณเธเธงเธ)</TableCell>\r\n              </MuiTableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {paged.map((row) => {\r\n                const id = Number(row.ProgramID);\r\n                const selectedRow = isSelected(id);\r\n                const isEditing = editMode && selectedRow;\r\n                return (\r\n                  <MuiTableRow key={id} hover selected={selectedRow}>\r\n                    <TableCell padding=\"checkbox\">\r\n                      <Checkbox\r\n                        checked={selectedRow}\r\n                        onChange={() => toggleOne(id)}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {isEditing ? (\r\n                        <TextField\r\n                          size=\"small\"\r\n                          value={drafts[id]?.ProgramName ?? \"\"}\r\n                          onChange={(e) =>\r\n                            setDrafts((d) => ({\r\n                              ...d,\r\n                              [id]: {\r\n                                ProgramName: e.target.value,\r\n                                Track: d[id]?.Track ?? row.Track,\r\n                              },\r\n                            }))\r\n                          }\r\n                        />\r\n                      ) : (\r\n                        row.ProgramName\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {isEditing ? (\r\n                        <TextField\r\n                          select\r\n                          size=\"small\"\r\n                          value={drafts[id]?.Track ?? row.Track}\r\n                          onChange={(e) =>\r\n                            setDrafts((d) => ({\r\n                              ...d,\r\n                              [id]: {\r\n                                ProgramName:\r\n                                  d[id]?.ProgramName ?? row.ProgramName,\r\n                                Track: e.target.value as ProgramTrack,\r\n                              },\r\n                            }))\r\n                          }\r\n                          sx={{ minWidth: 140 }}\r\n                        >\r\n                          {Object.entries(programTrackThai).map(\r\n                            ([key, label]) => (\r\n                              <MenuItem key={key} value={key}>\r\n                                {label}\r\n                              </MenuItem>\r\n                            ),\r\n                          )}\r\n                        </TextField>\r\n                      ) : (\r\n                        programTrackThai[row.Track]\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell align=\"right\">{row.gradelevel.length}</TableCell>\r\n                    <TableCell align=\"right\">{row.subject.length}</TableCell>\r\n                  </MuiTableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </MuiTable>\r\n        </TableContainer>\r\n        <TablePagination\r\n          component=\"div\"\r\n          count={filtered.length}\r\n          page={page}\r\n          onPageChange={(_, p) => setPage(p)}\r\n          rowsPerPage={rowsPerPage}\r\n          onRowsPerPageChange={(e) => {\r\n            setRowsPerPage(parseInt(e.target.value, 10));\r\n            setPage(0);\r\n          }}\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n        />\r\n      </Paper>\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\SelectSubjects.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1845,1848],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1845,1848],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3520,3523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3520,3523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":98,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3820,3823],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3820,3823],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4257,4260],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4257,4260],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport type { subject } from \"@/prisma/generated/client\";\r\nimport Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport useSWR from \"swr\";\r\n\r\n// Server Actions\r\nimport { getSubjectsAction } from \"@/features/subject/application/actions/subject.actions\";\r\n\r\ntype Props = {\r\n  // Subject can be partial (just SubjectCode from ProgramRow) or full subject from API\r\n  subjectSelected: Array<{ SubjectCode: string } & Partial<Omit<subject, \"SubjectCode\">>>;\r\n  addSubjectFunction: (subject: subject) => void;\r\n  removeSubjectFunction: (index: number) => void;\r\n  required: boolean;\r\n  searchHandleSubject?: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n  searchTextSubject?: string;\r\n};\r\n\r\nfunction SelectSubjects(props: Props) {\r\n  const subjectData = useSWR(\r\n    \"subjects-not-in-programs\",\r\n    async () => {\r\n      try {\r\n        const result = await getSubjectsAction({});\r\n        if (!result.success) {\r\n          throw new Error(result.error?.message ?? \"Failed to fetch subjects\");\r\n        }\r\n        // Filter subjects that are not already in programs\r\n        // Note: Original endpoint was /subject/notInPrograms which filtered on backend\r\n        // For now we return all subjects and filter on client side\r\n        return result.data || [];\r\n      } catch (error) {\r\n        console.error(\"Error fetching subjects:\", error);\r\n        return [];\r\n      }\r\n    },\r\n    {\r\n      revalidateOnMount: true,\r\n    },\r\n  );\r\n  const [subjectFilter, setSubjectFilter] = useState<subject[]>([]);\r\n\r\n  useEffect(() => {\r\n    const propsSubjectCodes = props.subjectSelected.map(\r\n      (item: any) => item.SubjectCode,\r\n    );\r\n    if (!subjectData.isValidating && subjectData.data) {\r\n      const notDuplicate = subjectData.data.filter(\r\n        (item: subject) => !propsSubjectCodes.includes(item.SubjectCode),\r\n      );\r\n\r\n      setSubjectFilter(() => notDuplicate);\r\n    }\r\n  }, [props.subjectSelected, subjectData.isValidating, subjectData.data]);\r\n\r\n  const searchHandle = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    // search เธเธณเธ—เธตเนเธเธดเธกเธเนเนเธเธเนเธญเธเธเนเธเธซเธฒ\r\n    const text = event.target.value;\r\n    const newData = subjectFilter.filter((item) => {\r\n      const itemData = `${item.SubjectCode} ${item.SubjectName}`;\r\n      const textData = text.toLowerCase();\r\n      return itemData.toLowerCase().match(textData);\r\n    });\r\n    setSubjectFilter(newData);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-col gap-5 justify-between w-full\">\r\n        <div className=\"flex justify-between items-center relative\">\r\n          <div className=\"text-sm flex gap-1 items-center\">\r\n            <p>เน€เธฅเธทเธญเธเธงเธดเธเธฒ</p>\r\n            <p className=\"text-red-500\">*</p>\r\n            {props.required ? (\r\n              <div className=\"ml-3 flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"flex flex-row justify-between gap-3\">\r\n            {!subjectData.data ? (\r\n              <CircularProgress />\r\n            ) : (\r\n              <Dropdown\r\n                data={subjectFilter}\r\n                renderItem={({ data }: { data: any }) => (\r\n                  <li className=\"w-full text-sm\">\r\n                    {data.SubjectCode} - {data.SubjectName}\r\n                  </li>\r\n                )}\r\n                width={276}\r\n                height=\"45\"\r\n                currentValue={\"\"}\r\n                handleChange={(data: any) => {\r\n                  props.addSubjectFunction(data);\r\n                }}\r\n                placeHolder=\"เน€เธฅเธทเธญเธเธงเธดเธเธฒ\"\r\n                useSearchBar={true}\r\n                searchFunction={searchHandle}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"max-h-20 overflow-y-scroll\">\r\n          <div className=\"flex flex-wrap gap-3 justify-end\">\r\n            {props.subjectSelected.map((item: any, index: number) => (\r\n              <Fragment key={`subjectSelected${item.SubjectCode}`}>\r\n                <MiniButton\r\n                  handleClick={() => props.removeSubjectFunction(index)}\r\n                  isSelected={true}\r\n                  title={`${item.SubjectCode} - ${item.SubjectName}`}\r\n                  border={true}\r\n                  buttonColor={\"\"}\r\n                  titleColor={\"\"}\r\n                  width={\"\"}\r\n                  height={\"\"}\r\n                  borderColor={\"\"}\r\n                  hoverable={false}\r\n                />\r\n              </Fragment>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectSubjects;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\SelectedClassRoom.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":22,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":22,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mutate' is assigned a value but never used.","line":22,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'a' is assigned a value but never used.","line":24,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":12},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":24,"column":47,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":24,"endColumn":49,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[737,739],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":25,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":25,"endColumn":16,"suggestions":[{"fix":{"range":[769,794],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":50,"column":47,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":50,"endColumn":49,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1950,1952],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1996,1999],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1996,1999],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2223,2226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2223,2226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2538,2541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2538,2541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2853,2856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2853,2856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport React, { Fragment } from \"react\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport { useGradeLevels } from \"@/hooks\";\r\n\r\n// GradeLevel selection type\r\ntype GradeSelection = Array<{ GradeID: string; Year?: number; Number?: number }>;\r\n\r\n// Classroom type for the callback\r\ntype ClassroomValue = {\r\n  GradeID: string;\r\n  [key: string]: unknown;\r\n};\r\n\r\ntype Props = {\r\n  Grade: GradeSelection;\r\n  classRoomHandleChange: (classroom: ClassroomValue) => void;\r\n  required: boolean;\r\n};\r\n\r\nfunction SelectedClassRoom(props: Props) {\r\n  const { data, isLoading, error, mutate } = useGradeLevels();\r\n  const asdas = () => {\r\n    const a = data.filter((item) => item.Year == 1).map((item) => item);\r\n    console.log(props.Grade);\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-col gap-3 justify-between w-full\">\r\n        <div className=\"text-sm flex gap-2 items-center\">\r\n          <div className=\"text-sm flex gap-1\">\r\n            <p onClick={() => asdas()}>เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธ</p>\r\n            <p className=\"text-red-500\">*</p>\r\n          </div>\r\n          <p className=\"text-blue-500\">(เธเธฅเธดเธเธ—เธตเนเธเธฑเนเธเน€เธฃเธตเธขเธเน€เธเธทเนเธญเน€เธฅเธทเธญเธ)</p>\r\n          {props.required ? (\r\n            <div className=\"ml-3 flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n              <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n              <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        {[1, 2, 3, 4, 5, 6].map((grade) => (\r\n          <Fragment key={`selectGrade${grade}`}>\r\n            <div className=\"flex justify-between p-2 w-full h-fit border border-[#EDEEF3] items-center\">\r\n              <p>{`เธก.${grade}`}</p>\r\n              {/* <CheckBox label={`เธก.${grade}`} /> */}\r\n              <div className=\"flex flex-wrap w-1/2 justify-end gap-3\">\r\n                {data\r\n                  .filter((item) => item.Year == grade)\r\n                  .map((classroom: any) => (\r\n                    <Fragment key={`${classroom.GradeID}`}>\r\n                      <MiniButton\r\n                        titleColor={\r\n                          props.Grade.filter(\r\n                            (item: any) => item.GradeID === classroom.GradeID,\r\n                          ).length > 0\r\n                            ? \"#008022\"\r\n                            : \"#222222\"\r\n                        }\r\n                        borderColor={\r\n                          props.Grade.filter(\r\n                            (item: any) => item.GradeID === classroom.GradeID,\r\n                          ).length > 0\r\n                            ? \"#abffc1\"\r\n                            : \"#888888\"\r\n                        }\r\n                        buttonColor={\r\n                          props.Grade.filter(\r\n                            (item: any) => item.GradeID === classroom.GradeID,\r\n                          ).length > 0\r\n                            ? \"#abffc1\"\r\n                            : \"#ffffff\"\r\n                        }\r\n                        border={true}\r\n                        title={`เธก.${classroom.Year}/${classroom.Number}`}\r\n                        handleClick={() => {\r\n                          props.classRoomHandleChange(classroom);\r\n                        }}\r\n                        width={\"\"}\r\n                        height={\"\"}\r\n                        isSelected={false}\r\n                        hoverable={false}\r\n                      />\r\n                    </Fragment>\r\n                  ))}\r\n              </div>\r\n            </div>\r\n          </Fragment>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectedClassRoom;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\StudyProgramLabel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\component\\YearSemester.tsx","messages":[{"ruleId":"@typescript-eslint/no-redundant-type-constituents","severity":2,"message":"\"SEMESTER_1\" | \"SEMESTER_2\" is overridden by string in this union type.","line":7,"column":13,"nodeType":"TSTypeReference","messageId":"literalOverridden","endLine":7,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1207,1210],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1207,1210],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MenuItem, Select } from \"@mui/material\";\r\nimport { semester } from \"@/prisma/generated/client\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\n\r\ntype Props = {\r\n  required: boolean;\r\n  semester: semester | string;\r\n  year?: number;\r\n  handleSemesterChange: (semester: semester) => void;\r\n  handleYearChange?: (year: number) => void;\r\n};\r\n\r\nconst YearSemester = (props: Props) => {\r\n  return (\r\n    <div className=\"flex justify-between items-center align-middle\">\r\n      <div className=\"text-sm flex gap-1 items-center\">\r\n        <p>เน€เธ—เธญเธก</p>\r\n        <p className=\"text-red-500\">*</p>\r\n        {props.required ? (\r\n          <div className=\"ml-3 flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n            <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n            <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <Select\r\n          className=\"\r\n          min-w-[100px]\r\n      border\r\n      rounded\r\n      bg-white\r\n      px-[15px]\r\n      cursor-pointer\r\n      hover:bg-slate-100\r\n      duration-300\"\r\n          value={props.semester ? props.semester : \"\"}\r\n          onChange={(e: any) => props.handleSemesterChange(e.target.value)}\r\n          variant=\"standard\"\r\n        >\r\n          <MenuItem value={semester[\"SEMESTER_1\"]}>เน€เธ—เธญเธก 1</MenuItem>\r\n          <MenuItem value={semester[\"SEMESTER_2\"]}>เน€เธ—เธญเธก 2</MenuItem>\r\n        </Select>\r\n        {/* <TextField\r\n          placeHolder=\"2560\"\r\n          value={props.year.toString()}\r\n          handleChange={(e: any) => {\r\n            if (e.target.value.length <= 4 && !isNaN(e.target.value)) {\r\n              props.handleYearChange(e.target.value);\r\n            }\r\n          }}\r\n          disabled={false}\r\n        /> */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default YearSemester;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":6,"column":14,"nodeType":"TSTypeLiteral","messageId":"noEmptyObject","endLine":6,"endColumn":16,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[160,162],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[160,162],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'props' is defined but never used. Allowed unused args must match /^_/u.","line":8,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport Link from \"next/link\";\r\nimport React, { Fragment } from \"react\";\r\nimport { IoArrowForwardCircle } from \"react-icons/io5\";\r\n\r\ntype Props = {};\r\n\r\nfunction StudyProgram(props: Props) {\r\n  const AllGrade = [1, 2, 3, 4, 5, 6];\r\n\r\n  return (\r\n    <>\r\n      <div className=\"my-4\">\r\n        <h1 className=\"text-xl font-bold\">\r\n          เธซเธฅเธฑเธเธชเธนเธ•เธฃเธ—เธฑเนเธเธซเธกเธ”\r\n          {/* (เน€เธ”เธตเนเธขเธงเธเนเธญเธขเธกเธฒเธ—เธณเนเธซเนเธชเธงเธขเธเธฒเธก เธเธดเธ” design เนเธกเนเธญเธญเธ) */}\r\n        </h1>\r\n      </div>\r\n      <div className=\"w-full h-auto flex flex-wrap justify-between\">\r\n        {AllGrade.map((item) => (\r\n          <Fragment key={item}>\r\n            <Link\r\n              href={`/management/program/year/${item}`}\r\n              className=\" w-[49%] my-3 h-16 rounded border bg-white p-4 hover:bg-slate-100 transition-all duration-300 cursor-pointer\"\r\n            >\r\n              <p className=\"flex justify-between text-xl font-bold\">\r\n                เธซเธฅเธฑเธเธชเธนเธ•เธฃเธเธฑเนเธเธกเธฑเธเธขเธกเธจเธถเธเธฉเธฒเธเธตเธ—เธตเน {item}\r\n                <span>\r\n                  <IoArrowForwardCircle size={30} />\r\n                </span>\r\n              </p>\r\n            </Link>\r\n          </Fragment>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default StudyProgram;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\program\\year\\[year]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\rooms\\component\\AddModalForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'room' is defined but never used.","line":9,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[960,963],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[960,963],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":25,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":25,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1004,1007],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1004,1007],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1954,1957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1954,1957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":95,"column":25,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":95,"endColumn":27,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2922,2924],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":95,"column":48,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":95,"endColumn":50,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2945,2947],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":104,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":104,"endColumn":22,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[3136,3136],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[3136,3136],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":147,"column":27,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":147,"endColumn":29,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[4664,4666],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":162,"column":61,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":162,"endColumn":63,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5372,5374],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5554,5557],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5554,5557],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":176,"column":58,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":176,"endColumn":60,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5967,5969],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":191,"column":61,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":191,"endColumn":63,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6758,6760],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6940,6943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6940,6943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":205,"column":58,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":205,"endColumn":60,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[7353,7355],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":221,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8203,8206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8203,8206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport TextField from \"@/components/mui/TextField\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport NumberField from \"@/components/elements/input/field/NumberField\";\r\nimport { TbTrash } from \"react-icons/tb\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport { createRoomsAction } from \"@/features/room/application/actions/room.actions\";\r\nimport type { room } from \"@/prisma/generated/client\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\n\r\n// Form state type allowing null/undefined for new entries\r\ntype RoomFormState = {\r\n  RoomID: number | null;\r\n  RoomName: string;\r\n  Building: string;\r\n  Floor: number | undefined;\r\n};\r\n\r\ntype props = {\r\n  closeModal: any;\r\n  mutate: Function;\r\n  openSnackBar?: any;\r\n};\r\nfunction AddModalForm({ closeModal, mutate }: props) {\r\n  const addData = async (data: RoomFormState[]) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      // Map local shape to server action input (Floor must be string)\r\n      const payload = data.map((r) => ({\r\n        RoomName: r.RoomName,\r\n        Building: r.Building,\r\n        Floor: String(r.Floor ?? \"\"),\r\n      }));\r\n      const result = await createRoomsAction(payload);\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธเธชเธณเน€เธฃเนเธ\", {\r\n        variant: \"success\",\r\n      });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธเนเธกเนเธชเธณเน€เธฃเนเธ \" +\r\n          (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n  const [isEmptyData, setIsEmptyData] = useState(false);\r\n  const [rooms, setRooms] = useState<RoomFormState[]>([\r\n    {\r\n      RoomID: null,\r\n      RoomName: \"\",\r\n      Building: \"\",\r\n      Floor: undefined,\r\n    },\r\n  ]);\r\n  const addList = () => {\r\n    const struct: RoomFormState = {\r\n      RoomID: null,\r\n      RoomName: \"\",\r\n      Building: \"\",\r\n      Floor: undefined,\r\n    };\r\n    setRooms(() => [...rooms, struct]);\r\n  };\r\n  const removeList = (index: number): void => {\r\n    const copyArray = [...rooms];\r\n    copyArray.splice(index, 1);\r\n    setRooms(() => copyArray);\r\n  };\r\n  const isValidData = (): boolean => {\r\n    let isValid = true;\r\n    rooms.forEach((data) => {\r\n      if (data.RoomName == \"\" || data.Building == \"\" || !data.Floor) {\r\n        setIsEmptyData(true);\r\n        isValid = false;\r\n      }\r\n    });\r\n    return isValid;\r\n  };\r\n  const handleSubmit = () => {\r\n    if (isValidData()) {\r\n      addData(rooms);\r\n      closeModal();\r\n    }\r\n  };\r\n  const cancel = () => {\r\n    closeModal();\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-fit ${\r\n            rooms.length > 5 ? \"h-[700px]\" : \"h-auto\"\r\n          } overflow-y-scroll overflow-x-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เน€เธเธดเนเธกเธซเนเธญเธเน€เธฃเธตเธขเธ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n          </div>\r\n          <div className=\"flex justify-between items-center\">\r\n            <MiniButton\r\n              title=\"เน€เธเธดเนเธกเธฃเธฒเธขเธเธฒเธฃ\"\r\n              titleColor=\"#000000\"\r\n              buttonColor=\"#FFFFFF\"\r\n              width={100}\r\n              height={30}\r\n              border={true}\r\n              hoverable={true}\r\n              borderColor=\"#222222\"\r\n              isSelected={false}\r\n              handleClick={addList}\r\n            />\r\n          </div>\r\n          {/* inputfield */}\r\n          <div className=\"flex flex-col gap-3\">\r\n            {rooms.map((room, index) => (\r\n              <React.Fragment key={`AddData${index + 1}`}>\r\n                <div\r\n                  className={`flex flex-row gap-3 items-center ${\r\n                    index == rooms.length - 1 ? \"\" : \"mt-8\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex flex-col items-center justify-center mr-5\">\r\n                    <p className=\"text-sm font-bold\">เธฃเธฒเธขเธเธฒเธฃเธ—เธตเน</p>\r\n                    <p>{index + 1}</p>\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2\">\r\n                    <TextField\r\n                      width=\"auto\"\r\n                      height=\"auto\"\r\n                      label={`เธเธทเนเธญเธซเนเธญเธ (RoomName):`}\r\n                      placeHolder=\"ex. เธเธญเธก1\"\r\n                      value={room.RoomName}\r\n                      borderColor={\r\n                        isEmptyData && room.RoomName.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      disabled={false}\r\n                      handleChange={(e: any) => {\r\n                        const value: string = e.target.value;\r\n                        setRooms(() =>\r\n                          rooms.map((item, ind) =>\r\n                            index === ind ? { ...item, RoomName: value } : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && room.RoomName.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2\">\r\n                    <TextField\r\n                      width=\"auto\"\r\n                      height=\"auto\"\r\n                      placeHolder=\"ex. 3\"\r\n                      label={`เธญเธฒเธเธฒเธฃ (Building):`}\r\n                      value={room.Building}\r\n                      borderColor={\r\n                        isEmptyData && room.Building.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      disabled={false}\r\n                      handleChange={(e: any) => {\r\n                        const value: string = e.target.value;\r\n                        setRooms(() =>\r\n                          rooms.map((item, ind) =>\r\n                            index === ind ? { ...item, Building: value } : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && room.Building.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2\">\r\n                    <NumberField\r\n                      width=\"auto\"\r\n                      height=\"auto\"\r\n                      label={`เธเธฑเนเธ (Floor):`}\r\n                      placeHolder=\"ex. 5\"\r\n                      value={room.Floor}\r\n                      borderColor={isEmptyData && !room.Floor ? \"#F96161\" : \"\"}\r\n                      disabled={false}\r\n                      handleChange={(e: any) => {\r\n                        const value: string = e.target.value;\r\n                        const floorValue =\r\n                          value === \"\" ? undefined : Number(value);\r\n                        setRooms(() =>\r\n                          rooms.map((item, ind) =>\r\n                            index === ind\r\n                              ? { ...item, Floor: floorValue }\r\n                              : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && !room.Floor ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  {rooms.length > 1 ? (\r\n                    <TbTrash\r\n                      size={20}\r\n                      className=\"mt-6 text-red-400 cursor-pointer\"\r\n                      onClick={() => removeList(index)}\r\n                    />\r\n                  ) : null}\r\n                </div>\r\n              </React.Fragment>\r\n            ))}\r\n          </div>\r\n          <span className=\"w-full flex justify-end mt-5 gap-3 h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={handleSubmit}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddModalForm;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\rooms\\component\\ConfirmDeleteModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[472,475],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[472,475],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[492,495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[492,495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[516,519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[516,519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[560,563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[560,563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":15,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":15,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[604,607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[604,607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":28,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":28,"endColumn":46,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[784,784],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[784,784],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1771,1774],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1771,1774],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { deleteRoomsAction } from \"@/features/room/application/actions/room.actions\";\r\nimport { room } from \"@/prisma/generated/client\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\ntype props = {\r\n  closeModal: any;\r\n  deleteData: any;\r\n  clearCheckList: any;\r\n  dataAmount: number;\r\n  checkedList: any;\r\n  mutate: Function;\r\n  openSnackBar?: any;\r\n};\r\n\r\nfunction ConfirmDeleteModal({\r\n  closeModal,\r\n  deleteData,\r\n  dataAmount,\r\n  clearCheckList,\r\n  checkedList,\r\n  mutate,\r\n}: props) {\r\n  const confirmed = () => {\r\n    removeMultiData(deleteData, checkedList);\r\n    closeModal();\r\n  };\r\n  const cancel = () => {\r\n    if (dataAmount === 1) {\r\n      clearCheckList();\r\n    }\r\n    closeModal();\r\n  };\r\n  const removeMultiData = async (data: room[], checkedList: number[]) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธฅเธเธเนเธญเธกเธนเธฅเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    const deleteData = data\r\n      .filter((item, _index) => checkedList.includes(item.RoomID))\r\n      .map((item) => item.RoomID);\r\n\r\n    try {\r\n      const result = await deleteRoomsAction({ roomIds: deleteData });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธฅเธเธเนเธญเธกเธนเธฅเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เธฅเธเธเนเธญเธกเธนเธฅเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธเนเธกเนเธชเธณเน€เธฃเนเธ \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n\r\n    clearCheckList();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-fit h-fit p-7 gap-10 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เธฅเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancel} />\r\n          </div>\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none font-bold\">\r\n              เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธเธเนเธญเธกเธนเธฅเธ—เธตเนเน€เธฅเธทเธญเธเธ—เธฑเนเธเธซเธกเธ” {dataAmount} เธฃเธฒเธขเธเธฒเธฃเนเธเนเธซเธฃเธทเธญเนเธกเน\r\n            </p>\r\n          </div>\r\n          <span className=\"w-full flex gap-3 justify-end h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default ConfirmDeleteModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\rooms\\component\\EditModalForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[662,665],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[662,665],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[676,679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[676,679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[700,703],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[700,703],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":17,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":17,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[744,747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[744,747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":27,"column":25,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":27,"endColumn":27,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1075,1077],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":27,"column":48,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":27,"endColumn":50,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1098,1100],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":36,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":36,"endColumn":31,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[1286,1286],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[1286,1286],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1500,1503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1500,1503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":75,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2379,2382],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2379,2382],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3390,3393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3390,3393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":110,"column":25,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":110,"endColumn":27,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3576,3578],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":125,"column":59,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":125,"endColumn":61,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[4239,4241],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4361,4364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4361,4364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":137,"column":56,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":137,"endColumn":58,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[4762,4764],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":152,"column":59,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":152,"endColumn":61,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5523,5525],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":155,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5645,5648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5645,5648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":164,"column":56,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":164,"endColumn":58,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6046,6048],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":180,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6864,6867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6864,6867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import NumberField from \"@/components/elements/input/field/NumberField\";\r\nimport TextField from \"@/components/mui/TextField\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport React, { useState } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport { updateRoomsAction } from \"@/features/room/application/actions/room.actions\";\r\nimport type { room } from \"@/prisma/generated/client\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\n\r\ntype props = {\r\n  closeModal: any;\r\n  data: any;\r\n  clearCheckList: any;\r\n  mutate: Function;\r\n  openSnackBar?: any;\r\n};\r\n\r\nfunction EditModalForm({ closeModal, data, clearCheckList, mutate }: props) {\r\n  const [editData, setEditData] = useState<room[]>(data);\r\n  const [isEmptyData, setIsEmptyData] = useState(false);\r\n  const isValidData = (): boolean => {\r\n    let isValid = true;\r\n    editData.forEach((data) => {\r\n      if (data.RoomName == \"\" || data.Building == \"\" || !data.Floor) {\r\n        setIsEmptyData(true);\r\n        isValid = false;\r\n      }\r\n    });\r\n    return isValid;\r\n  };\r\n  const confirmed = () => {\r\n    if (isValidData()) {\r\n      editMultiData(editData);\r\n      closeModal();\r\n    }\r\n  };\r\n  const cancelEdit = () => {\r\n    if (data.length === 1) {\r\n      clearCheckList();\r\n    }\r\n    closeModal();\r\n  };\r\n  const editMultiData = async (data: any) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเนเธเนเนเธเธเนเธญเธกเธนเธฅเธเธฑเนเธเน€เธฃเธตเธขเธ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      // Map local shape to server action input (Floor must be string)\r\n      const payload = data.map((r: room) => ({\r\n        RoomID: Number(r.RoomID),\r\n        RoomName: r.RoomName,\r\n        Building: r.Building,\r\n        Floor: String(r.Floor ?? \"\"),\r\n      }));\r\n      const result = await updateRoomsAction(payload);\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เนเธเนเนเธเธเนเธญเธกเธนเธฅเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธเธชเธณเน€เธฃเนเธ\", {\r\n        variant: \"success\",\r\n      });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เนเธเนเนเธเธเนเธญเธกเธนเธฅเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธเนเธกเนเธชเธณเน€เธฃเนเธ \" +\r\n          (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n\r\n    //clear checkbox\r\n    clearCheckList();\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-fit ${\r\n            data.length > 5 ? \"h-[700px]\" : \"h-auto\"\r\n          } overflow-y-scroll overflow-x-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เนเธเนเนเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancelEdit} />\r\n          </div>\r\n          {editData.map((item: any, index: number) => (\r\n            <React.Fragment key={`Edit${index}`}>\r\n              <div\r\n                className={`flex flex-row gap-3 items-center ${\r\n                  index == 0 ? \"\" : \"mt-2\"\r\n                }`}\r\n              >\r\n                <div className=\"flex flex-col items-center justify-center mr-5\">\r\n                  <p className=\"text-sm font-bold\">เธฃเธฒเธขเธเธฒเธฃเธ—เธตเน</p>\r\n                  <p>{index + 1}</p>\r\n                </div>\r\n                <div className=\"relative flex flex-col gap-2\">\r\n                  <TextField\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    label={`เธเธทเนเธญเธซเนเธญเธ (RoomName):`}\r\n                    placeHolder=\"ex. เธเธญเธก1\"\r\n                    value={item.RoomName}\r\n                    borderColor={\r\n                      isEmptyData && item.RoomName.length == 0 ? \"#F96161\" : \"\"\r\n                    }\r\n                    disabled={false}\r\n                    handleChange={(e: any) => {\r\n                      const value: string = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind ? { ...item, RoomName: value } : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && item.RoomName.length == 0 ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div className=\"relative flex flex-col gap-2\">\r\n                  <TextField\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    label={`เธญเธฒเธเธฒเธฃ (Building):`}\r\n                    placeHolder=\"ex. 3\"\r\n                    value={item.Building}\r\n                    borderColor={\r\n                      isEmptyData && item.Building.length == 0 ? \"#F96161\" : \"\"\r\n                    }\r\n                    disabled={false}\r\n                    handleChange={(e: any) => {\r\n                      const value: string = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind ? { ...item, Building: value } : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && item.Building.length == 0 ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div className=\"relative flex flex-col gap-2\">\r\n                  <NumberField\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    label={`เธเธฑเนเธ (Floor):`}\r\n                    placeHolder=\"ex. 5\"\r\n                    value={item.Floor}\r\n                    borderColor={isEmptyData && !item.Floor ? \"#F96161\" : \"\"}\r\n                    disabled={false}\r\n                    handleChange={(e: any) => {\r\n                      const value: string = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind ? { ...item, Floor: value } : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && !item.Floor ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n          <span className=\"w-full flex gap-3 justify-end mt-5 h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancelEdit}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default EditModalForm;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\rooms\\component\\RoomsManageClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\rooms\\component\\RoomsTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\rooms\\component\\TableRow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pageOfData' is defined but never used. Allowed unused args must match /^_/u.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":58,"column":15,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":58,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { BiEdit } from \"react-icons/bi\";\r\nimport type { room } from \"@/prisma/generated/client\";\r\n\r\ntype TableRowProps = {\r\n  item: room;\r\n  index: number;\r\n  clickToSelect: (id: number) => void;\r\n  checkedList: number[];\r\n  setEditModalActive: (active: boolean) => void;\r\n  pageOfData: room[];\r\n  searchTerm: string;\r\n};\r\n\r\nfunction TableRow({\r\n  item,\r\n  index,\r\n  clickToSelect,\r\n  checkedList,\r\n  setEditModalActive,\r\n  pageOfData,\r\n  searchTerm,\r\n}: TableRowProps) {\r\n  const matchesSearchTerm =\r\n    item.RoomName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    item.Building.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n  if (!matchesSearchTerm) {\r\n    return null; // Do not render if it doesn't match the search term\r\n  }\r\n\r\n  return (\r\n    <tr className=\"relative h-[60px] border-b bg-[#FFF] hover:bg-cyan-50 hover:text-cyan-600 even:bg-slate-50 cursor-pointer\">\r\n      <th>\r\n        <input\r\n          className=\"cursor-pointer\"\r\n          type=\"checkbox\"\r\n          name=\"itemdata\"\r\n          onChange={() => clickToSelect(item.RoomID)}\r\n          checked={checkedList.includes(item.RoomID)}\r\n        />\r\n      </th>\r\n      {([\"RoomName\", \"Building\", \"Floor\"] as const).map((key) => (\r\n        <td\r\n          key={key}\r\n          className=\"px-6 whitespace-nowrap select-none\"\r\n          onClick={() => clickToSelect(item.RoomID)}\r\n        >\r\n          {item[key]}\r\n        </td>\r\n      ))}\r\n      {checkedList.length < 1 ? (\r\n        <td className=\"mt-5 flex items-center justify-center gap-5 px-6 whitespace-nowrap select-none\">\r\n          <BiEdit\r\n            className=\"fill-[#A16207]\"\r\n            size={18}\r\n            onClick={() => {\r\n              (setEditModalActive(true), clickToSelect(item.RoomID));\r\n            }}\r\n          />\r\n          {/* Delete action removed - use top toolbar button with multi-select */}\r\n        </td>\r\n      ) : (\r\n        <td className=\"mt-5 flex gap-5 px-6 whitespace-nowrap select-none\" />\r\n      )}\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default TableRow;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\rooms\\model\\rooms.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rooms' is defined but never used.","line":1,"column":6,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"type rooms = {\r\n  RoomName: string;\r\n  Building: string;\r\n  Floor: number;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\rooms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\ActivityModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\ActivityTable.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\ActivityTable.tsx:67:10\n  65 |\n  66 |   useEffect(() => {\n> 67 |     void fetchActivities();\n     |          ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  68 |   }, []);\n  69 |\n  70 |   const handleAddClick = () => {","line":67,"column":10,"nodeType":null,"endLine":67,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { SubjectCategory, type subject } from \"@/prisma/generated/client\";\r\nimport {\r\n  getSubjectsAction,\r\n  deleteSubjectsAction,\r\n} from \"@/features/subject/application/actions/subject.actions\";\r\nimport {\r\n  Button,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n  TableContainer,\r\n  Paper,\r\n  IconButton,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@mui/material\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport ActivityModal from \"./ActivityModal\";\r\n\r\nexport default function ActivityTable() {\r\n  const [activities, setActivities] = useState<\r\n    Array<{\r\n      SubjectCode: string;\r\n      SubjectName: string;\r\n      ActivityType: string | null;\r\n      IsGraded: boolean;\r\n    }>\r\n  >([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editActivity, setEditActivity] = useState<{\r\n    SubjectCode?: string;\r\n    SubjectName?: string;\r\n    ActivityType?: string | null;\r\n    IsGraded?: boolean;\r\n  } | null>(null);\r\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\r\n  const [activityToDelete, setActivityToDelete] = useState<string | null>(null);\r\n\r\n  const fetchActivities = async () => {\r\n    setLoading(true);\r\n    const res = await getSubjectsAction({});\r\n    setActivities(\r\n      (res.data ?? [])\r\n        .filter((s: subject) => s.Category === SubjectCategory.ACTIVITY)\r\n        .map((s: subject) => ({\r\n          SubjectCode: s.SubjectCode,\r\n          SubjectName: s.SubjectName,\r\n          ActivityType: s.ActivityType ?? null,\r\n          IsGraded: s.IsGraded,\r\n        })),\r\n    );\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    void fetchActivities();\r\n  }, []);\r\n\r\n  const handleAddClick = () => {\r\n    setEditActivity(null);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEditClick = (activity: (typeof activities)[0]) => {\r\n    setEditActivity(activity);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteClick = (subjectCode: string) => {\r\n    setActivityToDelete(subjectCode);\r\n    setDeleteConfirmOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!activityToDelete) return;\r\n\r\n    const res = await deleteSubjectsAction({\r\n      SubjectCodes: [activityToDelete],\r\n    });\r\n    if (res.success) {\r\n      await fetchActivities();\r\n    }\r\n    setDeleteConfirmOpen(false);\r\n    setActivityToDelete(null);\r\n  };\r\n\r\n  const handleModalClose = async (shouldRefresh: boolean) => {\r\n    setModalOpen(false);\r\n    setEditActivity(null);\r\n    if (shouldRefresh) {\r\n      await fetchActivities();\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: \"flex\", justifyContent: \"center\", padding: 32 }}>\r\n        <CircularProgress />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ maxWidth: 800, margin: \"0 auto\", padding: 32 }}>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          marginBottom: 16,\r\n        }}\r\n      >\r\n        <Typography variant=\"h5\">Activity Management</Typography>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleAddClick}>\r\n          Add Activity\r\n        </Button>\r\n      </div>\r\n\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Subject Code</TableCell>\r\n              <TableCell>Subject Name</TableCell>\r\n              <TableCell>Activity Type</TableCell>\r\n              <TableCell align=\"right\">Actions</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {activities.length === 0 ? (\r\n              <TableRow>\r\n                <TableCell colSpan={4} align=\"center\">\r\n                  <Typography color=\"textSecondary\">\r\n                    No activities found. Add your first activity!\r\n                  </Typography>\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              activities.map((activity) => (\r\n                <TableRow key={activity.SubjectCode}>\r\n                  <TableCell>{activity.SubjectCode}</TableCell>\r\n                  <TableCell>{activity.SubjectName}</TableCell>\r\n                  <TableCell>{activity.ActivityType ?? \"-\"}</TableCell>\r\n                  <TableCell align=\"right\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      color=\"primary\"\r\n                      onClick={() => handleEditClick(activity)}\r\n                      title=\"Edit\"\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      color=\"error\"\r\n                      onClick={() => handleDeleteClick(activity.SubjectCode)}\r\n                      title=\"Delete\"\r\n                    >\r\n                      <DeleteIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n\r\n      <ActivityModal\r\n        open={modalOpen}\r\n        onClose={(shouldRefresh: boolean) =>\r\n          void handleModalClose(shouldRefresh)\r\n        }\r\n        editActivity={editActivity}\r\n      />\r\n\r\n      <Dialog\r\n        open={deleteConfirmOpen}\r\n        onClose={() => setDeleteConfirmOpen(false)}\r\n      >\r\n        <DialogTitle>Confirm Delete</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            Are you sure you want to delete this activity? This action cannot be\r\n            undone.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setDeleteConfirmOpen(false)}>Cancel</Button>\r\n          <Button\r\n            onClick={() => void handleDeleteConfirm()}\r\n            color=\"error\"\r\n            variant=\"contained\"\r\n          >\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\AddModalForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2351,2354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2351,2354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":159,"column":27,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":159,"endColumn":29,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5137,5139],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":174,"column":67,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":174,"endColumn":69,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5864,5866],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6006,6009],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6006,6009],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":189,"column":64,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":189,"endColumn":66,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6496,6498],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":204,"column":67,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":204,"endColumn":69,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[7311,7313],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7453,7456],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7453,7456],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":219,"column":64,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":219,"endColumn":66,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[7943,7945],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":232,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8668,8671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8668,8671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, type JSX } from \"react\";\r\nimport TextField from \"@/components/mui/TextField\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport { TbTrash } from \"react-icons/tb\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport type { subject } from \"@/prisma/generated/client\";\r\nimport { subject_credit, SubjectCategory } from \"@/prisma/generated/client\";\r\nimport { subjectCreditTitles } from \"@/models/credit-titles\";\r\nimport { createSubjectAction } from \"@/features/subject/application/actions/subject.actions\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\nimport { CircularProgress } from \"@mui/material\";\r\ntype Props = {\r\n  closeModal: () => void;\r\n  mutate: () => void;\r\n};\r\nfunction AddModalForm({ closeModal, mutate }: Props) {\r\n  const [isEmptyData, setIsEmptyData] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [subjects, setSubjects] = useState<\r\n    (Omit<subject, \"Credit\"> & { Credit: subject_credit | undefined })[]\r\n  >([\r\n    {\r\n      SubjectCode: \"\",\r\n      SubjectName: \"\",\r\n      Credit: undefined,\r\n      Category: SubjectCategory.CORE,\r\n      LearningArea: null,\r\n      ActivityType: null,\r\n      IsGraded: true,\r\n      Description: \"\",\r\n    },\r\n  ]);\r\n\r\n  const addData = async (\r\n    data: (Omit<subject, \"Credit\"> & { Credit: subject_credit | undefined })[],\r\n  ) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเน€เธเธดเนเธกเธงเธดเธเธฒ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    const subjectsToCreate = data.map((subject) => ({\r\n      ...subject,\r\n    }));\r\n\r\n    try {\r\n      const result = await createSubjectAction({ subjects: subjectsToCreate });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เน€เธเธดเนเธกเธงเธดเธเธฒเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เน€เธเธดเนเธกเธงเธดเธเธฒเนเธกเนเธชเธณเน€เธฃเนเธ \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const addList = () => {\r\n    const struct: subject = {\r\n      SubjectCode: \"\",\r\n      SubjectName: \"\",\r\n      Credit: subject_credit.CREDIT_05,\r\n      Category: SubjectCategory.CORE,\r\n      LearningArea: null,\r\n      ActivityType: null,\r\n      IsGraded: true,\r\n      Description: \"\",\r\n    };\r\n    setSubjects(() => [...subjects, struct]);\r\n  };\r\n  const removeList = (index: number): void => {\r\n    setSubjects(() => subjects.filter((_, ind) => ind !== index));\r\n  };\r\n  const isValidData = (): boolean => {\r\n    let isValid = true;\r\n    subjects.forEach((data) => {\r\n      if (\r\n        data.SubjectCode === \"\" ||\r\n        data.SubjectName === \"\" ||\r\n        !data.Credit ||\r\n        !data.Category\r\n      ) {\r\n        setIsEmptyData(true);\r\n        isValid = false;\r\n      }\r\n    });\r\n    return isValid;\r\n  };\r\n  const handleSubmit = async () => {\r\n    if (isValidData()) {\r\n      setIsSubmitting(true);\r\n      try {\r\n        await addData(subjects);\r\n        closeModal();\r\n      } finally {\r\n        setIsSubmitting(false);\r\n      }\r\n    }\r\n  };\r\n  const cancel = () => {\r\n    closeModal();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-fit ${\r\n            subjects.length > 5 ? \"h-[700px]\" : \"h-auto\"\r\n          } overflow-y-scroll overflow-x-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เน€เธเธดเนเธกเธฃเธฒเธขเธงเธดเธเธฒ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n          </div>\r\n          <div className=\"flex justify-between items-center\">\r\n            <MiniButton\r\n              title=\"เน€เธเธดเนเธกเธฃเธฒเธขเธเธฒเธฃ\"\r\n              titleColor=\"#000000\"\r\n              buttonColor=\"#FFFFFF\"\r\n              border={true}\r\n              hoverable={true}\r\n              borderColor=\"#222222\"\r\n              handleClick={addList}\r\n              width=\"fit-content\"\r\n              height={35}\r\n              isSelected={false}\r\n            />\r\n          </div>\r\n          {/* inputfield */}\r\n          <div className=\"flex flex-col gap-3\">\r\n            {subjects.map((subject, index) => (\r\n              <React.Fragment key={`AddData${index + 1}`}>\r\n                <div\r\n                  className={`flex flex-row gap-3 items-center ${\r\n                    index == subjects.length - 1 ? \"\" : \"mt-8\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex flex-col items-center justify-center mr-5\">\r\n                    <p className=\"text-sm font-bold\">เธฃเธฒเธขเธเธฒเธฃเธ—เธตเน</p>\r\n                    <p>{index + 1}</p>\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2\">\r\n                    <TextField\r\n                      width=\"auto\"\r\n                      height=\"auto\"\r\n                      placeHolder=\"ex. เธ—00000\"\r\n                      label=\"เธฃเธซเธฑเธชเธงเธดเธเธฒ (SubjectCode) :\"\r\n                      value={subject.SubjectCode}\r\n                      borderColor={\r\n                        isEmptyData && subject.SubjectCode.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      handleChange={(e: any) => {\r\n                        const value: string = e.target.value;\r\n                        setSubjects(() =>\r\n                          subjects.map((item, ind) =>\r\n                            index === ind\r\n                              ? { ...item, SubjectCode: value }\r\n                              : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && subject.SubjectCode.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2\">\r\n                    <TextField\r\n                      width=\"auto\"\r\n                      height=\"auto\"\r\n                      placeHolder=\"ex. เธ เธฒเธฉเธฒเนเธ—เธข1\"\r\n                      label=\"เธเธทเนเธญเธงเธดเธเธฒ (SubjectName) :\"\r\n                      value={subject.SubjectName}\r\n                      borderColor={\r\n                        isEmptyData && subject.SubjectName.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      handleChange={(e: any) => {\r\n                        const value: string = e.target.value;\r\n                        setSubjects(() =>\r\n                          subjects.map((item, ind) =>\r\n                            index === ind\r\n                              ? { ...item, SubjectName: value }\r\n                              : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && subject.SubjectName.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2\">\r\n                    <label className=\"text-sm font-bold\">\r\n                      เธซเธเนเธงเธขเธเธดเธ• (Credit):\r\n                    </label>\r\n                    <Dropdown\r\n                      data={Object.values(subject_credit)}\r\n                      renderItem={({ data }: { data: any }): JSX.Element => (\r\n                        <li className=\"w-full\">{subjectCreditTitles[data]}</li>\r\n                      )}\r\n                      width={150}\r\n                      height={40}\r\n                      currentValue={subject.Credit}\r\n                      placeHolder={\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"}\r\n                      borderColor={\r\n                        isEmptyData && !subject.Credit ? \"#F96161\" : \"\"\r\n                      }\r\n                      handleChange={(value: unknown) => {\r\n                        setSubjects(() =>\r\n                          subjects.map((item, ind) =>\r\n                            index === ind\r\n                              ? { ...item, Credit: value as subject_credit }\r\n                              : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && !subject.Credit ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2\">\r\n                    <label className=\"text-sm font-bold\">\r\n                      เธชเธฒเธฃเธฐเธเธฒเธฃเน€เธฃเธตเธขเธเธฃเธนเน (Category):\r\n                    </label>\r\n                    <Dropdown\r\n                      data={[\r\n                        SubjectCategory.CORE,\r\n                        SubjectCategory.ADDITIONAL,\r\n                        SubjectCategory.ACTIVITY,\r\n                      ]}\r\n                      renderItem={({\r\n                        data,\r\n                      }: {\r\n                        data: unknown;\r\n                      }): JSX.Element => {\r\n                        const category = data as SubjectCategory;\r\n                        return (\r\n                          <li className=\"w-full\">\r\n                            {category === SubjectCategory.CORE\r\n                              ? \"เธเธทเนเธเธเธฒเธ\"\r\n                              : category === SubjectCategory.ADDITIONAL\r\n                                ? \"เน€เธเธดเนเธกเน€เธ•เธดเธก\"\r\n                                : \"เธเธดเธเธเธฃเธฃเธกเธเธฑเธ’เธเธฒเธเธนเนเน€เธฃเธตเธขเธ\"}\r\n                          </li>\r\n                        );\r\n                      }}\r\n                      width={150}\r\n                      height={40}\r\n                      currentValue={subject.Category}\r\n                      borderColor={\r\n                        isEmptyData && !subject.Category ? \"#F96161\" : \"\"\r\n                      }\r\n                      placeHolder={\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"}\r\n                      handleChange={(value: unknown) => {\r\n                        setSubjects(() =>\r\n                          subjects.map((item, ind) =>\r\n                            index === ind\r\n                              ? { ...item, Category: value as SubjectCategory }\r\n                              : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && !subject.Category ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n\r\n                  {subjects.length > 1 ? (\r\n                    <TbTrash\r\n                      size={20}\r\n                      className=\"mt-6 text-red-400 cursor-pointer\"\r\n                      onClick={() => removeList(index)}\r\n                    />\r\n                  ) : null}\r\n                </div>\r\n              </React.Fragment>\r\n            ))}\r\n          </div>\r\n          <span className=\"w-full flex justify-end mt-5 gap-3 h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={isSubmitting}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={handleSubmit}\r\n              title={isSubmitting ? \"\" : \"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={\r\n                isSubmitting ? <CircularProgress size={20} /> : <CheckIcon />\r\n              }\r\n              reverseIcon={false}\r\n              isDisabled={isSubmitting}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddModalForm;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\ConfirmDeleteModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[498,501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[498,501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[519,522],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[519,522],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[544,547],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[544,547],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[616,619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[616,619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":16,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":16,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteData' is defined but never used. Allowed unused args must match /^_/u.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":13},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":29,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":29,"endColumn":47,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[833,833],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[833,833],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":45,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1821,1824],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1821,1824],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport { subject } from \"@/prisma/generated/client\";\r\nimport { deleteSubjectsAction } from \"@/features/subject/application/actions/subject.actions\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\ntype props = {\r\n  closeModal: any;\r\n  deleteData?: any;\r\n  clearCheckList?: any;\r\n  dataAmount?: number;\r\n  subjectData: subject[];\r\n  checkedList: any;\r\n  mutate: Function;\r\n};\r\n\r\nfunction ConfirmDeleteModal({\r\n  closeModal,\r\n  deleteData,\r\n  dataAmount,\r\n  clearCheckList,\r\n  subjectData,\r\n  checkedList,\r\n  mutate,\r\n}: props) {\r\n  const confirmed = () => {\r\n    removeMultiData(subjectData, checkedList);\r\n    closeModal();\r\n  };\r\n  const cancel = () => {\r\n    if (dataAmount === 1) {\r\n      clearCheckList();\r\n    }\r\n    closeModal();\r\n  };\r\n  const removeMultiData = async (data: subject[], checkedList: string[]) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธฅเธเธเนเธญเธกเธนเธฅ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    const deleteData = data\r\n      .filter((item, index) => checkedList.includes(item.SubjectCode))\r\n      .map((item) => item.SubjectCode);\r\n\r\n    try {\r\n      const result = await deleteSubjectsAction({ subjectCodes: deleteData });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธฅเธเธเนเธญเธกเธนเธฅเธงเธดเธเธฒเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เธฅเธเธเนเธญเธกเธนเธฅเธงเธดเธเธฒเนเธกเนเธชเธณเน€เธฃเนเธ \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n\r\n    clearCheckList();\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-fit h-fit p-7 gap-10 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เธฅเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancel} />\r\n          </div>\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none font-bold\">\r\n              เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธเธเนเธญเธกเธนเธฅเธ—เธตเนเน€เธฅเธทเธญเธเธ—เธฑเนเธเธซเธกเธ” {dataAmount} เธฃเธฒเธขเธเธฒเธฃเนเธเนเธซเธฃเธทเธญเนเธกเน\r\n            </p>\r\n          </div>\r\n          <span className=\"w-full flex gap-3 justify-end h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default ConfirmDeleteModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\EditModalForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\SubjectManageClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\SubjectTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\component\\TableRow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Fragment' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TbTrash' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pageOfData' is defined but never used. Allowed unused args must match /^_/u.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":62,"column":15,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":62,"endColumn":75}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Fragment } from \"react\";\r\nimport { BiEdit } from \"react-icons/bi\";\r\nimport { TbTrash } from \"react-icons/tb\";\r\nimport { subjectCreditTitles } from \"@/models/credit-titles\";\r\nimport type { subject } from \"@/prisma/generated/client\";\r\n\r\ntype TableRowProps = {\r\n  item: subject;\r\n  index: number;\r\n  clickToSelect: (code: string) => void;\r\n  checkedList: string[];\r\n  setEditModalActive: (active: boolean) => void;\r\n  pageOfData: subject[];\r\n  searchTerm: string;\r\n};\r\n\r\nfunction TableRow({\r\n  item,\r\n  index,\r\n  clickToSelect,\r\n  checkedList,\r\n  setEditModalActive,\r\n  pageOfData,\r\n  searchTerm,\r\n}: TableRowProps) {\r\n  const matchesSearchTerm =\r\n    item.SubjectName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    item.SubjectCode.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n  if (!matchesSearchTerm) {\r\n    return null; // Do not render if it doesn't match the search term\r\n  }\r\n\r\n  return (\r\n    <tr className=\"relative h-[60px] border-b bg-[#FFF] hover:bg-cyan-50 hover:text-cyan-600 even:bg-slate-50 cursor-pointer\">\r\n      <th>\r\n        <input\r\n          className=\"cursor-pointer\"\r\n          type=\"checkbox\"\r\n          name=\"itemdata\"\r\n          onChange={() => clickToSelect(item.SubjectCode)}\r\n          checked={checkedList.includes(item.SubjectCode)}\r\n        />\r\n      </th>\r\n      {([\"SubjectCode\", \"SubjectName\", \"Credit\", \"Category\"] as const).map(\r\n        (key) => (\r\n          <td\r\n            key={key}\r\n            className=\"px-6 whitespace-nowrap select-none\"\r\n            onClick={() => clickToSelect(item.SubjectCode)}\r\n          >\r\n            {key === \"Credit\" ? subjectCreditTitles[item[key]] : item[key]}\r\n          </td>\r\n        ),\r\n      )}\r\n      {checkedList.length < 1 ? (\r\n        <td className=\"mt-5 flex gap-5 px-6 whitespace-nowrap select-none\">\r\n          <BiEdit\r\n            className=\"fill-[#A16207]\"\r\n            size={18}\r\n            onClick={() => {\r\n              (setEditModalActive(true), clickToSelect(item.SubjectCode));\r\n            }}\r\n          />\r\n          {/* Delete action removed - use top toolbar button with multi-select */}\r\n        </td>\r\n      ) : (\r\n        <td className=\"mt-5 flex gap-5 px-6 whitespace-nowrap select-none\" />\r\n      )}\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default TableRow;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\subject\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\teacher-assignment\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\teacher\\component\\AddModalForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'teacher' is defined but never used.","line":8,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":22},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":76,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":76,"endColumn":16,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[2506,2506],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[2506,2506],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2537,2540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2537,2540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":85,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":85,"endColumn":18,"suggestions":[{"fix":{"range":[2743,2762],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":109,"column":21,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":109,"endColumn":23,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3407,3409],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":110,"column":24,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":110,"endColumn":26,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3440,3442],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":111,"column":23,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":111,"endColumn":25,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3472,3474],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":112,"column":25,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":112,"endColumn":27,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3506,3508],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":113,"column":20,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":113,"endColumn":22,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3535,3537],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":171,"column":27,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":171,"endColumn":29,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5366,5368],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":195,"column":62,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":195,"endColumn":64,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6446,6448],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":211,"column":59,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":211,"endColumn":61,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[7124,7126],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":227,"column":65,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":227,"endColumn":67,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[8006,8008],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8148,8151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8148,8151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":243,"column":62,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":243,"endColumn":64,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[8674,8676],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":259,"column":64,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":259,"endColumn":66,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[9558,9560],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":263,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9700,9703],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9700,9703],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":273,"column":61,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":273,"endColumn":63,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[10162,10164],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":309,"column":66,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":309,"endColumn":68,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[11837,11839],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":323,"column":63,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":323,"endColumn":65,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[12422,12424],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":339,"column":61,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":339,"endColumn":63,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[13304,13306],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":343,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":343,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13446,13449],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13446,13449],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":353,"column":58,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":353,"endColumn":60,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[13902,13904],"text":"==="},"desc":"Use '===' instead of '=='."}]}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, Fragment, type JSX } from \"react\";\r\nimport TextField from \"@/components/mui/TextField\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport { TbTrash } from \"react-icons/tb\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\nimport { CircularProgress } from \"@mui/material\";\r\n\r\n// Server Actions\r\nimport { createTeachersAction } from \"@/features/teacher/application/actions/teacher.actions\";\r\n\r\n// Form state type allowing null for new entries\r\ntype TeacherFormState = {\r\n  TeacherID: number | null;\r\n  Prefix: string;\r\n  Firstname: string;\r\n  Lastname: string;\r\n  Department: string;\r\n  Email: string;\r\n  Role: string;\r\n};\r\n\r\ntype props = {\r\n  closeModal: () => void;\r\n  mutate: () => void | Promise<void>;\r\n};\r\nfunction AddModalForm({ closeModal, mutate }: props) {\r\n  const [isEmptyData, setIsEmptyData] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [teachers, setTeachers] = useState<TeacherFormState[]>([\r\n    {\r\n      TeacherID: null,\r\n      Prefix: \"เธเธฒเธข\",\r\n      Firstname: \"\",\r\n      Lastname: \"\",\r\n      Department: \"เธเธ“เธดเธ•เธจเธฒเธชเธ•เธฃเน\",\r\n      Email: `new_teacher_${crypto.randomUUID()}@school.local`,\r\n      Role: \"teacher\",\r\n    },\r\n  ]);\r\n\r\n  const addData = async (data: TeacherFormState[]) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธเธฃเธน\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await createTeachersAction(\r\n        data.map((t) => ({\r\n          Prefix: t.Prefix || \"เธเธฒเธข\",\r\n          Firstname: t.Firstname,\r\n          Lastname: t.Lastname,\r\n          Department: t.Department || \"เธเธ“เธดเธ•เธจเธฒเธชเธ•เธฃเน\",\r\n          Email: t.Email,\r\n          Role: t.Role || \"teacher\",\r\n        })),\r\n      );\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธเธฃเธนเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธเธฃเธนเนเธกเนเธชเธณเน€เธฃเนเธ: \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.log(error);\r\n    }\r\n  };\r\n  const addList = () => {\r\n    const newTeacher: TeacherFormState = {\r\n      TeacherID: null,\r\n      Prefix: \"เธเธฒเธข\",\r\n      Firstname: \"\",\r\n      Lastname: \"\",\r\n      Department: \"เธเธ“เธดเธ•เธจเธฒเธชเธ•เธฃเน\",\r\n      Email: `new_teacher_${Date.now()}@school.local`,\r\n      Role: \"teacher\",\r\n    };\r\n    setTeachers(() => [...teachers, newTeacher]);\r\n  };\r\n  const removeList = (index: number): void => {\r\n    const copyArray = [...teachers];\r\n    copyArray.splice(index, 1);\r\n    setTeachers(() => copyArray);\r\n  };\r\n  const isValidData = (): boolean => {\r\n    let isValid = true;\r\n    teachers.forEach((data) => {\r\n      if (\r\n        data.Prefix == \"\" ||\r\n        data.Firstname == \"\" ||\r\n        data.Lastname == \"\" ||\r\n        data.Department == \"\" ||\r\n        data.Email == \"\"\r\n      ) {\r\n        setIsEmptyData(true);\r\n        isValid = false;\r\n      }\r\n    });\r\n    return isValid;\r\n  };\r\n  const handleSubmit = async () => {\r\n    if (isValidData()) {\r\n      setIsSubmitting(true);\r\n      try {\r\n        await addData(teachers);\r\n        closeModal();\r\n      } finally {\r\n        setIsSubmitting(false);\r\n      }\r\n    }\r\n  };\r\n  const cancel = () => {\r\n    closeModal();\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-fit ${\r\n            teachers.length > 5 ? \"h-[700px]\" : \"h-auto\"\r\n          } overflow-y-scroll overflow-x-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เน€เธเธดเนเธกเธฃเธฒเธขเธเธทเนเธญเธเธฃเธน</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n          </div>\r\n          <div className=\"flex justify-between items-center\">\r\n            <MiniButton\r\n              title=\"เน€เธเธดเนเธกเธฃเธฒเธขเธเธฒเธฃ\"\r\n              titleColor=\"#000000\"\r\n              buttonColor=\"#FFFFFF\"\r\n              border={true}\r\n              hoverable={true}\r\n              borderColor=\"#222222\"\r\n              handleClick={addList}\r\n              width={\"\"}\r\n              height={\"\"}\r\n              isSelected={false}\r\n            />\r\n          </div>\r\n          {/* inputfield */}\r\n          <div className=\"flex flex-col gap-3\">\r\n            {teachers.map((teacher, index) => (\r\n              <Fragment key={`${index + 1}`}>\r\n                <div\r\n                  className={`flex flex-row gap-3 items-center ${\r\n                    index == teachers.length - 1 ? \"\" : \"mt-8\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex flex-col items-center justify-center mr-5\">\r\n                    <p className=\"text-sm font-bold\">เธฃเธฒเธขเธเธฒเธฃเธ—เธตเน</p>\r\n                    <p>{index + 1}</p>\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2\">\r\n                    <label className=\"text-sm font-bold\">\r\n                      เธเธณเธเธณเธซเธเนเธฒเธเธทเนเธญ (Prefix):\r\n                    </label>\r\n                    <Dropdown\r\n                      testId={`prefix-${index}`}\r\n                      data={[\"เธเธฒเธข\", \"เธเธฒเธ\", \"เธเธฒเธเธชเธฒเธง\"]}\r\n                      renderItem={({\r\n                        data,\r\n                      }: {\r\n                        data: unknown;\r\n                      }): JSX.Element => (\r\n                        <li className=\"w-full\">{data as string}</li>\r\n                      )}\r\n                      width={150}\r\n                      height={40}\r\n                      borderColor={\r\n                        isEmptyData && teacher.Prefix.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      currentValue={teacher.Prefix}\r\n                      placeHolder={\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"}\r\n                      handleChange={(value: unknown) => {\r\n                        setTeachers(() =>\r\n                          teachers.map((item, ind) =>\r\n                            index === ind\r\n                              ? { ...item, Prefix: value as string }\r\n                              : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && teacher.Prefix.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"flex flex-col gap-2 h-30 relative\">\r\n                    <TextField\r\n                      width=\"auto\"\r\n                      height=\"auto\"\r\n                      placeHolder=\"ex. เธญเน€เธเธ\"\r\n                      label=\"เธเธทเนเธญ (Firstname) :\"\r\n                      value={teacher.Firstname}\r\n                      inputProps={{ \"data-testid\": `firstname-${index}` }}\r\n                      borderColor={\r\n                        isEmptyData && teacher.Firstname.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      handleChange={(e: any) => {\r\n                        const value: string = e.target.value;\r\n                        setTeachers(() =>\r\n                          teachers.map((item, ind) =>\r\n                            index === ind\r\n                              ? { ...item, Firstname: value }\r\n                              : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                      disabled={false}\r\n                    />\r\n                    {isEmptyData && teacher.Firstname.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"flex flex-col gap-2 h-30 relative\">\r\n                    <TextField\r\n                      width=\"auto\"\r\n                      height=\"auto\"\r\n                      placeHolder=\"ex. เธเธฃเธฐเธชเธเธเน\"\r\n                      label=\"เธเธฒเธกเธชเธเธธเธฅ (Lastname) :\"\r\n                      value={teacher.Lastname}\r\n                      inputProps={{ \"data-testid\": `lastname-${index}` }}\r\n                      borderColor={\r\n                        isEmptyData && teacher.Lastname.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      handleChange={(e: any) => {\r\n                        const value: string = e.target.value;\r\n                        setTeachers(() =>\r\n                          teachers.map((item, ind) =>\r\n                            index === ind ? { ...item, Lastname: value } : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                      disabled={false}\r\n                    />\r\n                    {isEmptyData && teacher.Lastname.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"relative flex flex-col gap-2 h-30\">\r\n                    <label className=\"text-sm font-bold\">\r\n                      เธเธฅเธธเนเธกเธชเธฒเธฃเธฐ (Department):\r\n                    </label>\r\n                    <Dropdown\r\n                      testId={`department-${index}`}\r\n                      data={[\r\n                        \"เธเธ“เธดเธ•เธจเธฒเธชเธ•เธฃเน\",\r\n                        \"เธงเธดเธ—เธขเธฒเธจเธฒเธชเธ•เธฃเนเนเธฅเธฐเน€เธ—เธเนเธเนเธฅเธขเธต\",\r\n                        \"เธ เธฒเธฉเธฒเนเธ—เธข\",\r\n                        \"เธ เธฒเธฉเธฒเธ•เนเธฒเธเธเธฃเธฐเน€เธ—เธจ\",\r\n                        \"เธเธฒเธฃเธเธฒเธเธญเธฒเธเธตเธ\",\r\n                        \"เธจเธดเธฅเธเธฐ\",\r\n                        \"เธชเธฑเธเธเธกเธจเธถเธเธฉเธฒ เธจเธฒเธชเธเธฒ เนเธฅเธฐเธงเธฑเธ’เธเธเธฃเธฃเธก\",\r\n                        \"เธชเธธเธเธจเธถเธเธฉเธฒเนเธฅเธฐเธเธฅเธจเธถเธเธฉเธฒ\",\r\n                      ]}\r\n                      renderItem={({\r\n                        data,\r\n                      }: {\r\n                        data: unknown;\r\n                      }): JSX.Element => (\r\n                        <li className=\"w-full\">{data as string}</li>\r\n                      )}\r\n                      width={150}\r\n                      height={40}\r\n                      currentValue={teacher.Department}\r\n                      placeHolder={\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"}\r\n                      // #F96161 --red\r\n                      borderColor={\r\n                        isEmptyData && teacher.Department.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      handleChange={(value: unknown) => {\r\n                        setTeachers(() =>\r\n                          teachers.map((item, ind) =>\r\n                            index === ind\r\n                              ? { ...item, Department: value as string }\r\n                              : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                    />\r\n                    {isEmptyData && teacher.Department.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"flex flex-col gap-2 h-30 relative\">\r\n                    <TextField\r\n                      width=\"auto\"\r\n                      height=\"auto\"\r\n                      placeHolder=\"ex. example@example.com\"\r\n                      label=\"เธญเธตเน€เธกเธฅ (Email) :\"\r\n                      value={teacher.Email}\r\n                      inputProps={{ \"data-testid\": `email-${index}` }}\r\n                      borderColor={\r\n                        isEmptyData && teacher.Email.length == 0\r\n                          ? \"#F96161\"\r\n                          : \"\"\r\n                      }\r\n                      handleChange={(e: any) => {\r\n                        const value: string = e.target.value;\r\n                        setTeachers(() =>\r\n                          teachers.map((item, ind) =>\r\n                            index === ind ? { ...item, Email: value } : item,\r\n                          ),\r\n                        );\r\n                      }}\r\n                      disabled={false}\r\n                    />\r\n                    {isEmptyData && teacher.Email.length == 0 ? (\r\n                      <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                        <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                        <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  {teachers.length > 1 ? (\r\n                    <TbTrash\r\n                      size={20}\r\n                      className=\"mt-6 text-red-400 cursor-pointer\"\r\n                      onClick={() => removeList(index)}\r\n                    />\r\n                  ) : null}\r\n                </div>\r\n              </Fragment>\r\n            ))}\r\n          </div>\r\n          <span className=\"w-full flex justify-end mt-5 gap-3 h-11\">\r\n            <PrimaryButton\r\n              data-testid=\"add-teacher-cancel\"\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={isSubmitting}\r\n            />\r\n            <PrimaryButton\r\n              data-testid=\"add-teacher-submit\"\r\n              handleClick={handleSubmit}\r\n              title={isSubmitting ? \"\" : \"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={\r\n                isSubmitting ? <CircularProgress size={20} /> : <CheckIcon />\r\n              }\r\n              reverseIcon={false}\r\n              isDisabled={isSubmitting}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddModalForm;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\teacher\\component\\ConfirmDeleteModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[484,487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[484,487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[532,535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[532,535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[556,559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[556,559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":17,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":17,"endColumn":19},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":29,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":29,"endColumn":47,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[781,781],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[781,781],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":48,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1881,1884],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1881,1884],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":75,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":75,"endColumn":18,"suggestions":[{"fix":{"range":[2084,2103],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AiOutlineClose } from \"react-icons/ai\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\n\r\n// Server Actions\r\nimport { deleteTeachersAction } from \"@/features/teacher/application/actions/teacher.actions\";\r\n\r\ntype props = {\r\n  closeModal: any;\r\n  teacherData: teacher[];\r\n  checkedList: any;\r\n  clearCheckList: any;\r\n  dataAmount: number;\r\n  mutate: Function;\r\n};\r\n\r\nfunction ConfirmDeleteModal({\r\n  closeModal,\r\n  teacherData,\r\n  checkedList,\r\n  dataAmount,\r\n  clearCheckList,\r\n  mutate,\r\n}: props) {\r\n  const confirmed = () => {\r\n    removeMultiData(teacherData, checkedList);\r\n    closeModal();\r\n  };\r\n  const cancel = () => {\r\n    if (dataAmount === 1) {\r\n      clearCheckList();\r\n    }\r\n    closeModal();\r\n  };\r\n  //Function เธ•เธฑเธงเธเธตเนเนเธเนเธฅเธเธเนเธญเธกเธนเธฅเธซเธเธถเนเธเธ•เธฑเธงเธเธฃเนเธญเธกเธเธฑเธเธซเธฅเธฒเธขเธ•เธฑเธงเธเธฒเธเธเธฒเธฃเธ•เธดเนเธ checkbox\r\n  const removeMultiData = async (\r\n    data: teacher[],\r\n    checkedList: (string | number)[],\r\n  ) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธฅเธเธเนเธญเธกเธนเธฅเธเธฃเธน\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n    const deleteData = data\r\n      .filter((item, index) => checkedList.includes(item.TeacherID))\r\n      .map((item) => item.TeacherID);\r\n\r\n    try {\r\n      const result = await deleteTeachersAction({\r\n        teacherIds: deleteData,\r\n      });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธฅเธเธเนเธญเธกเธนเธฅเธเธฃเธนเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เธฅเธเธเนเธญเธกเธนเธฅเธเธฃเธนเนเธกเนเธชเธณเน€เธฃเนเธ: \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.log(error);\r\n    }\r\n    clearCheckList();\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-fit h-fit p-7 gap-10 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เธฅเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancel} />\r\n          </div>\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none font-bold\">\r\n              เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธเธเนเธญเธกเธนเธฅเธ—เธตเนเน€เธฅเธทเธญเธเธ—เธฑเนเธเธซเธกเธ” {dataAmount} เธฃเธฒเธขเธเธฒเธฃเนเธเนเธซเธฃเธทเธญเนเธกเน\r\n            </p>\r\n          </div>\r\n          <span className=\"w-full flex gap-3 justify-end h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default ConfirmDeleteModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\teacher\\component\\EditModalForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[761,764],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[761,764],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[805,808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[805,808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":21,"column":11,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":21,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1155,1158],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1155,1158],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2035,2038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2035,2038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":67,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":67,"endColumn":18,"suggestions":[{"fix":{"range":[2241,2260],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":77,"column":21,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":77,"endColumn":23,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2453,2455],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":78,"column":24,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":78,"endColumn":26,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2486,2488],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":79,"column":23,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":79,"endColumn":25,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2518,2520],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":80,"column":25,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":80,"endColumn":27,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2552,2554],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":81,"column":20,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":81,"endColumn":22,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2581,2583],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":122,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3762,3765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3762,3765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":126,"column":25,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":126,"endColumn":27,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3948,3950],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4542,4545],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4542,4545],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":146,"column":57,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":146,"endColumn":59,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[4855,4857],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":159,"column":54,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":159,"endColumn":56,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5397,5399],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":173,"column":60,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":173,"endColumn":62,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6124,6126],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":175,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6208,6211],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6208,6211],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":184,"column":57,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":184,"endColumn":59,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6603,6605],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":198,"column":59,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":198,"endColumn":61,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[7330,7332],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7414,7417],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7414,7417],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":209,"column":56,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":209,"endColumn":58,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[7807,7809],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8838,8841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8838,8841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":238,"column":61,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":238,"endColumn":63,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[9159,9161],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":253,"column":58,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":253,"endColumn":60,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[9759,9761],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":268,"column":56,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":268,"endColumn":58,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[10533,10535],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":270,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10617,10620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10617,10620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":280,"column":53,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":280,"endColumn":55,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[11050,11052],"text":"==="},"desc":"Use '===' instead of '=='."}]}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import TextField from \"@/components/mui/TextField\";\r\nimport Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\n\r\nimport React, { useState, type JSX } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\nimport { CircularProgress } from \"@mui/material\";\r\n\r\n// Server Actions\r\nimport { updateTeachersAction } from \"@/features/teacher/application/actions/teacher.actions\";\r\n\r\ntype props = {\r\n  closeModal: any;\r\n  data: teacher[];\r\n  clearCheckList: any;\r\n  mutate: Function;\r\n};\r\n\r\nfunction EditModalForm({ closeModal, data, clearCheckList, mutate }: props) {\r\n  const [editData, setEditData] = useState<teacher[]>(Object.assign([], data));\r\n  const [isEmptyData, setIsEmptyData] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const editMultiData = async (data: any) => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเนเธเนเนเธเธเนเธญเธกเธนเธฅเธเธฃเธน\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await updateTeachersAction({\r\n        teachers: data.map((t: teacher) => ({\r\n          TeacherID: t.TeacherID,\r\n          Prefix: t.Prefix,\r\n          Firstname: t.Firstname,\r\n          Lastname: t.Lastname,\r\n          Department: t.Department,\r\n          Email: t.Email,\r\n          Role: t.Role || \"teacher\",\r\n        })),\r\n      });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เนเธเนเนเธเธเนเธญเธกเธนเธฅเธเธฃเธนเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เนเธเนเนเธเธเนเธญเธกเธนเธฅเธเธฃเธนเนเธกเนเธชเธณเน€เธฃเนเธ: \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.log(error);\r\n    }\r\n\r\n    //clear checkbox\r\n    clearCheckList();\r\n  };\r\n  const isValidData = (): boolean => {\r\n    let isValid = true;\r\n    editData.forEach((data) => {\r\n      if (\r\n        data.Prefix == \"\" ||\r\n        data.Firstname == \"\" ||\r\n        data.Lastname == \"\" ||\r\n        data.Department == \"\" ||\r\n        data.Email == \"\"\r\n      ) {\r\n        setIsEmptyData(true);\r\n        isValid = false;\r\n      }\r\n    });\r\n    return isValid;\r\n  };\r\n  const confirmed = async () => {\r\n    if (isValidData()) {\r\n      setIsSubmitting(true);\r\n      try {\r\n        await editMultiData(editData);\r\n        closeModal();\r\n      } finally {\r\n        setIsSubmitting(false);\r\n      }\r\n    }\r\n  };\r\n  const cancelEdit = () => {\r\n    if (data.length === 1) {\r\n      clearCheckList();\r\n    }\r\n    closeModal();\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-fit ${\r\n            data.length > 5 ? \"h-[700px]\" : \"h-auto\"\r\n          } overflow-y-scroll overflow-x-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เนเธเนเนเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancelEdit} />\r\n          </div>\r\n          {editData.map((item: any, index: number) => (\r\n            <React.Fragment key={`Edit${index}`}>\r\n              <div\r\n                className={`flex flex-row gap-3 items-center ${\r\n                  index == 0 ? \"\" : \"mt-1\"\r\n                }`}\r\n              >\r\n                <div className=\"flex flex-col items-center justify-center mr-5\">\r\n                  <p className=\"text-sm font-bold\">เธฃเธฒเธขเธเธฒเธฃเธ—เธตเน</p>\r\n                  <p>{index + 1}</p>\r\n                </div>\r\n                <div className=\"relative flex flex-col gap-2\">\r\n                  <label className=\"text-sm font-bold\">\r\n                    เธเธณเธเธณเธซเธเนเธฒเธเธทเนเธญ (Prefix):\r\n                  </label>\r\n                  <Dropdown\r\n                    data={[\"เธเธฒเธข\", \"เธเธฒเธ\", \"เธเธฒเธเธชเธฒเธง\"]}\r\n                    renderItem={({ data }: { data: any }): JSX.Element => (\r\n                      <li className=\"w-full\">{data}</li>\r\n                    )}\r\n                    width={150}\r\n                    height={40}\r\n                    currentValue={item.Prefix}\r\n                    borderColor={\r\n                      isEmptyData && item.Prefix.length == 0 ? \"#F96161\" : \"\"\r\n                    }\r\n                    placeHolder={\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"}\r\n                    handleChange={(value: unknown) => {\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind\r\n                            ? { ...item, Prefix: value as string }\r\n                            : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && item.Prefix.length == 0 ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div className=\"flex flex-col gap-2 h-30 relative\">\r\n                  <TextField\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    label={`เธเธทเนเธญ (Firstname):`}\r\n                    value={item.Firstname}\r\n                    borderColor={\r\n                      isEmptyData && item.Firstname.length == 0 ? \"#F96161\" : \"\"\r\n                    }\r\n                    handleChange={(e: any) => {\r\n                      const value = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind ? { ...item, Firstname: value } : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && item.Firstname.length == 0 ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div className=\"flex flex-col gap-2 h-30 relative\">\r\n                  <TextField\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    label={`เธเธฒเธกเธชเธเธธเธฅ (Lastname):`}\r\n                    value={item.Lastname}\r\n                    borderColor={\r\n                      isEmptyData && item.Lastname.length == 0 ? \"#F96161\" : \"\"\r\n                    }\r\n                    handleChange={(e: any) => {\r\n                      const value = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind ? { ...item, Lastname: value } : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && item.Lastname.length == 0 ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div className=\"relative flex flex-col gap-2\">\r\n                  <label className=\"text-sm font-bold\">\r\n                    เธเธฅเธธเนเธกเธชเธฒเธฃเธฐ (Department):\r\n                  </label>\r\n                  <Dropdown\r\n                    data={[\r\n                      \"เธเธ“เธดเธ•เธจเธฒเธชเธ•เธฃเน\",\r\n                      \"เธงเธดเธ—เธขเธฒเธจเธฒเธชเธ•เธฃเนเนเธฅเธฐเน€เธ—เธเนเธเนเธฅเธขเธต\",\r\n                      \"เธ เธฒเธฉเธฒเนเธ—เธข\",\r\n                      \"เธ เธฒเธฉเธฒเธ•เนเธฒเธเธเธฃเธฐเน€เธ—เธจ\",\r\n                      \"เธเธฒเธฃเธเธฒเธเธญเธฒเธเธตเธ\",\r\n                      \"เธจเธดเธฅเธเธฐ\",\r\n                      \"เธชเธฑเธเธเธกเธจเธถเธเธฉเธฒ เธจเธฒเธชเธเธฒ เนเธฅเธฐเธงเธฑเธ’เธเธเธฃเธฃเธก\",\r\n                      \"เธชเธธเธเธจเธถเธเธฉเธฒเนเธฅเธฐเธเธฅเธจเธถเธเธฉเธฒ\",\r\n                    ]}\r\n                    renderItem={({ data }: { data: any }): JSX.Element => (\r\n                      <li className=\"w-full\">{data}</li>\r\n                    )}\r\n                    width={150}\r\n                    height={40}\r\n                    currentValue={item.Department}\r\n                    borderColor={\r\n                      isEmptyData && item.Department.length == 0\r\n                        ? \"#F96161\"\r\n                        : \"\"\r\n                    }\r\n                    placeHolder={\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"}\r\n                    handleChange={(value: unknown) => {\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind\r\n                            ? { ...item, Department: value as string }\r\n                            : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                  />\r\n                  {isEmptyData && item.Department.length == 0 ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div className=\"flex flex-col gap-2 h-30 relative\">\r\n                  <TextField\r\n                    width=\"auto\"\r\n                    height=\"auto\"\r\n                    placeHolder=\"ex. example@example.com\"\r\n                    label=\"เธญเธตเน€เธกเธฅ (Email) :\"\r\n                    value={item.Email}\r\n                    borderColor={\r\n                      isEmptyData && item.Email.length == 0 ? \"#F96161\" : \"\"\r\n                    }\r\n                    handleChange={(e: any) => {\r\n                      const value: string = e.target.value;\r\n                      setEditData(() =>\r\n                        editData.map((item, ind) =>\r\n                          index === ind ? { ...item, Email: value } : item,\r\n                        ),\r\n                      );\r\n                    }}\r\n                    disabled={false}\r\n                  />\r\n                  {isEmptyData && item.Email.length == 0 ? (\r\n                    <div className=\"absolute left-0 bottom-[-35px] flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                      <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                      <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n          <span className=\"w-full flex gap-3 justify-end mt-5 h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancelEdit}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={isSubmitting}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={isSubmitting ? \"\" : \"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={\r\n                isSubmitting ? <CircularProgress size={20} /> : <CheckIcon />\r\n              }\r\n              reverseIcon={false}\r\n              isDisabled={isSubmitting}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default EditModalForm;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\teacher\\component\\TableRow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Fragment' is defined but never used.","line":2,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TbTrash' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pageOfData' is defined but never used. Allowed unused args must match /^_/u.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":62,"column":15,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":62,"endColumn":73}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// TableRow.jsx\r\nimport React, { Fragment } from \"react\";\r\nimport { BiEdit } from \"react-icons/bi\";\r\nimport { TbTrash } from \"react-icons/tb\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\n\r\ntype TableRowProps = {\r\n  item: teacher;\r\n  index: number;\r\n  clickToSelect: (id: number) => void;\r\n  checkedList: number[];\r\n  setEditModalActive: (active: boolean) => void;\r\n  pageOfData: teacher[];\r\n  searchTerm: string;\r\n};\r\n\r\nfunction TableRow({\r\n  item,\r\n  index,\r\n  clickToSelect,\r\n  checkedList,\r\n  setEditModalActive,\r\n  pageOfData,\r\n  searchTerm,\r\n}: TableRowProps) {\r\n  const matchesSearchTerm =\r\n    item.Firstname.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    item.Lastname.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n  if (!matchesSearchTerm) {\r\n    return null; // Do not render if it doesn't match the search term\r\n  }\r\n\r\n  return (\r\n    <tr className=\"h-[60px] border-b bg-[#FFF] hover:bg-cyan-50 hover:text-cyan-600 even:bg-slate-50 cursor-pointer\">\r\n      <th>\r\n        <input\r\n          className=\"cursor-pointer\"\r\n          type=\"checkbox\"\r\n          name=\"itemdata\"\r\n          onChange={() => clickToSelect(item.TeacherID)}\r\n          checked={checkedList.includes(item.TeacherID)}\r\n        />\r\n      </th>\r\n      {(\r\n        [\"Prefix\", \"Firstname\", \"Lastname\", \"Department\", \"Email\"] as const\r\n      ).map((key) => (\r\n        <td\r\n          key={key}\r\n          className=\"px-6 whitespace-nowrap select-none\"\r\n          onClick={() => clickToSelect(item.TeacherID)}\r\n        >\r\n          {item[key]}\r\n        </td>\r\n      ))}\r\n      {checkedList.length < 1 && (\r\n        <td className=\"mt-5 flex gap-5 px-6 whitespace-nowrap select-none\">\r\n          <BiEdit\r\n            className=\"fill-[#A16207]\"\r\n            size={18}\r\n            onClick={() => {\r\n              (setEditModalActive(true), clickToSelect(item.TeacherID));\r\n            }}\r\n          />\r\n          {/* Delete action removed - use top toolbar button with multi-select */}\r\n        </td>\r\n      )}\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default TableRow;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\teacher\\component\\TeacherManageClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\teacher\\component\\TeacherTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleCreate' is assigned a value but never used.","line":136,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":136,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useState } from \"react\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\nimport {\r\n  EditableTable,\r\n  type ColumnDef,\r\n  type ValidationFn,\r\n} from \"@/components/tables\";\r\nimport {\r\n  createTeachersAction,\r\n  deleteTeachersAction,\r\n  updateTeachersAction,\r\n} from \"@/features/teacher/application/actions/teacher.actions\";\r\nimport AddModalForm from \"./AddModalForm\";\r\nimport { Button, Stack } from \"@mui/material\";\r\n\r\ntype TeacherTableProps = {\r\n  tableData: teacher[];\r\n  mutate: () => void | Promise<void>;\r\n};\r\n\r\n// Column definitions for teachers table\r\nconst teacherColumns: ColumnDef<teacher>[] = [\r\n  {\r\n    key: \"TeacherID\",\r\n    label: \"ID\",\r\n    editable: false, // Protected - primary key\r\n    width: 80,\r\n  },\r\n  {\r\n    key: \"Prefix\",\r\n    label: \"เธเธณเธเธณเธซเธเนเธฒเธเธทเนเธญ\",\r\n    editable: true,\r\n    required: true,\r\n    type: \"select\",\r\n    options: [\r\n      { value: \"เธเธฒเธข\", label: \"เธเธฒเธข\" },\r\n      { value: \"เธเธฒเธ\", label: \"เธเธฒเธ\" },\r\n      { value: \"เธเธฒเธเธชเธฒเธง\", label: \"เธเธฒเธเธชเธฒเธง\" },\r\n      { value: \"เธเธจ.\", label: \"เธเธจ.\" },\r\n      { value: \"เธญ.\", label: \"เธญ.\" },\r\n    ],\r\n    width: 120,\r\n  },\r\n  {\r\n    key: \"Firstname\",\r\n    label: \"เธเธทเนเธญ\",\r\n    editable: true,\r\n    required: true,\r\n    type: \"text\",\r\n  },\r\n  {\r\n    key: \"Lastname\",\r\n    label: \"เธเธฒเธกเธชเธเธธเธฅ\",\r\n    editable: true,\r\n    required: true,\r\n    type: \"text\",\r\n  },\r\n  {\r\n    key: \"Department\",\r\n    label: \"เธเธฅเธธเนเธกเธชเธฒเธฃเธฐ\",\r\n    editable: true,\r\n    type: \"text\",\r\n  },\r\n  {\r\n    key: \"Email\",\r\n    label: \"เธญเธตเน€เธกเธฅ\",\r\n    editable: true, // Required by schema and created via UI\r\n    type: \"text\",\r\n  },\r\n  {\r\n    key: \"Role\",\r\n    label: \"เธเธ—เธเธฒเธ—\",\r\n    editable: true,\r\n    type: \"select\",\r\n    options: [\r\n      { value: \"teacher\", label: \"เธเธฃเธน\" },\r\n      { value: \"admin\", label: \"เธเธนเนเธ”เธนเนเธฅเธฃเธฐเธเธ\" },\r\n    ],\r\n    width: 150,\r\n  },\r\n];\r\n\r\n// Validation function for teachers\r\nconst validateTeacher: ValidationFn<teacher> = (id, data, allData) => {\r\n  // Check required fields\r\n  if (!data.Prefix || data.Prefix.trim() === \"\") {\r\n    return \"เธเธณเธเธณเธซเธเนเธฒเธเธทเนเธญเธ•เนเธญเธเนเธกเนเน€เธเนเธเธเนเธฒเธงเนเธฒเธ\";\r\n  }\r\n\r\n  if (!data.Firstname || data.Firstname.trim() === \"\") {\r\n    return \"เธเธทเนเธญเธ•เนเธญเธเนเธกเนเน€เธเนเธเธเนเธฒเธงเนเธฒเธ\";\r\n  }\r\n\r\n  if (data.Firstname.length > 100) {\r\n    return \"เธเธทเนเธญเธ•เนเธญเธเนเธกเนเน€เธเธดเธ 100 เธ•เธฑเธงเธญเธฑเธเธฉเธฃ\";\r\n  }\r\n\r\n  if (!data.Lastname || data.Lastname.trim() === \"\") {\r\n    return \"เธเธฒเธกเธชเธเธธเธฅเธ•เนเธญเธเนเธกเนเน€เธเนเธเธเนเธฒเธงเนเธฒเธ\";\r\n  }\r\n\r\n  if (data.Lastname.length > 100) {\r\n    return \"เธเธฒเธกเธชเธเธธเธฅเธ•เนเธญเธเนเธกเนเน€เธเธดเธ 100 เธ•เธฑเธงเธญเธฑเธเธฉเธฃ\";\r\n  }\r\n\r\n  // Email is optional for creation, but must be valid if provided\r\n  if (typeof id === \"string\" && data.Email && data.Email.trim() !== \"\") {\r\n    // Email format validation\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(data.Email)) {\r\n      return \"เธฃเธนเธเนเธเธเธญเธตเน€เธกเธฅเนเธกเนเธ–เธนเธเธ•เนเธญเธ\";\r\n    }\r\n\r\n    // Check for duplicate email\r\n    const duplicate = allData.find((t) => t.Email === data.Email);\r\n    if (duplicate) {\r\n      return \"เธญเธตเน€เธกเธฅเธเธตเนเธ–เธนเธเนเธเนเธเธฒเธเนเธฅเนเธง\";\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n// Empty teacher factory for creating new rows\r\nconst createEmptyTeacher = (): Partial<teacher> => ({\r\n  Prefix: \"เธเธฒเธข\",\r\n  Firstname: \"\",\r\n  Lastname: \"\",\r\n  Department: \"-\",\r\n  Email: \"\",\r\n  Role: \"teacher\",\r\n});\r\n\r\n// Wrapper for create action\r\nconst handleCreate = async (newTeacher: Partial<teacher>) => {\r\n  return await createTeachersAction([\r\n    {\r\n      Prefix: newTeacher.Prefix?.trim() || \"เธเธฒเธข\",\r\n      Firstname: newTeacher.Firstname?.trim() || \"\",\r\n      Lastname: newTeacher.Lastname?.trim() || \"\",\r\n      Department: newTeacher.Department?.trim() || \"-\",\r\n      Email: newTeacher.Email?.trim() || \"\",\r\n      Role: newTeacher.Role || \"teacher\",\r\n    },\r\n  ]);\r\n};\r\n\r\n// Wrapper for update action\r\nconst handleUpdate = async (teachers: Partial<teacher>[]) => {\r\n  return await updateTeachersAction(\r\n    teachers.map((t) => ({\r\n      TeacherID: t.TeacherID as number,\r\n      Prefix: t.Prefix?.trim() || \"เธเธฒเธข\",\r\n      Firstname: t.Firstname?.trim() || \"\",\r\n      Lastname: t.Lastname?.trim() || \"\",\r\n      Department: t.Department?.trim() || \"-\",\r\n      Email: t.Email?.trim() || \"\", // Email is protected but include in payload\r\n      Role: t.Role || \"teacher\",\r\n    })),\r\n  );\r\n};\r\n\r\n// Wrapper for delete action\r\nconst handleDelete = async (ids: (string | number)[]) => {\r\n  return await deleteTeachersAction(ids as number[]);\r\n};\r\n\r\nexport default function TeacherTable({ tableData, mutate }: TeacherTableProps) {\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      {showAddModal && (\r\n        <AddModalForm\r\n          closeModal={() => setShowAddModal(false)}\r\n          mutate={mutate}\r\n        />\r\n      )}\r\n\r\n      <Stack direction=\"row\" justifyContent=\"flex-end\" mb={1}>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          data-testid=\"add-teacher-button\"\r\n          onClick={() => setShowAddModal(true)}\r\n        >\r\n          เน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธเธฃเธน\r\n        </Button>\r\n      </Stack>\r\n\r\n      <EditableTable<teacher>\r\n        title=\"เธเธฑเธ”เธเธฒเธฃเธเนเธญเธกเธนเธฅเธเธฃเธน\"\r\n        columns={teacherColumns}\r\n        data={tableData}\r\n        idField=\"TeacherID\"\r\n        searchFields={[\"Firstname\", \"Lastname\", \"Department\", \"Email\"]}\r\n        searchPlaceholder=\"เธเนเธเธซเธฒเธเธทเนเธญ เธเธฒเธกเธชเธเธธเธฅ เธเธฅเธธเนเธกเธชเธฒเธฃเธฐ เธซเธฃเธทเธญเธญเธตเน€เธกเธฅ\"\r\n        searchTestId=\"teacher-search\"\r\n        validate={validateTeacher}\r\n        onUpdate={handleUpdate}\r\n        onDelete={handleDelete}\r\n        onMutate={mutate}\r\n        emptyRowFactory={createEmptyTeacher}\r\n        rowsPerPageOptions={[5, 10, 25, 50]}\r\n        defaultRowsPerPage={10}\r\n        disableSelectionDuringCreate={false}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\management\\teacher\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\ActionToolbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\ArrangementHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\ConflictAlert.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CONFLICT_MESSAGES' is defined but never used.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Presentation Layer: Conflict Alert Component\r\n *\r\n * MUI v7 Alert component for displaying scheduling conflicts\r\n * with severity levels and actionable messages.\r\n *\r\n * @module ConflictAlert\r\n */\r\n\r\n\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n  Alert,\r\n  AlertTitle,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Collapse,\r\n  IconButton,\r\n  Stack,\r\n  Chip,\r\n} from \"@mui/material\";\r\nimport {\r\n  Error as ErrorIcon,\r\n  Warning as WarningIcon,\r\n  Info as InfoIcon,\r\n  Lock as LockIcon,\r\n  Close as CloseIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n  CONFLICT_TYPES,\r\n  CONFLICT_MESSAGES,\r\n  type ConflictType,\r\n  type ConflictSeverity,\r\n} from \"@/features/schedule-arrangement/domain/constants\";\r\n\r\ninterface Conflict {\r\n  type: ConflictType;\r\n  severity: ConflictSeverity;\r\n  message: string;\r\n  timeslotID?: string;\r\n  details?: {\r\n    teacherName?: string;\r\n    className?: string;\r\n    roomName?: string;\r\n  };\r\n}\r\n\r\ninterface ConflictAlertProps {\r\n  /** List of conflicts */\r\n  conflicts: Conflict[];\r\n\r\n  /** Show/hide handler */\r\n  onClose?: () => void;\r\n\r\n  /** Expandable details */\r\n  expandable?: boolean;\r\n}\r\n\r\n/**\r\n * Alert component for displaying scheduling conflicts\r\n */\r\nexport function ConflictAlert({\r\n  conflicts,\r\n  onClose,\r\n  expandable = false,\r\n}: ConflictAlertProps) {\r\n  const [expanded, setExpanded] = React.useState(true);\r\n\r\n  if (conflicts.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // Group by severity\r\n  const errors = conflicts.filter((c) => c.severity === \"error\");\r\n  const warnings = conflicts.filter((c) => c.severity === \"warning\");\r\n  const infos = conflicts.filter((c) => c.severity === \"info\");\r\n\r\n  // Primary severity\r\n  const primarySeverity =\r\n    errors.length > 0 ? \"error\" : warnings.length > 0 ? \"warning\" : \"info\";\r\n\r\n  const getIcon = (type: ConflictType) => {\r\n    switch (type) {\r\n      case CONFLICT_TYPES.TEACHER:\r\n        return <ErrorIcon fontSize=\"small\" />;\r\n      case CONFLICT_TYPES.CLASS:\r\n        return <WarningIcon fontSize=\"small\" />;\r\n      case CONFLICT_TYPES.ROOM:\r\n        return <InfoIcon fontSize=\"small\" />;\r\n      case CONFLICT_TYPES.LOCKED:\r\n        return <LockIcon fontSize=\"small\" />;\r\n      default:\r\n        return <ErrorIcon fontSize=\"small\" />;\r\n    }\r\n  };\r\n\r\n  const formatDetails = (conflict: Conflict): string => {\r\n    const parts: string[] = [];\r\n    if (conflict.details?.teacherName) {\r\n      parts.push(`เธเธฃเธน: ${conflict.details.teacherName}`);\r\n    }\r\n    if (conflict.details?.className) {\r\n      parts.push(`เธซเนเธญเธ: ${conflict.details.className}`);\r\n    }\r\n    if (conflict.details?.roomName) {\r\n      parts.push(`เธซเนเธญเธเน€เธฃเธตเธขเธ: ${conflict.details.roomName}`);\r\n    }\r\n    if (conflict.timeslotID) {\r\n      parts.push(`เธเธฒเธ: ${conflict.timeslotID}`);\r\n    }\r\n    return parts.length > 0 ? `(${parts.join(\" โ€ข \")})` : \"\";\r\n  };\r\n\r\n  return (\r\n    <Alert\r\n      severity={primarySeverity}\r\n      variant=\"filled\"\r\n      sx={{ mb: 2 }}\r\n      action={\r\n        <Stack direction=\"row\" spacing={1}>\r\n          {expandable && conflicts.length > 1 && (\r\n            <IconButton\r\n              size=\"small\"\r\n              onClick={() => setExpanded(!expanded)}\r\n              sx={{ color: \"inherit\" }}\r\n            >\r\n              <ExpandMoreIcon\r\n                sx={{\r\n                  transform: expanded ? \"rotate(180deg)\" : \"rotate(0deg)\",\r\n                  transition: \"transform 0.2s\",\r\n                }}\r\n              />\r\n            </IconButton>\r\n          )}\r\n          {onClose && (\r\n            <IconButton\r\n              size=\"small\"\r\n              onClick={onClose}\r\n              sx={{ color: \"inherit\" }}\r\n            >\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          )}\r\n        </Stack>\r\n      }\r\n    >\r\n      <AlertTitle sx={{ fontWeight: \"bold\" }}>\r\n        เธเธเธเนเธญเธเธฑเธ”เนเธขเนเธเนเธเธ•เธฒเธฃเธฒเธเธชเธญเธ ({conflicts.length} เธฃเธฒเธขเธเธฒเธฃ)\r\n      </AlertTitle>\r\n\r\n      <Collapse in={expanded}>\r\n        {/* Error Conflicts */}\r\n        {errors.length > 0 && (\r\n          <List dense sx={{ mt: 1 }}>\r\n            {errors.map((conflict, index) => (\r\n              <ListItem key={`error-${index}`} sx={{ pl: 0 }}>\r\n                <ListItemIcon sx={{ minWidth: 32, color: \"inherit\" }}>\r\n                  {getIcon(conflict.type)}\r\n                </ListItemIcon>\r\n                <ListItemText\r\n                  primary={\r\n                    <Stack\r\n                      direction=\"row\"\r\n                      spacing={1}\r\n                      alignItems=\"center\"\r\n                      flexWrap=\"wrap\"\r\n                    >\r\n                      <span>{conflict.message}</span>\r\n                      {conflict.details && (\r\n                        <Chip\r\n                          label={formatDetails(conflict)}\r\n                          size=\"small\"\r\n                          variant=\"outlined\"\r\n                          sx={{\r\n                            borderColor: \"currentColor\",\r\n                            color: \"inherit\",\r\n                            fontSize: \"0.7rem\",\r\n                          }}\r\n                        />\r\n                      )}\r\n                    </Stack>\r\n                  }\r\n                  primaryTypographyProps={{ variant: \"body2\" }}\r\n                />\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        )}\r\n\r\n        {/* Warning Conflicts */}\r\n        {warnings.length > 0 && errors.length === 0 && (\r\n          <List dense sx={{ mt: 1 }}>\r\n            {warnings.map((conflict, index) => (\r\n              <ListItem key={`warning-${index}`} sx={{ pl: 0 }}>\r\n                <ListItemIcon sx={{ minWidth: 32, color: \"inherit\" }}>\r\n                  {getIcon(conflict.type)}\r\n                </ListItemIcon>\r\n                <ListItemText\r\n                  primary={\r\n                    <Stack\r\n                      direction=\"row\"\r\n                      spacing={1}\r\n                      alignItems=\"center\"\r\n                      flexWrap=\"wrap\"\r\n                    >\r\n                      <span>{conflict.message}</span>\r\n                      {conflict.details && (\r\n                        <Chip\r\n                          label={formatDetails(conflict)}\r\n                          size=\"small\"\r\n                          variant=\"outlined\"\r\n                          sx={{\r\n                            borderColor: \"currentColor\",\r\n                            color: \"inherit\",\r\n                            fontSize: \"0.7rem\",\r\n                          }}\r\n                        />\r\n                      )}\r\n                    </Stack>\r\n                  }\r\n                  primaryTypographyProps={{ variant: \"body2\" }}\r\n                />\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        )}\r\n\r\n        {/* Info Conflicts */}\r\n        {infos.length > 0 && errors.length === 0 && warnings.length === 0 && (\r\n          <List dense sx={{ mt: 1 }}>\r\n            {infos.map((conflict, index) => (\r\n              <ListItem key={`info-${index}`} sx={{ pl: 0 }}>\r\n                <ListItemIcon sx={{ minWidth: 32, color: \"inherit\" }}>\r\n                  {getIcon(conflict.type)}\r\n                </ListItemIcon>\r\n                <ListItemText\r\n                  primary={conflict.message}\r\n                  primaryTypographyProps={{ variant: \"body2\" }}\r\n                />\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        )}\r\n      </Collapse>\r\n    </Alert>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\ConflictSummaryPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\GradeClassView.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useMemo has a missing dependency: 'classData'. Either include it or remove the dependency array.","line":93,"column":6,"nodeType":"ArrayExpression","endLine":93,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [classData]","fix":{"range":[2114,2135],"text":"[classData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Presentation Layer: Grade Class View Component\r\n *\r\n * Displays all class schedules for a specific grade level.\r\n * Shows which subjects have been assigned to each class.\r\n *\r\n * @module GradeClassView\r\n */\r\n\r\n\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Paper,\r\n  Stack,\r\n  Typography,\r\n  Card,\r\n  CardContent,\r\n  Chip,\r\n  LinearProgress,\r\n  Divider,\r\n  Alert,\r\n  AlertTitle,\r\n} from \"@mui/material\";\r\nimport {\r\n  School as SchoolIcon,\r\n  CheckCircle as CheckIcon,\r\n  Warning as WarningIcon,\r\n  Person as PersonIcon,\r\n} from \"@mui/icons-material\";\r\nimport type {\r\n  class_schedule,\r\n  gradelevel,\r\n  subject,\r\n  teacher,\r\n  room,\r\n  timeslot,\r\n} from \"@/prisma/generated/client\";\r\n\r\ninterface ClassScheduleData {\r\n  class: gradelevel;\r\n  schedules: (class_schedule & {\r\n    subject: subject;\r\n    timeslot: timeslot;\r\n    teachers_responsibility: Array<{\r\n      teacher: teacher;\r\n    }>;\r\n    room: room | null;\r\n  })[];\r\n  totalPeriods: number;\r\n  assignedPeriods: number;\r\n}\r\n\r\ninterface GradeClassViewProps {\r\n  /** Grade level to display (7-12) */\r\n  gradeLevel: number;\r\n\r\n  /** All classes for this grade */\r\n  classes: ClassScheduleData[];\r\n\r\n  /** Expected periods per week (unused, kept for future use) */\r\n  _expectedPeriodsPerWeek?: number;\r\n\r\n  /** Loading state */\r\n  isLoading?: boolean;\r\n}\r\n\r\n/**\r\n * Single class card\r\n */\r\nfunction ClassCard({ classData }: { classData: ClassScheduleData }) {\r\n  const completionPercentage =\r\n    classData.totalPeriods > 0\r\n      ? (classData.assignedPeriods / classData.totalPeriods) * 100\r\n      : 0;\r\n\r\n  const isComplete = completionPercentage >= 100;\r\n  const isPartial = completionPercentage > 0 && completionPercentage < 100;\r\n\r\n  // Group schedules by subject\r\n  const schedulesBySubject = React.useMemo(() => {\r\n    const grouped: Record<string, typeof classData.schedules> = {};\r\n    classData.schedules.forEach((schedule) => {\r\n      const key = schedule.subject.SubjectCode;\r\n      if (!grouped[key]) {\r\n        grouped[key] = [];\r\n      }\r\n      grouped[key].push(schedule);\r\n    });\r\n    return grouped;\r\n  }, [classData.schedules]);\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{\r\n        height: \"100%\",\r\n        border: \"2px solid\",\r\n        borderColor: isComplete\r\n          ? \"success.main\"\r\n          : isPartial\r\n            ? \"warning.main\"\r\n            : \"divider\",\r\n        transition: \"all 0.2s\",\r\n        \"&:hover\": {\r\n          boxShadow: 3,\r\n          transform: \"translateY(-2px)\",\r\n        },\r\n      }}\r\n    >\r\n      <CardContent>\r\n        <Stack spacing={2}>\r\n          {/* Class Header */}\r\n          <Stack\r\n            direction=\"row\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n              <SchoolIcon color=\"primary\" />\r\n              <Typography variant=\"h6\" fontWeight=\"bold\">\r\n                เธก.{classData.class.Year}/{classData.class.Number}\r\n              </Typography>\r\n            </Stack>\r\n            {isComplete && <CheckIcon color=\"success\" />}\r\n            {isPartial && <WarningIcon color=\"warning\" />}\r\n          </Stack>\r\n\r\n          {/* Progress */}\r\n          <Box>\r\n            <Stack\r\n              direction=\"row\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n              sx={{ mb: 0.5 }}\r\n            >\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                เธเธงเธฒเธกเธเธทเธเธซเธเนเธฒ\r\n              </Typography>\r\n              <Typography variant=\"caption\" fontWeight=\"bold\">\r\n                {classData.assignedPeriods} / {classData.totalPeriods} เธเธฒเธ\r\n              </Typography>\r\n            </Stack>\r\n            <LinearProgress\r\n              variant=\"determinate\"\r\n              value={completionPercentage}\r\n              color={isComplete ? \"success\" : isPartial ? \"warning\" : \"inherit\"}\r\n              sx={{ height: 8, borderRadius: 1 }}\r\n            />\r\n            <Typography\r\n              variant=\"caption\"\r\n              color=\"text.secondary\"\r\n              sx={{ mt: 0.5, display: \"block\" }}\r\n            >\r\n              {completionPercentage.toFixed(0)}%\r\n            </Typography>\r\n          </Box>\r\n\r\n          <Divider />\r\n\r\n          {/* Subjects List */}\r\n          {Object.keys(schedulesBySubject).length === 0 ? (\r\n            <Alert severity=\"info\" variant=\"outlined\">\r\n              <AlertTitle>เธขเธฑเธเนเธกเนเธกเธตเธเธฒเธฃเธเธฑเธ”เธ•เธฒเธฃเธฒเธ</AlertTitle>\r\n              เธซเนเธญเธเธเธตเนเธขเธฑเธเนเธกเนเธกเธตเธงเธดเธเธฒเธ—เธตเนเธ–เธนเธเธเธฑเธ”เน€เธเนเธฒเธ•เธฒเธฃเธฒเธ\r\n            </Alert>\r\n          ) : (\r\n            <Box>\r\n              <Typography\r\n                variant=\"caption\"\r\n                fontWeight=\"bold\"\r\n                color=\"text.secondary\"\r\n                sx={{ mb: 1, display: \"block\" }}\r\n              >\r\n                เธงเธดเธเธฒเธ—เธตเนเธเธฑเธ”เนเธฅเนเธง ({Object.keys(schedulesBySubject).length} เธงเธดเธเธฒ)\r\n              </Typography>\r\n              <Stack spacing={1}>\r\n                {Object.entries(schedulesBySubject).map(\r\n                  ([subjectCode, schedules]) => {\r\n                    const subject = schedules[0]?.subject;\r\n                    const teacher =\r\n                      schedules[0]?.teachers_responsibility[0]?.teacher;\r\n                    const periodsAssigned = schedules.length;\r\n\r\n                    return (\r\n                      <Paper\r\n                        key={subjectCode}\r\n                        variant=\"outlined\"\r\n                        sx={{ p: 1.5, bgcolor: \"grey.50\" }}\r\n                      >\r\n                        <Stack spacing={0.5}>\r\n                          <Typography variant=\"body2\" fontWeight=\"medium\">\r\n                            {subject?.SubjectName}\r\n                          </Typography>\r\n                          <Stack\r\n                            direction=\"row\"\r\n                            spacing={0.5}\r\n                            flexWrap=\"wrap\"\r\n                            gap={0.5}\r\n                          >\r\n                            <Chip\r\n                              icon={<PersonIcon fontSize=\"small\" />}\r\n                              label={\r\n                                teacher\r\n                                  ? `${teacher.Prefix}${teacher.Firstname}`\r\n                                  : \"เนเธกเนเธฃเธฐเธเธธเธเธฃเธน\"\r\n                              }\r\n                              size=\"small\"\r\n                              variant=\"outlined\"\r\n                              sx={{ height: 20, fontSize: \"0.7rem\" }}\r\n                            />\r\n                            <Chip\r\n                              label={`${periodsAssigned} เธเธฒเธ`}\r\n                              size=\"small\"\r\n                              color=\"primary\"\r\n                              variant=\"filled\"\r\n                              sx={{ height: 20, fontSize: \"0.7rem\" }}\r\n                            />\r\n                          </Stack>\r\n                        </Stack>\r\n                      </Paper>\r\n                    );\r\n                  },\r\n                )}\r\n              </Stack>\r\n            </Box>\r\n          )}\r\n        </Stack>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\n/**\r\n * Grade class view component\r\n */\r\nexport function GradeClassView({\r\n  gradeLevel,\r\n  classes,\r\n  _expectedPeriodsPerWeek = 40,\r\n  isLoading = false,\r\n}: GradeClassViewProps) {\r\n  const totalClasses = classes.length;\r\n  const completedClasses = classes.filter(\r\n    (c) => c.assignedPeriods >= c.totalPeriods,\r\n  ).length;\r\n  const partialClasses = classes.filter(\r\n    (c) => c.assignedPeriods > 0 && c.assignedPeriods < c.totalPeriods,\r\n  ).length;\r\n  const emptyClasses = classes.filter((c) => c.assignedPeriods === 0).length;\r\n\r\n  const overallProgress =\r\n    totalClasses > 0\r\n      ? (classes.reduce((sum, c) => sum + c.assignedPeriods, 0) /\r\n          classes.reduce((sum, c) => sum + c.totalPeriods, 0)) *\r\n        100\r\n      : 0;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Box sx={{ p: 4 }}>\r\n        <Stack spacing={2} alignItems=\"center\">\r\n          <Typography color=\"text.secondary\">เธเธณเธฅเธฑเธเนเธซเธฅเธ”เธเนเธญเธกเธนเธฅ...</Typography>\r\n          <LinearProgress sx={{ width: \"100%\", maxWidth: 400 }} />\r\n        </Stack>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (classes.length === 0) {\r\n    return (\r\n      <Alert severity=\"info\" sx={{ mt: 2 }}>\r\n        <AlertTitle>เนเธกเนเธกเธตเธเนเธญเธกเธนเธฅเธซเนเธญเธเน€เธฃเธตเธขเธ</AlertTitle>\r\n        เนเธกเนเธเธเธซเนเธญเธเน€เธฃเธตเธขเธเธชเธณเธซเธฃเธฑเธเธกเธฑเธเธขเธกเธจเธถเธเธฉเธฒเธเธตเธ—เธตเน {gradeLevel - 6}\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      {/* Summary Header */}\r\n      <Paper elevation={2} sx={{ p: 3, mb: 3, bgcolor: \"primary.50\" }}>\r\n        <Stack spacing={2}>\r\n          <Typography variant=\"h5\" fontWeight=\"bold\">\r\n            เธกเธฑเธเธขเธกเธจเธถเธเธฉเธฒเธเธตเธ—เธตเน {gradeLevel - 6}\r\n          </Typography>\r\n\r\n          <Grid container spacing={2}>\r\n            <Grid size={{ xs: 12, sm: 6, md: 3 }}>\r\n              <Paper variant=\"outlined\" sx={{ p: 2, textAlign: \"center\" }}>\r\n                <Typography variant=\"h4\" fontWeight=\"bold\" color=\"primary.main\">\r\n                  {totalClasses}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  เธซเนเธญเธเธ—เธฑเนเธเธซเธกเธ”\r\n                </Typography>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid size={{ xs: 12, sm: 6, md: 3 }}>\r\n              <Paper\r\n                variant=\"outlined\"\r\n                sx={{ p: 2, textAlign: \"center\", bgcolor: \"success.50\" }}\r\n              >\r\n                <Typography variant=\"h4\" fontWeight=\"bold\" color=\"success.main\">\r\n                  {completedClasses}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  เธเธฑเธ”เธเธฃเธเนเธฅเนเธง\r\n                </Typography>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid size={{ xs: 12, sm: 6, md: 3 }}>\r\n              <Paper\r\n                variant=\"outlined\"\r\n                sx={{ p: 2, textAlign: \"center\", bgcolor: \"warning.50\" }}\r\n              >\r\n                <Typography variant=\"h4\" fontWeight=\"bold\" color=\"warning.main\">\r\n                  {partialClasses}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  เธเธฑเธ”เธเธฒเธเธชเนเธงเธ\r\n                </Typography>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid size={{ xs: 12, sm: 6, md: 3 }}>\r\n              <Paper\r\n                variant=\"outlined\"\r\n                sx={{ p: 2, textAlign: \"center\", bgcolor: \"grey.100\" }}\r\n              >\r\n                <Typography\r\n                  variant=\"h4\"\r\n                  fontWeight=\"bold\"\r\n                  color=\"text.secondary\"\r\n                >\r\n                  {emptyClasses}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  เธขเธฑเธเนเธกเนเธเธฑเธ”\r\n                </Typography>\r\n              </Paper>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/* Overall Progress */}\r\n          <Box>\r\n            <Stack\r\n              direction=\"row\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n              sx={{ mb: 1 }}\r\n            >\r\n              <Typography variant=\"body2\" fontWeight=\"medium\">\r\n                เธเธงเธฒเธกเธเธทเธเธซเธเนเธฒเธฃเธงเธก\r\n              </Typography>\r\n              <Typography variant=\"body2\" fontWeight=\"bold\">\r\n                {overallProgress.toFixed(1)}%\r\n              </Typography>\r\n            </Stack>\r\n            <LinearProgress\r\n              variant=\"determinate\"\r\n              value={overallProgress}\r\n              color={\r\n                overallProgress >= 100\r\n                  ? \"success\"\r\n                  : overallProgress > 0\r\n                    ? \"warning\"\r\n                    : \"inherit\"\r\n              }\r\n              sx={{ height: 10, borderRadius: 1 }}\r\n            />\r\n          </Box>\r\n        </Stack>\r\n      </Paper>\r\n\r\n      {/* Class Cards Grid */}\r\n      <Grid container spacing={2}>\r\n        {classes.map((classData) => (\r\n          <Grid\r\n            size={{ xs: 12, sm: 6, md: 4, lg: 3 }}\r\n            key={classData.class.GradeID}\r\n          >\r\n            <ClassCard classData={classData} />\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\GradeLevelTabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\RoomSelectionDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\ScheduleActionToolbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\ScheduleProgressIndicators.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\SearchableSubjectPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\SubjectPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\TimeslotCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\TimetableGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'breakSlots' is defined but never used. Allowed unused args must match /^_/u.","line":61,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Presentation Layer: Timetable Grid Component\r\n *\r\n * MUI v7 responsive grid for displaying weekly timetable.\r\n * Replaces legacy TimeSlot component with modern design.\r\n *\r\n * @module TimetableGrid\r\n */\r\n\r\n\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Box, Grid, Paper, Stack, Typography, Chip } from \"@mui/material\";\r\nimport { TimeslotCard } from \"./TimeslotCard\";\r\nimport type { TimeslotData } from \"@/types/schedule.types\";\r\nimport {\r\n  DAY_LABELS_TH,\r\n  DAY_COLORS,\r\n  DAYS_OF_WEEK,\r\n} from \"@/features/schedule-arrangement/domain/constants\";\r\n\r\ninterface TimetableGridProps {\r\n  /** All timeslot data organized by day and period */\r\n  timeslots: TimeslotData[];\r\n\r\n  /** Number of periods per day */\r\n  periodsPerDay: number;\r\n\r\n  /** Break slot configurations */\r\n  breakSlots?: {\r\n    junior?: number;\r\n    senior?: number;\r\n  };\r\n\r\n  /** Conflict checker */\r\n  getConflicts?: (timeslotID: string) => {\r\n    hasConflict: boolean;\r\n    message?: string;\r\n    severity?: \"error\" | \"warning\" | \"info\";\r\n  };\r\n\r\n  /** Locked timeslots */\r\n  lockedTimeslots?: Set<string>;\r\n\r\n  /** Selected timeslot */\r\n  selectedTimeslotID?: string | null;\r\n\r\n  /** Handler for remove subject from slot */\r\n  onRemoveSubject?: (timeslotID: string) => void;\r\n\r\n  /** Handler for timeslot click */\r\n  onTimeslotClick?: (timeslot: TimeslotData) => void;\r\n}\r\n\r\n/**\r\n * Timetable grid component\r\n */\r\nexport function TimetableGrid({\r\n  timeslots,\r\n  periodsPerDay,\r\n  breakSlots,\r\n  getConflicts,\r\n  lockedTimeslots,\r\n  selectedTimeslotID,\r\n  onRemoveSubject,\r\n  onTimeslotClick,\r\n}: TimetableGridProps) {\r\n  // Organize timeslots by day and period\r\n  const timeslotsByDay = React.useMemo(() => {\r\n    const organized: Record<string, TimeslotData[]> = {};\r\n\r\n    DAYS_OF_WEEK.forEach((day) => {\r\n      organized[day] = [];\r\n    });\r\n\r\n    timeslots.forEach((slot) => {\r\n      if (organized[slot.DayOfWeek]) {\r\n        organized[slot.DayOfWeek]?.push(slot);\r\n      }\r\n    });\r\n\r\n    // Sort by slot number within each day\r\n    Object.keys(organized).forEach((day) => {\r\n      organized[day]?.sort((a, b) => {\r\n        const aNum = parseInt(\r\n          a.TimeslotID.split(\"-\").pop()?.replace(/[^\\d]/g, \"\") || \"0\",\r\n        );\r\n        const bNum = parseInt(\r\n          b.TimeslotID.split(\"-\").pop()?.replace(/[^\\d]/g, \"\") || \"0\",\r\n        );\r\n        return aNum - bNum;\r\n      });\r\n    });\r\n\r\n    return organized;\r\n  }, [timeslots]);\r\n\r\n  // Generate period numbers (1, 2, 3, ...)\r\n  const periods = Array.from({ length: periodsPerDay }, (_, i) => i + 1);\r\n\r\n  // Check if timeslot is a break period based on Breaktime field\r\n  const isBreakSlot = (timeslot: TimeslotData): boolean => {\r\n    // Check if timeslot has Breaktime field that is not NOT_BREAK\r\n    const breaktime = (timeslot as unknown as { Breaktime?: string }).Breaktime;\r\n    return breaktime !== undefined && breaktime !== \"NOT_BREAK\";\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ width: \"100%\", overflowX: \"auto\" }}>\r\n      <Paper elevation={2} sx={{ minWidth: 800 }}>\r\n        {/* Header Row - Days of Week */}\r\n        <Box\r\n          sx={{\r\n            bgcolor: \"grey.100\",\r\n            p: 2,\r\n            borderBottom: 2,\r\n            borderColor: \"divider\",\r\n          }}\r\n        >\r\n          <Grid container spacing={1}>\r\n            {/* Empty cell for period column */}\r\n            <Grid size={1}>\r\n              <Typography\r\n                variant=\"caption\"\r\n                fontWeight=\"bold\"\r\n                color=\"text.secondary\"\r\n                textAlign=\"center\"\r\n                display=\"block\"\r\n              >\r\n                เธเธฒเธ\r\n              </Typography>\r\n            </Grid>\r\n\r\n            {/* Day headers */}\r\n            {DAYS_OF_WEEK.map((day) => {\r\n              const colors = DAY_COLORS[day];\r\n              return (\r\n                <Grid size=\"grow\" key={day}>\r\n                  <Paper\r\n                    elevation={0}\r\n                    sx={{\r\n                      p: 1.5,\r\n                      textAlign: \"center\",\r\n                      bgcolor: colors?.bg || \"grey.50\",\r\n                      border: \"2px solid\",\r\n                      borderColor: colors?.text || \"grey.300\",\r\n                    }}\r\n                  >\r\n                    <Typography\r\n                      variant=\"subtitle2\"\r\n                      fontWeight=\"bold\"\r\n                      sx={{ color: colors?.text || \"text.primary\" }}\r\n                    >\r\n                      {DAY_LABELS_TH[day]}\r\n                    </Typography>\r\n                  </Paper>\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Timetable Body */}\r\n        <Box sx={{ p: 2 }}>\r\n          <Stack spacing={2}>\r\n            {periods.map((periodNum) => {\r\n              return (\r\n                <Grid container spacing={1} key={periodNum}>\r\n                  {/* Period Number */}\r\n                  <Grid size={1}>\r\n                    <Box\r\n                      sx={{\r\n                        height: \"100%\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                        minHeight: 80,\r\n                      }}\r\n                    >\r\n                      <Chip\r\n                        label={periodNum}\r\n                        color=\"default\"\r\n                        variant=\"outlined\"\r\n                        sx={{\r\n                          fontWeight: \"bold\",\r\n                          fontSize: \"1rem\",\r\n                          minWidth: 40,\r\n                        }}\r\n                      />\r\n                    </Box>\r\n                  </Grid>\r\n\r\n                  {/* Timeslots for each day */}\r\n                  {DAYS_OF_WEEK.map((day) => {\r\n                    const dayTimeslots = timeslotsByDay[day] || [];\r\n                    const timeslot = dayTimeslots[periodNum - 1];\r\n\r\n                    if (!timeslot) {\r\n                      return (\r\n                        <Grid size=\"grow\" key={`${day}-${periodNum}`}>\r\n                          <Paper\r\n                            variant=\"outlined\"\r\n                            sx={{\r\n                              minHeight: 80,\r\n                              display: \"flex\",\r\n                              alignItems: \"center\",\r\n                              justifyContent: \"center\",\r\n                              bgcolor: \"grey.50\",\r\n                            }}\r\n                          >\r\n                            <Typography variant=\"caption\" color=\"text.disabled\">\r\n                              -\r\n                            </Typography>\r\n                          </Paper>\r\n                        </Grid>\r\n                      );\r\n                    }\r\n\r\n                    const conflicts = getConflicts?.(timeslot.TimeslotID) || {\r\n                      hasConflict: false,\r\n                    };\r\n                    const isLocked =\r\n                      lockedTimeslots?.has(timeslot.TimeslotID) || false;\r\n                    const isSelected =\r\n                      selectedTimeslotID === timeslot.TimeslotID;\r\n                    const isBreak = isBreakSlot(timeslot);\r\n\r\n                    // Determine validation state from conflict severity\r\n                    const validationState = conflicts.hasConflict\r\n                      ? conflicts.severity === \"warning\"\r\n                        ? \"warning\"\r\n                        : conflicts.severity === \"error\"\r\n                          ? \"error\"\r\n                          : null\r\n                      : null;\r\n\r\n                    return (\r\n                      <Grid size=\"grow\" key={timeslot.TimeslotID}>\r\n                        <TimeslotCard\r\n                          timeslot={timeslot}\r\n                          isBreak={isBreak}\r\n                          hasConflict={conflicts.hasConflict}\r\n                          conflictMessage={conflicts.message}\r\n                          isLocked={isLocked}\r\n                          isSelected={isSelected}\r\n                          validationState={validationState}\r\n                          onRemove={onRemoveSubject}\r\n                          onClick={() => onTimeslotClick?.(timeslot)}\r\n                        />\r\n                      </Grid>\r\n                    );\r\n                  })}\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Stack>\r\n        </Box>\r\n\r\n        {/* Footer Legend */}\r\n        <Box\r\n          sx={{\r\n            p: 2,\r\n            borderTop: 1,\r\n            borderColor: \"divider\",\r\n            bgcolor: \"grey.50\",\r\n          }}\r\n        >\r\n          <Stack\r\n            direction=\"row\"\r\n            spacing={2}\r\n            flexWrap=\"wrap\"\r\n            justifyContent=\"center\"\r\n          >\r\n            <Chip\r\n              icon={\r\n                <Box\r\n                  sx={{\r\n                    width: 12,\r\n                    height: 12,\r\n                    bgcolor: \"grey.300\",\r\n                    borderRadius: 1,\r\n                  }}\r\n                />\r\n              }\r\n              label=\"เธเธฒเธเธงเนเธฒเธ\"\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n            />\r\n            <Chip\r\n              icon={\r\n                <Box\r\n                  sx={{\r\n                    width: 12,\r\n                    height: 12,\r\n                    bgcolor: \"warning.light\",\r\n                    borderRadius: 1,\r\n                  }}\r\n                />\r\n              }\r\n              label=\"เธเธฒเธเธเธฑเธ\"\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n            />\r\n            <Chip\r\n              icon={\r\n                <Box\r\n                  sx={{\r\n                    width: 12,\r\n                    height: 12,\r\n                    bgcolor: \"error.light\",\r\n                    borderRadius: 1,\r\n                  }}\r\n                />\r\n              }\r\n              label=\"เธกเธตเธเนเธญเธเธฑเธ”เนเธขเนเธ\"\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n            />\r\n            <Chip\r\n              icon={\r\n                <Box\r\n                  sx={{\r\n                    width: 12,\r\n                    height: 12,\r\n                    bgcolor: \"grey.500\",\r\n                    borderRadius: 1,\r\n                  }}\r\n                />\r\n              }\r\n              label=\"เธ–เธนเธเธฅเนเธญเธ\"\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Stack>\r\n        </Box>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\_components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\PageHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\SelectRoomToTimeslotModal.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":86,"column":34,"nodeType":"MemberExpression","messageId":"limited","endLine":86,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport type { room } from \"@/prisma/generated/client\";\r\nimport React, { useState, type JSX } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport useSWR from \"swr\";\r\n\r\nimport { getAvailableRoomsAction } from \"@/features/room/application/actions/room.actions\";\r\nimport type { SubjectData } from \"@/types/schedule.types\";\r\n\r\ntype SubjectPayload = {\r\n  timeslotID: string;\r\n  selectedSubject: SubjectData | null;\r\n};\r\n\r\ntype Props = {\r\n  // เธเธฑเธเธเนเธเธฑเนเธเน€เธเธดเนเธกเธงเธดเธเธฒ: เนเธชเน subject เธเธฃเนเธญเธกเธเนเธญเธกเธนเธฅเธซเนเธญเธ เนเธฅเธฐ TimeslotID\r\n  addSubjectToSlot: (subject: SubjectData, timeSlotID: string) => void;\r\n  // เน€เธกเธทเนเธญเธเธ”เธขเธเน€เธฅเธดเธ: เธชเนเธเธเนเธฒเธ—เธตเนเน€เธฅเธทเธญเธเนเธงเน (เธซเธฃเธทเธญ null) เนเธฅเธฐ TimeslotID เธเธฅเธฑเธเนเธ\r\n  cancelAddRoom: (subject: SubjectData | null, timeSlotID: string) => void;\r\n  // เธเนเธญเธกเธนเธฅเธ—เธฑเนเธเธซเธกเธ”เธ—เธตเนเธชเนเธเธกเธฒเธเธฒเธเธ•เนเธเธ—เธฒเธ\r\n  payload: SubjectPayload;\r\n};\r\n\r\nfunction SelectSubjectToTimeslotModal(props: Props): JSX.Element {\r\n  const payload = props.payload;\r\n  const [RoomName, setRoomName] = useState(\"\");\r\n  const [room, setRoom] = useState<room>();\r\n  const [validateIsPass, setValidateIsPass] = useState(false);\r\n  // const gradeLevelData = useGradeLevelData();\r\n  const roomData = useSWR(\r\n    payload?.timeslotID\r\n      ? ([\"available-rooms\", payload.timeslotID] as const)\r\n      : null,\r\n    async ([, timeslotID]: readonly [\"available-rooms\", string]) => {\r\n      return await getAvailableRoomsAction({ TimeslotID: timeslotID });\r\n    },\r\n    {\r\n      //refreshInterval: 15000,\r\n      revalidateOnMount: true,\r\n    },\r\n  );\r\n  const confirm = () => {\r\n    //เธ–เนเธฒเธเธ”เธขเธทเธเธขเธฑเธ\r\n    if (RoomName === \"\" || !payload.selectedSubject) {\r\n      //เน€เธเนเธเธงเนเธฒเธกเธตเธเธฒเธฃเน€เธฅเธทเธญเธเธซเนเธญเธเธขเธฑเธเธ–เนเธฒเธขเธฑเธเธเนเนเธเนเธเน€เธ•เธทเธญเธ\r\n      setValidateIsPass(true);\r\n    } else {\r\n      //เธ–เนเธฒเน€เธฅเธทเธญเธเธซเนเธญเธเนเธฅเนเธง\r\n      const newSubject: SubjectData = {\r\n        ...payload.selectedSubject,\r\n        roomName: RoomName,\r\n        room: room ?? null,\r\n      };\r\n      props.addSubjectToSlot(newSubject, payload.timeslotID);\r\n    }\r\n  };\r\n  const dataDetails = (type: string) => {\r\n    const timeslotID = payload.timeslotID;\r\n    const subject = payload.selectedSubject;\r\n    const timeSlotDetails = `เน€เธ—เธญเธก ${\r\n      timeslotID[0]\r\n    } เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ ${timeslotID.substring(2, 6)} - เธงเธฑเธ${\r\n      dayOfWeekThai[timeslotID.substring(7, 10)]\r\n    } เธเธฒเธ${timeslotID[timeslotID.length - 1]}`;\r\n    const subjectDetails = subject\r\n      ? `${subject.subjectCode} ${subject.subjectName} \r\n      เธก.${subject.gradeID?.[0] ?? \"\"}/${parseInt(subject.gradeID?.substring(1) ?? \"0\")}`\r\n      : \"\";\r\n    return type === \"TIMESLOT\" ? timeSlotDetails : subjectDetails;\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-[580px] h-fit p-7 gap-6 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex flex-col w-full h-auto gap-3\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <div className=\"flex gap-3 items-center\">\r\n                <b\r\n                  className=\"text-lg select-none\"\r\n                  onClick={() => console.log(payload)}\r\n                >\r\n                  เธเธฑเธ”เธงเธดเธเธฒเน€เธฃเธตเธขเธเธฅเธเนเธเธเธฒเธ\r\n                </b>\r\n                {validateIsPass ? (\r\n                  <p className=\"text-xs text-red-500\">เนเธเธฃเธ”เน€เธฅเธทเธญเธเธซเนเธญเธเน€เธฃเธตเธขเธ</p>\r\n                ) : null}\r\n              </div>\r\n              <AiOutlineClose\r\n                className=\"cursor-pointer\"\r\n                onClick={() =>\r\n                  props.cancelAddRoom(\r\n                    payload.selectedSubject,\r\n                    payload.timeslotID,\r\n                  )\r\n                }\r\n              />\r\n            </div>\r\n            <div>\r\n              <p>{dataDetails(\"TIMESLOT\")}</p>\r\n              <b>{dataDetails(\"SUBJECT\")}</b>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex flex-col gap-3 p-4 w-full h-fit border border-[#EDEEF3]\">\r\n            <div className=\"flex justify-between items-center w-full\">\r\n              <div className=\"flex gap-1 items-center\">\r\n                <p>เน€เธฅเธทเธญเธเธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธ</p>\r\n              </div>\r\n              {roomData.data &&\r\n              \"success\" in roomData.data &&\r\n              roomData.data.success &&\r\n              roomData.data.data ? (\r\n                <Dropdown\r\n                  width={250}\r\n                  data={(\r\n                    roomData.data.data as {\r\n                      RoomID: number;\r\n                      RoomName: string;\r\n                      Building: string;\r\n                      Floor: string;\r\n                    }[]\r\n                  ).map((rm) => rm.RoomName)}\r\n                  placeHolder=\"เนเธเธฃเธ”เน€เธฅเธทเธญเธ\"\r\n                  renderItem={({ data }: { data: unknown }) => (\r\n                    <>\r\n                      <p>{data as string}</p>\r\n                    </>\r\n                  )}\r\n                  currentValue={RoomName}\r\n                  handleChange={(data: unknown) => {\r\n                    const roomName = data as string;\r\n                    setRoomName(roomName);\r\n                    const rooms =\r\n                      roomData.data && \"data\" in roomData.data\r\n                        ? (roomData.data.data as {\r\n                            RoomID: number;\r\n                            RoomName: string;\r\n                            Building: string;\r\n                            Floor: string;\r\n                          }[])\r\n                        : [];\r\n                    setRoom(rooms.find((r) => r.RoomName === roomName));\r\n                  }}\r\n                  searchFunction={undefined}\r\n                />\r\n              ) : (\r\n                <CircularProgress />\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex w-full items-end justify-end gap-4\">\r\n            <button\r\n              onClick={() =>\r\n                props.cancelAddRoom(payload.selectedSubject, payload.timeslotID)\r\n              }\r\n              className=\"w-[100px] h-[45px] rounded bg-red-100 text-red-500\"\r\n            >\r\n              เธขเธเน€เธฅเธดเธ\r\n            </button>\r\n            <button\r\n              onClick={confirm}\r\n              className=\"w-[100px] h-[45px] rounded bg-blue-100 text-blue-500\"\r\n            >\r\n              เธเธฑเธเธ—เธถเธ\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectSubjectToTimeslotModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\SelectTeacher.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":8,"column":17,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":8,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[296,299],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[296,299],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1283,1286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1283,1286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1487,1490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1487,1490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1847,1850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1847,1850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useTeachers } from \"@/hooks\";\r\nimport Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport React, { useState } from \"react\";\r\n\r\ntype Props = {\r\n  setTeacherID: Function;\r\n  currentTeacher: any;\r\n  disabled?: boolean;\r\n};\r\n\r\nfunction SelectTeacher({\r\n  setTeacherID,\r\n  currentTeacher = {},\r\n  disabled = false,\r\n}: Props) {\r\n  const pathName = usePathname();\r\n  const allTeacher = useTeachers();\r\n  const router = useRouter();\r\n  const current = currentTeacher;\r\n  const [teacher, setTeacher] = useState(\r\n    Object.keys(currentTeacher).length !== 0\r\n      ? `${current.Prefix}${current.Firstname} ${current.Lastname}`\r\n      : \"\",\r\n  );\r\n  const pushLink = (tID: number) => {\r\n    router.push(`${pathName}/?TeacherID=${tID}`);\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"flex w-full items-center justify-between h-fit p-4 border border-[#EDEEF3]\"\r\n        style={{\r\n          opacity: disabled ? 0.6 : 1,\r\n          pointerEvents: disabled ? \"none\" : \"auto\",\r\n        }}\r\n      >\r\n        <p>เน€เธฅเธทเธญเธเธเธธเธ“เธเธฃเธน</p>\r\n        <Dropdown\r\n          width={300}\r\n          data={allTeacher.data}\r\n          placeHolder=\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"\r\n          renderItem={({ data }: { data: any }) => (\r\n            <li>\r\n              <p>{`${data.Prefix}${data.Firstname} ${data.Lastname}`}</p>\r\n            </li>\r\n          )}\r\n          currentValue={teacher}\r\n          handleChange={(data: any) => {\r\n            if (disabled) return; // Prevent changes when disabled\r\n            setTeacher(`${data.Prefix}${data.Firstname} ${data.Lastname}`);\r\n            setTeacherID(data.TeacherID);\r\n            pushLink(data.TeacherID);\r\n          }}\r\n          searchFunction={undefined}\r\n          data-testid=\"teacher-selector\"\r\n          getItemId={(item: any) => item.TeacherID} // Extract TeacherID for stable E2E selectors\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectTeacher;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\SubjectDragBox.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[398,401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[398,401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":15,"column":19,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":15,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":16,"column":31,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":16,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[500,503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[500,503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * SubjectDragBox Component - Refactored with @dnd-kit\r\n *\r\n * Week 6.1 - Component Migration\r\n * Container for draggable subject items using @dnd-kit\r\n */\r\n\r\nimport React from \"react\";\r\nimport { SortableContext, rectSortingStrategy } from \"@dnd-kit/sortable\";\r\nimport SubjectItem from \"./SubjectItem\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\n\r\ntype Props = {\r\n  respData: any[];\r\n  dropOutOfZone?: Function;\r\n  clickOrDragToSelectSubject: Function;\r\n  storeSelectedSubject: any;\r\n  teacher: teacher;\r\n};\r\n\r\nconst SubjectDragBox = ({\r\n  respData,\r\n  dropOutOfZone,\r\n  storeSelectedSubject,\r\n  clickOrDragToSelectSubject,\r\n  teacher,\r\n}: Props) => {\r\n  // Generate IDs for SortableContext\r\n  const itemIds = respData.map(\r\n    (item, index) => `${item.SubjectCode}-Grade-${item.GradeID}-Index-${index}`,\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-col w-full border border-[rgb(237,238,243)] p-4 gap-4 mt-4\">\r\n        <p className=\"text-sm\">\r\n          เธงเธดเธเธฒเธ—เธตเนเธชเธฒเธกเธฒเธฃเธ–เธเธฑเธ”เธฅเธเนเธ”เน <b>(เธเธฅเธดเธเธซเธฃเธทเธญเธฅเธฒเธเธงเธดเธเธฒเธ—เธตเนเธ•เนเธญเธเธเธฒเธฃ)</b>\r\n        </p>\r\n        <div className=\"flex w-full text-center\">\r\n          <SortableContext items={itemIds} strategy={rectSortingStrategy}>\r\n            <div className=\"grid w-full h-[125px] text-center grid-cols-8 overflow-y-scroll overflow-x-hidden\">\r\n              {respData.map((item, index) => (\r\n                <SubjectItem\r\n                  key={`${item.SubjectCode}-${index}`}\r\n                  item={item}\r\n                  index={index}\r\n                  teacherData={{\r\n                    Firstname: teacher.Firstname,\r\n                  }}\r\n                  storeSelectedSubject={storeSelectedSubject}\r\n                  clickOrDragToSelectSubject={clickOrDragToSelectSubject}\r\n                  dropOutOfZone={dropOutOfZone}\r\n                />\r\n              ))}\r\n            </div>\r\n          </SortableContext>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SubjectDragBox;\r\n\r\n{\r\n  /* <Fragment\r\n                    key={`${item.SubjectCode}-${item.GradeID}-${index}`}\r\n                  >\r\n                    <Draggable\r\n                      draggableId={`${item.SubjectCode}-Grade-${item.GradeID}-Index-${index}`}\r\n                      key={`${item.SubjectCode}-Grade-${item.GradeID}-Index-${index}`}\r\n                      index={index}\r\n                    >\r\n                      {(provided, snapshot) => {\r\n                        if (snapshot.isDropAnimating) {\r\n                          //เน€เธเนเธเธงเนเธฒเธกเธตเธเธฒเธฃเธเธฅเนเธญเธขเน€เธกเธฒเธชเนเธกเธฑเนเธข\r\n                          dropOutOfZone(item); //เธ–เนเธฒเธกเธตเธเนเน€เธฃเธตเธขเธเนเธเนเธเธฑเธเธเนเธเธฑเนเธเธเธฃเนเธญเธกเธชเนเธเธงเธดเธเธฒเธ—เธตเนเน€เธฅเธทเธญเธเธฅเธเนเธ\r\n                        }\r\n                        return (\r\n                          <>\r\n                            <div\r\n                              className={`w-[85%] h-fit flex flex-col my-1 py-1 border rounded cursor-grab ${\r\n                                storeSelectedSubject == item //เธ–เนเธฒเธเธฅเธดเธเธซเธฃเธทเธญเธฅเธฒเธเธงเธดเธเธฒ เธเธฐเนเธชเธ”เธเน€เธเธตเธขเธงเนเธเธฐเธเธฃเธดเธเน\r\n                                  ? \"bg-green-200 hover:bg-green-300 border-green-500 animate-pulse\"\r\n                                  : \"bg-white hover:bg-slate-50\"\r\n                              } duration-100 select-none`}\r\n                              {...provided.dragHandleProps}\r\n                              {...provided.draggableProps}\r\n                              ref={provided.innerRef}\r\n                              onClick={() => clickOrDragToSelectSubject(item)}\r\n                            >\r\n                              <b className=\"text-sm\">{item.SubjectCode}</b>\r\n                              <p className=\"text-sm\">\r\n                                {item.SubjectName.substring(0, 8)}...\r\n                              </p>\r\n                              <b className=\"text-xs\">\r\n                                เธก.{item.GradeID[0]}/\r\n                                {parseInt(item.GradeID.substring(1, 2)) < 10\r\n                                  ? item.GradeID[2]\r\n                                  : item.GradeID.substring(1, 2)}\r\n                              </b>\r\n                              <p className=\"text-xs\">{teacherData.Firstname}</p>\r\n                            </div>\r\n                          </>\r\n                        );\r\n                      }}\r\n                    </Draggable>\r\n                  </Fragment> */\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\SubjectItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[541,544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[541,544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[577,580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[577,580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[601,604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[601,604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dropOutOfZone' is defined but never used. Allowed unused args must match /^_/u.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * SubjectItem Component - Refactored with @dnd-kit\r\n *\r\n * Week 6.1 - Component Migration\r\n * Migrated from react-beautiful-dnd to @dnd-kit for better performance\r\n */\r\n\r\nimport { useSortable } from \"@dnd-kit/sortable\";\r\nimport { CSS } from \"@dnd-kit/utilities\";\r\n\r\ninterface SubjectItemData {\r\n  subjectCode: string;\r\n  subjectName: string;\r\n  gradeID: string;\r\n  itemID?: number;\r\n}\r\n\r\ninterface ISubjectItemProps {\r\n  item: SubjectItemData;\r\n  index: number;\r\n  teacherData: {\r\n    Firstname: string;\r\n  };\r\n  storeSelectedSubject: any;\r\n  clickOrDragToSelectSubject: any;\r\n  dropOutOfZone?: any;\r\n}\r\n\r\nfunction SubjectItem({\r\n  item,\r\n  index,\r\n  teacherData,\r\n  storeSelectedSubject,\r\n  clickOrDragToSelectSubject,\r\n  dropOutOfZone,\r\n}: ISubjectItemProps) {\r\n  // @dnd-kit sortable hook\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({\r\n    id: `${item.subjectCode}-Grade-${item.gradeID}-Index-${index}`,\r\n    data: {\r\n      type: \"subject\",\r\n      item,\r\n      index,\r\n    },\r\n  });\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n  };\r\n\r\n  // Check if this item is currently selected\r\n  const isSelected =\r\n    storeSelectedSubject === item ||\r\n    storeSelectedSubject?.subjectCode === item.subjectCode;\r\n\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      style={style}\r\n      {...attributes}\r\n      {...listeners}\r\n      className={`w-[85%] h-fit flex flex-col my-1 py-1 border rounded cursor-pointer ${\r\n        isSelected\r\n          ? \"bg-green-200 hover:bg-green-300 border-green-500 animate-pulse\"\r\n          : \"bg-white hover:bg-slate-50\"\r\n      } duration-100 select-none`}\r\n      onClick={() => clickOrDragToSelectSubject(item)}\r\n    >\r\n      <b className=\"text-sm\">{item.subjectCode}</b>\r\n      <p className=\"text-sm\">{item.subjectName.substring(0, 8)}...</p>\r\n      <b className=\"text-xs\">\r\n        เธก.{item.gradeID[0]}/\r\n        {parseInt(item.gradeID.substring(1, 2)) < 10\r\n          ? item.gradeID[2]\r\n          : item.gradeID.substring(1, 2)}\r\n      </b>\r\n      <div className=\"flex gap-1 justify-center\">\r\n        <p className=\"text-xs\">{teacherData.Firstname}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SubjectItem;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\TimeSlot.refactored.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":9,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * TimeSlot Component - Refactored with @dnd-kit\r\n *\r\n * Week 6.2 - Removed react-beautiful-dnd dependencies\r\n * Now uses TimeslotCell component with @dnd-kit\r\n */\r\n\r\n\"use client\";\r\nimport React from \"react\";\r\n\r\ntype Props = Record<string, never>;\r\n\r\nfunction TimeSlot(_: Props) {\r\n  // Legacy refactored component disabled. Kept as a no-op to avoid route/build impact.\r\n  return null;\r\n}\r\n\r\nexport default TimeSlot;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\TimeSlot.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[831,834],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[831,834],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[852,855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[852,855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[876,879],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[876,879],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":34,"column":13,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":34,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":38,"column":35,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":38,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":46,"column":18,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":46,"endColumn":26},{"ruleId":"no-warning-comments","severity":1,"message":"Unexpected 'todo' comment: 'TODO: เน€เธชเธฃเธดเธก =>...'.","line":55,"column":1,"nodeType":"Line","messageId":"unexpectedComment","endLine":55,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkRelatedYearDuringDragging' is defined but never used. Allowed unused args must match /^_/u.","line":61,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dropOutOfZone' is defined but never used. Allowed unused args must match /^_/u.","line":70,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":16},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":90,"column":59,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":90,"endColumn":61,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2978,2980],"text":"==="},"desc":"Use '===' instead of '=='."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * TimeSlot Component - Refactored with @dnd-kit\r\n *\r\n * Week 6.2 - Removed react-beautiful-dnd dependencies\r\n * Now uses TimeslotCell component with @dnd-kit\r\n */\r\n\r\n\"use client\";\r\nimport React, { Fragment } from \"react\";\r\nimport { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\nimport TimetableHeader from \"./TimetableHeader\";\r\nimport TimetableRow from \"./TimetableRow\";\r\nimport { TimeslotCell } from \"./TimeslotCell\";\r\nimport type {\r\n  CheckBreakTimeCallback,\r\n  IsSelectedToAddCallback,\r\n  IsSelectedToChangeCallback,\r\n  TimeSlotCssClassNameCallback,\r\n  SubjectData,\r\n  AddRoomModalCallback,\r\n  ClickOrDragToChangeCallback,\r\n  RemoveSubjectCallback,\r\n  SetErrorStateCallback,\r\n  DisplayErrorChangeSubjectCallback,\r\n  TimeslotChange,\r\n} from \"@/types/schedule.types\";\r\n\r\ntype Props = {\r\n  timeSlotData: {\r\n    DayOfWeek: any[];\r\n    AllData: any[];\r\n    SlotAmount: any[];\r\n  };\r\n  mapTime?: Function;\r\n  checkBreakTime: CheckBreakTimeCallback;\r\n  isSelectedToAdd: IsSelectedToAddCallback;\r\n  isSelectedToChange: IsSelectedToChangeCallback;\r\n  checkRelatedYearDuringDragging: Function;\r\n  timeSlotCssClassName: TimeSlotCssClassNameCallback;\r\n  storeSelectedSubject: SubjectData | null;\r\n  addRoomModal: AddRoomModalCallback;\r\n  changeTimeSlotSubject: SubjectData | null;\r\n  clickOrDragToChangeTimeSlot: ClickOrDragToChangeCallback;\r\n  isClickToChangeSubject: boolean; // Fixed typo: was isCilckToChangeSubject\r\n  timeslotIDtoChange: TimeslotChange;\r\n  dropOutOfZone: Function;\r\n  displayErrorChangeSubject: DisplayErrorChangeSubjectCallback;\r\n  showErrorMsgByTimeslotID: string;\r\n  removeSubjectFromSlot: RemoveSubjectCallback;\r\n  showLockDataMsgByTimeslotID: string;\r\n  setShowErrorMsgByTimeslotID: SetErrorStateCallback;\r\n  setShowLockDataMsgByTimeslotID: SetErrorStateCallback;\r\n};\r\n\r\n// TODO: เน€เธชเธฃเธดเธก => เน€เธฅเธทเธญเธเธซเนเธญเธเนเธชเนเธงเธดเธเธฒเนเธเน€เธฅเธขเน€เธเธทเนเธญเธเธงเธฒเธกเธชเธฐเธ”เธงเธ\r\n\r\nfunction TimeSlot({\r\n  timeSlotData,\r\n  checkBreakTime,\r\n  isSelectedToAdd,\r\n  checkRelatedYearDuringDragging,\r\n  timeSlotCssClassName,\r\n  isSelectedToChange,\r\n  storeSelectedSubject,\r\n  addRoomModal,\r\n  changeTimeSlotSubject,\r\n  clickOrDragToChangeTimeSlot,\r\n  isClickToChangeSubject, // Fixed typo: was isCilckToChangeSubject\r\n  timeslotIDtoChange,\r\n  dropOutOfZone,\r\n  displayErrorChangeSubject,\r\n  showErrorMsgByTimeslotID,\r\n  removeSubjectFromSlot,\r\n  showLockDataMsgByTimeslotID,\r\n  setShowLockDataMsgByTimeslotID,\r\n  setShowErrorMsgByTimeslotID,\r\n}: Props) {\r\n  return (\r\n    <>\r\n      <table className=\"table-auto w-full flex flex-col gap-3 mt-4 mb-10\">\r\n        <thead className=\"flex flex-col gap-3\">\r\n          <TimetableHeader timeslot={timeSlotData} />\r\n        </thead>\r\n        <tbody className=\"flex flex-col gap-3\">\r\n          {timeSlotData.DayOfWeek.map((day) => (\r\n            <Fragment key={`Day-${day.Day}`}>\r\n              <tr className=\"flex gap-4\">\r\n                <TimetableRow day={day} />\r\n                {timeSlotData.AllData.filter(\r\n                  (item) => dayOfWeekThai[item.DayOfWeek] == day.Day,\r\n                ).map((item, index) => (\r\n                  <TimeslotCell\r\n                    key={`DROPZONE${item.TimeslotID}`}\r\n                    item={item}\r\n                    index={index}\r\n                    timeSlotDataLength={timeSlotData.SlotAmount.length}\r\n                    checkBreakTime={checkBreakTime}\r\n                    isSelectedToAdd={isSelectedToAdd}\r\n                    isSelectedToChange={isSelectedToChange}\r\n                    timeSlotCssClassName={timeSlotCssClassName}\r\n                    storeSelectedSubject={storeSelectedSubject}\r\n                    addRoomModal={addRoomModal}\r\n                    changeTimeSlotSubject={changeTimeSlotSubject}\r\n                    clickOrDragToChangeTimeSlot={clickOrDragToChangeTimeSlot}\r\n                    isClickToChangeSubject={isClickToChangeSubject}\r\n                    timeslotIDtoChange={timeslotIDtoChange}\r\n                    removeSubjectFromSlot={removeSubjectFromSlot}\r\n                    showErrorMsgByTimeslotID={showErrorMsgByTimeslotID}\r\n                    showLockDataMsgByTimeslotID={showLockDataMsgByTimeslotID}\r\n                    setShowErrorMsgByTimeslotID={setShowErrorMsgByTimeslotID}\r\n                    setShowLockDataMsgByTimeslotID={\r\n                      setShowLockDataMsgByTimeslotID\r\n                    }\r\n                    displayErrorChangeSubject={displayErrorChangeSubject}\r\n                  />\r\n                ))}\r\n              </tr>\r\n            </Fragment>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TimeSlot;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\TimeslotCell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\TimetableHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\component\\TimetableRow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dayOfWeekTextColor' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dayOfWeekColor' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dayOfWeekThai' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Fragment' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { dayOfWeekTextColor } from \"@/models/dayofWeek-textColor\";\nimport { dayOfWeekColor } from \"@/models/dayofweek-color\";\nimport { dayOfWeekThai } from \"@/models/dayofweek-thai\";\nimport { Fragment } from \"react\";\n\ninterface ITimetableRowProps {\n  day: {\n    Day: string;\n    BgColor: string;\n    TextColor: string;\n  };\n}\nfunction TimetableRow({ day }: ITimetableRowProps) {\n  return (\n    <td\n      className={`flex items-center justify-center p-[10px] h-[76px] rounded select-none`}\n      style={{ backgroundColor: day.BgColor }}\n    >\n      <span className={`flex w-[50px] h-[24px] justify-center`}>\n        <p style={{ color: day.TextColor }}>{day.Day}</p>\n      </span>\n    </td>\n  );\n}\n\nexport default TimetableRow;\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TeacherData' is defined but never used.","line":93,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":93,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":138,"column":3,"nodeType":"Identifier","endLine":138,"endColumn":12},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":154,"column":39,"nodeType":"Identifier","endLine":154,"endColumn":47},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":155,"column":45,"nodeType":"Identifier","endLine":155,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":156,"column":47,"nodeType":"Identifier","endLine":156,"endColumn":55},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":157,"column":65,"nodeType":"Identifier","endLine":157,"endColumn":73},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":160,"column":49,"nodeType":"Identifier","endLine":160,"endColumn":57},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useArrangementUIStore\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":191,"column":7,"nodeType":"Identifier","endLine":191,"endColumn":28},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":194,"column":33,"nodeType":"Identifier","endLine":194,"endColumn":41},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useConflictValidation\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":199,"column":30,"nodeType":"Identifier","endLine":199,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSensors\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":204,"column":19,"nodeType":"Identifier","endLine":204,"endColumn":29},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSensor\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":205,"column":5,"nodeType":"Identifier","endLine":205,"endColumn":14},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSensor\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":210,"column":5,"nodeType":"Identifier","endLine":210,"endColumn":14},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":218,"column":63,"nodeType":"Identifier","endLine":218,"endColumn":69},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":230,"column":33,"nodeType":"Identifier","endLine":230,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":246,"column":7,"nodeType":"Identifier","endLine":246,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":261,"column":39,"nodeType":"Identifier","endLine":261,"endColumn":45},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":287,"column":62,"nodeType":"Identifier","endLine":287,"endColumn":68},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":302,"column":56,"nodeType":"Identifier","endLine":302,"endColumn":62},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":328,"column":37,"nodeType":"Identifier","endLine":328,"endColumn":43},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":343,"column":36,"nodeType":"Identifier","endLine":343,"endColumn":42},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":364,"column":37,"nodeType":"Identifier","endLine":364,"endColumn":43},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":388,"column":30,"nodeType":"Identifier","endLine":388,"endColumn":37},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":392,"column":72,"nodeType":"Identifier","endLine":392,"endColumn":78},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":424,"column":26,"nodeType":"Identifier","endLine":424,"endColumn":33},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'timetableConfig.totalPeriodsPerWeek'. Either include it or remove the dependency array.","line":450,"column":6,"nodeType":"ArrayExpression","endLine":450,"endColumn":55,"suggestions":[{"desc":"Update the dependencies array to be: [gradeLevels, gradeSchedules, selectedGradeLevel, timetableConfig.totalPeriodsPerWeek]","fix":{"range":[15581,15630],"text":"[gradeLevels, gradeSchedules, selectedGradeLevel, timetableConfig.totalPeriodsPerWeek]"}}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":455,"column":23,"nodeType":"Identifier","endLine":455,"endColumn":30},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":469,"column":31,"nodeType":"Identifier","endLine":469,"endColumn":38},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":478,"column":3,"nodeType":"Identifier","endLine":478,"endColumn":12},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":487,"column":3,"nodeType":"Identifier","endLine":487,"endColumn":12},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":493,"column":3,"nodeType":"Identifier","endLine":493,"endColumn":12},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":519,"column":3,"nodeType":"Identifier","endLine":519,"endColumn":12},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":530,"column":24,"nodeType":"Identifier","endLine":530,"endColumn":31},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":552,"column":27,"nodeType":"Identifier","endLine":552,"endColumn":38},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":559,"column":31,"nodeType":"Identifier","endLine":559,"endColumn":42},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":572,"column":22,"nodeType":"Identifier","endLine":572,"endColumn":33},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":618,"column":27,"nodeType":"Identifier","endLine":618,"endColumn":38},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":632,"column":25,"nodeType":"Identifier","endLine":632,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'subjectCode' is assigned a value but never used.","line":639,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":639,"endColumn":24},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":725,"column":28,"nodeType":"Identifier","endLine":725,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":816,"column":26,"nodeType":"Identifier","endLine":816,"endColumn":37},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":866,"column":26,"nodeType":"Identifier","endLine":866,"endColumn":37},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":974,"column":25,"nodeType":"Identifier","endLine":974,"endColumn":36},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":1155,"column":22,"nodeType":"Identifier","endLine":1155,"endColumn":33},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":1178,"column":22,"nodeType":"Identifier","endLine":1178,"endColumn":33},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":1201,"column":29,"nodeType":"Identifier","endLine":1201,"endColumn":40},{"ruleId":"no-warning-comments","severity":1,"message":"Unexpected 'todo' comment: 'TODO: Implement auto arrange algorithm...'.","line":1202,"column":5,"nodeType":"Line","messageId":"unexpectedComment","endLine":1202,"endColumn":75},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":1212,"column":27,"nodeType":"Identifier","endLine":1212,"endColumn":34},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useSWR\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":1229,"column":41,"nodeType":"Identifier","endLine":1229,"endColumn":47},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":1272,"column":31,"nodeType":"Identifier","endLine":1272,"endColumn":38},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":1314,"column":29,"nodeType":"Identifier","endLine":1314,"endColumn":36}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1426,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1426,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[49209,49212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[49209,49212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1555,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1555,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[54992,54995],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[54992,54995],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":47,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Arrangement Page - Modern MUI v7 Implementation\r\n *\r\n * Comprehensive rebuild with:\r\n * - MUI v7 components (Grid, Paper, Tabs, etc.)\r\n * - Tab navigation: Teacher Arrange + Grade Level Views (เธก.1-เธก.6)\r\n * - @dnd-kit drag & drop for teacher arrangement\r\n * - Clean Architecture with Server Actions\r\n * - Zustand store integration (existing arrangement-ui.store)\r\n * - Real-time conflict validation\r\n *\r\n * @module ArrangementPage\r\n */\r\n\r\n\"use client\";\r\n\r\nimport React, { useEffect, useCallback, useMemo, useState } from \"react\";\r\nimport { useParams, useSearchParams, useRouter } from \"next/navigation\";\r\nimport useSWR from \"swr\";\r\nimport { enqueueSnackbar } from \"notistack\";\r\nimport { useSemesterSync } from \"@/hooks\";\r\nimport { Box, Container, Paper, Stack, Alert, AlertTitle } from \"@mui/material\";\r\n\r\n// @dnd-kit\r\nimport {\r\n  DndContext,\r\n  DragEndEvent,\r\n  DragStartEvent,\r\n  DragOverlay,\r\n  closestCenter,\r\n  PointerSensor,\r\n  KeyboardSensor,\r\n  useSensor,\r\n  useSensors,\r\n} from \"@dnd-kit/core\";\r\nimport { sortableKeyboardCoordinates } from \"@dnd-kit/sortable\";\r\n\r\n// Modern Components\r\nimport {\r\n  ArrangementHeader,\r\n  GradeLevelTabs,\r\n  ConflictAlert,\r\n  SearchableSubjectPalette,\r\n  TimetableGrid,\r\n  RoomSelectionDialog,\r\n  ScheduleActionToolbar,\r\n  GradeClassView,\r\n  ScheduleProgressIndicators,\r\n} from \"./_components\";\r\n\r\n// Domain Constants\r\nimport {\r\n  tabToGradeLevel,\r\n  type ArrangeTab,\r\n} from \"@/features/schedule-arrangement/domain/constants/arrangement.constants\";\r\n\r\n// Server Actions\r\nimport {\r\n  getTeacherScheduleAction,\r\n  syncTeacherScheduleAction,\r\n} from \"@/features/arrange/application/actions/arrange.actions\";\r\nimport {\r\n  getConflictsAction,\r\n  getClassSchedulesAction,\r\n  createClassScheduleAction,\r\n} from \"@/features/class/application/actions/class.actions\";\r\nimport {\r\n  checkTeacherConflictAction,\r\n  checkRoomConflictAction,\r\n} from \"@/features/conflict/application/actions/conflict.actions\";\r\nimport { getTeachersAction } from \"@/features/teacher/application/actions/teacher.actions\";\r\nimport { getAvailableRespsAction } from \"@/features/assign/application/actions/assign.actions\";\r\nimport { getTimeslotsByTermAction } from \"@/features/timeslot/application/actions/timeslot.actions\";\r\nimport { getGradeLevelsAction } from \"@/features/gradelevel/application/actions/gradelevel.actions\";\r\nimport { getTimetableConfigAction } from \"@/lib/actions/timetable-config.actions\";\r\nimport { getRawLockedSchedulesAction } from \"@/features/lock/application/actions/lock.actions\";\r\nimport {\r\n  getAvailableRoomsAction,\r\n  getOccupiedRoomsAction,\r\n} from \"@/features/room/application/actions/room.actions\";\r\n\r\n// Zustand Store\r\nimport { useArrangementUIStore } from \"@/features/schedule-arrangement/presentation/stores/arrangement-ui.store\";\r\n\r\n// Conflict Validation Hook\r\nimport { useConflictValidation } from \"@/features/schedule-arrangement/presentation/hooks\";\r\n\r\n// Config (import from constants to avoid bundling Prisma in browser)\r\nimport type { TimetableConfig } from \"@/lib/timetable-config.constants\";\r\nimport { DEFAULT_TIMETABLE_CONFIG } from \"@/lib/timetable-config.constants\";\r\n\r\n// Types\r\nimport type { SubjectData, TeacherData } from \"@/types/schedule.types\";\r\nimport type { gradelevel, teacher, room } from \"@/prisma/generated/client\";\r\n\r\n// Feedback Components\r\nimport {\r\n  TimetableGridSkeleton,\r\n  NetworkErrorEmptyState,\r\n} from \"@/components/feedback\";\r\n\r\n// Client Logger\r\nimport { createClientLogger } from \"@/lib/client-logger\";\r\n\r\nconst log = createClientLogger(\"ArrangementPage\");\r\n\r\n/**\r\n * Main Arrangement Page Component\r\n */\r\nexport default function ArrangementPage() {\r\n  // ============================================================================\r\n  // ROUTING & PARAMS\r\n  // ============================================================================\r\n  const params = useParams();\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n  const searchTeacherID = searchParams.get(\"TeacherID\");\r\n\r\n  // Use useSemesterSync to extract and sync semester with global store\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n\r\n  if (!semester || !academicYear) {\r\n    return (\r\n      <Container maxWidth=\"xl\" sx={{ py: 4 }}>\r\n        <Alert severity=\"error\">\r\n          <AlertTitle>เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”</AlertTitle>\r\n          เธฃเธนเธเนเธเธเธเนเธญเธกเธนเธฅเธ เธฒเธเน€เธฃเธตเธขเธเนเธฅเธฐเธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒเนเธกเนเธ–เธนเธเธ•เนเธญเธ\r\n        </Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // ============================================================================\r\n  // TIMETABLE CONFIG\r\n  // ============================================================================\r\n  useEffect(() => {\r\n    const fetchConfig = async () => {\r\n      const result = await getTimetableConfigAction({\r\n        academicYear: parseInt(academicYear),\r\n        semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n      });\r\n      if (result.success && result.data) {\r\n        setTimetableConfig(result.data);\r\n      }\r\n    };\r\n    void fetchConfig();\r\n  }, [academicYear, semester]);\r\n\r\n  // ============================================================================\r\n  // LOCAL STATE\r\n  // ============================================================================\r\n  const [currentTab, setCurrentTab] = useState<ArrangeTab>(\"teacher\");\r\n  const [activeSubject, setActiveSubject] = useState<SubjectData | null>(null);\r\n  const [roomDialogOpen, setRoomDialogOpen] = useState(false);\r\n  const [selectedTimeslotForRoom, setSelectedTimeslotForRoom] = useState<\r\n    string | null\r\n  >(null);\r\n  const [timetableConfig, setTimetableConfig] = useState<TimetableConfig>(\r\n    DEFAULT_TIMETABLE_CONFIG,\r\n  );\r\n\r\n  // ============================================================================\r\n  // ZUSTAND STORE\r\n  // ============================================================================\r\n  const {\r\n    // Teacher state\r\n    currentTeacherID,\r\n    teacherData,\r\n    setCurrentTeacherID,\r\n    setTeacherData,\r\n\r\n    // Data state\r\n    scheduledSubjects,\r\n    setLockData,\r\n\r\n    // Save state\r\n    isSaving,\r\n    setIsSaving,\r\n\r\n    // History actions\r\n    pushHistory,\r\n    undo,\r\n    redo,\r\n    canUndo,\r\n    canRedo,\r\n\r\n    // Reset\r\n    resetOnTeacherChange,\r\n  } = useArrangementUIStore();\r\n\r\n  // Local dirty state (store doesn't have isDirty yet)\r\n  const [isDirty, setIsDirty] = useState(false);\r\n\r\n  // ============================================================================\r\n  // CONFLICT VALIDATION\r\n  // ============================================================================\r\n  const conflictValidation = useConflictValidation();\r\n\r\n  // ============================================================================\r\n  // @DND-KIT SENSORS\r\n  // ============================================================================\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 10,\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    }),\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Teachers\r\n  // ============================================================================\r\n  const { data: allTeachers, isLoading: isLoadingTeachers } = useSWR(\r\n    \"teachers\",\r\n    async () => {\r\n      const result = await getTeachersAction({});\r\n      if (!result || !result.success) return [];\r\n      return result.data || [];\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Grade Levels\r\n  // ============================================================================\r\n  const { data: gradeLevels } = useSWR(\r\n    `gradelevels-${academicYear}-${semester}`,\r\n    async () => {\r\n      const result = await getGradeLevelsAction({});\r\n      if (!result || !result.success) return [];\r\n      return result.data || [];\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Teacher Schedule (for Teacher Tab)\r\n  // ============================================================================\r\n  const {\r\n    data: teacherSchedule,\r\n    mutate: mutateTeacherSchedule,\r\n    isLoading: isLoadingSchedule,\r\n  } = useSWR(\r\n    currentTeacherID ? `teacher-schedule-${currentTeacherID}` : null,\r\n    async () => {\r\n      if (!currentTeacherID) return null;\r\n      const result = await getTeacherScheduleAction({\r\n        TeacherID: parseInt(currentTeacherID),\r\n      });\r\n      if (!result || !result.success) return null;\r\n      return result.data;\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Available Subjects (for Teacher)\r\n  // ============================================================================\r\n  const { data: availableSubjects } = useSWR(\r\n    currentTeacherID\r\n      ? `available-subjects-${academicYear}-${semester}-${currentTeacherID}`\r\n      : null,\r\n    async () => {\r\n      if (!currentTeacherID) return [];\r\n      const result = await getAvailableRespsAction({\r\n        AcademicYear: parseInt(academicYear),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        TeacherID: parseInt(currentTeacherID),\r\n      });\r\n      if (\r\n        !result ||\r\n        typeof result !== \"object\" ||\r\n        !(\"success\" in result) ||\r\n        !result.success\r\n      )\r\n        return [];\r\n      if (!(\"data\" in result)) return [];\r\n      return (result.data as SubjectData[]) || [];\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Timeslots\r\n  // ============================================================================\r\n  const { data: timeslots, isLoading: isLoadingTimeslots } = useSWR(\r\n    `timeslots-${academicYear}-${semester}`,\r\n    async () => {\r\n      const result = await getTimeslotsByTermAction({\r\n        AcademicYear: parseInt(academicYear),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n      });\r\n      if (!result || !result.success) return [];\r\n      return result.data || [];\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Conflicts\r\n  // ============================================================================\r\n  const { data: conflicts, mutate: mutateConflicts } = useSWR(\r\n    currentTeacherID\r\n      ? `conflicts-${academicYear}-${semester}-${currentTeacherID}`\r\n      : null,\r\n    async () => {\r\n      if (!currentTeacherID) return [];\r\n      const result = await getConflictsAction({\r\n        AcademicYear: parseInt(academicYear),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        TeacherID: parseInt(currentTeacherID),\r\n      });\r\n      if (\r\n        !result ||\r\n        typeof result !== \"object\" ||\r\n        !(\"success\" in result) ||\r\n        !result.success\r\n      )\r\n        return [];\r\n      if (!(\"data\" in result)) return [];\r\n      return (result.data as unknown[]) || [];\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Locked Schedules\r\n  // ============================================================================\r\n  const { data: lockedSchedules } = useSWR(\r\n    `locked-schedules-${academicYear}-${semester}`,\r\n    async () => {\r\n      const result = await getRawLockedSchedulesAction({\r\n        AcademicYear: parseInt(academicYear),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n      });\r\n      if (!result || !result.success) return [];\r\n      return result.data || [];\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Room Availability (for Room Dialog)\r\n  // ============================================================================\r\n  const { data: availableRooms } = useSWR(\r\n    selectedTimeslotForRoom\r\n      ? `available-rooms-${selectedTimeslotForRoom}`\r\n      : null,\r\n    async () => {\r\n      if (!selectedTimeslotForRoom) return [];\r\n      const result = await getAvailableRoomsAction({\r\n        TimeslotID: selectedTimeslotForRoom,\r\n      });\r\n      if (\r\n        !result ||\r\n        typeof result !== \"object\" ||\r\n        !(\"success\" in result) ||\r\n        !result.success\r\n      )\r\n        return [];\r\n      if (!(\"data\" in result)) return [];\r\n      return (result.data as unknown[]) || [];\r\n    },\r\n  );\r\n\r\n  const { data: occupiedRoomIDs } = useSWR(\r\n    selectedTimeslotForRoom\r\n      ? `occupied-rooms-${selectedTimeslotForRoom}`\r\n      : null,\r\n    async () => {\r\n      if (!selectedTimeslotForRoom) return [];\r\n      const result = await getOccupiedRoomsAction({\r\n        TimeslotID: selectedTimeslotForRoom,\r\n      });\r\n      if (\r\n        !result ||\r\n        typeof result !== \"object\" ||\r\n        !(\"success\" in result) ||\r\n        !result.success\r\n      )\r\n        return [];\r\n      if (!(\"data\" in result)) return [];\r\n      return (result.data as number[]) || [];\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING - Grade Level Schedules (for Grade Tabs)\r\n  // ============================================================================\r\n  const selectedGradeLevel = useMemo(() => {\r\n    return tabToGradeLevel(currentTab);\r\n  }, [currentTab]);\r\n\r\n  const { data: gradeSchedules, isLoading: isLoadingGradeSchedules } = useSWR(\r\n    selectedGradeLevel\r\n      ? `grade-schedules-${academicYear}-${semester}-${selectedGradeLevel}`\r\n      : null,\r\n    async () => {\r\n      if (!selectedGradeLevel) return [];\r\n      const result = await getClassSchedulesAction({\r\n        AcademicYear: parseInt(academicYear),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        GradeID: undefined, // Will fetch by Year instead\r\n      });\r\n      if (\r\n        !result ||\r\n        typeof result !== \"object\" ||\r\n        !(\"success\" in result) ||\r\n        !result.success\r\n      )\r\n        return [];\r\n      if (!(\"data\" in result)) return [];\r\n\r\n      // Filter by grade level Year\r\n      const schedules = (result.data as unknown[]) || [];\r\n      return schedules.filter((s: unknown) => {\r\n        const schedule = s as { gradelevel?: { Year?: number } };\r\n        return schedule.gradelevel?.Year === selectedGradeLevel;\r\n      });\r\n    },\r\n  );\r\n\r\n  // ============================================================================\r\n  // COMPUTED DATA - Grade Level Class Data\r\n  // ============================================================================\r\n  const gradeClassData = useMemo(() => {\r\n    if (!gradeLevels || !gradeSchedules || !selectedGradeLevel) return [];\r\n\r\n    // Filter classes for selected grade level\r\n    const classes = gradeLevels.filter(\r\n      (g: gradelevel) => g.Year === selectedGradeLevel,\r\n    );\r\n\r\n    // Group schedules by class\r\n    return classes.map((cls: gradelevel) => {\r\n      const classSchedules = gradeSchedules.filter((s: unknown) => {\r\n        const schedule = s as { GradeID?: string };\r\n        return schedule.GradeID === cls.GradeID;\r\n      });\r\n\r\n      // Calculate expected periods from config\r\n      const totalPeriods = timetableConfig.totalPeriodsPerWeek;\r\n      const assignedPeriods = classSchedules.length;\r\n\r\n      return {\r\n        class: cls,\r\n        schedules: classSchedules,\r\n        totalPeriods,\r\n        assignedPeriods,\r\n      };\r\n    });\r\n  }, [gradeLevels, gradeSchedules, selectedGradeLevel]);\r\n\r\n  // ============================================================================\r\n  // COMPUTED DATA - Grade Counts for Tabs\r\n  // ============================================================================\r\n  const gradeCounts = useMemo(() => {\r\n    if (!gradeLevels) return {};\r\n\r\n    const counts: Record<number, number> = {};\r\n    gradeLevels.forEach((g: gradelevel) => {\r\n      counts[g.Year] = (counts[g.Year] || 0) + 1;\r\n    });\r\n\r\n    return counts;\r\n  }, [gradeLevels]);\r\n\r\n  // ============================================================================\r\n  // COMPUTED DATA - Teachers (Prisma type)\r\n  // ============================================================================\r\n  const transformedTeachers = useMemo(() => {\r\n    if (!allTeachers) return [];\r\n    // ArrangementHeader now expects Prisma's teacher type directly\r\n    return allTeachers as teacher[];\r\n  }, [allTeachers]);\r\n\r\n  // ============================================================================\r\n  // EFFECTS - Initialize Teacher\r\n  // ============================================================================\r\n  useEffect(() => {\r\n    if (searchTeacherID) {\r\n      setCurrentTeacherID(searchTeacherID);\r\n    }\r\n  }, [searchTeacherID, setCurrentTeacherID]);\r\n\r\n  // ============================================================================\r\n  // EFFECTS - Update Lock Data in Store\r\n  // ============================================================================\r\n  useEffect(() => {\r\n    if (lockedSchedules) {\r\n      setLockData(lockedSchedules);\r\n    }\r\n  }, [lockedSchedules, setLockData]);\r\n\r\n  useEffect(() => {\r\n    if (currentTeacherID && allTeachers) {\r\n      const teacher = allTeachers.find((t: unknown) => {\r\n        const teacherData = t as { TeacherID?: number };\r\n        return teacherData.TeacherID === parseInt(currentTeacherID);\r\n      });\r\n      if (teacher) {\r\n        // Transform PascalCase to camelCase for store\r\n        const rawTeacher = teacher as {\r\n          TeacherID: number;\r\n          Prefix: string;\r\n          Firstname: string;\r\n          Lastname: string;\r\n          Department: string;\r\n          Email: string;\r\n          Role: string;\r\n        };\r\n        // Store now expects Prisma's teacher type directly\r\n        setTeacherData(rawTeacher);\r\n      }\r\n    }\r\n  }, [currentTeacherID, allTeachers, setTeacherData]);\r\n\r\n  // ============================================================================\r\n  // EFFECTS - Reset on Teacher Change\r\n  // ============================================================================\r\n  useEffect(() => {\r\n    return () => {\r\n      resetOnTeacherChange();\r\n    };\r\n  }, [currentTeacherID, resetOnTeacherChange]);\r\n\r\n  // ============================================================================\r\n  // COMPUTED - Break Slots\r\n  // Extracts timeslot IDs where Breaktime is not NOT_BREAK\r\n  // These slots are blocked from subject placement during drag-and-drop\r\n  // ============================================================================\r\n  const breakSlotIDs = useMemo(() => {\r\n    if (!timeslots || !Array.isArray(timeslots)) {\r\n      return new Set<string>();\r\n    }\r\n\r\n    const breakIDs = new Set<string>();\r\n    for (const slot of timeslots) {\r\n      const ts = slot as { TimeslotID?: string; Breaktime?: string };\r\n      // Block any slot that has a break designation (BREAK_JUNIOR, BREAK_SENIOR, BREAK_BOTH)\r\n      if (ts.Breaktime && ts.Breaktime !== \"NOT_BREAK\") {\r\n        if (ts.TimeslotID) {\r\n          breakIDs.add(ts.TimeslotID);\r\n        }\r\n      }\r\n    }\r\n\r\n    return breakIDs;\r\n  }, [timeslots]);\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Tab Change\r\n  // ============================================================================\r\n  const handleTabChange = useCallback((tab: ArrangeTab) => {\r\n    setCurrentTab(tab);\r\n  }, []);\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Teacher Change\r\n  // ============================================================================\r\n  const handleTeacherChange = useCallback(\r\n    (teacherID: string) => {\r\n      setCurrentTeacherID(teacherID);\r\n      router.push(\r\n        `/schedule/${semester}-${academicYear}/arrange?TeacherID=${teacherID}`,\r\n      );\r\n    },\r\n    [semester, academicYear, router, setCurrentTeacherID],\r\n  );\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Save\r\n  // ============================================================================\r\n  const handleSave = useCallback(async () => {\r\n    if (!currentTeacherID || !teacherSchedule) {\r\n      enqueueSnackbar(\"เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธเธฃเธนเธเนเธญเธเธเธฑเธเธ—เธถเธ\", { variant: \"warning\" });\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n\r\n    try {\r\n      const result = await syncTeacherScheduleAction({\r\n        TeacherID: parseInt(currentTeacherID),\r\n        schedules: teacherSchedule,\r\n      });\r\n\r\n      if (result.success) {\r\n        enqueueSnackbar(\"โ… เธเธฑเธเธ—เธถเธเธ•เธฒเธฃเธฒเธเธชเธญเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n        setIsDirty(false);\r\n        void mutateTeacherSchedule();\r\n        void mutateConflicts();\r\n      } else {\r\n        const errorMsg =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"เนเธกเนเธ—เธฃเธฒเธเธชเธฒเน€เธซเธ•เธธ\";\r\n        enqueueSnackbar(`โ เธเธฑเธเธ—เธถเธเนเธกเนเธชเธณเน€เธฃเนเธ: ${errorMsg}`, {\r\n          variant: \"error\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      log.logError(error, { action: \"save\" });\r\n      enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธเธฑเธเธ—เธถเธ\", { variant: \"error\" });\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  }, [\r\n    currentTeacherID,\r\n    teacherSchedule,\r\n    setIsSaving,\r\n    setIsDirty,\r\n    mutateTeacherSchedule,\r\n    mutateConflicts,\r\n  ]);\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Drag & Drop\r\n  // ============================================================================\r\n  const handleDragStart = useCallback(\r\n    (event: DragStartEvent) => {\r\n      const { active } = event;\r\n      const subject = availableSubjects?.find((s: unknown) => {\r\n        const subj = s as { SubjectCode?: string };\r\n        return subj.SubjectCode === active.id;\r\n      });\r\n      if (subject) {\r\n        setActiveSubject(subject);\r\n      }\r\n    },\r\n    [availableSubjects],\r\n  );\r\n\r\n  const handleDragEnd = useCallback(\r\n    (event: DragEndEvent) => {\r\n      const { active, over } = event;\r\n      setActiveSubject(null);\r\n\r\n      if (!over || !activeSubject) return;\r\n\r\n      const subjectCode = active.id as string;\r\n      const timeslotID = over.id as string;\r\n\r\n      // Step 1: Validate timeslot is not a break slot\r\n      if (breakSlotIDs.has(timeslotID)) {\r\n        enqueueSnackbar(\"โธ๏ธ เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธเธฑเธ”เธงเธดเธเธฒเน€เธฃเธตเธขเธเนเธเธเธฒเธเธเธฑเธเนเธ”เน\", {\r\n          variant: \"warning\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Step 2: Validate timeslot is not locked\r\n      if (conflictValidation.lockedTimeslots.has(timeslotID)) {\r\n        enqueueSnackbar(\"๐”’ เธเนเธงเธเน€เธงเธฅเธฒเธเธตเนเธ–เธนเธเธฅเนเธญเธเนเธฅเนเธง เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธเธฑเธ”เธ•เธฒเธฃเธฒเธเนเธ”เน\", {\r\n          variant: \"warning\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Step 3: Check for general conflicts using validation hook\r\n      const conflictInfo =\r\n        conflictValidation.conflictsByTimeslot.get(timeslotID);\r\n      if (\r\n        conflictInfo &&\r\n        conflictInfo.type !== \"none\" &&\r\n        conflictInfo.severity === \"error\"\r\n      ) {\r\n        enqueueSnackbar(`โ ๏ธ เธ•เธฃเธงเธเธเธเธเนเธญเธเธฑเธ”เนเธขเนเธ: ${conflictInfo.message}`, {\r\n          variant: \"error\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Step 4: Check for specific teacher conflict (NEW - Issue #84)\r\n      // Wrapped in async IIFE to avoid breaking useCallback\r\n      void (async () => {\r\n        if (currentTeacherID) {\r\n          try {\r\n            const teacherConflictResult = await checkTeacherConflictAction({\r\n              teacherId: parseInt(currentTeacherID),\r\n              timeslotId: timeslotID,\r\n            });\r\n\r\n            if (\r\n              teacherConflictResult.success &&\r\n              teacherConflictResult.data?.hasConflict\r\n            ) {\r\n              const conflict = teacherConflictResult.data;\r\n              enqueueSnackbar(\r\n                `โ ๏ธ ${conflict.teacherName} เธชเธญเธเธงเธดเธเธฒ \"${conflict.subjectName}\" เธเธฑเนเธ ${conflict.gradeName} เนเธเธเนเธงเธเน€เธงเธฅเธฒเธเธตเนเนเธฅเนเธง`,\r\n                { variant: \"error\" },\r\n              );\r\n              return;\r\n            }\r\n\r\n            // Step 5: If no conflict, open room selection dialog\r\n            setSelectedTimeslotForRoom(timeslotID);\r\n            setRoomDialogOpen(true);\r\n          } catch (error) {\r\n            log.logError(error, { action: \"teacherConflictCheck\" });\r\n            enqueueSnackbar(\"โ ๏ธ เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธ•เธฃเธงเธเธชเธญเธเธเนเธญเธเธฑเธ”เนเธขเนเธเธเธญเธเธเธฃเธนเนเธ”เน\", {\r\n              variant: \"warning\",\r\n            });\r\n            // Continue to allow placement despite check failure\r\n            setSelectedTimeslotForRoom(timeslotID);\r\n            setRoomDialogOpen(true);\r\n          }\r\n        } else {\r\n          // No teacher selected, proceed to room selection\r\n          setSelectedTimeslotForRoom(timeslotID);\r\n          setRoomDialogOpen(true);\r\n        }\r\n      })();\r\n    },\r\n    [\r\n      activeSubject,\r\n      breakSlotIDs,\r\n      conflictValidation.lockedTimeslots,\r\n      conflictValidation.conflictsByTimeslot,\r\n      currentTeacherID,\r\n    ],\r\n  );\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Room Selection\r\n  // ============================================================================\r\n  const handleRoomSelect = useCallback(\r\n    async (room: {\r\n      RoomID: number;\r\n      RoomName: string;\r\n      Building: string;\r\n      Floor: string;\r\n    }) => {\r\n      if (!activeSubject || !selectedTimeslotForRoom) {\r\n        enqueueSnackbar(\"โ ๏ธ เธเนเธญเธกเธนเธฅเนเธกเนเธเธฃเธเธ–เนเธงเธ\", { variant: \"warning\" });\r\n        setRoomDialogOpen(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Extract required fields from activeSubject (from teachers_responsibility via getAvailableRespsAction)\r\n        const subjectData = activeSubject as unknown as {\r\n          SubjectCode?: string;\r\n          GradeID?: string;\r\n          RespID?: number;\r\n        };\r\n\r\n        if (\r\n          !subjectData.SubjectCode ||\r\n          !subjectData.GradeID ||\r\n          !subjectData.RespID\r\n        ) {\r\n          enqueueSnackbar(\"โ ๏ธ เธเนเธญเธกเธนเธฅเธฃเธฒเธขเธงเธดเธเธฒเนเธกเนเธเธฃเธเธ–เนเธงเธ\", { variant: \"warning\" });\r\n          setRoomDialogOpen(false);\r\n          return;\r\n        }\r\n\r\n        // Step 1: Check for room conflicts before creating schedule\r\n        const roomConflictResult = await checkRoomConflictAction({\r\n          roomId: room.RoomID,\r\n          timeslotId: selectedTimeslotForRoom,\r\n        });\r\n\r\n        if (roomConflictResult.data?.hasConflict) {\r\n          // Room is occupied - show error and keep dialog open for re-selection\r\n          const conflictData = roomConflictResult.data;\r\n          const message = `โ ๏ธ เธซเนเธญเธ${conflictData.roomName} เธกเธต${conflictData.teacherName} เธชเธญเธเธงเธดเธเธฒ${conflictData.subjectName} เธเธฑเนเธ${conflictData.gradeName} เนเธเธเนเธงเธเน€เธงเธฅเธฒเธเธตเนเนเธฅเนเธง`;\r\n          enqueueSnackbar(message, { variant: \"error\" });\r\n          return; // Don't close dialog - allow user to select different room\r\n        }\r\n\r\n        // Create schedule entry via Server Action (ClassID is auto-generated by database)\r\n        const result = await createClassScheduleAction({\r\n          TimeslotID: selectedTimeslotForRoom,\r\n          SubjectCode: subjectData.SubjectCode,\r\n          GradeID: subjectData.GradeID,\r\n          RoomID: room.RoomID,\r\n          IsLocked: false,\r\n          ResponsibilityIDs: [subjectData.RespID],\r\n        });\r\n\r\n        if (result) {\r\n          // Revalidate caches to reflect new schedule\r\n          await Promise.all([mutateTeacherSchedule(), mutateConflicts()]);\r\n\r\n          // Push to history for undo/redo\r\n          pushHistory(scheduledSubjects);\r\n\r\n          // Mark as dirty for unsaved changes warning\r\n          setIsDirty(true);\r\n\r\n          enqueueSnackbar(\"โ… เธเธฑเธ”เธ•เธฒเธฃเธฒเธเธชเธญเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n        }\r\n      } catch (error) {\r\n        log.logError(error, { action: \"scheduleCreation\" });\r\n        const errorMsg =\r\n          error instanceof Error ? error.message : \"เนเธกเนเธ—เธฃเธฒเธเธชเธฒเน€เธซเธ•เธธ\";\r\n        enqueueSnackbar(`โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”: ${errorMsg}`, { variant: \"error\" });\r\n      } finally {\r\n        // Always cleanup dialog state\r\n        setRoomDialogOpen(false);\r\n        setSelectedTimeslotForRoom(null);\r\n      }\r\n    },\r\n    [\r\n      activeSubject,\r\n      selectedTimeslotForRoom,\r\n      mutateTeacherSchedule,\r\n      mutateConflicts,\r\n      pushHistory,\r\n      scheduledSubjects,\r\n    ],\r\n  );\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Clear All\r\n  // ============================================================================\r\n  const handleClearAll = useCallback(() => {\r\n    void (async () => {\r\n      if (!currentTeacherID || !teacherSchedule) {\r\n        enqueueSnackbar(\"เนเธกเนเธเธเธเนเธญเธกเธนเธฅเธ•เธฒเธฃเธฒเธเธชเธญเธ\", { variant: \"warning\" });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Push history before modification\r\n        pushHistory(scheduledSubjects);\r\n\r\n        // Clear all schedules\r\n        const result = await syncTeacherScheduleAction({\r\n          TeacherID: parseInt(currentTeacherID),\r\n          AcademicYear: parseInt(academicYear),\r\n          Semester: semester,\r\n          Schedule: [],\r\n        });\r\n\r\n        if (result.success) {\r\n          await mutateTeacherSchedule();\r\n          await mutateConflicts();\r\n          setIsDirty(false);\r\n          enqueueSnackbar(\"โ… เธฅเนเธฒเธเธ•เธฒเธฃเธฒเธเธ—เธฑเนเธเธซเธกเธ”เธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n        } else {\r\n          enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธฅเนเธฒเธเธ•เธฒเธฃเธฒเธ\", {\r\n            variant: \"error\",\r\n          });\r\n        }\r\n      } catch (error) {\r\n        log.logError(error, { action: \"clearAll\" });\r\n        enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธฅเนเธฒเธเธ•เธฒเธฃเธฒเธ\", {\r\n          variant: \"error\",\r\n        });\r\n      }\r\n    })();\r\n  }, [\r\n    currentTeacherID,\r\n    teacherSchedule,\r\n    academicYear,\r\n    semester,\r\n    scheduledSubjects,\r\n    pushHistory,\r\n    mutateTeacherSchedule,\r\n    mutateConflicts,\r\n  ]);\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Clear Day (Phase 2)\r\n  // ============================================================================\r\n  const handleClearDay = useCallback(\r\n    (day: number) => {\r\n      void (async () => {\r\n        if (\r\n          !currentTeacherID ||\r\n          !teacherSchedule ||\r\n          !Array.isArray(teacherSchedule) ||\r\n          !timeslots\r\n        ) {\r\n          enqueueSnackbar(\"เนเธกเนเธเธเธเนเธญเธกเธนเธฅเธ•เธฒเธฃเธฒเธเธชเธญเธ\", { variant: \"warning\" });\r\n          return;\r\n        }\r\n\r\n        try {\r\n          // Push history before modification\r\n          pushHistory(scheduledSubjects);\r\n\r\n          // Map day number to enum (1=MON, 2=TUE, 3=WED, 4=THU, 5=FRI)\r\n          const dayMap = [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\"];\r\n          const dayOfWeek = dayMap[day - 1];\r\n\r\n          if (!dayOfWeek) {\r\n            enqueueSnackbar(\"เธงเธฑเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธกเนเธ–เธนเธเธ•เนเธญเธ\", { variant: \"error\" });\r\n            return;\r\n          }\r\n\r\n          // Get timeslot IDs for this day\r\n          const dayTimeslotIDs = new Set(\r\n            timeslots\r\n              .filter((ts) => {\r\n                const slot = ts as { DayOfWeek?: string };\r\n                return slot.DayOfWeek === dayOfWeek;\r\n              })\r\n              .map((ts) => {\r\n                const slot = ts as { TimeslotID?: string };\r\n                return slot.TimeslotID;\r\n              }),\r\n          );\r\n\r\n          // Filter out schedules for this day\r\n          const remainingSchedules = teacherSchedule.filter((schedule) => {\r\n            const sched = schedule as { TimeslotID?: string };\r\n            return !dayTimeslotIDs.has(sched.TimeslotID || \"\");\r\n          });\r\n\r\n          // Sync updated schedule\r\n          const scheduleData = remainingSchedules.map((s) => {\r\n            const sched = s as {\r\n              ClassID: string;\r\n              TimeslotID: string;\r\n              SubjectCode: string;\r\n              GradeID: string;\r\n              RoomID?: number;\r\n              RespID?: number;\r\n            };\r\n            return {\r\n              ClassID: sched.ClassID,\r\n              TimeslotID: sched.TimeslotID,\r\n              SubjectCode: sched.SubjectCode,\r\n              GradeID: sched.GradeID,\r\n              RoomID: sched.RoomID || null,\r\n              RespID: sched.RespID || null,\r\n            };\r\n          });\r\n\r\n          const result = await syncTeacherScheduleAction({\r\n            TeacherID: parseInt(currentTeacherID),\r\n            AcademicYear: parseInt(academicYear),\r\n            Semester: semester,\r\n            Schedule: scheduleData,\r\n          });\r\n\r\n          if (result.success) {\r\n            await mutateTeacherSchedule();\r\n            await mutateConflicts();\r\n            setIsDirty(false);\r\n            enqueueSnackbar(`โ… เธฅเนเธฒเธเธ•เธฒเธฃเธฒเธเธงเธฑเธ${dayMap[day - 1]}เธชเธณเน€เธฃเนเธ`, {\r\n              variant: \"success\",\r\n            });\r\n          } else {\r\n            enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธฅเนเธฒเธเธ•เธฒเธฃเธฒเธ\", {\r\n              variant: \"error\",\r\n            });\r\n          }\r\n        } catch (error) {\r\n          log.logError(error, { action: \"clearDay\" });\r\n          enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธฅเนเธฒเธเธ•เธฒเธฃเธฒเธ\", {\r\n            variant: \"error\",\r\n          });\r\n        }\r\n      })();\r\n    },\r\n    [\r\n      currentTeacherID,\r\n      teacherSchedule,\r\n      timeslots,\r\n      academicYear,\r\n      semester,\r\n      scheduledSubjects,\r\n      pushHistory,\r\n      mutateTeacherSchedule,\r\n      mutateConflicts,\r\n    ],\r\n  );\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Copy Day (Phase 2)\r\n  // ============================================================================\r\n  const handleCopyDay = useCallback(\r\n    (sourceDay: number, targetDay: number) => {\r\n      void (async () => {\r\n        if (\r\n          !currentTeacherID ||\r\n          !teacherSchedule ||\r\n          !Array.isArray(teacherSchedule) ||\r\n          !timeslots\r\n        ) {\r\n          enqueueSnackbar(\"เนเธกเนเธเธเธเนเธญเธกเธนเธฅเธ•เธฒเธฃเธฒเธเธชเธญเธ\", { variant: \"warning\" });\r\n          return;\r\n        }\r\n\r\n        if (sourceDay === targetDay) {\r\n          enqueueSnackbar(\"เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธเธฑเธ”เธฅเธญเธเนเธเธขเธฑเธเธงเธฑเธเน€เธ”เธตเธขเธงเธเธฑเธเนเธ”เน\", {\r\n            variant: \"warning\",\r\n          });\r\n          return;\r\n        }\r\n\r\n        try {\r\n          // Push history before modification\r\n          pushHistory(scheduledSubjects);\r\n\r\n          // Map day number to enum\r\n          const dayMap = [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\"];\r\n          const sourceDayOfWeek = dayMap[sourceDay - 1];\r\n          const targetDayOfWeek = dayMap[targetDay - 1];\r\n\r\n          if (!sourceDayOfWeek || !targetDayOfWeek) {\r\n            enqueueSnackbar(\"เธงเธฑเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธกเนเธ–เธนเธเธ•เนเธญเธ\", { variant: \"error\" });\r\n            return;\r\n          }\r\n\r\n          // Build timeslot mapping (source period -> target period)\r\n          const sourceTimeslots = timeslots.filter((ts) => {\r\n            const slot = ts as { DayOfWeek?: string };\r\n            return slot.DayOfWeek === sourceDayOfWeek;\r\n          });\r\n\r\n          const targetTimeslots = timeslots.filter((ts) => {\r\n            const slot = ts as { DayOfWeek?: string };\r\n            return slot.DayOfWeek === targetDayOfWeek;\r\n          });\r\n\r\n          // Sort by StartTime to align periods\r\n          const sortedSource = [...sourceTimeslots].sort((a, b) => {\r\n            const timeA = (a as { StartTime?: Date }).StartTime || new Date();\r\n            const timeB = (b as { StartTime?: Date }).StartTime || new Date();\r\n            return timeA.getTime() - timeB.getTime();\r\n          });\r\n\r\n          const sortedTarget = [...targetTimeslots].sort((a, b) => {\r\n            const timeA = (a as { StartTime?: Date }).StartTime || new Date();\r\n            const timeB = (b as { StartTime?: Date }).StartTime || new Date();\r\n            return timeA.getTime() - timeB.getTime();\r\n          });\r\n\r\n          // Create timeslot ID mapping\r\n          const timeslotMap = new Map<string, string>();\r\n          sortedSource.forEach((sourceSlot, idx) => {\r\n            const sourceID = (sourceSlot as { TimeslotID?: string }).TimeslotID;\r\n            const targetSlot = sortedTarget[idx];\r\n            const targetID = targetSlot\r\n              ? (targetSlot as { TimeslotID?: string }).TimeslotID\r\n              : null;\r\n            if (sourceID && targetID) {\r\n              timeslotMap.set(sourceID, targetID);\r\n            }\r\n          });\r\n\r\n          // Get target day timeslot IDs for clearing\r\n          const targetTimeslotIDs = new Set(\r\n            sortedTarget.map(\r\n              (ts) => (ts as { TimeslotID?: string }).TimeslotID,\r\n            ),\r\n          );\r\n\r\n          // Remove existing schedules from target day\r\n          const nonTargetSchedules = teacherSchedule.filter((schedule) => {\r\n            const sched = schedule as { TimeslotID?: string };\r\n            return !targetTimeslotIDs.has(sched.TimeslotID || \"\");\r\n          });\r\n\r\n          // Copy schedules from source day to target day\r\n          const copiedSchedules = teacherSchedule\r\n            .filter((schedule) => {\r\n              const sched = schedule as { TimeslotID?: string };\r\n              return timeslotMap.has(sched.TimeslotID || \"\");\r\n            })\r\n            .map((schedule) => {\r\n              const sched = schedule as {\r\n                ClassID: string;\r\n                TimeslotID: string;\r\n                SubjectCode: string;\r\n                GradeID: string;\r\n                RoomID?: number;\r\n                RespID?: number;\r\n              };\r\n              const newTimeslotID =\r\n                timeslotMap.get(sched.TimeslotID) || sched.TimeslotID;\r\n              const newClassID = `${sched.GradeID}-${newTimeslotID}`;\r\n\r\n              return {\r\n                ClassID: newClassID,\r\n                TimeslotID: newTimeslotID,\r\n                SubjectCode: sched.SubjectCode,\r\n                GradeID: sched.GradeID,\r\n                RoomID: sched.RoomID || null,\r\n                RespID: sched.RespID || null,\r\n              };\r\n            });\r\n\r\n          // Combine non-target schedules with copied schedules\r\n          const newScheduleData = [\r\n            ...nonTargetSchedules.map((s) => {\r\n              const sched = s as {\r\n                ClassID: string;\r\n                TimeslotID: string;\r\n                SubjectCode: string;\r\n                GradeID: string;\r\n                RoomID?: number;\r\n                RespID?: number;\r\n              };\r\n              return {\r\n                ClassID: sched.ClassID,\r\n                TimeslotID: sched.TimeslotID,\r\n                SubjectCode: sched.SubjectCode,\r\n                GradeID: sched.GradeID,\r\n                RoomID: sched.RoomID || null,\r\n                RespID: sched.RespID || null,\r\n              };\r\n            }),\r\n            ...copiedSchedules,\r\n          ];\r\n\r\n          // Sync updated schedule\r\n          const result = await syncTeacherScheduleAction({\r\n            TeacherID: parseInt(currentTeacherID),\r\n            AcademicYear: parseInt(academicYear),\r\n            Semester: semester,\r\n            Schedule: newScheduleData,\r\n          });\r\n\r\n          if (result.success) {\r\n            await mutateTeacherSchedule();\r\n            await mutateConflicts();\r\n            setIsDirty(false);\r\n            enqueueSnackbar(\r\n              `โ… เธเธฑเธ”เธฅเธญเธเธ•เธฒเธฃเธฒเธเธเธฒเธ${dayMap[sourceDay - 1]}เนเธ${dayMap[targetDay - 1]}เธชเธณเน€เธฃเนเธ`,\r\n              { variant: \"success\" },\r\n            );\r\n          } else {\r\n            enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธเธฑเธ”เธฅเธญเธเธ•เธฒเธฃเธฒเธ\", {\r\n              variant: \"error\",\r\n            });\r\n          }\r\n        } catch (error) {\r\n          log.logError(error, { action: \"copyDay\" });\r\n          enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธเธฑเธ”เธฅเธญเธเธ•เธฒเธฃเธฒเธ\", {\r\n            variant: \"error\",\r\n          });\r\n        }\r\n      })();\r\n    },\r\n    [\r\n      currentTeacherID,\r\n      teacherSchedule,\r\n      timeslots,\r\n      academicYear,\r\n      semester,\r\n      scheduledSubjects,\r\n      pushHistory,\r\n      mutateTeacherSchedule,\r\n      mutateConflicts,\r\n    ],\r\n  );\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Undo (Phase 2)\r\n  // ============================================================================\r\n  const handleUndo = useCallback(() => {\r\n    void (async () => {\r\n      if (!canUndo()) {\r\n        enqueueSnackbar(\"เนเธกเนเธกเธตเธเธฃเธฐเธงเธฑเธ•เธดเธ—เธตเนเธเธฐเธขเนเธญเธเธเธฅเธฑเธ\", { variant: \"info\" });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        undo();\r\n        await mutateTeacherSchedule();\r\n        await mutateConflicts();\r\n        setIsDirty(true);\r\n        enqueueSnackbar(\"โฉ๏ธ เธขเนเธญเธเธเธฅเธฑเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      } catch (error) {\r\n        log.logError(error, { action: \"undo\" });\r\n        enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธขเนเธญเธเธเธฅเธฑเธ\", { variant: \"error\" });\r\n      }\r\n    })();\r\n  }, [canUndo, undo, mutateTeacherSchedule, mutateConflicts]);\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Redo (Phase 2)\r\n  // ============================================================================\r\n  const handleRedo = useCallback(() => {\r\n    void (async () => {\r\n      if (!canRedo()) {\r\n        enqueueSnackbar(\"เนเธกเนเธกเธตเธเธฃเธฐเธงเธฑเธ•เธดเธ—เธตเนเธเธฐเธ—เธณเธเนเธณ\", { variant: \"info\" });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        redo();\r\n        await mutateTeacherSchedule();\r\n        await mutateConflicts();\r\n        setIsDirty(true);\r\n        enqueueSnackbar(\"โช๏ธ เธ—เธณเธเนเธณเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      } catch (error) {\r\n        log.logError(error, { action: \"redo\" });\r\n        enqueueSnackbar(\"โ เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธ—เธณเธเนเธณ\", { variant: \"error\" });\r\n      }\r\n    })();\r\n  }, [canRedo, redo, mutateTeacherSchedule, mutateConflicts]);\r\n\r\n  // ============================================================================\r\n  // HANDLERS - Auto Arrange (Phase 2)\r\n  // ============================================================================\r\n  const handleAutoArrange = useCallback(() => {\r\n    // TODO: Implement auto arrange algorithm or show \"coming soon\" dialog\r\n    // This would require complex constraint satisfaction logic\r\n    enqueueSnackbar(\"๐ง เธเธตเน€เธเธญเธฃเนเธเธฑเธ”เธ•เธฒเธฃเธฒเธเธญเธฑเธ•เนเธเธกเธฑเธ•เธดเธเธณเธฅเธฑเธเธเธฑเธ’เธเธฒ\", {\r\n      variant: \"info\",\r\n    });\r\n  }, []);\r\n\r\n  // ============================================================================\r\n  // COMPUTED - Progress Data (Phase 2)\r\n  // ============================================================================\r\n  const overallProgress = useMemo(() => {\r\n    if (!timeslots || !teacherSchedule || !Array.isArray(teacherSchedule)) {\r\n      return {\r\n        totalSlots: 0,\r\n        filledSlots: 0,\r\n        conflictSlots: 0,\r\n      };\r\n    }\r\n\r\n    return {\r\n      totalSlots: timeslots.length,\r\n      filledSlots: teacherSchedule.length,\r\n      conflictSlots: conflicts?.length || 0,\r\n    };\r\n  }, [timeslots, teacherSchedule, conflicts]);\r\n\r\n  // Multi-teacher progress calculation - fetch all teachers' schedules\r\n  const { data: allTeacherSchedules } = useSWR(\r\n    allTeachers && timeslots\r\n      ? `all-teacher-schedules-${academicYear}-${semester}`\r\n      : null,\r\n    async () => {\r\n      if (!allTeachers || !timeslots) return [];\r\n\r\n      // Fetch schedules for all teachers\r\n      const schedulePromises = (allTeachers as unknown[]).map(async (t) => {\r\n        const teacher = t as {\r\n          TeacherID?: number;\r\n          Firstname?: string;\r\n          Lastname?: string;\r\n        };\r\n        const teacherId = teacher.TeacherID;\r\n        if (!teacherId) return null;\r\n\r\n        try {\r\n          const result = await getTeacherScheduleAction({\r\n            TeacherID: teacherId,\r\n          });\r\n          if (!result || !result.success || !result.data) return null;\r\n\r\n          return {\r\n            teacherId,\r\n            teacherName: `${teacher.Firstname || \"\"} ${teacher.Lastname || \"\"}`,\r\n            schedule: Array.isArray(result.data) ? result.data : [],\r\n          };\r\n        } catch (error) {\r\n          log.logError(error, { action: \"fetchTeacherSchedule\", teacherId });\r\n          return null;\r\n        }\r\n      });\r\n\r\n      const results = await Promise.all(schedulePromises);\r\n      return results.filter(Boolean);\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n      revalidateOnReconnect: false,\r\n    },\r\n  );\r\n\r\n  const teacherProgressData = useMemo(() => {\r\n    if (!allTeacherSchedules || !timeslots || !allTeachers) {\r\n      return [];\r\n    }\r\n\r\n    const totalSlots = timeslots.length;\r\n\r\n    // Map all teachers to progress items\r\n    return (allTeacherSchedules as unknown[])\r\n      .map((item) => {\r\n        const data = item as {\r\n          teacherId?: number;\r\n          teacherName?: string;\r\n          schedule?: unknown[];\r\n        };\r\n        if (!data.teacherId) return null;\r\n\r\n        const completedSlots = data.schedule?.length || 0;\r\n\r\n        // Get conflicts for this teacher (if they match current teacher)\r\n        const conflictSlots =\r\n          currentTeacherID && parseInt(currentTeacherID) === data.teacherId\r\n            ? conflicts?.length || 0\r\n            : 0; // We don't have conflict data for non-selected teachers yet\r\n\r\n        return {\r\n          id: String(data.teacherId),\r\n          name: data.teacherName || \"\",\r\n          total: totalSlots,\r\n          completed: completedSlots,\r\n          conflicts: conflictSlots,\r\n        };\r\n      })\r\n      .filter((item): item is NonNullable<typeof item> => item !== null);\r\n  }, [\r\n    allTeacherSchedules,\r\n    timeslots,\r\n    allTeachers,\r\n    currentTeacherID,\r\n    conflicts,\r\n  ]);\r\n\r\n  const classProgressData = useMemo(() => {\r\n    if (!teacherSchedule || !Array.isArray(teacherSchedule) || !gradeLevels) {\r\n      return [];\r\n    }\r\n\r\n    // Group schedules by GradeID\r\n    const gradeScheduleMap = new Map<string, number>();\r\n    teacherSchedule.forEach((schedule) => {\r\n      const sched = schedule as { GradeID?: string };\r\n      const gradeId = sched.GradeID;\r\n      if (gradeId) {\r\n        gradeScheduleMap.set(gradeId, (gradeScheduleMap.get(gradeId) || 0) + 1);\r\n      }\r\n    });\r\n\r\n    // Get conflicts by class\r\n    const gradeConflictMap = new Map<string, number>();\r\n    if (conflicts && Array.isArray(conflicts)) {\r\n      conflicts.forEach((conflict) => {\r\n        const conf = conflict as { GradeID?: string };\r\n        const gradeId = conf.GradeID;\r\n        if (gradeId) {\r\n          gradeConflictMap.set(\r\n            gradeId,\r\n            (gradeConflictMap.get(gradeId) || 0) + 1,\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // Calculate expected periods per class (from config)\r\n    const periodsPerWeek = timetableConfig.totalPeriodsPerWeek || 35;\r\n\r\n    // Map to ProgressItem format\r\n    return Array.from(gradeScheduleMap.entries()).map(\r\n      ([gradeId, completed]) => {\r\n        const grade = (gradeLevels as unknown[]).find((g) => {\r\n          const level = g as { GradeID?: string };\r\n          return level.GradeID === gradeId;\r\n        });\r\n        const gradeData = grade as { Year?: number; Number?: number };\r\n\r\n        return {\r\n          id: gradeId,\r\n          name: `เธก.${gradeData.Year || \"?\"}/${gradeData.Number || \"?\"}`,\r\n          total: periodsPerWeek,\r\n          completed,\r\n          conflicts: gradeConflictMap.get(gradeId) || 0,\r\n        };\r\n      },\r\n    );\r\n  }, [teacherSchedule, gradeLevels, conflicts, timetableConfig]);\r\n\r\n  // ============================================================================\r\n  // LOADING STATE\r\n  // ============================================================================\r\n  const isLoading = isLoadingTeachers || isLoadingTimeslots;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Container maxWidth=\"xl\" sx={{ py: 4 }}>\r\n        <TimetableGridSkeleton />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // ============================================================================\r\n  // ERROR STATE\r\n  // ============================================================================\r\n  if (!allTeachers || !timeslots) {\r\n    return (\r\n      <Container maxWidth=\"xl\" sx={{ py: 4 }}>\r\n        <NetworkErrorEmptyState />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // ============================================================================\r\n  // RENDER\r\n  // ============================================================================\r\n  return (\r\n    <DndContext\r\n      sensors={sensors}\r\n      collisionDetection={closestCenter}\r\n      onDragStart={handleDragStart}\r\n      onDragEnd={handleDragEnd}\r\n    >\r\n      <Container maxWidth=\"xl\" sx={{ py: 4 }}>\r\n        <Stack spacing={3}>\r\n          {/* Header */}\r\n          <ArrangementHeader\r\n            teacherData={teacherData}\r\n            availableTeachers={transformedTeachers}\r\n            onTeacherChange={handleTeacherChange}\r\n            onSave={() => void handleSave()}\r\n            isSaving={isSaving}\r\n            isDirty={isDirty}\r\n            semester={semester}\r\n            academicYear={academicYear}\r\n          />\r\n\r\n          {/* Tabs */}\r\n          <GradeLevelTabs\r\n            currentTab={currentTab}\r\n            onTabChange={handleTabChange}\r\n            gradeCounts={gradeCounts}\r\n          />\r\n\r\n          {/* Conflicts Alert */}\r\n          {currentTab === \"teacher\" && conflicts && conflicts.length > 0 && (\r\n            <ConflictAlert\r\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n              conflicts={conflicts as any}\r\n              onClose={() => void mutateConflicts()}\r\n            />\r\n          )}\r\n\r\n          {/* Teacher Tab Content */}\r\n          {currentTab === \"teacher\" && (\r\n            <>\r\n              {!currentTeacherID ? (\r\n                <Alert severity=\"info\">\r\n                  <AlertTitle>เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธเธฃเธนเธเธนเนเธชเธญเธ</AlertTitle>\r\n                  เน€เธฅเธทเธญเธเธเธฃเธนเธเธฒเธเธฃเธฒเธขเธเธฒเธฃเธ”เนเธฒเธเธเธเน€เธเธทเนเธญเน€เธฃเธดเนเธกเธเธฑเธ”เธ•เธฒเธฃเธฒเธเธชเธญเธ\r\n                </Alert>\r\n              ) : (\r\n                <Stack direction={{ xs: \"column\", lg: \"row\" }} spacing={3}>\r\n                  {/* Subject Palette - Phase 2 Enhanced */}\r\n                  <Box\r\n                    sx={{ width: { xs: \"100%\", lg: 300 }, flexShrink: 0 }}\r\n                    data-testid=\"subject-palette\"\r\n                  >\r\n                    <SearchableSubjectPalette\r\n                      respData={availableSubjects || []}\r\n                      dropOutOfZone={() => {\r\n                        // Handle subject dropped outside grid - no action needed\r\n                      }}\r\n                      clickOrDragToSelectSubject={(subject) => {\r\n                        setActiveSubject(subject);\r\n                      }}\r\n                      storeSelectedSubject={activeSubject || {}}\r\n                      teacher={\r\n                        teacherData ||\r\n                        ({\r\n                          // Default empty teacher if null\r\n                          TeacherID: 0,\r\n                          Prefix: \"\",\r\n                          Firstname: \"\",\r\n                          Lastname: \"\",\r\n                          Department: \"\",\r\n                          Email: \"\",\r\n                          Role: \"teacher\",\r\n                        } as teacher)\r\n                      }\r\n                    />\r\n                  </Box>\r\n\r\n                  {/* Main Content */}\r\n                  <Box sx={{ flex: 1 }}>\r\n                    <Stack spacing={2}>\r\n                      {/* Action Toolbar - Phase 2 Enhanced */}\r\n                      <ScheduleActionToolbar\r\n                        onClearDay={handleClearDay}\r\n                        onClearAll={handleClearAll}\r\n                        onCopyDay={handleCopyDay}\r\n                        onUndo={handleUndo}\r\n                        onRedo={handleRedo}\r\n                        onAutoArrange={handleAutoArrange}\r\n                        canUndo={canUndo()}\r\n                        canRedo={canRedo()}\r\n                        hasChanges={isDirty}\r\n                        totalSlots={timeslots?.length || 0}\r\n                        filledSlots={scheduledSubjects.length}\r\n                      />\r\n\r\n                      {/* Progress Indicators - Phase 2 Enhanced */}\r\n                      <ScheduleProgressIndicators\r\n                        overallProgress={overallProgress}\r\n                        teacherProgress={teacherProgressData}\r\n                        classProgress={classProgressData}\r\n                      />\r\n\r\n                      {/* Timetable Grid */}\r\n                      {isLoadingSchedule ? (\r\n                        <TimetableGridSkeleton />\r\n                      ) : (\r\n                        <TimetableGrid\r\n                          timeslots={timeslots || []}\r\n                          periodsPerDay={timetableConfig.periodsPerDay}\r\n                          breakSlots={timetableConfig.breakSlots}\r\n                          getConflicts={(timeslotID) => {\r\n                            // Use conflict validation hook for real-time checks\r\n                            const conflictInfo =\r\n                              conflictValidation.conflictsByTimeslot.get(\r\n                                timeslotID,\r\n                              );\r\n                            if (conflictInfo && conflictInfo.type !== \"none\") {\r\n                              return {\r\n                                hasConflict: true,\r\n                                message: conflictInfo.message,\r\n                                severity: conflictInfo.severity,\r\n                              };\r\n                            }\r\n\r\n                            // Fallback to API conflicts if hook doesn't have info\r\n                            const apiConflict = conflicts?.find(\r\n                              (c: unknown) => {\r\n                                const conflictData = c as {\r\n                                  TimeslotID?: string;\r\n                                  message?: string;\r\n                                };\r\n                                return conflictData.TimeslotID === timeslotID;\r\n                              },\r\n                            );\r\n                            const conflictData = apiConflict as\r\n                              | { message?: string }\r\n                              | undefined;\r\n                            return {\r\n                              hasConflict: !!apiConflict,\r\n                              message: conflictData?.message,\r\n                              severity: apiConflict\r\n                                ? (\"error\" as const)\r\n                                : undefined,\r\n                            };\r\n                          }}\r\n                          lockedTimeslots={conflictValidation.lockedTimeslots}\r\n                          selectedTimeslotID={selectedTimeslotForRoom}\r\n                        />\r\n                      )}\r\n                    </Stack>\r\n                  </Box>\r\n                </Stack>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* Grade Level Tab Content */}\r\n          {currentTab !== \"teacher\" && (\r\n            <GradeClassView\r\n              gradeLevel={selectedGradeLevel || 7}\r\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n              classes={gradeClassData as any}\r\n              isLoading={isLoadingGradeSchedules}\r\n            />\r\n          )}\r\n        </Stack>\r\n\r\n        {/* Room Selection Dialog */}\r\n        <RoomSelectionDialog\r\n          open={roomDialogOpen}\r\n          rooms={(availableRooms as unknown as room[]) || []}\r\n          subjectName={activeSubject?.subjectName || \"\"}\r\n          timeslotLabel={selectedTimeslotForRoom || \"\"}\r\n          onSelect={handleRoomSelect}\r\n          onCancel={() => {\r\n            setRoomDialogOpen(false);\r\n            setSelectedTimeslotForRoom(null);\r\n          }}\r\n          occupiedRoomIDs={occupiedRoomIDs || []}\r\n        />\r\n\r\n        {/* Drag Overlay */}\r\n        <DragOverlay>\r\n          {activeSubject && (\r\n            <Paper\r\n              elevation={8}\r\n              sx={{\r\n                p: 2,\r\n                bgcolor: \"primary.main\",\r\n                color: \"primary.contrastText\",\r\n                minWidth: 200,\r\n                cursor: \"grabbing\",\r\n              }}\r\n            >\r\n              {activeSubject.subjectName}\r\n            </Paper>\r\n          )}\r\n        </DragOverlay>\r\n      </Container>\r\n    </DndContext>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\student-arrange\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":3,"column":14,"nodeType":"TSTypeLiteral","messageId":"noEmptyObject","endLine":3,"endColumn":16,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[43,45],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[43,45],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'props' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\n\r\ntype Props = {};\r\n\r\nconst StudentArrange = (props: Props) => {\r\n  return <div>page</div>;\r\n};\r\n\r\nexport default StudentArrange;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\teacher-arrange\\components\\LockedScheduleList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\teacher-arrange\\hooks\\useTeacherSchedule.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unnecessary-type-assertion","severity":2,"message":"This assertion is unnecessary since it does not change the type of the expression.","line":203,"column":14,"nodeType":"TSAsExpression","messageId":"unnecessaryAssertion","endLine":203,"endColumn":39,"fix":{"range":[6153,6167],"text":""},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\teacher-arrange\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\arrange\\teacher-arrange\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EnrichedClassSchedule' is defined but never used.","line":130,"column":6,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TeacherInfo' is defined but never used.","line":140,"column":6,"nodeType":null,"messageId":"unusedVar","endLine":140,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'actions'. Either include it or remove the dependency array.","line":574,"column":6,"nodeType":"ArrayExpression","endLine":582,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [storeSelectedSubject, changeTimeSlotSubject, checkConflictData.isValidating, checkConflictData.data, currentTeacherID, actions]","fix":{"range":[19908,20226],"text":"[storeSelectedSubject, changeTimeSlotSubject, checkConflictData.isValidating, checkConflictData.data, currentTeacherID, actions]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'currentTeacherID'. Either include it or remove the dependency array.","line":822,"column":6,"nodeType":"ArrayExpression","endLine":822,"endColumn":53,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAllClassData.data, timeSlotData, actions, currentTeacherID]","fix":{"range":[28768,28815],"text":"[fetchAllClassData.data, timeSlotData, actions, currentTeacherID]"}}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":847,"column":9,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":847,"endColumn":36,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[29667,29667],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[29667,29667],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'clickOrDragToChangeTimeSlot' and 'clickOrDragToSelectSubject'. Either include them or remove the dependency array.","line":977,"column":5,"nodeType":"ArrayExpression","endLine":977,"endColumn":77,"suggestions":[{"desc":"Update the dependencies array to be: [storeSelectedSubject, subjectData, clickOrDragToSelectSubject, timeSlotData.AllData, changeTimeSlotSubject, clickOrDragToChangeTimeSlot]","fix":{"range":[33960,34032],"text":"[storeSelectedSubject, subjectData, clickOrDragToSelectSubject, timeSlotData.AllData, changeTimeSlotSubject, clickOrDragToChangeTimeSlot]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1008,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1008,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35053,35056],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35053,35056],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1009,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1009,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35102,35105],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35102,35105],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1012,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1012,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35231,35234],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35231,35234],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1013,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1013,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35281,35284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35281,35284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'addRoomModal', 'clickOrDragToChangeTimeSlot', and 'clickOrDragToSelectSubject'. Either include them or remove the dependency array.","line":1042,"column":5,"nodeType":"ArrayExpression","endLine":1048,"endColumn":6,"suggestions":[{"desc":"Update the dependencies array to be: [addRoomModal, changeTimeSlotSubject, clickOrDragToChangeTimeSlot, clickOrDragToSelectSubject, storeSelectedSubject, subjectData, timeslotIDtoChange.source]","fix":{"range":[36359,36494],"text":"[addRoomModal, changeTimeSlotSubject, clickOrDragToChangeTimeSlot, clickOrDragToSelectSubject, storeSelectedSubject, subjectData, timeslotIDtoChange.source]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'displayErrorChangeSubject'. Either include it or remove the dependency array.","line":1274,"column":5,"nodeType":"ArrayExpression","endLine":1274,"endColumn":66,"suggestions":[{"desc":"Update the dependencies array to be: [storeSelectedSubject, changeTimeSlotSubject, displayErrorChangeSubject, checkBreakTime]","fix":{"range":[44766,44827],"text":"[storeSelectedSubject, changeTimeSlotSubject, displayErrorChangeSubject, checkBreakTime]"}}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'actions'. Either include it or remove the dependency array.","line":408,"column":6,"nodeType":"ArrayExpression","endLine":408,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [actions, searchTeacherID]","fix":{"range":[14051,14068],"text":"[actions, searchTeacherID]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'actions'. Either include it or remove the dependency array.","line":416,"column":6,"nodeType":"ArrayExpression","endLine":416,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [actions, searchTeacherID]","fix":{"range":[14296,14313],"text":"[actions, searchTeacherID]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'actions' and 'currentTeacherID'. Either include them or remove the dependency array.","line":431,"column":6,"nodeType":"ArrayExpression","endLine":431,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [actions, currentTeacherID, fetchResp.data, fetchResp.isValidating]","fix":{"range":[14784,14824],"text":"[actions, currentTeacherID, fetchResp.data, fetchResp.isValidating]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'actions' and 'currentTeacherID'. Either include them or remove the dependency array.","line":439,"column":6,"nodeType":"ArrayExpression","endLine":439,"endColumn":52,"suggestions":[{"desc":"Update the dependencies array to be: [fetchTeacher.isValidating, fetchTeacher.data, currentTeacherID, actions]","fix":{"range":[15089,15135],"text":"[fetchTeacher.isValidating, fetchTeacher.data, currentTeacherID, actions]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentTeacherID' and 'fetchTimeslotData'. Either include them or remove the dependency array.","line":451,"column":6,"nodeType":"ArrayExpression","endLine":451,"endColumn":54,"suggestions":[{"desc":"Update the dependencies array to be: [fetchTimeSlot.isValidating, fetchTimeSlot.data, currentTeacherID, fetchTimeslotData]","fix":{"range":[15409,15457],"text":"[fetchTimeSlot.isValidating, fetchTimeSlot.data, currentTeacherID, fetchTimeslotData]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentTeacherID' and 'fetchClassData'. Either include them or remove the dependency array.","line":463,"column":6,"nodeType":"ArrayExpression","endLine":463,"endColumn":62,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAllClassData.isValidating, fetchAllClassData.data, currentTeacherID, fetchClassData]","fix":{"range":[15733,15789],"text":"[fetchAllClassData.isValidating, fetchAllClassData.data, currentTeacherID, fetchClassData]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'actions' and 'changeSubjectSlot'. Either include them or remove the dependency array.","line":594,"column":6,"nodeType":"ArrayExpression","endLine":594,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [actions, changeSubjectSlot, timeslotIDtoChange.destination]","fix":{"range":[20660,20692],"text":"[actions, changeSubjectSlot, timeslotIDtoChange.destination]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'actions'. Either include it or remove the dependency array.","line":655,"column":6,"nodeType":"ArrayExpression","endLine":655,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [actions, fetchTimeSlot.data]","fix":{"range":[22819,22839],"text":"[actions, fetchTimeSlot.data]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'actions'. Either include it or remove the dependency array.","line":911,"column":5,"nodeType":"ArrayExpression","endLine":911,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [actions, subjectData]","fix":{"range":[31560,31573],"text":"[actions, subjectData]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'actions'. Either include it or remove the dependency array.","line":926,"column":5,"nodeType":"ArrayExpression","endLine":926,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [returnSubject, actions, timeSlotData]","fix":{"range":[32003,32032],"text":"[returnSubject, actions, timeSlotData]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'actions'. Either include it or remove the dependency array.","line":939,"column":5,"nodeType":"ArrayExpression","endLine":939,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [actions, removeSubjectFromSlot]","fix":{"range":[32404,32427],"text":"[actions, removeSubjectFromSlot]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'actions'. Either include it or remove the dependency array.","line":1331,"column":7,"nodeType":"ArrayExpression","endLine":1331,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [actions, timeslotIDtoChange.source]","fix":{"range":[47017,47037],"text":"[actions, timeslotIDtoChange.source]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * TeacherArrangePage - Refactored Version\r\n *\r\n * Week 5.3 Refactoring:\r\n * - Replaced 34+ useState with Zustand store\r\n * - Migrated from react-beautiful-dnd to @dnd-kit\r\n * - Extracted business logic to pure functions\r\n * - Improved performance with memoization\r\n * - Better TypeScript types\r\n *\r\n * Week 8 Migration:\r\n * - Migrated from API routes to Server Actions\r\n * - Using Clean Architecture actions for all data operations\r\n * - Removed deprecated api/fetcher imports\r\n *\r\n * Original: 760 lines, 34+ useState\r\n * Refactored: ~400-500 lines, centralized state\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useParams, useSearchParams } from \"next/navigation\";\r\nimport { useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { enqueueSnackbar, closeSnackbar } from \"notistack\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport { useSemesterSync } from \"@/hooks\";\r\n\r\n// MUI Components\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\n\r\n// Feedback Components\r\nimport {\r\n  TimetableGridSkeleton,\r\n  EmptyState,\r\n  NetworkErrorEmptyState,\r\n} from \"@/components/feedback\";\r\n\r\n// Client Logger\r\nimport { createClientLogger } from \"@/lib/client-logger\";\r\n\r\nconst log = createClientLogger(\"TeacherArrangePage\");\r\n\r\n// Server Actions (Clean Architecture)\r\nimport {\r\n  getTeacherScheduleAction,\r\n  syncTeacherScheduleAction,\r\n} from \"@/features/arrange/application/actions/arrange.actions\";\r\nimport { getConflictsAction } from \"@/features/class/application/actions/class.actions\";\r\nimport { getTeachersAction } from \"@/features/teacher/application/actions/teacher.actions\";\r\nimport { getAvailableRespsAction } from \"@/features/assign/application/actions/assign.actions\";\r\nimport { getTimeslotsByTermAction } from \"@/features/timeslot/application/actions/timeslot.actions\";\r\nimport type { ActionResult } from \"@/shared/lib/action-wrapper\";\r\nimport type { TeacherScheduleWithRelations } from \"@/features/arrange/infrastructure/repositories/arrange.repository\";\r\n\r\n// Zustand Store (Context7-Powered - Phase 4 Migration)\r\nimport { useShallow } from \"zustand/react/shallow\";\r\nimport {\r\n  useTeacherArrangeStore,\r\n  useTeacherArrangeActions,\r\n  useSelectedSubject,\r\n  useSubjectData,\r\n  useScheduledSubjects,\r\n  useTimeslotData,\r\n  useModalState,\r\n  useErrorState,\r\n  useSaveState,\r\n  useCurrentTeacher,\r\n} from \"@/features/schedule-arrangement/presentation/stores/teacher-arrange.store\";\r\nimport type {\r\n  SubjectData,\r\n  SubjectPayload,\r\n  TimeSlotCssClassNameCallback,\r\n  DisplayErrorChangeSubjectCallback,\r\n  RemoveSubjectCallback,\r\n  DayOfWeekDisplay,\r\n  SubjectCategory,\r\n  TimeslotData,\r\n} from \"@/types/schedule.types\";\r\nimport type {\r\n  timeslot,\r\n  class_schedule,\r\n  subject,\r\n  room,\r\n  teacher,\r\n  day_of_week,\r\n} from \"@/prisma/generated/client\";\r\n\r\n// @dnd-kit\r\nimport {\r\n  DndContext,\r\n  DragEndEvent,\r\n  DragStartEvent,\r\n  closestCenter,\r\n  PointerSensor,\r\n  KeyboardSensor,\r\n  useSensor,\r\n  useSensors,\r\n} from \"@dnd-kit/core\";\r\nimport { sortableKeyboardCoordinates } from \"@dnd-kit/sortable\";\r\n\r\n// Local Components (to be refactored separately)\r\nimport TimeSlot from \"../component/TimeSlot\";\r\nimport PageHeader from \"../component/PageHeader\";\r\n// Phase 2: Replace SubjectDragBox with enhanced SearchableSubjectPalette\r\nimport { SearchableSubjectPalette } from \"../_components/SearchableSubjectPalette\";\r\nimport { ScheduleActionToolbar } from \"../_components/ScheduleActionToolbar\";\r\nimport SelectSubjectToTimeslotModal from \"../component/SelectRoomToTimeslotModal\";\r\nimport SelectTeacher from \"../component/SelectTeacher\";\r\n\r\n// Models\r\nimport { dayOfWeekTextColor } from \"@/models/dayofWeek-textColor\";\r\nimport { dayOfWeekColor } from \"@/models/dayofweek-color\";\r\n\r\n// ============================================================================\r\n// TYPE DEFINITIONS - Properly typed interfaces for schedule arrangement\r\n// ============================================================================\r\n\r\n/**\r\n * Class schedule with full relations (subject, room) for display\r\n */\r\ntype ClassScheduleWithRelations = class_schedule & {\r\n  subject: subject;\r\n  room: room | null;\r\n};\r\n\r\n/**\r\n * Enriched class schedule with computed display fields\r\n */\r\ntype EnrichedClassSchedule = ClassScheduleWithRelations & {\r\n  SubjectName: string;\r\n  RoomName: string;\r\n};\r\n\r\n/**\r\n * SWR Data Types (Issue #40)\r\n * Types for useSWR hooks to replace useSWR<any>\r\n */\r\ntype ConflictData = ClassScheduleWithRelations[];\r\ntype TeacherInfo = teacher;\r\n// Use shared TimeslotData interface (includes optional subject)\r\n\r\n/**\r\n * Enriched timeslot with optional subject data\r\n */\r\ntype EnrichedTimeslot = timeslot & {\r\n  subject: SubjectData | null;\r\n};\r\n\r\n/**\r\n * Type: Expanded teacher responsibility from getAvailableRespsAction\r\n * This is the actual structure returned after expandAvailableSlots()\r\n */\r\ntype ExpandedResponsibility = {\r\n  RespID: number;\r\n  SubjectCode: string;\r\n  SubjectName: string;\r\n  GradeID: string;\r\n  TeacherID: number;\r\n  TeachHour: number;\r\n  AcademicYear: number;\r\n  Semester: string;\r\n  itemID: number;\r\n  subject: {\r\n    SubjectCode: string;\r\n    SubjectName: string;\r\n    Credit: string;\r\n    Category: string;\r\n  };\r\n  gradelevel: {\r\n    GradeID: string;\r\n    GradeLevel: string;\r\n    Year: number;\r\n    Number: number;\r\n    ClassSection: string;\r\n  };\r\n  teacher: {\r\n    TeacherID: number;\r\n    Prefix: string;\r\n    Firstname: string;\r\n    Lastname: string;\r\n    Email: string | null;\r\n    Department: string | null;\r\n  };\r\n  class_schedule: unknown[];\r\n};\r\n\r\n/**\r\n * Helper function to map teachers_responsibility data to SubjectData format\r\n * Transforms the expanded responsibility slots into the format expected by the store\r\n */\r\nfunction mapResponsibilityToSubjectData(\r\n  responsibilities: ExpandedResponsibility[],\r\n): SubjectData[] {\r\n  return responsibilities.map((resp) => ({\r\n    itemID: resp.itemID,\r\n    subjectCode: resp.SubjectCode,\r\n    subjectName: resp.SubjectName,\r\n    gradeID: resp.GradeID,\r\n    teacherID: resp.TeacherID,\r\n    category: resp.subject.Category as SubjectCategory,\r\n    credit: parseFloat(resp.subject.Credit),\r\n    teachHour: resp.TeachHour,\r\n    remainingHours: resp.TeachHour,\r\n    scheduled: false,\r\n    room: null,\r\n    roomID: null,\r\n    roomName: null,\r\n    gradelevel: {\r\n      year: resp.gradelevel.Year,\r\n      number: resp.gradelevel.Number,\r\n    },\r\n  }));\r\n}\r\n\r\n/**\r\n * Main Teacher Arrange Page Component (Refactored)\r\n */\r\nexport default function TeacherArrangePageRefactored() {\r\n  // ============================================================================\r\n  // ROUTING & PARAMS\r\n  // ============================================================================\r\n  const params = useParams();\r\n  const searchParams = useSearchParams();\r\n  const searchTeacherID = searchParams.get(\"TeacherID\");\r\n\r\n  // Use useSemesterSync to extract and sync semester with global store\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n\r\n  // ============================================================================\r\n  // ZUSTAND STORE - Context7-Powered (Phase 4 Migration)\r\n  // Using optimized selectors to prevent unnecessary re-renders\r\n  // ============================================================================\r\n\r\n  // Stable actions reference (never causes re-renders)\r\n  const actions = useTeacherArrangeActions();\r\n\r\n  // Granular selectors (only re-render when specific state changes)\r\n  const { id: currentTeacherID, data: teacherData } = useCurrentTeacher();\r\n  const storeSelectedSubject = useSelectedSubject();\r\n  const subjectData = useSubjectData();\r\n  const scheduledSubjects = useScheduledSubjects();\r\n  const timeSlotData = useTimeslotData();\r\n  const { isOpen: isActiveModal, payload: subjectPayload } = useModalState();\r\n  const {\r\n    errorMessages: showErrorMsgByTimeslotID,\r\n    lockMessages: showLockDataMsgByTimeslotID,\r\n  } = useErrorState();\r\n  const isSaving = useSaveState();\r\n\r\n  // Internal state (not exposed via selectors - use direct store access)\r\n  // CRITICAL: Must use useShallow to prevent infinite re-renders (Issue #121)\r\n  const {\r\n    yearSelected,\r\n    changeTimeSlotSubject,\r\n    destinationSubject,\r\n    timeslotIDtoChange,\r\n    isClickToChangeSubject,\r\n  } = useTeacherArrangeStore(\r\n    useShallow((state) => ({\r\n      yearSelected: state.yearSelected,\r\n      changeTimeSlotSubject: state.changeTimeSlotSubject,\r\n      destinationSubject: state.destinationSubject,\r\n      timeslotIDtoChange: state.timeslotIDtoChange,\r\n      isClickToChangeSubject: state.isClickToChangeSubject,\r\n    })),\r\n  );\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING (Server Actions - Clean Architecture)\r\n  // ============================================================================\r\n\r\n  // Use SWR with Server Actions for client-side data fetching\r\n  const checkConflictData = useSWR<ConflictData | null>(\r\n    currentTeacherID\r\n      ? `conflicts-${academicYear}-${semester}-${currentTeacherID}`\r\n      : null,\r\n    async (): Promise<ConflictData | null> => {\r\n      if (!currentTeacherID) return null;\r\n      const result = (await getConflictsAction({\r\n        AcademicYear: parseInt(academicYear ?? \"0\"),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        TeacherID: parseInt(currentTeacherID),\r\n      })) as ActionResult<ConflictData>;\r\n      if (!result.success || !result.data) {\r\n        return null;\r\n      }\r\n      return result.data;\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n      revalidateOnReconnect: false,\r\n      dedupingInterval: 60000, // 1 minute deduplication to prevent rapid refetches\r\n      shouldRetryOnError: false,\r\n    },\r\n  );\r\n\r\n  const fetchAllClassData = useSWR<TeacherScheduleWithRelations[] | null>(\r\n    currentTeacherID\r\n      ? `teacher-schedule-${academicYear}-${semester}-${currentTeacherID}`\r\n      : null,\r\n    async (): Promise<TeacherScheduleWithRelations[] | null> => {\r\n      if (!currentTeacherID) return null;\r\n      const result = await getTeacherScheduleAction({\r\n        TeacherID: parseInt(currentTeacherID),\r\n      });\r\n      if (!result.success) return null;\r\n      // Type narrowing: after checking success, data is guaranteed to be TeacherScheduleWithRelations[]\r\n      // TypeScript doesn't narrow discriminated unions properly in this context, so we use type assertion\r\n      return result.data as unknown as TeacherScheduleWithRelations[];\r\n    },\r\n    { revalidateOnFocus: false, revalidateOnMount: true },\r\n  );\r\n\r\n  const fetchTeacher = useSWR<teacher | null>(\r\n    currentTeacherID ? `teacher-${currentTeacherID}` : null,\r\n    async (): Promise<teacher | null> => {\r\n      if (!currentTeacherID) return null;\r\n      const result = (await getTeachersAction({})) as ActionResult<teacher[]>;\r\n\r\n      if (!result.success || !result.data) return null;\r\n\r\n      const foundTeacher = result.data.find(\r\n        (t) => t.TeacherID === parseInt(currentTeacherID),\r\n      );\r\n\r\n      // Use nullish coalescing for cleaner null handling\r\n      return foundTeacher ?? null;\r\n    },\r\n    { revalidateOnFocus: false },\r\n  );\r\n\r\n  const fetchResp = useSWR<ExpandedResponsibility[]>(\r\n    currentTeacherID\r\n      ? `available-resp-${academicYear}-${semester}-${currentTeacherID}`\r\n      : null,\r\n    async (): Promise<ExpandedResponsibility[]> => {\r\n      if (!currentTeacherID) return [];\r\n      const result = (await getAvailableRespsAction({\r\n        AcademicYear: parseInt(academicYear ?? \"0\"),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        TeacherID: parseInt(currentTeacherID),\r\n      })) as ActionResult<ExpandedResponsibility[]>;\r\n      if (!result.success || !result.data) return [];\r\n      return result.data;\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n      revalidateOnReconnect: false,\r\n      dedupingInterval: 60000, // 1 minute deduplication to prevent rapid refetches\r\n      shouldRetryOnError: false,\r\n    },\r\n  );\r\n\r\n  const fetchTimeSlot = useSWR<TimeslotData[] | null>(\r\n    currentTeacherID ? `timeslots-${academicYear}-${semester}` : null,\r\n    async (): Promise<TimeslotData[] | null> => {\r\n      if (!currentTeacherID) return null;\r\n      const result = await getTimeslotsByTermAction({\r\n        AcademicYear: parseInt(academicYear ?? \"0\"),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n      });\r\n      if (!result || typeof result !== \"object\" || !(\"success\" in result)) {\r\n        return null;\r\n      }\r\n      return result.success && \"data\" in result\r\n        ? (result.data as unknown as TimeslotData[])\r\n        : null;\r\n    },\r\n    { revalidateOnFocus: false },\r\n  );\r\n\r\n  // ============================================================================\r\n  // @DND-KIT SENSORS CONFIGURATION\r\n  // ============================================================================\r\n\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 10, // Require 10px movement before drag starts (prevent accidental drags)\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    }),\r\n  );\r\n\r\n  // ============================================================================\r\n  // EFFECTS - Initialize and cleanup\r\n  // ============================================================================\r\n\r\n  // Track previous teacher ID to prevent cleanup loop on every change\r\n  const prevTeacherIDRef = useRef<string | null>(null);\r\n\r\n  // Reset state when teacher changes (guarded to prevent cascading renders)\r\n  useEffect(() => {\r\n    // Only reset if teacher actually changed (not on initial mount or same teacher)\r\n    if (\r\n      prevTeacherIDRef.current !== null &&\r\n      prevTeacherIDRef.current !== searchTeacherID\r\n    ) {\r\n      actions.resetOnTeacherChange();\r\n    }\r\n    prevTeacherIDRef.current = searchTeacherID;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchTeacherID]);\r\n\r\n  // Initialize teacher ID from search params\r\n  useEffect(() => {\r\n    if (searchTeacherID) {\r\n      actions.setCurrentTeacherID(searchTeacherID);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchTeacherID]);\r\n\r\n  // Fetch and set subject data\r\n  useEffect(() => {\r\n    if (\r\n      fetchResp.data &&\r\n      fetchResp.data.length > 0 &&\r\n      !!currentTeacherID &&\r\n      !fetchResp.isValidating\r\n    ) {\r\n      // Transform teachers_responsibility data to SubjectData format\r\n      const transformedData = mapResponsibilityToSubjectData(fetchResp.data);\r\n      actions.setSubjectData(transformedData);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchResp.data, fetchResp.isValidating]);\r\n\r\n  // Fetch and set teacher data\r\n  useEffect(() => {\r\n    if (!fetchTeacher.isValidating && fetchTeacher.data && !!currentTeacherID) {\r\n      actions.setTeacherData(fetchTeacher.data);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchTeacher.isValidating, fetchTeacher.data]);\r\n\r\n  // Fetch and set timeslot data\r\n  useEffect(() => {\r\n    if (\r\n      !fetchTimeSlot.isValidating &&\r\n      fetchTimeSlot.data &&\r\n      !!currentTeacherID\r\n    ) {\r\n      fetchTimeslotData();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchTimeSlot.isValidating, fetchTimeSlot.data]);\r\n\r\n  // Fetch and set class data\r\n  useEffect(() => {\r\n    if (\r\n      !fetchAllClassData.isValidating &&\r\n      fetchAllClassData.data &&\r\n      !!currentTeacherID\r\n    ) {\r\n      fetchClassData();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllClassData.isValidating, fetchAllClassData.data]);\r\n\r\n  // Handle subject selection for conflict display\r\n  // CRITICAL: Logic inlined to prevent circular callback dependencies (Issue #121)\r\n  // Previously: onSelectSubject callback โ’ depends on timeSlotData โ’ recreates on every change โ’ infinite loop\r\n  useEffect(() => {\r\n    if (checkConflictData.isValidating) return;\r\n\r\n    const isSelectedToAdd = storeSelectedSubject != null;\r\n    const isSelectedToChange = changeTimeSlotSubject != null;\r\n\r\n    // Helper: Clear scheduled conflict markers from timeslots\r\n    const clearScheduledData = () => {\r\n      const currentTimeSlotData =\r\n        useTeacherArrangeStore.getState().timeSlotData;\r\n      actions.setTimeSlotData({\r\n        ...currentTimeSlotData,\r\n        AllData: currentTimeSlotData.AllData.map((item) =>\r\n          item.subject?.scheduled ? { ...item, subject: null } : item,\r\n        ),\r\n      });\r\n    };\r\n\r\n    // No subject selected - clear conflict markers\r\n    if (!isSelectedToAdd && !isSelectedToChange) {\r\n      clearScheduledData();\r\n      return;\r\n    }\r\n\r\n    // Determine which grade's conflicts to display\r\n    const selectedGradeID = !isSelectedToChange\r\n      ? storeSelectedSubject!.gradeID\r\n      : changeTimeSlotSubject.gradeID;\r\n\r\n    if (!checkConflictData.data) return;\r\n\r\n    // Type for scheduled slots with enriched data\r\n    type ScheduledSlot = class_schedule & {\r\n      subject: subject;\r\n      room: room | null;\r\n      Scheduled?: boolean;\r\n      SubjectName?: string;\r\n      RoomName?: string;\r\n    };\r\n\r\n    // Find all scheduled classes for the selected grade (conflicts)\r\n    const scheduledGradeIDTimeslot: ScheduledSlot[] = checkConflictData.data\r\n      .filter((item) => item.GradeID === selectedGradeID)\r\n      .map((slot) => ({\r\n        ...slot,\r\n        Scheduled: true,\r\n        SubjectName: slot.subject.SubjectName,\r\n        RoomName: slot.room?.RoomName || \"เนเธกเนเธกเธตเธซเนเธญเธเน€เธฃเธตเธขเธ\",\r\n      }));\r\n\r\n    if (scheduledGradeIDTimeslot.length > 0) {\r\n      // Display conflicts as scheduled subjects in timeslots\r\n      clearScheduledData();\r\n      const currentTimeSlotData =\r\n        useTeacherArrangeStore.getState().timeSlotData;\r\n      actions.setTimeSlotData({\r\n        ...currentTimeSlotData,\r\n        AllData: currentTimeSlotData.AllData.map((item) => {\r\n          // If timeslot already has a subject, keep it\r\n          if (item.subject) {\r\n            return item;\r\n          }\r\n\r\n          // Find scheduled slot for this timeslot (conflict display)\r\n          const matchedSlot = scheduledGradeIDTimeslot.find(\r\n            (slot: ScheduledSlot) => slot.TimeslotID === item.TimeslotID,\r\n          );\r\n\r\n          // Add scheduled slot as subject if found, otherwise keep null\r\n          if (matchedSlot) {\r\n            const subjectData: SubjectData = {\r\n              itemID: matchedSlot.ClassID,\r\n              subjectCode: matchedSlot.SubjectCode,\r\n              subjectName:\r\n                matchedSlot.SubjectName || matchedSlot.subject.SubjectName,\r\n              gradeID: matchedSlot.GradeID,\r\n              teacherID:\r\n                typeof currentTeacherID === \"string\"\r\n                  ? parseInt(currentTeacherID)\r\n                  : currentTeacherID || 0,\r\n              category: matchedSlot.subject.Category as SubjectCategory,\r\n              credit:\r\n                typeof matchedSlot.subject.Credit === \"string\"\r\n                  ? 0\r\n                  : matchedSlot.subject.Credit || 0,\r\n              teachHour:\r\n                typeof matchedSlot.subject.Credit === \"string\"\r\n                  ? 0\r\n                  : matchedSlot.subject.Credit || 0,\r\n              roomID: matchedSlot.RoomID,\r\n              roomName:\r\n                matchedSlot.RoomName ||\r\n                matchedSlot.room?.RoomName ||\r\n                \"เนเธกเนเธกเธตเธซเนเธญเธเน€เธฃเธตเธขเธ\",\r\n              room: matchedSlot.room ?? null,\r\n              classID: matchedSlot.ClassID,\r\n              scheduled: matchedSlot.Scheduled ?? true,\r\n            };\r\n            return { ...item, subject: subjectData };\r\n          }\r\n          return item;\r\n        }),\r\n      });\r\n    } else {\r\n      clearScheduledData();\r\n    }\r\n  }, [\r\n    storeSelectedSubject,\r\n    changeTimeSlotSubject,\r\n    checkConflictData.isValidating,\r\n    checkConflictData.data,\r\n    // Removed: timeSlotData (causes infinite loop - read from store.getState() instead)\r\n    currentTeacherID,\r\n    // Removed: actions (Zustand actions are stable - never include in deps)\r\n  ]);\r\n\r\n  // Handle destination subject change (swap subjects)\r\n  useEffect(() => {\r\n    if (timeslotIDtoChange.destination !== \"\") {\r\n      changeSubjectSlot();\r\n      actions.setTimeslotIDtoChange({ source: \"\", destination: \"\" });\r\n      actions.setChangeTimeSlotSubject(null);\r\n      actions.setDestinationSubject(null);\r\n      actions.setYearSelected(null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [timeslotIDtoChange.destination]);\r\n\r\n  // ============================================================================\r\n  // DATA PROCESSING FUNCTIONS\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Fetch and initialize timeslot data\r\n   * IMPROVED: Uses null consistently for empty subject state\r\n   */\r\n  const fetchTimeslotData = useCallback(() => {\r\n    if (!fetchTimeSlot.data) return;\r\n\r\n    const data = fetchTimeSlot.data;\r\n\r\n    // Extract unique days of week with their display colors\r\n    const dayofweek: DayOfWeekDisplay[] = data\r\n      .map((day: timeslot) => day.DayOfWeek)\r\n      .filter(\r\n        (item: string, index: number, arr: string[]) =>\r\n          arr.indexOf(item) === index,\r\n      )\r\n      .map((item: string) => ({\r\n        day_of_week: item as day_of_week,\r\n        textColor: dayOfWeekTextColor[item] ?? \"#000000\",\r\n        bgColor: dayOfWeekColor[item] ?? \"#FFFFFF\",\r\n      }));\r\n\r\n    // Get slot amounts (use Monday as reference since all days have same slots)\r\n    const slotAmount = data\r\n      .filter((item: timeslot) => item.DayOfWeek === \"MON\")\r\n      .map((_: timeslot, index: number) => index + 1);\r\n\r\n    // Extract break times\r\n    const breakTime = data\r\n      .filter(\r\n        (item: timeslot) =>\r\n          (item.Breaktime === \"BREAK_BOTH\" ||\r\n            item.Breaktime === \"BREAK_JUNIOR\" ||\r\n            item.Breaktime === \"BREAK_SENIOR\") &&\r\n          item.DayOfWeek === \"MON\",\r\n      )\r\n      .map((item: timeslot) => ({\r\n        timeslotID: item.TimeslotID,\r\n        breaktime: item.Breaktime,\r\n        slotNumber: parseInt(item.TimeslotID.substring(10)),\r\n      }));\r\n\r\n    // IMPROVED: AllData uses null for empty slots (consistent with type checking throughout)\r\n    actions.setTimeSlotData({\r\n      AllData: data.map(\r\n        (slot: timeslot): EnrichedTimeslot => ({\r\n          ...slot,\r\n          subject: null, // null = empty slot (not {} which is ambiguous)\r\n        }),\r\n      ),\r\n      SlotAmount: slotAmount,\r\n      DayOfWeek: dayofweek,\r\n      BreakSlot: breakTime,\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchTimeSlot.data]);\r\n\r\n  const fetchClassData = useCallback(() => {\r\n    if (!fetchAllClassData.data || !timeSlotData.AllData.length) return;\r\n\r\n    type ClassScheduleWithRelations = class_schedule & {\r\n      subject: subject;\r\n      room: room | null;\r\n    };\r\n\r\n    // fetchAllClassData.data is the array extracted by the SWR fetcher\r\n    const puredata: ClassScheduleWithRelations[] = Array.isArray(\r\n      fetchAllClassData.data,\r\n    )\r\n      ? fetchAllClassData.data\r\n      : [];\r\n\r\n    const data = puredata.map((item: ClassScheduleWithRelations) => ({\r\n      ...item,\r\n      SubjectName: item.subject.SubjectName,\r\n      RoomName: item.room?.RoomName || \"เนเธกเนเธกเธตเธซเนเธญเธเน€เธฃเธตเธขเธ\",\r\n    }));\r\n\r\n    const filterLock = data.filter(\r\n      (\r\n        item: ClassScheduleWithRelations & {\r\n          SubjectName: string;\r\n          RoomName: string;\r\n        },\r\n      ) => item.IsLocked,\r\n    );\r\n    const filterNotLock = data.filter(\r\n      (\r\n        item: ClassScheduleWithRelations & {\r\n          SubjectName: string;\r\n          RoomName: string;\r\n        },\r\n      ) => !item.IsLocked,\r\n    );\r\n\r\n    // Process locked timeslots (combine multiple grade IDs for same timeslot)\r\n    type LockedScheduleItem = Omit<ClassScheduleWithRelations, \"GradeID\"> & {\r\n      SubjectName: string;\r\n      RoomName: string;\r\n      GradeID: string | string[]; // Can be array when multiple grades share same timeslot\r\n    };\r\n    const resFilterLock: LockedScheduleItem[] = [];\r\n    const keepId: string[] = [];\r\n\r\n    for (let i = 0; i < filterLock.length; i++) {\r\n      const currentItem = filterLock[i];\r\n      if (!currentItem) continue; // Guard against undefined\r\n\r\n      if (keepId.length === 0 || !keepId.includes(currentItem.TimeslotID)) {\r\n        keepId.push(currentItem.TimeslotID);\r\n        const gradeID = currentItem.GradeID;\r\n        resFilterLock.push({\r\n          ...currentItem,\r\n          GradeID: Array.isArray(gradeID) ? gradeID : [gradeID], // Convert single GradeID to array\r\n        } as LockedScheduleItem);\r\n      } else {\r\n        const tID = currentItem.TimeslotID;\r\n        resFilterLock.forEach((item, index) => {\r\n          if (item.TimeslotID === tID) {\r\n            resFilterLock[index] = {\r\n              ...item,\r\n              GradeID: [\r\n                ...(Array.isArray(item.GradeID)\r\n                  ? item.GradeID\r\n                  : [item.GradeID]),\r\n                currentItem.GradeID,\r\n              ], // Properly typed as string[]\r\n            };\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    const concatClassData = [...filterNotLock, ...resFilterLock];\r\n\r\n    // Map enriched class_schedule to SubjectData format for store compatibility\r\n    // SubjectData has both PascalCase and camelCase fields for backward compatibility\r\n    const mappedScheduledSubjects: SubjectData[] = concatClassData.map(\r\n      (item) => ({\r\n        itemID: item.ClassID,\r\n        subjectCode: item.SubjectCode,\r\n        subjectName: item.SubjectName,\r\n        gradeID: Array.isArray(item.GradeID)\r\n          ? (item.GradeID[0] ?? \"\")\r\n          : item.GradeID,\r\n        teacherID:\r\n          typeof currentTeacherID === \"string\"\r\n            ? parseInt(currentTeacherID)\r\n            : currentTeacherID || 0,\r\n        category: item.subject?.Category as SubjectCategory,\r\n        credit:\r\n          typeof item.subject?.Credit === \"string\"\r\n            ? 0\r\n            : item.subject?.Credit || 0,\r\n        teachHour:\r\n          typeof item.subject?.Credit === \"string\"\r\n            ? 0\r\n            : item.subject?.Credit || 0,\r\n        roomID: item.RoomID,\r\n        roomName: item.RoomName,\r\n        room: item.room,\r\n        classID: item.ClassID,\r\n        scheduled: true,\r\n      }),\r\n    );\r\n\r\n    const mappedLockData: class_schedule[] = resFilterLock.map((item) => ({\r\n      ClassID: item.ClassID,\r\n      TimeslotID: item.TimeslotID,\r\n      SubjectCode: item.SubjectCode,\r\n      RoomID: item.RoomID,\r\n      GradeID: Array.isArray(item.GradeID)\r\n        ? (item.GradeID[0] ?? \"\")\r\n        : item.GradeID, // Take first grade, fallback to empty\r\n      IsLocked: item.IsLocked,\r\n    }));\r\n\r\n    actions.setScheduledSubjects(mappedScheduledSubjects);\r\n    actions.setLockData(mappedLockData);\r\n\r\n    // Map subjects into timeslots\r\n    actions.setTimeSlotData({\r\n      ...timeSlotData,\r\n      AllData: timeSlotData.AllData.map((data): EnrichedTimeslot => {\r\n        const matchedSubject = concatClassData.find(\r\n          (item) => item.TimeslotID === data.TimeslotID,\r\n        );\r\n\r\n        // Enrich timeslot with subject data if matched, otherwise null\r\n        // Convert matched subject to SubjectData format\r\n        if (matchedSubject) {\r\n          const subjectData: SubjectData = {\r\n            itemID: matchedSubject.ClassID,\r\n            subjectCode: matchedSubject.SubjectCode,\r\n            subjectName: matchedSubject.SubjectName,\r\n            gradeID: Array.isArray(matchedSubject.GradeID)\r\n              ? (matchedSubject.GradeID[0] ?? \"\")\r\n              : matchedSubject.GradeID,\r\n            teacherID:\r\n              typeof currentTeacherID === \"string\"\r\n                ? parseInt(currentTeacherID)\r\n                : currentTeacherID || 0,\r\n            category: matchedSubject.subject?.Category as SubjectCategory,\r\n            credit:\r\n              typeof matchedSubject.subject?.Credit === \"string\"\r\n                ? 0\r\n                : matchedSubject.subject?.Credit || 0,\r\n            teachHour:\r\n              typeof matchedSubject.subject?.Credit === \"string\"\r\n                ? 0\r\n                : matchedSubject.subject?.Credit || 0,\r\n            roomID: matchedSubject.RoomID,\r\n            roomName: matchedSubject.RoomName,\r\n            room: matchedSubject.room,\r\n            classID: matchedSubject.ClassID,\r\n            scheduled: true,\r\n          };\r\n          return { ...data, subject: subjectData };\r\n        }\r\n        return { ...data, subject: null };\r\n      }),\r\n    });\r\n  }, [fetchAllClassData.data, timeSlotData, actions]);\r\n\r\n  // ============================================================================\r\n  // SAVE OPERATION\r\n  // ============================================================================\r\n\r\n  const postData = useCallback(async () => {\r\n    actions.setIsSaving(true);\r\n    const savingSnackbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธเธฑเธเธ—เธถเธเธเนเธญเธกเธนเธฅ...\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await syncTeacherScheduleAction({\r\n        TeacherID: parseInt(searchTeacherID || \"0\"),\r\n        AcademicYear: parseInt(academicYear || \"0\"),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        Schedule: timeSlotData.AllData,\r\n      });\r\n\r\n      closeSnackbar(savingSnackbar);\r\n\r\n      if (result.success) {\r\n        enqueueSnackbar(\"เธเธฑเธเธ—เธถเธเธเนเธญเธกเธนเธฅเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n        fetchAllClassData.mutate();\r\n      } else {\r\n        enqueueSnackbar(\r\n          result.error?.message || \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธเธฑเธเธ—เธถเธเธเนเธญเธกเธนเธฅ\",\r\n          { variant: \"error\" },\r\n        );\r\n      }\r\n    } catch (error) {\r\n      log.logError(error, { action: \"save\" });\r\n      closeSnackbar(savingSnackbar);\r\n      enqueueSnackbar(\"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธเธฑเธเธ—เธถเธเธเนเธญเธกเธนเธฅ\", { variant: \"error\" });\r\n    } finally {\r\n      actions.setIsSaving(false);\r\n    }\r\n  }, [\r\n    searchTeacherID,\r\n    academicYear,\r\n    semester,\r\n    timeSlotData,\r\n    actions,\r\n    fetchAllClassData,\r\n  ]);\r\n\r\n  // ============================================================================\r\n  // SUBJECT OPERATIONS\r\n  // ============================================================================\r\n\r\n  const addSubjectToSlot = useCallback(\r\n    (subject: SubjectData, timeSlotID: string) => {\r\n      const mapTimeSlot = {\r\n        ...timeSlotData,\r\n        AllData: timeSlotData.AllData.map((item) =>\r\n          item.TimeslotID === timeSlotID\r\n            ? { ...item, subject: { ...subject } }\r\n            : item,\r\n        ),\r\n      };\r\n\r\n      actions.setTimeSlotData(mapTimeSlot);\r\n      actions.setSubjectData(\r\n        subjectData.filter(\r\n          (item: SubjectData) => item.itemID !== subject.itemID,\r\n        ),\r\n      );\r\n      actions.clearSelectedSubject();\r\n      actions.setYearSelected(null);\r\n      actions.closeModal();\r\n    },\r\n    [timeSlotData, subjectData, actions],\r\n  );\r\n\r\n  const returnSubject = useCallback(\r\n    (subject: SubjectData) => {\r\n      const cleanSubject = { ...subject };\r\n      delete cleanSubject.roomName;\r\n      delete cleanSubject.room;\r\n      delete cleanSubject.classID;\r\n\r\n      actions.setSubjectData([\r\n        ...subjectData,\r\n        { ...cleanSubject, itemID: subjectData.length + 1 },\r\n      ]);\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [subjectData],\r\n  );\r\n\r\n  const removeSubjectFromSlot = useCallback(\r\n    (subject: SubjectData, timeSlotID: string) => {\r\n      returnSubject(subject);\r\n\r\n      actions.setTimeSlotData({\r\n        ...timeSlotData,\r\n        AllData: timeSlotData.AllData.map((item) =>\r\n          item.TimeslotID === timeSlotID ? { ...item, subject: null } : item,\r\n        ),\r\n      });\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [timeSlotData, returnSubject],\r\n  );\r\n\r\n  const cancelAddRoom = useCallback(\r\n    (subject: SubjectData | null, timeSlotID: string) => {\r\n      if (subject) {\r\n        removeSubjectFromSlot(subject, timeSlotID);\r\n      }\r\n      actions.clearSelectedSubject();\r\n      actions.setYearSelected(null);\r\n      actions.closeModal();\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [removeSubjectFromSlot],\r\n  );\r\n\r\n  // ============================================================================\r\n  // CONFLICT DISPLAY LOGIC\r\n  // ============================================================================\r\n  // NOTE: clearScheduledData and onSelectSubject logic moved inline to useEffect\r\n  // to prevent circular callback dependencies (see useEffect around line 394)\r\n\r\n  // ============================================================================\r\n  // @DND-KIT EVENT HANDLERS (Replaces react-beautiful-dnd)\r\n  // ============================================================================\r\n\r\n  const handleDragStart = useCallback(\r\n    (event: DragStartEvent) => {\r\n      const { active } = event;\r\n      const dragData = active.data.current;\r\n\r\n      if (dragData?.type === \"subject\") {\r\n        // Dragging from subject box\r\n        const index = dragData.index;\r\n        if (storeSelectedSubject == null) {\r\n          const sel = subjectData[index];\r\n          if (sel) clickOrDragToSelectSubject(sel);\r\n        }\r\n      } else if (dragData?.type === \"timeslot\") {\r\n        // Dragging from timeslot (to swap)\r\n        const timeslotID = dragData.timeslotID;\r\n        const getSubjectFromTimeslot = timeSlotData.AllData.find(\r\n          (item) => item.TimeslotID === timeslotID,\r\n        );\r\n\r\n        if (getSubjectFromTimeslot && changeTimeSlotSubject == null) {\r\n          // Phase 2: Use new signature (sourceID, destID)\r\n          clickOrDragToChangeTimeSlot(timeslotID, timeslotID);\r\n        }\r\n      }\r\n    },\r\n    [storeSelectedSubject, subjectData, changeTimeSlotSubject, timeSlotData],\r\n  );\r\n\r\n  const handleDragEnd = useCallback(\r\n    (event: DragEndEvent) => {\r\n      const { active, over } = event;\r\n\r\n      if (!over) {\r\n        // Dropped outside droppable zone - cancel selection after delay\r\n        setTimeout(() => {\r\n          if (changeTimeSlotSubject == null) {\r\n            if (storeSelectedSubject) {\r\n              clickOrDragToSelectSubject(storeSelectedSubject);\r\n            }\r\n          } else {\r\n            // Phase 2: Cancel change by calling with same source (deselect)\r\n            if (timeslotIDtoChange.source) {\r\n              clickOrDragToChangeTimeSlot(\r\n                timeslotIDtoChange.source,\r\n                timeslotIDtoChange.source,\r\n              );\r\n            }\r\n          }\r\n        }, 500);\r\n        return;\r\n      }\r\n\r\n      type SubjectDragData = { type: \"subject\"; index: number };\r\n      type TimeslotDragData = { type: \"timeslot\"; timeslotID: string };\r\n      const isSubjectDragData = (x: unknown): x is SubjectDragData =>\r\n        !!x &&\r\n        (x as any).type === \"subject\" &&\r\n        typeof (x as any).index === \"number\";\r\n      const isTimeslotDragData = (x: unknown): x is TimeslotDragData =>\r\n        !!x &&\r\n        (x as any).type === \"timeslot\" &&\r\n        typeof (x as any).timeslotID === \"string\";\r\n\r\n      const sourceDataUnknown = active.data.current as unknown;\r\n      const targetDataUnknown = over.data.current as unknown;\r\n\r\n      if (\r\n        isSubjectDragData(sourceDataUnknown) &&\r\n        isTimeslotDragData(targetDataUnknown)\r\n      ) {\r\n        // Adding subject to timeslot - Phase 2: Pass SubjectPayload\r\n        const payload: SubjectPayload = {\r\n          timeslotID: targetDataUnknown.timeslotID,\r\n          selectedSubject: storeSelectedSubject!,\r\n        };\r\n        addRoomModal(payload);\r\n        {\r\n          const s = subjectData[sourceDataUnknown.index];\r\n          if (s && s !== null) clickOrDragToSelectSubject(s);\r\n        }\r\n      } else if (\r\n        isTimeslotDragData(sourceDataUnknown) &&\r\n        isTimeslotDragData(targetDataUnknown)\r\n      ) {\r\n        // Swapping subjects between timeslots - Phase 2: Use new signature\r\n        const sourceID = sourceDataUnknown.timeslotID;\r\n        const destID = targetDataUnknown.timeslotID;\r\n        clickOrDragToChangeTimeSlot(sourceID, destID);\r\n      }\r\n    },\r\n    [\r\n      changeTimeSlotSubject,\r\n      storeSelectedSubject,\r\n      subjectData,\r\n      timeSlotData,\r\n      timeslotIDtoChange,\r\n    ],\r\n  );\r\n\r\n  // ============================================================================\r\n  // SUBJECT SELECTION HANDLERS\r\n  // ============================================================================\r\n\r\n  const clickOrDragToSelectSubject = useCallback(\r\n    (subject: SubjectData) => {\r\n      // Clear scheduled conflict markers (inlined to avoid callback dependency)\r\n      actions.setTimeSlotData({\r\n        ...timeSlotData,\r\n        AllData: timeSlotData.AllData.map((item) =>\r\n          item.subject?.scheduled ? { ...item, subject: null } : item,\r\n        ),\r\n      });\r\n\r\n      const checkDuplicateSubject =\r\n        subject === storeSelectedSubject ? null : subject;\r\n\r\n      if (storeSelectedSubject == null || checkDuplicateSubject) {\r\n        const year = subject.gradelevel?.year;\r\n        actions.setYearSelected(\r\n          subject === storeSelectedSubject ? null : year || null,\r\n        );\r\n      }\r\n\r\n      actions.setSelectedSubject(checkDuplicateSubject);\r\n      actions.setChangeTimeSlotSubject(null);\r\n      actions.setTimeslotIDtoChange({ source: \"\", destination: \"\" });\r\n    },\r\n    [storeSelectedSubject, timeSlotData, actions],\r\n  );\r\n\r\n  /**\r\n   * Phase 2: Updated to match AddRoomModalCallback signature\r\n   * Accepts SubjectPayload instead of just timeslotID\r\n   */\r\n  const addRoomModal = useCallback(\r\n    (payload: SubjectPayload) => {\r\n      if (storeSelectedSubject == null) return;\r\n\r\n      actions.setSubjectPayload(payload);\r\n      addSubjectToSlot(storeSelectedSubject, payload.timeslotID);\r\n      actions.setScheduledSubjects([\r\n        ...scheduledSubjects,\r\n        storeSelectedSubject,\r\n      ]);\r\n      actions.openModal(payload);\r\n    },\r\n    [storeSelectedSubject, scheduledSubjects, addSubjectToSlot, actions],\r\n  );\r\n\r\n  /**\r\n   * Phase 2: Updated to match ClickOrDragToChangeCallback signature\r\n   * Now accepts (sourceID: string, destID: string) instead of (subject, timeslotID, isClick)\r\n   */\r\n  const clickOrDragToChangeTimeSlot = useCallback(\r\n    (sourceID: string, destID: string) => {\r\n      // Find the source subject from the timeslot\r\n      const sourceSlot = timeSlotData.AllData.find(\r\n        (item) => item.TimeslotID === sourceID,\r\n      );\r\n\r\n      if (!sourceSlot?.subject) {\r\n        log.warn(\"No subject found in source timeslot\", { sourceID });\r\n        return;\r\n      }\r\n\r\n      const subject = sourceSlot.subject;\r\n      const isClickToChange = sourceID === destID; // Click if same slot\r\n      const checkDuplicateSubject = subject === changeTimeSlotSubject;\r\n\r\n      if (changeTimeSlotSubject == null || checkDuplicateSubject) {\r\n        // First selection or deselection\r\n        const year = subject.gradelevel?.year;\r\n        actions.setIsClickToChangeSubject(\r\n          checkDuplicateSubject ? false : isClickToChange,\r\n        );\r\n        actions.setChangeTimeSlotSubject(\r\n          checkDuplicateSubject ? null : subject,\r\n        );\r\n        actions.setTimeslotIDtoChange(\r\n          checkDuplicateSubject\r\n            ? { source: \"\", destination: \"\" }\r\n            : { source: sourceID, destination: \"\" },\r\n        );\r\n        actions.setYearSelected(checkDuplicateSubject ? null : year || null);\r\n      } else if (timeslotIDtoChange.source !== \"\" && destID !== sourceID) {\r\n        // Second selection - swap operation\r\n        const destSlot = timeSlotData.AllData.find(\r\n          (item) => item.TimeslotID === destID,\r\n        );\r\n        actions.setTimeslotIDtoChange({\r\n          source: timeslotIDtoChange.source,\r\n          destination: destID,\r\n        });\r\n        actions.setDestinationSubject(destSlot?.subject || null);\r\n        actions.setIsClickToChangeSubject(false);\r\n      }\r\n\r\n      actions.setSelectedSubject(null);\r\n    },\r\n    [changeTimeSlotSubject, timeslotIDtoChange, timeSlotData, actions],\r\n  );\r\n\r\n  const changeSubjectSlot = useCallback(() => {\r\n    const sourceSubj = changeTimeSlotSubject;\r\n    const destinationSubj = destinationSubject;\r\n    const sourceTimeslotID = timeslotIDtoChange.source;\r\n    const destinationTimeslotID = timeslotIDtoChange.destination;\r\n\r\n    actions.setTimeSlotData({\r\n      ...timeSlotData,\r\n      AllData: timeSlotData.AllData.map((item) =>\r\n        item.TimeslotID === sourceTimeslotID\r\n          ? { ...item, subject: destinationSubj }\r\n          : item.TimeslotID === destinationTimeslotID\r\n            ? { ...item, subject: sourceSubj }\r\n            : item,\r\n      ),\r\n    });\r\n  }, [\r\n    changeTimeSlotSubject,\r\n    destinationSubject,\r\n    timeslotIDtoChange,\r\n    timeSlotData,\r\n    actions,\r\n  ]);\r\n\r\n  // ============================================================================\r\n  // VALIDATION & STYLING HELPERS\r\n  // ============================================================================\r\n\r\n  const checkBreakTime = useCallback(\r\n    (breakTimeState: string | null): boolean => {\r\n      const isSelectedToAdd = storeSelectedSubject != null;\r\n      const isSelectedToChange = changeTimeSlotSubject != null;\r\n\r\n      if (!yearSelected) return false;\r\n\r\n      const result =\r\n        ((isSelectedToAdd || isSelectedToChange) &&\r\n          breakTimeState === \"BREAK_JUNIOR\" &&\r\n          [1, 2, 3].includes(yearSelected)) ||\r\n        (breakTimeState === \"BREAK_SENIOR\" && [4, 5, 6].includes(yearSelected));\r\n\r\n      return breakTimeState === \"BREAK_BOTH\" ? true : result;\r\n    },\r\n    [storeSelectedSubject, changeTimeSlotSubject, yearSelected],\r\n  );\r\n\r\n  const checkBreakTimeOutOfRange = useCallback(\r\n    (breakTimeState: string, year: number): boolean => {\r\n      if (timeslotIDtoChange.source !== \"\") {\r\n        const getBreaktime = timeSlotData.AllData.find(\r\n          (item) => item.TimeslotID === timeslotIDtoChange.source,\r\n        )?.Breaktime;\r\n\r\n        if (getBreaktime === \"BREAK_JUNIOR\") {\r\n          return [4, 5, 6].includes(year) ? false : true;\r\n        } else if (getBreaktime === \"BREAK_SENIOR\") {\r\n          return [1, 2, 3].includes(year) ? false : true;\r\n        } else {\r\n          return checkBreakTime(breakTimeState);\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    [timeslotIDtoChange, timeSlotData, checkBreakTime],\r\n  );\r\n\r\n  const checkRelatedYearDuringDragging = useCallback(\r\n    (year: number): boolean => {\r\n      if (timeslotIDtoChange.source !== \"\" && yearSelected) {\r\n        const getBreaktime = timeSlotData.AllData.find(\r\n          (item) => item.TimeslotID === timeslotIDtoChange.source,\r\n        )?.Breaktime;\r\n\r\n        const findYearRange = [1, 2, 3].includes(yearSelected)\r\n          ? [1, 2, 3]\r\n          : [4, 5, 6];\r\n\r\n        return getBreaktime !== \"NOT_BREAK\"\r\n          ? !findYearRange.includes(year)\r\n          : false;\r\n      }\r\n      return false;\r\n    },\r\n    [timeslotIDtoChange, yearSelected, timeSlotData],\r\n  );\r\n\r\n  const timeSlotCssClassName = useCallback(\r\n    (breakTimeState: string, subjectInSlot: SubjectData): string => {\r\n      const isSubjectInSlot = Boolean(\r\n        (subjectInSlot as Partial<SubjectData>).gradeID,\r\n      );\r\n      const isSelectedToAdd = storeSelectedSubject != null;\r\n      const isSelectedToChange = changeTimeSlotSubject != null;\r\n\r\n      const disabledSlot = `grid flex justify-center h-[76px] text-center items-center rounded border relative border-[#ABBAC1] bg-gray-100 duration-200 ${subjectInSlot.scheduled ? \"opacity-35\" : \"opacity-100\"}`;\r\n\r\n      const enabledSlot = `grid items-center justify-center h-[76px] rounded border-2 relative border-[#ABBAC1] bg-white ${\r\n        isSelectedToAdd && !isSubjectInSlot\r\n          ? \"border-emerald-300 cursor-pointer border-dashed\"\r\n          : isSubjectInSlot &&\r\n              displayErrorChangeSubject(\r\n                breakTimeState,\r\n                subjectInSlot.gradelevel?.year || 0,\r\n              )\r\n            ? \"border-red-300\"\r\n            : isSelectedToChange\r\n              ? \"border-blue-300 border-dashed\"\r\n              : isSubjectInSlot\r\n                ? \"border-red-300\"\r\n                : \"border-dashed\"\r\n      } duration-200`;\r\n\r\n      return subjectInSlot.scheduled\r\n        ? disabledSlot\r\n        : typeof subjectInSlot.gradeID !== \"string\" && isSubjectInSlot\r\n          ? disabledSlot\r\n          : checkBreakTime(breakTimeState) && !isSubjectInSlot\r\n            ? disabledSlot\r\n            : enabledSlot;\r\n    },\r\n    [storeSelectedSubject, changeTimeSlotSubject, checkBreakTime],\r\n  );\r\n\r\n  const displayErrorChangeSubject = useCallback(\r\n    (Breaktime: string, Year: number): boolean => {\r\n      return checkBreakTime(Breaktime) || Breaktime === \"NOT_BREAK\"\r\n        ? checkBreakTimeOutOfRange(Breaktime, Year)\r\n        : false;\r\n    },\r\n    [checkBreakTime, checkBreakTimeOutOfRange],\r\n  );\r\n\r\n  // ============================================================================\r\n  // HELPER FUNCTIONS - Subject State Checking\r\n  // ============================================================================\r\n  // PHASE 2: CALLBACK ADAPTERS - Match expected callback signatures\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Adapter for TimeSlotCssClassNameCallback\r\n   * Expected: (subject: SubjectData | null, isBreakTime: boolean, isLocked: boolean) => string\r\n   * Original: (breakTimeState: string, subjectInSlot: SubjectData) => string\r\n   */\r\n  const timeSlotCssClassNameCallback =\r\n    useCallback<TimeSlotCssClassNameCallback>(\r\n      (\r\n        subject: SubjectData | null,\r\n        isBreakTime: boolean,\r\n        _isLocked: boolean,\r\n      ) => {\r\n        const breakTimeState = isBreakTime ? \"BREAK_BOTH\" : \"NOT_BREAK\";\r\n        const subjectOrEmpty = subject || ({} as SubjectData);\r\n        return timeSlotCssClassName(breakTimeState, subjectOrEmpty);\r\n      },\r\n      [timeSlotCssClassName],\r\n    );\r\n\r\n  /**\r\n   * Adapter for DisplayErrorChangeSubjectCallback\r\n   * Expected: (error: string) => void\r\n   * Original: (Breaktime: string, Year: number) => boolean (wrong function!)\r\n   */\r\n  const displayErrorChangeSubjectCallback =\r\n    useCallback<DisplayErrorChangeSubjectCallback>(\r\n      (error: string) => {\r\n        // Display error message using setShowErrorMsg\r\n        if (timeslotIDtoChange.source) {\r\n          actions.setShowErrorMsg(timeslotIDtoChange.source, true);\r\n          log.error(\"Schedule change error\", { error });\r\n\r\n          // Auto-hide error after 5 seconds\r\n          setTimeout(() => {\r\n            actions.setShowErrorMsg(timeslotIDtoChange.source, false);\r\n          }, 5000);\r\n        }\r\n      },\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      [timeslotIDtoChange],\r\n    );\r\n\r\n  /**\r\n   * Adapter for RemoveSubjectCallback\r\n   * Expected: (timeslotID: string) => void\r\n   * Original: (subject: SubjectData, timeSlotID: string) => void\r\n   */\r\n  const removeSubjectFromSlotCallback = useCallback<RemoveSubjectCallback>(\r\n    (timeslotID: string) => {\r\n      // Find subject by timeslotID\r\n      const slot = timeSlotData.AllData.find(\r\n        (item) => item.TimeslotID === timeslotID,\r\n      );\r\n      if (slot?.subject) {\r\n        removeSubjectFromSlot(slot.subject, timeslotID);\r\n      }\r\n    },\r\n    [timeSlotData, removeSubjectFromSlot],\r\n  );\r\n\r\n  // ============================================================================\r\n  // SELECTION STATE CALLBACKS\r\n  // ============================================================================\r\n\r\n  const isSelectedToAdd = useCallback((): boolean => {\r\n    return storeSelectedSubject != null;\r\n  }, [storeSelectedSubject]);\r\n\r\n  const isSelectedToChange = useCallback((): boolean => {\r\n    return changeTimeSlotSubject != null;\r\n  }, [changeTimeSlotSubject]);\r\n\r\n  /**\r\n   * Phase 2: Updated to work with new clickOrDragToChangeTimeSlot signature\r\n   */\r\n  const dropOutOfZone = useCallback(\r\n    (subject: SubjectData) => {\r\n      setTimeout(() => {\r\n        if (changeTimeSlotSubject == null) {\r\n          clickOrDragToSelectSubject(subject);\r\n        } else {\r\n          // Cancel change operation by calling with same source/dest\r\n          if (timeslotIDtoChange.source) {\r\n            clickOrDragToChangeTimeSlot(\r\n              timeslotIDtoChange.source,\r\n              timeslotIDtoChange.source,\r\n            );\r\n          }\r\n        }\r\n      }, 500);\r\n    },\r\n    [\r\n      changeTimeSlotSubject,\r\n      timeslotIDtoChange,\r\n      clickOrDragToSelectSubject,\r\n      clickOrDragToChangeTimeSlot,\r\n    ],\r\n  );\r\n\r\n  // ============================================================================\r\n  // LOADING STATE\r\n  // ============================================================================\r\n\r\n  const isLoading = useMemo(() => {\r\n    return (\r\n      fetchTeacher.isValidating ||\r\n      fetchResp.isValidating ||\r\n      fetchTimeSlot.isValidating ||\r\n      fetchAllClassData.isValidating\r\n    );\r\n  }, [\r\n    fetchTeacher.isValidating,\r\n    fetchResp.isValidating,\r\n    fetchTimeSlot.isValidating,\r\n    fetchAllClassData.isValidating,\r\n  ]);\r\n\r\n  const hasError = useMemo(() => {\r\n    return Boolean(\r\n      fetchTeacher.error ||\r\n        fetchResp.error ||\r\n        fetchTimeSlot.error ||\r\n        fetchAllClassData.error,\r\n    );\r\n  }, [\r\n    fetchTeacher.error,\r\n    fetchResp.error,\r\n    fetchTimeSlot.error,\r\n    fetchAllClassData.error,\r\n  ]);\r\n\r\n  // ============================================================================\r\n  // RENDER\r\n  // ============================================================================\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <TimetableGridSkeleton />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (hasError) {\r\n    return (\r\n      <NetworkErrorEmptyState\r\n        onRetry={() => {\r\n          void fetchTeacher.mutate();\r\n          void fetchResp.mutate();\r\n          void fetchTimeSlot.mutate();\r\n          void fetchAllClassData.mutate();\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!currentTeacherID) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <SelectTeacher\r\n          setTeacherID={actions.setCurrentTeacherID}\r\n          currentTeacher={fetchTeacher.data}\r\n        />\r\n        <div className=\"mt-8\">\r\n          <EmptyState\r\n            icon=\"๐‘จโ€๐ซ\"\r\n            title=\"เน€เธฅเธทเธญเธเธเธฃเธนเน€เธเธทเนเธญเน€เธฃเธดเนเธกเธเธฑเธ”เธ•เธฒเธฃเธฒเธ\"\r\n            description=\"เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธเธฃเธนเธเธฒเธเธฃเธฒเธขเธเธฒเธฃเธ”เนเธฒเธเธเธเน€เธเธทเนเธญเธ”เธนเนเธฅเธฐเธเธฑเธ”เธ•เธฒเธฃเธฒเธเธชเธญเธ\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Room Selection Modal */}\r\n      {isActiveModal && (\r\n        <SelectSubjectToTimeslotModal\r\n          addSubjectToSlot={addSubjectToSlot}\r\n          cancelAddRoom={cancelAddRoom}\r\n          payload={subjectPayload!}\r\n        />\r\n      )}\r\n\r\n      {/* Page Header */}\r\n      {!!currentTeacherID && teacherData && (\r\n        <PageHeader teacherData={teacherData} />\r\n      )}\r\n\r\n      {/* Teacher Selection */}\r\n      <SelectTeacher\r\n        setTeacherID={actions.setCurrentTeacherID}\r\n        currentTeacher={fetchTeacher.data}\r\n      />\r\n\r\n      {/* Main Content - Drag & Drop Context */}\r\n      {currentTeacherID && (\r\n        <DndContext\r\n          sensors={sensors}\r\n          collisionDetection={closestCenter}\r\n          onDragStart={handleDragStart}\r\n          onDragEnd={handleDragEnd}\r\n        >\r\n          {/* Phase 2: Enhanced Searchable Subject Palette */}\r\n          {/* Issue #120: Gate rendering on data presence to prevent race condition */}\r\n          {subjectData.length > 0 && teacherData && (\r\n            <div data-testid=\"subject-palette\" data-loading=\"false\">\r\n              <SearchableSubjectPalette\r\n                respData={subjectData}\r\n                dropOutOfZone={dropOutOfZone}\r\n                clickOrDragToSelectSubject={clickOrDragToSelectSubject}\r\n                storeSelectedSubject={storeSelectedSubject ?? {}}\r\n                teacher={teacherData}\r\n                data-testid=\"subject-list\"\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Phase 2: Action Toolbar */}\r\n          <ScheduleActionToolbar\r\n            onClearDay={(day) => {\r\n              enqueueSnackbar(`เธเธตเน€เธเธญเธฃเนเธฅเนเธฒเธเธงเธฑเธเธ—เธตเน ${day} เธเธณเธฅเธฑเธเธเธฑเธ’เธเธฒ`, {\r\n                variant: \"info\",\r\n              });\r\n            }}\r\n            onClearAll={() => {\r\n              enqueueSnackbar(\"เธเธตเน€เธเธญเธฃเนเธฅเนเธฒเธเธ—เธฑเนเธเธซเธกเธ”เธเธณเธฅเธฑเธเธเธฑเธ’เธเธฒ\", {\r\n                variant: \"info\",\r\n              });\r\n            }}\r\n            onCopyDay={(src, tgt) => {\r\n              enqueueSnackbar(\r\n                `เธเธตเน€เธเธญเธฃเนเธเธฑเธ”เธฅเธญเธเธเธฒเธเธงเธฑเธเธ—เธตเน ${src} เนเธเธงเธฑเธเธ—เธตเน ${tgt} เธเธณเธฅเธฑเธเธเธฑเธ’เธเธฒ`,\r\n                { variant: \"info\" },\r\n              );\r\n            }}\r\n            onUndo={() => {\r\n              enqueueSnackbar(\"เธเธตเน€เธเธญเธฃเนเธขเนเธญเธเธเธฅเธฑเธเธเธณเธฅเธฑเธเธเธฑเธ’เธเธฒ\", { variant: \"info\" });\r\n            }}\r\n            onAutoArrange={() => {\r\n              enqueueSnackbar(\"เธเธตเน€เธเธญเธฃเนเธเธฑเธ”เธญเธฑเธ•เนเธเธกเธฑเธ•เธดเธเธณเธฅเธฑเธเธเธฑเธ’เธเธฒ\", {\r\n                variant: \"info\",\r\n              });\r\n            }}\r\n            canUndo={false}\r\n            hasChanges={false}\r\n            totalSlots={timeSlotData?.AllData?.length || 0}\r\n            filledSlots={\r\n              timeSlotData?.AllData?.filter((slot) => Boolean(slot.subject))\r\n                .length || 0\r\n            }\r\n          />\r\n\r\n          {/* Save Button */}\r\n          <div className=\"w-full flex justify-end items-center mt-3 gap-3\">\r\n            <PrimaryButton\r\n              handleClick={() => void postData()}\r\n              title={\"เธเธฑเธเธ—เธถเธเธเนเธญเธกเธนเธฅ\"}\r\n              color={\"success\"}\r\n              Icon={<SaveIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={isSaving}\r\n              data-testid=\"save-button\"\r\n            />\r\n          </div>\r\n\r\n          {/* Timetable Grid - Phase 2: Using callback adapters */}\r\n          <TimeSlot\r\n            timeSlotData={timeSlotData}\r\n            checkBreakTime={checkBreakTime}\r\n            isSelectedToAdd={isSelectedToAdd}\r\n            isSelectedToChange={isSelectedToChange}\r\n            checkRelatedYearDuringDragging={checkRelatedYearDuringDragging}\r\n            timeSlotCssClassName={timeSlotCssClassNameCallback}\r\n            storeSelectedSubject={storeSelectedSubject}\r\n            addRoomModal={addRoomModal}\r\n            changeTimeSlotSubject={changeTimeSlotSubject}\r\n            clickOrDragToChangeTimeSlot={clickOrDragToChangeTimeSlot}\r\n            isClickToChangeSubject={isClickToChangeSubject}\r\n            timeslotIDtoChange={timeslotIDtoChange}\r\n            dropOutOfZone={dropOutOfZone}\r\n            displayErrorChangeSubject={displayErrorChangeSubjectCallback}\r\n            showErrorMsgByTimeslotID={\r\n              showErrorMsgByTimeslotID &&\r\n              typeof showErrorMsgByTimeslotID === \"object\"\r\n                ? Object.keys(showErrorMsgByTimeslotID).find(\r\n                    (key) => showErrorMsgByTimeslotID[key],\r\n                  ) || \"\"\r\n                : \"\"\r\n            }\r\n            removeSubjectFromSlot={removeSubjectFromSlotCallback}\r\n            showLockDataMsgByTimeslotID={\r\n              showLockDataMsgByTimeslotID &&\r\n              typeof showLockDataMsgByTimeslotID === \"object\"\r\n                ? Object.keys(showLockDataMsgByTimeslotID).find(\r\n                    (key) => showLockDataMsgByTimeslotID[key],\r\n                  ) || \"\"\r\n                : \"\"\r\n            }\r\n            data-testid=\"timeslot-grid\"\r\n            setShowErrorMsgByTimeslotID={actions.setShowErrorMsg}\r\n            setShowLockDataMsgByTimeslotID={actions.setShowLockDataMsg}\r\n          />\r\n        </DndContext>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\component\\AddSubjectModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'searchText' is assigned a value but never used.","line":36,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":20},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\component\\AddSubjectModal.tsx:71:7\n  69 |     ) {\n  70 |       const subjects = data.data;\n> 71 |       setSubject(subjects);\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  72 |       const filterData = subjects.filter(\n  73 |         (item) =>\n  74 |           !subjectByGradeID","line":71,"column":7,"nodeType":null,"endLine":71,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data' and 'subjectByGradeID'. Either include them or remove the dependency array.","line":84,"column":6,"nodeType":"ArrayExpression","endLine":84,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [data, isValidating, subjectByGradeID]","fix":{"range":[3376,3390],"text":"[data, isValidating, subjectByGradeID]"}}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\component\\AddSubjectModal.tsx:105:5\n  103 |         !subjectList.map((item) => item.SubjectName).includes(item.SubjectName),\n  104 |     ); //R1 เธเธฑเธ R2 เธเธทเธญเนเธฃ R1 เธเธทเธญเธเธฃเธญเธเธเธฑเธเธงเธดเธเธฒเธ—เธตเนเน€เธเธขเน€เธเธดเนเธกเธญเธขเธนเนเนเธฅเนเธงเธ•เธฑเนเธเนเธ•เนเนเธฃเธ R2 เธเธทเธญเน€เธกเธทเนเธญเน€เธเธดเนเธกเธงเธดเธเธฒเนเธเนเธซเธกเนเธเนเน€เธญเธฒเธกเธฒเธเธฃเธญเธเธ”เนเธงเธข เนเธกเนเนเธซเน dropdown เธกเธตเธงเธดเธเธฒเธเนเธณเธเธฒเธเธฃเธฒเธขเธงเธดเธเธฒเธ—เธตเนเนเธชเธ”เธเธญเธขเธนเนเธเธ modal\n> 105 |     setSubjectFilter(filterDataR2);\n      |     ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  106 |     setSubject(filterDataR2);\n  107 |   }, [subjectList, currentSubject]); //useEffect เธเธตเนเธเธฐเธ—เธณเธเธฒเธเธเนเธ•เนเธญเน€เธกเธทเนเธญเธกเธตเธเธฒเธฃเน€เธเธดเนเธกเธซเธฃเธทเธญเธฅเธเธงเธดเธเธฒเธญเธฐเนเธฃเธเธฑเธเธญเธฑเธเธเธถเธ\n  108 |   const addSubjectToList = (item: SubjectAssignment) => {","line":105,"column":5,"nodeType":null,"endLine":105,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data' and 'subjectByGradeID'. Either include them or remove the dependency array.","line":107,"column":6,"nodeType":"ArrayExpression","endLine":107,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [subjectList, currentSubject, data, subjectByGradeID]","fix":{"range":[4395,4424],"text":"[subjectList, currentSubject, data, subjectByGradeID]"}}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":112,"column":64,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":112,"endColumn":66,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[4727,4729],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":123,"column":48,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":123,"endColumn":50,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[5440,5442],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '!==' and instead saw '!='.","line":126,"column":50,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":126,"endColumn":52,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"!==","actualOperator":"!="},"fix":{"range":[5544,5546],"text":"!=="},"desc":"Use '!==' instead of '!='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":168,"column":34,"nodeType":"MemberExpression","messageId":"limited","endLine":168,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":192,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8060,8063],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8060,8063],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":212,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":212,"endColumn":52}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport React, { Fragment, useEffect, useState, type JSX } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport { TbTrash } from \"react-icons/tb\";\r\nimport type { subject } from \"@/prisma/generated/client\";\r\nimport { subject_credit } from \"@/models/credit-value\";\r\nimport { SubjectCategory } from \"@/models/subject-category\";\r\nimport Loading from \"@/app/loading\";\r\nimport { useParams, useSearchParams } from \"next/navigation\";\r\nimport { subjectCreditValues } from \"@/models/credit-value\";\r\nimport useSWR from \"swr\";\r\n\r\nimport { useSemesterSync } from \"@/hooks\";\r\nimport { getSubjectsByGradeAction } from \"@/features/subject/application/actions/subject.actions\";\r\nimport type { ModalCloseHandler, InputChangeHandler } from \"@/types/events\";\r\n\r\ntype SubjectAssignment = subject & {\r\n  TeachHour?: number;\r\n  AcademicYear?: number;\r\n  Semester?: string;\r\n  GradeID?: string;\r\n  TeacherID?: number;\r\n};\r\n\r\ntype Props = {\r\n  closeModal: ModalCloseHandler;\r\n  addSubjectToClass: (subjects: SubjectAssignment[]) => void;\r\n  classRoomData: { Year: number; GradeID: string; Number: number };\r\n  currentSubject: SubjectAssignment[];\r\n  subjectByGradeID: SubjectAssignment[];\r\n};\r\n\r\nfunction AddSubjectModal(props: Props) {\r\n  const [subject, setSubject] = useState<subject[]>([]); //เน€เธเนเธเธฃเธฒเธขเธงเธดเธเธฒเธ—เธตเน fetch เธกเธฒ\r\n  const [subjectFilter, setSubjectFilter] = useState<subject[]>([]); //เธเธฃเธญเธเธฃเธฒเธขเธงเธดเธเธฒเธ—เธตเนเธเนเธเธซเธฒเน€เธเธทเนเธญเธเธณเธกเธฒเนเธชเธ”เธ\r\n  const [searchText, setSearchText] = useState<string>(\"\"); //เน€เธเนเธtextเธเนเธเธซเธฒเธฃเธฒเธขเธงเธดเธเธฒ\r\n  const [subjectList, setSubjectList] = useState<SubjectAssignment[]>([]); //เน€เธเนเธเธงเธดเธเธฒเธ—เธตเนเน€เธเธดเนเธกเนเธซเธกเน\r\n  const [currentSubject, setCurrentSubject] = useState<SubjectAssignment[]>(\r\n    props.currentSubject || [],\r\n  ); //เธฃเธฒเธขเธงเธดเธเธฒเธ—เธฑเนเธเธซเธกเธ”เธ—เธตเนเน€เธเธขเธกเธต\r\n  const [subjectByGradeID, setSubjectByGradeID] = useState<SubjectAssignment[]>(\r\n    props.subjectByGradeID || [],\r\n  ); //เธฃเธฒเธขเธงเธดเธเธฒเธเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเธชเนเธเธกเธฒ\r\n  const params = useParams();\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n\r\n  const { data, isLoading, isValidating } = useSWR(\r\n    props.classRoomData?.GradeID\r\n      ? [\"subjects-by-grade\", props.classRoomData.GradeID]\r\n      : null,\r\n    async ([, gradeId]) => {\r\n      return await getSubjectsByGradeAction({ GradeID: gradeId });\r\n    },\r\n    {\r\n      //refreshInterval: 15000,\r\n      revalidateOnMount: true,\r\n    },\r\n  ); //เน€เธฃเธตเธขเธเธเนเธญเธกเธนเธฅเธงเธดเธเธฒเธ—เธฑเนเธเธซเธกเธ”เธเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธชเนเธเธกเธฒ\r\n  const searchTeacherID = useSearchParams().get(\"TeacherID\");\r\n  useEffect(() => {\r\n    if (\r\n      !isValidating &&\r\n      data &&\r\n      \"success\" in data &&\r\n      data.success &&\r\n      data.data\r\n    ) {\r\n      const subjects = data.data;\r\n      setSubject(subjects);\r\n      const filterData = subjects.filter(\r\n        (item) =>\r\n          !subjectByGradeID\r\n            .map((item) => item.SubjectCode)\r\n            .includes(item.SubjectCode) &&\r\n          !subjectByGradeID\r\n            .map((item) => item.SubjectName)\r\n            .includes(item.SubjectName),\r\n      ); //filterData เธกเธฒเธ•เธญเธเนเธฃเธเน€เธฅเธขเธเธฐเธเธฃเธญเธเธงเธดเธเธฒเธ—เธตเนเน€เธเธขเธกเธตเนเธฅเนเธงเธญเธญเธเนเธเธเธฒเธ dropdown เนเธ”เธขเน€เธเนเธเธเธฒเธเธเธทเนเธญเธงเธดเธเธฒเนเธฅเธฐเธฃเธซเธฑเธชเธงเธดเธเธฒ\r\n      setSubject(filterData);\r\n      setSubjectFilter(filterData); //เธ—เธตเนset เธ—เธฑเนเธเธชเธญเธเธ•เธฑเธงเนเธเธฃเน€เธเธฃเธฒเธฐเธงเนเธฒเธญเธฑเธเธเธถเธเนเธงเนเนเธชเธ”เธ เธญเธฑเธเธเธถเธเนเธงเน search เธซเธฒเธเนเธญเธกเธนเธฅเนเธฅเนเธงเธเธณเธกเธฒ set เธเนเธญเธกเธนเธฅเนเธซเนเธ•เธฑเธงเนเธเธฃ subject เน€เธฃเธทเนเธญเธขเน\r\n    }\r\n  }, [isValidating]);\r\n  useEffect(() => {\r\n    //เธเธฃเธญเธเธงเธดเธเธฒเธ—เธตเนเน€เธเธขเธกเธตเธญเธขเธนเนเนเธฅเนเธงเธญเธญเธเนเธเธเธฒเธ dropdown เนเธ”เธขเน€เธเนเธเธเธฒเธเธเธทเนเธญเธงเธดเธเธฒเนเธฅเธฐเธฃเธซเธฑเธชเธงเธดเธเธฒ\r\n    if (!data || !(\"success\" in data) || !data.success || !data.data) return;\r\n    const subjects = data.data;\r\n    const filterDataR1 = subjects.filter(\r\n      (item) =>\r\n        !subjectByGradeID\r\n          .map((item) => item.SubjectCode)\r\n          .includes(item.SubjectCode) &&\r\n        !subjectByGradeID\r\n          .map((item) => item.SubjectName)\r\n          .includes(item.SubjectName),\r\n    );\r\n    const filterDataR2 = filterDataR1.filter(\r\n      (item) =>\r\n        !subjectList\r\n          .map((item) => item.SubjectCode)\r\n          .includes(item.SubjectCode) &&\r\n        !subjectList.map((item) => item.SubjectName).includes(item.SubjectName),\r\n    ); //R1 เธเธฑเธ R2 เธเธทเธญเนเธฃ R1 เธเธทเธญเธเธฃเธญเธเธเธฑเธเธงเธดเธเธฒเธ—เธตเนเน€เธเธขเน€เธเธดเนเธกเธญเธขเธนเนเนเธฅเนเธงเธ•เธฑเนเธเนเธ•เนเนเธฃเธ R2 เธเธทเธญเน€เธกเธทเนเธญเน€เธเธดเนเธกเธงเธดเธเธฒเนเธเนเธซเธกเนเธเนเน€เธญเธฒเธกเธฒเธเธฃเธญเธเธ”เนเธงเธข เนเธกเนเนเธซเน dropdown เธกเธตเธงเธดเธเธฒเธเนเธณเธเธฒเธเธฃเธฒเธขเธงเธดเธเธฒเธ—เธตเนเนเธชเธ”เธเธญเธขเธนเนเธเธ modal\r\n    setSubjectFilter(filterDataR2);\r\n    setSubject(filterDataR2);\r\n  }, [subjectList, currentSubject]); //useEffect เธเธตเนเธเธฐเธ—เธณเธเธฒเธเธเนเธ•เนเธญเน€เธกเธทเนเธญเธกเธตเธเธฒเธฃเน€เธเธดเนเธกเธซเธฃเธทเธญเธฅเธเธงเธดเธเธฒเธญเธฐเนเธฃเธเธฑเธเธญเธฑเธเธเธถเธ\r\n  const addSubjectToList = (item: SubjectAssignment) => {\r\n    setSubjectList(() => [...subjectList, item]);\r\n  };\r\n  const removeFromSubjectList = (index: number) => {\r\n    setSubjectList(() => subjectList.filter((item, ind) => ind != index));\r\n  };\r\n  const removeCurrentSubject = (subject: SubjectAssignment) => {\r\n    // เธเธฒเธฃเธฅเธเธงเธดเธเธฒเธ—เธตเนเน€เธเธขเธกเธตเธญเธขเธนเนเนเธฅเนเธงเธญเธญเธเนเธ เธ—เธณเนเธกเธ–เธถเธเธ•เนเธญเธเธ—เธณเธญเธฐเนเธฃเธเธฑเธเธ•เธฑเธงเนเธเธฃเธ•เธฑเนเธเธชเธญเธเธ•เธฑเธง??\r\n    // currentSubject เธเธฐเน€เธเนเธเธงเธดเธเธฒเธ—เธฑเนเธเธซเธกเธ”เธ•เธฑเนเธเนเธ•เนเธกเธญเธซเธเธถเนเธเธ–เธถเธเธซเธ\r\n    // subjectByGradeID เธเธฐเน€เธเนเธเธงเธดเธเธฒเธเธญเธเธกเธญเธเธฑเนเธเน\r\n    // เน€เธฃเธฒเธเธฐเนเธขเธเนเธซเน byGradeID เน€เธเนเธเธ•เธฑเธงเธเธณเธกเธฒเนเธชเธ”เธเนเธเธซเธเนเธฒเน€เธงเนเธเนเธฅเธฐ current เธเธฐเน€เธเนเธเธ•เธฑเธงเธซเธฅเธฑเธเน€เธเธทเนเธญเนเธเธญเธฑเธเน€เธ”เธ•เธเนเธญเธกเธนเธฅเธเธฑเธเธซเธเนเธฒเธกเธญเธเธซเธกเธฒเธข\r\n    // เธเธญเธเธ”เธฅเธเธงเธดเธเธฒเธเธฑเธเธเธธเธเธฑเธ เน€เธฃเธฒเธเธฐเธ—เธณเธเธฒเธฃเธซเธฒ index เน€เธเธทเนเธญเนเธเนเธฅเธเธเนเธญเธกเธนเธฅเนเธ”เธขเธ—เธตเนเธเธฐเนเธซเนเธ—เธฑเนเธเธชเธญเธเธญเธฒเธฃเนเน€เธฃเธขเนเธเธฑเนเธเธฅเธเธเนเธญเธกเธนเธฅเธเธฃเนเธญเธกเธเธฑเธเนเธฅเธฐเธชเธฑเธกเธเธฑเธเธเนเธเธฑเธเน€เธเธทเนเธญเธฅเธเธเนเธญเธกเธนเธฅเธญเธญเธเนเธ\r\n    const indexMain = currentSubject.indexOf(subject);\r\n    const indexSub = subjectByGradeID.indexOf(subject);\r\n    setCurrentSubject(() =>\r\n      currentSubject.filter((item, ind) => ind != indexMain),\r\n    );\r\n    setSubjectByGradeID(() =>\r\n      subjectByGradeID.filter((item, ind) => ind != indexSub),\r\n    );\r\n  };\r\n  const confirmToAddSubjectToClass = () => {\r\n    //check เธงเนเธฒเธ–เนเธฒเน€เธฅเธทเธญเธเธงเธดเธเธฒเธเธฃเธเนเธฅเนเธงเนเธซเนเน€เธเธดเนเธกเธฅเธเธเธฑเนเธเน€เธฃเธตเธขเธ\r\n    const mergeCurrentAndNewSubjects = [...currentSubject, ...subjectList];\r\n    if (!findNullData()) {\r\n      props.addSubjectToClass(mergeCurrentAndNewSubjects);\r\n      props.closeModal();\r\n    }\r\n  };\r\n  const findNullData = (): boolean => {\r\n    const findNull = subjectList.map((item) => item.SubjectCode);\r\n    return findNull.includes(\"\");\r\n  };\r\n  const searchName = (name: string) => {\r\n    //เธญเธฑเธเธเธตเนเนเธเนเธ—เธ”เธชเธญเธเน€เธ—เนเธฒเธเธฑเนเธ เธขเธฑเธเธเธเธซเธฒเนเธ”เนเนเธกเนเธชเธธเธ” เน€เธเนเธ เธเนเธเธซเธฒเนเธเธเธ•เธฑเธ” case sensitive เธขเธฑเธเนเธกเนเนเธ”เน\r\n    const res = subjectFilter.filter((item) =>\r\n      `${item.SubjectCode} - ${item.SubjectName}`.match(name),\r\n    );\r\n    setSubject(res);\r\n  };\r\n  const searchHandle: InputChangeHandler = (event) => {\r\n    const text = event.target.value;\r\n    setSearchText(text);\r\n    searchName(text);\r\n  };\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <Loading />\r\n      ) : (\r\n        <div\r\n          style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n          className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n        >\r\n          <div className=\"flex flex-col w-[550px] h-auto p-[50px] gap-8 bg-white rounded\">\r\n            {/* Content */}\r\n            <div className=\"flex flex-col w-full gap-3 h-auto\">\r\n              <div className=\"flex justify-between\">\r\n                <p\r\n                  className=\"text-lg select-none\"\r\n                  onClick={() => console.log(subjectList)}\r\n                >\r\n                  เน€เธฅเธทเธญเธเธงเธดเธเธฒเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธ\r\n                </p>\r\n                <AiOutlineClose\r\n                  className=\"cursor-pointer\"\r\n                  onClick={props.closeModal}\r\n                />\r\n              </div>\r\n              <p className=\"text-xs text-gray-300\">\r\n                เน€เธฅเธทเธญเธเธงเธดเธเธฒเน€เธฃเธตเธขเธเธ—เธตเนเธ•เนเธญเธเธชเธญเธเนเธเธซเนเธญเธ เธก.{props.classRoomData.Year}/\r\n                {props.classRoomData.GradeID.toString()[2]}\r\n              </p>\r\n            </div>\r\n            {/* เธเธ”เน€เธเธทเนเธญเน€เธเธดเนเธกเธงเธดเธเธฒ */}\r\n            <div className=\"flex flex-col gap-3\">\r\n              <u\r\n                className=\"text-sm text-blue-500 cursor-pointer\"\r\n                onClick={() =>\r\n                  addSubjectToList(\r\n                    //Add default value to array\r\n                    {\r\n                      AcademicYear: parseInt(academicYear),\r\n                      GradeID: props.classRoomData.GradeID,\r\n                      Semester: `SEMESTER_${semester}` as any,\r\n                      SubjectCode: \"\",\r\n                      SubjectName: \"\",\r\n                      Credit: \"CREDIT_10\" as subject_credit,\r\n                      TeacherID: searchTeacherID\r\n                        ? parseInt(searchTeacherID)\r\n                        : undefined,\r\n                      Category: SubjectCategory.CORE,\r\n                      LearningArea: null,\r\n                      ActivityType: null,\r\n                      IsGraded: true,\r\n                      Description: \"\",\r\n                    },\r\n                  )\r\n                }\r\n              >\r\n                เน€เธเธดเนเธกเธงเธดเธเธฒ\r\n              </u>\r\n            </div>\r\n            <div className=\"flex flex-col gap-3\">\r\n              {subjectByGradeID.map((subject, index) => (\r\n                <Fragment\r\n                  key={`current${subject.SubjectCode}${subject.Semester}${subject.AcademicYear}`}\r\n                >\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <div className=\"flex w-[250px] h-fit p-3 items-center border rounded bg-gray-100\">\r\n                      <p className=\"text-sm text-gray-500 select-none\">\r\n                        {subject.SubjectCode} - {subject.SubjectName}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                      <p className=\"text-sm text-gray-500\">\r\n                        เธเธณเธเธงเธ{\" \"}\r\n                        {subject.Credit\r\n                          ? (subjectCreditValues[subject.Credit] ?? 0) * 2\r\n                          : 0}{\" \"}\r\n                        เธเธฒเธ\r\n                      </p>\r\n                      <TbTrash\r\n                        onClick={() => removeCurrentSubject(subject)}\r\n                        size={20}\r\n                        className=\"text-red-500 cursor-pointer\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </Fragment>\r\n              ))}\r\n              {subjectList.map((item, index) => (\r\n                <Fragment key={`${item.SubjectCode} ${index}`}>\r\n                  {/* List เธงเธดเธเธฒเธ•เนเธฒเธเน */}\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <Dropdown\r\n                      data={subject}\r\n                      renderItem={({\r\n                        data,\r\n                      }: {\r\n                        data: unknown;\r\n                      }): JSX.Element => {\r\n                        const subjectData = data as subject;\r\n                        return (\r\n                          <li className=\"text-sm\">\r\n                            {subjectData.SubjectCode} -{\" \"}\r\n                            {subjectData.SubjectName}\r\n                          </li>\r\n                        );\r\n                      }}\r\n                      width={250}\r\n                      height={\"fit-content\"}\r\n                      currentValue={`${\r\n                        item.SubjectCode === \"\"\r\n                          ? \"\"\r\n                          : `${item.SubjectCode} - ${item.SubjectName}`\r\n                      }`}\r\n                      placeHolder=\"เน€เธฅเธทเธญเธเธงเธดเธเธฒ\"\r\n                      handleChange={(item: unknown) => {\r\n                        const subjectItem = item as subject;\r\n                        setSubjectList((prevList) =>\r\n                          prevList.map((listItem, ind) =>\r\n                            ind === index\r\n                              ? {\r\n                                  ...listItem,\r\n                                  SubjectCode: subjectItem.SubjectCode,\r\n                                  SubjectName: subjectItem.SubjectName,\r\n                                  Credit: subjectItem.Credit,\r\n                                }\r\n                              : listItem,\r\n                          ),\r\n                        );\r\n                      }}\r\n                      useSearchBar={true}\r\n                      searchFunction={searchHandle}\r\n                    />\r\n                    <div className=\"flex justify-between gap-5 items-center\">\r\n                      <div className=\"flex gap-3\">\r\n                        <p className=\"text-sm text-gray-500\">\r\n                          เธเธณเธเธงเธ{\" \"}\r\n                          {item.Credit\r\n                            ? (subjectCreditValues[item.Credit] ?? 0) * 2\r\n                            : \"0\"}{\" \"}\r\n                          เธเธฒเธ\r\n                        </p>\r\n                        <TbTrash\r\n                          onClick={() => removeFromSubjectList(index)}\r\n                          size={20}\r\n                          className=\"text-red-500 cursor-pointer\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Fragment>\r\n              ))}\r\n            </div>\r\n            <span className=\"w-full flex justify-between items-center\">\r\n              {findNullData() ? (\r\n                <p className=\"text-red-500 text-sm\">\r\n                  *เนเธเธฃเธ”เน€เธฅเธทเธญเธเธเนเธญเธกเธนเธฅเนเธซเนเธเธฃเธเธ–เนเธงเธ\r\n                </p>\r\n              ) : (\r\n                <p></p>\r\n              )}\r\n              <button\r\n                onClick={() => confirmToAddSubjectToClass()}\r\n                className=\" w-[100px] bg-green-100 hover:bg-green-200 duration-500 text-green-600 py-2 px-4 rounded\"\r\n              >\r\n                เธขเธทเธเธขเธฑเธ\r\n              </button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddSubjectModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\component\\QuickAssignmentPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\component\\SelectClassRoomModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useTeachers' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'gradelevel' is defined but never used.","line":4,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":32,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mutate' is assigned a value but never used.","line":32,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":41},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":42,"column":56,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":42,"endColumn":58,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[1252,1254],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":43,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":74},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\component\\SelectClassRoomModal.tsx:52:5\n  50 |     }); //เธ•เธฃเธเธเธตเนเธเธฐ Map เธเนเธญเธกเธนเธฅเธ”เนเธงเธขเธเธฒเธฃเน€เธเนเธเธงเนเธฒ เธเนเธญเธกเธนเธฅเธ—เธตเนเธชเนเธเธกเธฒเธเธฑเนเธเน€เธเธขเธกเธตเนเธฅเนเธงเธซเธฃเธทเธญเธขเธฑเธ เธ–เนเธฒเธกเธฒเนเธฅเนเธงเธเธฐเนเธชเน isSelected = true เธ–เนเธฒเนเธกเนเน€เธเธขเธกเธตเธเน false\n  51 |     //เธ—เธณเน€เธเธทเนเธญเธญเธฐเนเธฃ ? เน€เธเธทเนเธญเธ•เธญเธเธเธ”เธชเธฅเธฑเธเน€เธฅเธทเธญเธเธซเนเธญเธเน€เธฃเธตเธขเธเนเธเธกเธฒ เธเนเธญเธกเธนเธฅเธเธญเธเธงเธดเธเธฒเธ—เธตเนเธ•เธดเธ”เธญเธขเธนเนเธเธฑเธเธซเนเธญเธเน€เธฃเธตเธขเธเธ—เธตเนเน€เธเธขเน€เธฅเธทเธญเธเนเธฅเนเธงเธเธฐเนเธ”เนเนเธกเนเธซเธฒเธขเนเธเนเธซเธ เธเธญเธเน€เธเนเธฒเน€เธเธตเนเธข เธ–เนเธฒเน€เธฃเธฒเธเธ”เธฅเธเธซเนเธญเธเน€เธฃเธตเธขเธเนเธฅเนเธงเน€เธเธดเนเธกเธเธฅเธฑเธเธกเธฒเนเธซเธกเน เธเนเธญเธกเธนเธฅเธงเธดเธเธฒเนเธเธเธฑเนเธเธเธฐเธซเธฒเธขเนเธ\n> 52 |     setClassRoomList(mapClassRoomData); //เธเธณเธเนเธญเธกเธนเธฅเธกเธฒ set state\n     |     ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  53 |   }, [isLoading]);\n  54 |   const addSelectedList = (item: ClassRoomItem) => {\n  55 |     setClassRoomList(() =>","line":52,"column":5,"nodeType":null,"endLine":52,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'classList', 'data', and 'year'. Either include them or remove the dependency array.","line":53,"column":6,"nodeType":"ArrayExpression","endLine":53,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [classList, data, isLoading, year]","fix":{"range":[2209,2220],"text":"[classList, data, isLoading, year]"}}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":57,"column":27,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":57,"endColumn":29,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2372,2374],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":66,"column":27,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":66,"endColumn":29,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2752,2754],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":88,"column":21,"nodeType":"MemberExpression","messageId":"limited","endLine":88,"endColumn":32}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTeachers } from \"@/hooks\";\r\nimport MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport type { gradelevel } from \"@/prisma/generated/client\";\r\n\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport { useGradeLevels } from \"@/hooks\";\r\nimport Loading from \"@/app/loading\";\r\n\r\nimport type { ModalCloseHandler } from \"@/types/events\";\r\n\r\ninterface ClassRoomItem {\r\n  GradeID: string;\r\n  isSelected?: boolean;\r\n  SubjectCode?: string;\r\n  SubjectName?: string;\r\n  TeachHour?: number;\r\n}\r\n\r\ntype props = {\r\n  closeModal: ModalCloseHandler;\r\n  classList: ClassRoomItem[];\r\n  confirmChange: (selectedClasses: ClassRoomItem[], year: number) => void;\r\n  year: number;\r\n};\r\nfunction SelectClassRoomModal({\r\n  closeModal,\r\n  classList,\r\n  confirmChange,\r\n  year,\r\n}: props) {\r\n  const { data, isLoading, error, mutate } = useGradeLevels();\r\n  const [classRoomList, setClassRoomList] = useState<ClassRoomItem[]>([]);\r\n  useEffect(() => {\r\n    // เธ•เธฑเธงเธญเธขเนเธฒเธเธเนเธญเธกเธนเธฅเนเธเธเธเธฃเนเธฒเธงเน //\r\n    // {GradeID : 101}\r\n    // {GradeID : 201}\r\n    // {GradeID : 301}\r\n    // {GradeID : 401}\r\n    // {GradeID : 501}\r\n    // {GradeID : 601}\r\n    const filterYear = data.filter((item) => item.Year == year); //filter เน€เธญเธฒเธเธฑเนเธเธเธตเธ—เธตเนเน€เธฅเธทเธญเธ เน€เธเนเธ เธเธ”เธเธญเธเธกเธญเธซเธเธถเนเธ เธเนเธเธฐเน€เธญเธฒเนเธเนเธกเธญเธซเธเธถเนเธเธญเธญเธเธกเธฒ เธเนเธเธฐเนเธ”เนเนเธเน {GradeID: 101}\r\n    const mapClassRoomData: ClassRoomItem[] = filterYear.map((item, index) => {\r\n      const existingClass = classList.find(\r\n        (gid) => item.GradeID === gid.GradeID,\r\n      );\r\n      return existingClass\r\n        ? { ...existingClass, isSelected: true } //เธ–เนเธฒเธกเธต เธเนเนเธชเน isSelected: true เน€เธเธทเนเธญเธเนเธเธเธญเธเธงเนเธฒเธงเธดเธเธฒเธเธตเนเนเธ”เนเน€เธเธขเน€เธฅเธทเธญเธเนเธงเนเธเนเธญเธเธซเธเนเธฒเนเธฅเนเธง\r\n        : ({ GradeID: item.GradeID || \"\", isSelected: false } as ClassRoomItem); //เธ–เนเธฒเนเธกเน เธเน map เธเธถเนเธเธกเธฒเนเธซเนเนเธซเธกเน\r\n    }); //เธ•เธฃเธเธเธตเนเธเธฐ Map เธเนเธญเธกเธนเธฅเธ”เนเธงเธขเธเธฒเธฃเน€เธเนเธเธงเนเธฒ เธเนเธญเธกเธนเธฅเธ—เธตเนเธชเนเธเธกเธฒเธเธฑเนเธเน€เธเธขเธกเธตเนเธฅเนเธงเธซเธฃเธทเธญเธขเธฑเธ เธ–เนเธฒเธกเธฒเนเธฅเนเธงเธเธฐเนเธชเน isSelected = true เธ–เนเธฒเนเธกเนเน€เธเธขเธกเธตเธเน false\r\n    //เธ—เธณเน€เธเธทเนเธญเธญเธฐเนเธฃ ? เน€เธเธทเนเธญเธ•เธญเธเธเธ”เธชเธฅเธฑเธเน€เธฅเธทเธญเธเธซเนเธญเธเน€เธฃเธตเธขเธเนเธเธกเธฒ เธเนเธญเธกเธนเธฅเธเธญเธเธงเธดเธเธฒเธ—เธตเนเธ•เธดเธ”เธญเธขเธนเนเธเธฑเธเธซเนเธญเธเน€เธฃเธตเธขเธเธ—เธตเนเน€เธเธขเน€เธฅเธทเธญเธเนเธฅเนเธงเธเธฐเนเธ”เนเนเธกเนเธซเธฒเธขเนเธเนเธซเธ เธเธญเธเน€เธเนเธฒเน€เธเธตเนเธข เธ–เนเธฒเน€เธฃเธฒเธเธ”เธฅเธเธซเนเธญเธเน€เธฃเธตเธขเธเนเธฅเนเธงเน€เธเธดเนเธกเธเธฅเธฑเธเธกเธฒเนเธซเธกเน เธเนเธญเธกเธนเธฅเธงเธดเธเธฒเนเธเธเธฑเนเธเธเธฐเธซเธฒเธขเนเธ\r\n    setClassRoomList(mapClassRoomData); //เธเธณเธเนเธญเธกเธนเธฅเธกเธฒ set state\r\n  }, [isLoading]);\r\n  const addSelectedList = (item: ClassRoomItem) => {\r\n    setClassRoomList(() =>\r\n      classRoomList.map((classRoom) =>\r\n        classRoom.GradeID == item.GradeID\r\n          ? { ...classRoom, isSelected: true }\r\n          : classRoom,\r\n      ),\r\n    ); //เธ–เนเธฒเธกเธตเธเธฒเธฃเธเธ” Add เธซเนเธญเธเน€เธฃเธตเธขเธเน€เธเนเธฒเธกเธฒเนเธซเธกเน เธเนเธเธฐเน€เธเธฅเธตเนเธขเธเนเธเน boolean เธเธญเธ isSelected เธ”เนเธงเธขเธเธฒเธฃเน€เธเนเธเธงเนเธฒ GradeID เนเธซเธเธ•เนเธญเธเธเธฒเธฃเน€เธเธฅเธตเนเธขเธ\r\n  };\r\n  const removeSelectedList = (item: ClassRoomItem) => {\r\n    setClassRoomList(() =>\r\n      classRoomList.map((classRoom) =>\r\n        classRoom.GradeID == item.GradeID\r\n          ? { ...classRoom, isSelected: false }\r\n          : classRoom,\r\n      ),\r\n    ); //เน€เธซเธกเธทเธญเธเธเธฑเธเธเธฑเธเธเนเธเธฑเนเธ addSelectedlist\r\n  };\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <Loading />\r\n      ) : (\r\n        <div\r\n          style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n          className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n        >\r\n          <div className=\"flex flex-col w-[550px] h-auto p-[50px] gap-8 bg-white rounded\">\r\n            {/* Content */}\r\n            <div className=\"flex flex-col w-full gap-3 h-auto\">\r\n              <div className=\"flex justify-between\">\r\n                <p\r\n                  className=\"text-lg select-none\"\r\n                  onClick={() =>\r\n                    console.log(\r\n                      classRoomList\r\n                        .filter((item) => item.isSelected)\r\n                        .map((classRoom) => ({\r\n                          GradeID: classRoom.GradeID,\r\n                        })),\r\n                    )\r\n                  }\r\n                >\r\n                  เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธ\r\n                </p>\r\n                <AiOutlineClose\r\n                  className=\"cursor-pointer\"\r\n                  onClick={closeModal}\r\n                />\r\n              </div>\r\n              <p className=\"text-xs text-gray-300\">\r\n                เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเธเธญเธเธเธธเธ“เธเธฃเธนเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธเนเธเธซเนเธญเธเธเธฑเนเธเน\r\n              </p>\r\n            </div>\r\n            {/* เธฃเธฐเธ”เธฑเธเธเธฑเนเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธฅเนเธง */}\r\n            <div className=\"flex flex-col gap-3\">\r\n              <p className=\"text-sm text-gray-500\">\r\n                เธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธฅเนเธง (เธก.{year})\r\n              </p>\r\n              <div\r\n                className={`flex items-center flex-wrap gap-4 w-full ${\r\n                  classRoomList.filter((item) => item.isSelected).length === 0\r\n                    ? \"h-[45px]\"\r\n                    : null\r\n                } border border-gray-300 px-3 py-3 rounded`}\r\n              >\r\n                {classRoomList.map((classRoom) => (\r\n                  <Fragment key={`is-selected${classRoom.GradeID}`}>\r\n                    {classRoom.isSelected ? (\r\n                      <MiniButton\r\n                        handleClick={() => removeSelectedList(classRoom)}\r\n                        width={60}\r\n                        height={25}\r\n                        buttonColor=\"#fff\"\r\n                        titleColor=\"#000\"\r\n                        border={true}\r\n                        borderColor=\"#c7c7c7\"\r\n                        isSelected={true}\r\n                        hoverable={true}\r\n                        title={`เธก.${classRoom.GradeID.substring(\r\n                          0,\r\n                          1,\r\n                        )}/${classRoom.GradeID.substring(2)}`}\r\n                      />\r\n                    ) : null}\r\n                  </Fragment>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            {/* เน€เธฅเธทเธญเธเธฃเธฐเธ”เธฑเธเธเธฑเนเธเธเธฒเธเธ—เธตเนเธเธตเน */}\r\n            <div className=\"flex flex-col gap-3\">\r\n              <p className=\"text-sm text-gray-500\">\r\n                เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเนเธ”เนเธเธฒเธเธ—เธตเนเธเธตเน (เธก.{year})\r\n              </p>\r\n              <div\r\n                className={`flex items-center flex-wrap gap-4 w-full ${\r\n                  classRoomList.filter((item) => !item.isSelected).length === 0\r\n                    ? \"h-[45px]\"\r\n                    : null\r\n                } border border-gray-300 px-3 py-3 rounded`}\r\n              >\r\n                {classRoomList.map((classRoom) => (\r\n                  <Fragment key={`not-selected-${classRoom.GradeID}`}>\r\n                    {!classRoom.isSelected ? (\r\n                      <MiniButton\r\n                        handleClick={() => addSelectedList(classRoom)}\r\n                        width={60}\r\n                        height={25}\r\n                        buttonColor=\"#fff\"\r\n                        titleColor=\"#000\"\r\n                        border={true}\r\n                        borderColor=\"#c7c7c7\"\r\n                        isSelected={false}\r\n                        hoverable={true}\r\n                        title={`เธก.${classRoom.GradeID.substring(\r\n                          0,\r\n                          1,\r\n                        )}/${classRoom.GradeID.substring(2)}`}\r\n                      />\r\n                    ) : null}\r\n                  </Fragment>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            <span className=\"w-full flex justify-end\">\r\n              <button\r\n                onClick={() =>\r\n                  confirmChange(\r\n                    classRoomList\r\n                      .filter((item) => item.isSelected)\r\n                      .map((classRoom) => ({\r\n                        GradeID: classRoom.GradeID,\r\n                      })),\r\n                    year,\r\n                  )\r\n                }\r\n                className=\" w-[100px] bg-green-100 hover:bg-green-200 duration-500 text-green-600 py-2 px-4 rounded text-sm\"\r\n              >\r\n                เธขเธทเธเธขเธฑเธ\r\n              </button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectClassRoomModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\component\\ShowTeacherData.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'InputAdornment' is defined but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SearchIcon' is defined but never used.","line":36,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":18},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\component\\ShowTeacherData.tsx:84:7\n  82 |         sumTeachHour += item.TeachHour;\n  83 |       });\n> 84 |       setTeachHour(sumTeachHour);\n     |       ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  85 |     }\n  86 |   }, [responsibilityData.data]);\n  87 |","line":84,"column":7,"nodeType":null,"endLine":84,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useEffect, useState, useMemo } from \"react\";\r\nimport { useParams, usePathname, useRouter } from \"next/navigation\";\r\nimport { useTeachers, useSubjects, useGradeLevels } from \"@/hooks\";\r\nimport type {\r\n  teacher,\r\n  teachers_responsibility,\r\n} from \"@/prisma/generated/client\";\r\nimport useSWR from \"swr\";\r\nimport { getAssignmentsAction } from \"@/features/assign/application/actions/assign.actions\";\r\nimport QuickAssignmentPanel from \"./QuickAssignmentPanel\";\r\n\r\n// Type for responsibility data with subject relation\r\ninterface ResponsibilityWithSubject extends teachers_responsibility {\r\n  subject?: {\r\n    Category?: string;\r\n    SubjectName?: string;\r\n  };\r\n  ClassID?: number;\r\n}\r\nimport Loading from \"@/app/loading\";\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n  Autocomplete,\r\n  TextField,\r\n  InputAdornment,\r\n  Avatar,\r\n  Chip,\r\n  Divider,\r\n  Card,\r\n  LinearProgress,\r\n  Button,\r\n} from \"@mui/material\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport PersonSearchIcon from \"@mui/icons-material/PersonSearch\";\r\nimport SchoolIcon from \"@mui/icons-material/School\";\r\nimport ScheduleIcon from \"@mui/icons-material/Schedule\";\r\nimport SubjectIcon from \"@mui/icons-material/MenuBook\";\r\nimport ClassIcon from \"@mui/icons-material/Class\";\r\nimport TrendingUpIcon from \"@mui/icons-material/TrendingUp\";\r\nimport AssignmentIcon from \"@mui/icons-material/Assignment\";\r\nimport ArrowForwardIcon from \"@mui/icons-material/ArrowForward\";\r\nimport { useSemesterSync } from \"@/hooks\";\r\n\r\nfunction ShowTeacherData() {\r\n  const router = useRouter();\r\n  const pathName = usePathname();\r\n  const params = useParams();\r\n\r\n  // Sync URL params with global store\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n\r\n  const [teacher, setTeacher] = useState<teacher | null>(null);\r\n  const teacherData = useTeachers();\r\n  const subjectsData = useSubjects();\r\n  const gradesData = useGradeLevels();\r\n\r\n  // Fetch teacher assignments using Server Action\r\n  const responsibilityData = useSWR(\r\n    teacher && semester && academicYear\r\n      ? [\"assignments\", teacher.TeacherID, semester, academicYear]\r\n      : null,\r\n    async ([, teacherId, sem, year]) => {\r\n      return await getAssignmentsAction({\r\n        TeacherID: teacherId,\r\n        Semester: `SEMESTER_${sem}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        AcademicYear: parseInt(year),\r\n      });\r\n    },\r\n  );\r\n\r\n  const [teachHour, setTeachHour] = useState<number>(0);\r\n  useEffect(() => {\r\n    if (responsibilityData.data) {\r\n      let sumTeachHour = 0;\r\n      const data = responsibilityData.data as ResponsibilityWithSubject[];\r\n      data.forEach((item) => {\r\n        sumTeachHour += item.TeachHour;\r\n      });\r\n      setTeachHour(sumTeachHour);\r\n    }\r\n  }, [responsibilityData.data]);\r\n\r\n  // Calculate subject statistics\r\n  const subjectStats = useMemo(() => {\r\n    const data = responsibilityData.data as\r\n      | ResponsibilityWithSubject[]\r\n      | undefined;\r\n    if (!data || data.length === 0) {\r\n      return {\r\n        totalSubjects: 0,\r\n        coreSubjects: 0,\r\n        additionalSubjects: 0,\r\n        activitySubjects: 0,\r\n        uniqueClasses: 0,\r\n      };\r\n    }\r\n\r\n    const uniqueClasses = new Set(\r\n      data.map((item) => item.ClassID).filter((id): id is number => !!id),\r\n    );\r\n\r\n    return {\r\n      totalSubjects: data.length,\r\n      coreSubjects: data.filter((item) => item.subject?.Category === \"CORE\")\r\n        .length,\r\n      additionalSubjects: data.filter(\r\n        (item) => item.subject?.Category === \"ADDITIONAL\",\r\n      ).length,\r\n      activitySubjects: data.filter(\r\n        (item) => item.subject?.Category === \"ACTIVITY\",\r\n      ).length,\r\n      uniqueClasses: uniqueClasses.size,\r\n    };\r\n  }, [responsibilityData.data]);\r\n\r\n  if (teacherData.isLoading) {\r\n    return <Loading />;\r\n  }\r\n\r\n  // Modern Teacher Selection - MUI 7 TypeScript inference limitation with nested Autocomplete (Known Issue #59)\r\n  return (\r\n    <Box\r\n      component=\"div\"\r\n      sx={{ display: \"flex\", flexDirection: \"column\", gap: 3 }}\r\n    >\r\n      <Paper sx={{ p: 3 }}>\r\n        <Box\r\n          component=\"div\"\r\n          sx={{ display: \"flex\", alignItems: \"center\", gap: 2, mb: 2 }}\r\n        >\r\n          <PersonSearchIcon color=\"primary\" />\r\n          <Typography variant=\"h6\">เน€เธฅเธทเธญเธเธเธฃเธนเธเธนเนเธชเธญเธ</Typography>\r\n        </Box>\r\n        <Autocomplete<teacher, false, false, false>\r\n          options={teacherData.data}\r\n          value={teacher}\r\n          onChange={(_event, newValue) => {\r\n            setTeacher(newValue);\r\n          }}\r\n          getOptionLabel={(option) => `${option.Firstname} ${option.Lastname}`}\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              label=\"เธเนเธเธซเธฒเธเธฃเธนเธเธนเนเธชเธญเธ\"\r\n              placeholder=\"เธเธดเธกเธเนเธเธทเนเธญ เธเธฒเธกเธชเธเธธเธฅ เธซเธฃเธทเธญเธ เธฒเธเธงเธดเธเธฒ\"\r\n            />\r\n          )}\r\n          renderOption={(props, option): React.ReactElement => {\r\n            const { key, ...restProps } = props;\r\n            return (\r\n              <li\r\n                key={key}\r\n                {...restProps}\r\n                style={{ display: \"flex\", gap: \"16px\", alignItems: \"center\" }}\r\n              >\r\n                <Avatar\r\n                  sx={{\r\n                    bgcolor: \"primary.main\",\r\n                    width: 40,\r\n                    height: 40,\r\n                  }}\r\n                >\r\n                  {option.Firstname?.[0] || \"\"}\r\n                  {option.Lastname?.[0] || \"\"}\r\n                </Avatar>\r\n                <Box component=\"div\" sx={{ flexGrow: 1 }}>\r\n                  <Typography variant=\"body1\">\r\n                    {option.Prefix} {option.Firstname} {option.Lastname}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    {option.Department}\r\n                  </Typography>\r\n                </Box>\r\n              </li>\r\n            );\r\n          }}\r\n          filterOptions={(options, { inputValue }) => {\r\n            if (!inputValue) return options;\r\n            const searchLower = inputValue.toLowerCase();\r\n            return options.filter((option) => {\r\n              const searchStr =\r\n                `${option.Firstname} ${option.Lastname} ${option.Department}`.toLowerCase();\r\n              return searchStr.includes(searchLower);\r\n            });\r\n          }}\r\n          loading={teacherData.isLoading}\r\n          noOptionsText=\"เนเธกเนเธเธเธเนเธญเธกเธนเธฅเธเธฃเธนเธเธนเนเธชเธญเธ\"\r\n          sx={{ width: \"100%\" }}\r\n        />\r\n      </Paper>\r\n\r\n      {\r\n        (teacher && responsibilityData.data && (\r\n          <>\r\n            <Paper sx={{ p: 3 }}>\r\n              <Box\r\n                component=\"div\"\r\n                sx={{ display: \"flex\", alignItems: \"center\", gap: 2, mb: 3 }}\r\n              >\r\n                <Avatar\r\n                  sx={{\r\n                    bgcolor: \"primary.main\",\r\n                    width: 56,\r\n                    height: 56,\r\n                    fontSize: \"1.5rem\",\r\n                  }}\r\n                >\r\n                  {teacher.Firstname?.[0] || \"\"}\r\n                  {teacher.Lastname?.[0] || \"\"}\r\n                </Avatar>\r\n                <Box component=\"div\" sx={{ flexGrow: 1 }}>\r\n                  <Typography variant=\"h6\">\r\n                    {teacher.Prefix} {teacher.Firstname} {teacher.Lastname}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    {teacher.Department}\r\n                  </Typography>\r\n                </Box>\r\n                <Chip\r\n                  icon={<SchoolIcon />}\r\n                  label={`${teachHour} เธเธฒเธ/เธชเธฑเธเธ”เธฒเธซเน`}\r\n                  color={\r\n                    teachHour === 0\r\n                      ? \"default\"\r\n                      : teachHour > 25\r\n                        ? \"error\"\r\n                        : teachHour > 20\r\n                          ? \"warning\"\r\n                          : \"success\"\r\n                  }\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n\r\n              <Divider sx={{ my: 2 }} />\r\n\r\n              {/* Statistics Grid */}\r\n              <Box\r\n                sx={{\r\n                  display: \"grid\",\r\n                  gridTemplateColumns: {\r\n                    xs: \"1fr\",\r\n                    sm: \"1fr 1fr\",\r\n                    md: \"repeat(4, 1fr)\",\r\n                  },\r\n                  gap: 2,\r\n                }}\r\n              >\r\n                {/* Total Teaching Hours */}\r\n                <Card\r\n                  variant=\"outlined\"\r\n                  sx={{\r\n                    p: 2,\r\n                    textAlign: \"center\",\r\n                    bgcolor: \"primary.lighter\",\r\n                    borderColor: \"primary.main\",\r\n                  }}\r\n                >\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                      mb: 1,\r\n                    }}\r\n                  >\r\n                    <ScheduleIcon color=\"primary\" sx={{ mr: 1 }} />\r\n                    <Typography variant=\"h4\" color=\"primary.main\">\r\n                      {teachHour}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    เธเธฒเธเธชเธญเธเธฃเธงเธก/เธชเธฑเธเธ”เธฒเธซเน\r\n                  </Typography>\r\n                  <LinearProgress\r\n                    variant=\"determinate\"\r\n                    value={Math.min((teachHour / 25) * 100, 100)}\r\n                    sx={{ mt: 1, height: 6, borderRadius: 3 }}\r\n                    color={\r\n                      teachHour > 25\r\n                        ? \"error\"\r\n                        : teachHour > 20\r\n                          ? \"warning\"\r\n                          : \"success\"\r\n                    }\r\n                  />\r\n                  <Typography\r\n                    variant=\"caption\"\r\n                    color=\"text.secondary\"\r\n                    sx={{ mt: 0.5, display: \"block\" }}\r\n                  >\r\n                    เน€เธเนเธฒเธซเธกเธฒเธข: 20-25 เธเธฒเธ\r\n                  </Typography>\r\n                </Card>\r\n\r\n                {/* Total Subjects */}\r\n                <Card variant=\"outlined\" sx={{ p: 2, textAlign: \"center\" }}>\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                      mb: 1,\r\n                    }}\r\n                  >\r\n                    <SubjectIcon color=\"action\" sx={{ mr: 1 }} />\r\n                    <Typography variant=\"h4\" color=\"text.primary\">\r\n                      {subjectStats.totalSubjects}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    เธงเธดเธเธฒเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธ\r\n                  </Typography>\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      gap: 1,\r\n                      mt: 1,\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    {subjectStats.coreSubjects > 0 && (\r\n                      <Chip\r\n                        size=\"small\"\r\n                        label={`เธซเธฅเธฑเธ ${subjectStats.coreSubjects}`}\r\n                        color=\"primary\"\r\n                        variant=\"outlined\"\r\n                      />\r\n                    )}\r\n                    {subjectStats.additionalSubjects > 0 && (\r\n                      <Chip\r\n                        size=\"small\"\r\n                        label={`เน€เธเธดเนเธกเน€เธ•เธดเธก ${subjectStats.additionalSubjects}`}\r\n                        color=\"info\"\r\n                        variant=\"outlined\"\r\n                      />\r\n                    )}\r\n                  </Box>\r\n                </Card>\r\n\r\n                {/* Classes Taught */}\r\n                <Card variant=\"outlined\" sx={{ p: 2, textAlign: \"center\" }}>\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                      mb: 1,\r\n                    }}\r\n                  >\r\n                    <ClassIcon color=\"action\" sx={{ mr: 1 }} />\r\n                    <Typography variant=\"h4\" color=\"text.primary\">\r\n                      {subjectStats.uniqueClasses}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    เธเธณเธเธงเธเธซเนเธญเธเน€เธฃเธตเธขเธ\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"caption\"\r\n                    color=\"text.secondary\"\r\n                    sx={{ mt: 1, display: \"block\" }}\r\n                  >\r\n                    {subjectStats.uniqueClasses > 8\r\n                      ? \"โ ๏ธ เธชเธญเธเธซเธฅเธฒเธขเธซเนเธญเธ\"\r\n                      : \"โ“ เน€เธซเธกเธฒเธฐเธชเธก\"}\r\n                  </Typography>\r\n                </Card>\r\n\r\n                {/* Average Hours per Subject */}\r\n                <Card variant=\"outlined\" sx={{ p: 2, textAlign: \"center\" }}>\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                      mb: 1,\r\n                    }}\r\n                  >\r\n                    <TrendingUpIcon color=\"action\" sx={{ mr: 1 }} />\r\n                    <Typography variant=\"h4\" color=\"text.primary\">\r\n                      {subjectStats.totalSubjects > 0\r\n                        ? (teachHour / subjectStats.totalSubjects).toFixed(1)\r\n                        : \"0\"}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    เธเธฒเธเน€เธเธฅเธตเนเธข/เธงเธดเธเธฒ\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"caption\"\r\n                    color=\"text.secondary\"\r\n                    sx={{ mt: 1, display: \"block\" }}\r\n                  >\r\n                    เธเธฃเธฐเธเธฒเธขเธ เธฒเธฃเธฐเธเธฒเธ\r\n                  </Typography>\r\n                </Card>\r\n              </Box>\r\n            </Paper>\r\n\r\n            {/* Quick Assignment Panel */}\r\n            <QuickAssignmentPanel\r\n              teacher={teacher}\r\n              academicYear={parseInt(academicYear)}\r\n              semester={parseInt(semester)}\r\n              subjects={subjectsData.data || []}\r\n              grades={gradesData.data || []}\r\n              currentAssignments={\r\n                (\r\n                  responsibilityData.data as\r\n                    | ResponsibilityWithSubject[]\r\n                    | undefined\r\n                )?.map((item) => ({\r\n                  RespID: item.RespID.toString(),\r\n                  SubjectCode: item.SubjectCode,\r\n                  SubjectName: item.subject?.SubjectName || \"\",\r\n                  GradeID: parseInt(item.GradeID),\r\n                  GradeName: `เธก.${item.GradeID.toString()[0]}/${item.GradeID.toString()[2]}`,\r\n                  TeachHour: item.TeachHour,\r\n                })) || []\r\n              }\r\n              onAssignmentAdded={() => {\r\n                void responsibilityData.mutate();\r\n              }}\r\n              onAssignmentUpdated={() => {\r\n                void responsibilityData.mutate();\r\n              }}\r\n              onAssignmentDeleted={() => {\r\n                void responsibilityData.mutate();\r\n              }}\r\n            />\r\n\r\n            {/* Action Button */}\r\n            <Button\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              startIcon={<AssignmentIcon />}\r\n              endIcon={<ArrowForwardIcon />}\r\n              onClick={() => {\r\n                router.push(\r\n                  `${pathName}/teacher_responsibility?TeacherID=${teacher.TeacherID}`,\r\n                );\r\n              }}\r\n              sx={{ py: 2 }}\r\n            >\r\n              เธ”เธนเธฃเธฒเธขเธฅเธฐเน€เธญเธตเธขเธ”เธงเธดเธเธฒเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธเธ—เธฑเนเธเธซเธกเธ”\r\n            </Button>\r\n          </>\r\n        )) as React.ReactNode\r\n      }\r\n\r\n      {/* Empty State */}\r\n      {!teacher && (\r\n        <Paper\r\n          sx={{\r\n            p: 6,\r\n            textAlign: \"center\",\r\n            bgcolor: \"background.default\",\r\n            border: \"2px dashed\",\r\n            borderColor: \"divider\",\r\n          }}\r\n        >\r\n          <PersonSearchIcon\r\n            sx={{ fontSize: 64, color: \"text.disabled\", mb: 2 }}\r\n          />\r\n          <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\r\n            เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธเธฃเธนเธเธนเนเธชเธญเธ\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            เน€เธฅเธทเธญเธเธเธฃเธนเธเธฒเธเธเนเธญเธเธเนเธเธซเธฒเธ”เนเธฒเธเธเธเน€เธเธทเนเธญเธ”เธนเธเนเธญเธกเธนเธฅเธ เธฒเธฃเธฐเธเธฒเธเธชเธญเธ\r\n          </Typography>\r\n        </Paper>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ShowTeacherData;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":4,"column":14,"nodeType":"TSTypeLiteral","messageId":"noEmptyObject","endLine":4,"endColumn":16,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[116,118],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[116,118],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'props' is defined but never used. Allowed unused args must match /^_/u.","line":6,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport ShowTeacherData from \"./component/ShowTeacherData\";\r\ntype Props = {};\r\n\r\nfunction ClassifySubject(props: Props) {\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-col gap-3 my-5\">\r\n        <ShowTeacherData />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ClassifySubject;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\teacher_responsibility\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IoMdAdd' is defined but never used.","line":7,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SubjectCreditValues' is defined but never used.","line":15,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1514,1517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1514,1517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2283,2286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2283,2286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2668,2671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2668,2671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2696,2699],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2696,2699],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3133,3136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3133,3136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3234,3237],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3234,3237],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3279,3282],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3279,3282],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3324,3327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3324,3327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":95,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3369,3372],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3369,3372],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3414,3417],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3414,3417],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":98,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3452,3455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3452,3455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3954,3957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3954,3957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":108,"column":45,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":108,"endColumn":47,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[3983,3985],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4101,4104],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4101,4104],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4314,4317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4314,4317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":117,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4394,4397],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4394,4397],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":117,"column":41,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":117,"endColumn":43,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[4415,4417],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\teacher_responsibility\\page.tsx:124:7\n  122 |     if (!responsibilityData.isValidating) {\n  123 |       //เธ–เนเธฒ fetch เธเนเธญเธกเธนเธฅเน€เธชเธฃเนเธเนเธฅเนเธง\n> 124 |       setData(() => ({\n      |       ^^^^^^^ Avoid calling setState() directly within an effect\n  125 |         ...data,\n  126 |         Subjects: responsibilityData.data,\n  127 |         Grade: data.Grade.map((item) => ({","line":124,"column":7,"nodeType":null,"endLine":124,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data' and 'responsibilityData.data'. Either include them or remove the dependency array. You can also do a functional update 'setData(d => ...)' if you only need 'data' in the 'setData' call.","line":134,"column":6,"nodeType":"ArrayExpression","endLine":134,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [data, responsibilityData.data, responsibilityData.isValidating]","fix":{"range":[5029,5062],"text":"[data, responsibilityData.data, responsibilityData.isValidating]"}}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\assign\\teacher_responsibility\\page.tsx:137:7\n  135 |   useEffect(() => {\n  136 |     if (!teacherData.isLoading) {\n> 137 |       setData(() => ({ ...data, Teacher: teacherData.data }));\n      |       ^^^^^^^ Avoid calling setState() directly within an effect\n  138 |     }\n  139 |   }, [teacherData.isLoading]);\n  140 |   const router = useRouter();","line":137,"column":7,"nodeType":null,"endLine":137,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data' and 'teacherData.data'. Either include them or remove the dependency array. You can also do a functional update 'setData(d => ...)' if you only need 'data' in the 'setData' call.","line":139,"column":6,"nodeType":"ArrayExpression","endLine":139,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [data, teacherData.data, teacherData.isLoading]","fix":{"range":[5255,5278],"text":"[data, teacherData.data, teacherData.isLoading]"}}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":154,"column":69,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":154,"endColumn":71,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6150,6152],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":159,"column":69,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":159,"endColumn":71,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[6376,6378],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":176,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6975,6978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6975,6978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":182,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7120,7123],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7120,7123],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7748,7751],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7748,7751],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":203,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8046,8049],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8046,8049],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":209,"column":64,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":209,"endColumn":66,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[8329,8331],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":215,"column":29,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":215,"endColumn":31,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[8652,8654],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":227,"column":56,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":227,"endColumn":58,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[9272,9274],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validateStatus' is assigned a value but never used.","line":229,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":229,"endColumn":24},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":233,"column":59,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":233,"endColumn":61,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[9673,9675],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":240,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10018,10021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10018,10021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":269,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":269,"endColumn":18,"suggestions":[{"fix":{"range":[11347,11369],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":270,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":270,"endColumn":25,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[11377,11377],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[11377,11377],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":274,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":274,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11443,11446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11443,11446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'result' is assigned a value but never used.","line":277,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":277,"endColumn":19},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":288,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":288,"endColumn":35,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[11953,11953],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[11953,11953],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":303,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12415,12418],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12415,12418],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":326,"column":19,"nodeType":"MemberExpression","messageId":"limited","endLine":326,"endColumn":30,"suggestions":[{"fix":{"range":[13350,13368],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":366,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":366,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14828,14831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14828,14831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15865,15868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15865,15868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":399,"column":29,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":404,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":430,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":430,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17793,17796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17793,17796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":443,"column":29,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":448,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":464,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":464,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19618,19621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19618,19621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":36,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport { TbArrowBackUp } from \"react-icons/tb\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { IoIosArrowDown, IoMdAdd, IoMdAddCircle } from \"react-icons/io\";\r\nimport SelectClassRoomModal from \"../component/SelectClassRoomModal\";\r\nimport AddSubjectModal from \"../component/AddSubjectModal\";\r\nimport useSWR from \"swr\";\r\nimport Loading from \"@/app/loading\";\r\nimport {\r\n  subjectCreditValues,\r\n  subject_credit,\r\n  type SubjectCreditValues,\r\n} from \"@/models/credit-value\";\r\nimport { enqueueSnackbar } from \"notistack\";\r\nimport { useSemesterSync } from \"@/hooks\";\r\n\r\n// Server Actions (Clean Architecture)\r\nimport {\r\n  getAssignmentsAction,\r\n  syncAssignmentsAction,\r\n} from \"@/features/assign/application/actions/assign.actions\";\r\nimport { getTeachersAction } from \"@/features/teacher/application/actions/teacher.actions\";\r\n\r\nfunction ClassroomResponsibility() {\r\n  const params = useParams();\r\n  const [isApiLoading, setIsApiLoading] = useState<boolean>(false);\r\n\r\n  // Use useSemesterSync to extract and sync semester with global store\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n\r\n  const searchTeacherID = useSearchParams().get(\"TeacherID\");\r\n\r\n  // Fetch teacher responsibilities using Server Action\r\n  const responsibilityData = useSWR<any>(\r\n    () =>\r\n      searchTeacherID\r\n        ? `assign-${searchTeacherID}-${academicYear}-${semester}`\r\n        : null,\r\n    async () => {\r\n      if (!searchTeacherID) return null;\r\n      try {\r\n        const result = await getAssignmentsAction({\r\n          TeacherID: parseInt(searchTeacherID),\r\n          AcademicYear: parseInt(academicYear),\r\n          Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        });\r\n        // getAssignmentsAction returns data directly (array)\r\n        return result;\r\n      } catch (error) {\r\n        console.error(\"Error fetching assignments:\", error);\r\n        return null;\r\n      }\r\n    },\r\n    { revalidateOnFocus: false },\r\n  );\r\n\r\n  // Fetch teacher data using Server Action\r\n  const teacherData = useSWR<any>(\r\n    () => (searchTeacherID ? `teacher-${searchTeacherID}` : null),\r\n    async () => {\r\n      if (!searchTeacherID) return null;\r\n      const result = await getTeachersAction({});\r\n      if (!result || typeof result !== \"object\" || !(\"success\" in result)) {\r\n        return null;\r\n      }\r\n      if (result.success && \"data\" in result) {\r\n        const teacher = (result.data as any[]).find(\r\n          (t: any) => t.TeacherID === parseInt(searchTeacherID),\r\n        );\r\n        return teacher || null;\r\n      }\r\n      return null;\r\n    },\r\n  );\r\n  // เธเธณเธเนเธญเธกเธนเธฅเธ•เนเธฒเธเนเธกเธฒเนเธขเธเธขเนเธญเธขเนเธซเนเนเธเนเนเธ”เนเธชเธฐเธ”เธงเธ\r\n  const [data, setData] = useState({\r\n    Teacher: {\r\n      //เธเนเธญเธกเธนเธฅเน€เธเธฅเนเธฒ เน€เธญเธฒเนเธงเนเธเธฑเธเนเธ•เธ\r\n      TeacherID: null,\r\n      Prefix: \"\",\r\n      Firstname: \"\",\r\n      Lastname: \"\",\r\n      Department: \"\",\r\n    },\r\n    Grade: [\r\n      { Year: 1, ClassRooms: [] as any[] }, //ClassRooms : [{RespID: 1,GradeID:'101', Subjects:[]}]\r\n      { Year: 2, ClassRooms: [] as any[] },\r\n      { Year: 3, ClassRooms: [] as any[] },\r\n      { Year: 4, ClassRooms: [] as any[] },\r\n      { Year: 5, ClassRooms: [] as any[] },\r\n      { Year: 6, ClassRooms: [] as any[] },\r\n    ],\r\n    Subjects: [] as any[],\r\n  });\r\n  useEffect(() => {\r\n    const ClassRoomClassify = (year: number): string[] => {\r\n      //function เธชเธณเธซเธฃเธฑเธเธเธณเนเธเธเธเธฑเนเธเน€เธฃเธตเธขเธเธชเธณเธซเธฃเธฑเธเธเธณเธเนเธญเธกเธนเธฅเนเธเนเธเนเธเธฒเธเน€เธเธทเนเธญเนเธชเธ”เธเธเธฅเธเธเธซเธเนเธฒเน€เธงเนเธเนเธ”เธขเน€เธเธเธฒเธฐ\r\n      //เธฃเธนเธเนเธเธเธเนเธญเธกเธนเธฅ เธเธฐเธกเธฒเธเธฃเธฐเธกเธฒเธ“เธเธตเน (responsibilityData.data variable)\r\n      //{RespID: 1, TeacherID: 1, GradeID: '101', ...}\r\n      //{RespID: 1, TeacherID: 1, GradeID: '101', ...}\r\n      //{RespID: 1, TeacherID: 1, GradeID: '102', ...}\r\n      const filterResData = responsibilityData.data.filter(\r\n        (data: any) => data.gradelevel.Year == year,\r\n      ); //เน€เธเนเธ Year == 1 เธเนเธเธฐเน€เธญเธฒเนเธ•เนเธเนเธญเธกเธนเธฅเธเธญเธ เธก.1 เธกเธฒ\r\n      const mapGradeIDOnly = filterResData.map((data: any) => ({\r\n        GradeID: data.GradeID,\r\n        // Subjects: [],\r\n      })); //เธ—เธณเนเธซเนเธเนเธญเธกเธนเธฅเนเธ”เนเธ•เธฒเธก format เนเธ•เนเธเธฐเนเธ”เน GradeID เธเนเธณเนเธเธฑเธเธญเธขเธนเน\r\n      const removeDulpicateGradeID = mapGradeIDOnly.filter(\r\n        (obj: any, index: number) =>\r\n          mapGradeIDOnly.findIndex(\r\n            (item: any) => item.GradeID == obj.GradeID,\r\n          ) === index,\r\n      ); //เน€เธญเธฒเธ•เธฑเธงเธเนเธณเธญเธญเธ เธเธฒเธ [101, 101, 102] เน€เธเนเธ [101, 102] (array เธเธตเนเนเธเนเธ•เธฑเธงเธญเธขเนเธฒเธเน€เธชเธขเน)\r\n      return removeDulpicateGradeID;\r\n    };\r\n    if (!responsibilityData.isValidating) {\r\n      //เธ–เนเธฒ fetch เธเนเธญเธกเธนเธฅเน€เธชเธฃเนเธเนเธฅเนเธง\r\n      setData(() => ({\r\n        ...data,\r\n        Subjects: responsibilityData.data,\r\n        Grade: data.Grade.map((item) => ({\r\n          //set เธเนเธญเธกเธนเธฅเธเธฑเนเธเน€เธฃเธตเธขเธ เธ”เนเธงเธขเธเธฒเธฃ map เธเนเธญเธกเธนเธฅเธเธตเนเธฅเธฐเธซเนเธญเธเน€เธฃเธตเธขเธ\r\n          Year: item.Year,\r\n          ClassRooms: ClassRoomClassify(item.Year), //เน€เธฃเธตเธขเธเนเธเนเธเธฑเธเธเนเธเธฑเนเธเน€เธเธทเนเธญเธเธณเน€เธฅเธเธซเนเธญเธเน€เธฃเธตเธขเธเธกเธฒเนเธเน\r\n        })),\r\n      }));\r\n    }\r\n  }, [responsibilityData.isValidating]); //เน€เธเนเธเธงเนเธฒเนเธซเธฅเธ”เน€เธชเธฃเนเธเธขเธฑเธ เธ–เนเธฒเน€เธชเธฃเนเธเนเธฅเนเธงเธเนเนเธเธ—เธณเธเนเธฒเธเนเธ useEffect\r\n  useEffect(() => {\r\n    if (!teacherData.isLoading) {\r\n      setData(() => ({ ...data, Teacher: teacherData.data }));\r\n    }\r\n  }, [teacherData.isLoading]);\r\n  const router = useRouter();\r\n  const [classRoomModalActive, setClassRoomModalActive] =\r\n    useState<boolean>(false); //เน€เธเธดเธ” modal เธชเธณเธซเธฃเธฑเธเน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธ\r\n  const [addSubjectModalActive, setAddSubjectModalActive] =\r\n    useState<boolean>(false); //เน€เธเธดเธ” modal เธชเธณเธซเธฃเธฑเธเน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธ\r\n  // const [selectedClass, setSelectedClass] = useState<number>(2); //เน€เธเนเธ—เนเธงเนเธ”เธถเธเธเนเธญเธกเธนเธฅเธซเนเธญเธเน€เธฃเธตเธขเธเธ—เธฑเนเธเธซเธกเธ”เธงเนเธฒเธกเธตเธเธตเนเธซเนเธญเธ -> เธชเนเธเนเธเธ—เธตเน Modal\r\n  const [classRoomList, setClassRoomList] = useState<[]>([]); //เธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธเธเธญเธเธเธธเธ“เธเธฃเธนเธเธเธเธฑเนเธเน\r\n  // เธขเธฑเธเนเธกเนเน€เธชเธฃเนเธ\r\n  const changeClassRoomList = (rooms: [], year: number) => {\r\n    //เธเนเธญเธเธณเธเธฑเธ”เธเธทเธญ เธ–เนเธฒเธฅเธเธซเนเธญเธเน€เธฃเธตเธขเธเนเธฅเนเธงเน€เธเธดเนเธกเนเธซเธกเน เธเนเธ•เนเธญเธเน€เธเธดเนเธกเธงเธดเธเธฒเนเธซเธกเน\r\n    setClassRoomList(rooms);\r\n    setData(() => {\r\n      const newData = data;\r\n      if (rooms.length > 0) {\r\n        const gradeIndex = data.Grade.findIndex((item) => item.Year == year);\r\n        if (gradeIndex !== -1 && newData.Grade[gradeIndex]) {\r\n          newData.Grade[gradeIndex].ClassRooms = rooms;\r\n        }\r\n      } else {\r\n        const gradeIndex = data.Grade.findIndex((item) => item.Year == year);\r\n        if (gradeIndex !== -1 && newData.Grade[gradeIndex]) {\r\n          newData.Grade[gradeIndex].ClassRooms = [];\r\n        }\r\n      }\r\n      return newData;\r\n    });\r\n    setClassRoomModalActive(false);\r\n  };\r\n  const [cardHidden, setCardHidden] = useState<number[]>([0, 1, 2, 3, 4, 5]); //เนเธเนเธชเธณเธซเธฃเธฑเธ เธเธฒเธฃเนเธ” เธก1-เธก6\r\n  const hiddenCard = (index: number) => {\r\n    if (cardHidden.includes(index)) {\r\n      setCardHidden(() => cardHidden.filter((item) => item !== index));\r\n    } else {\r\n      setCardHidden(() => [...cardHidden, index]);\r\n    }\r\n  };\r\n  const addSubjectToClassRoom = (subj: any) => {\r\n    setData(() => ({\r\n      ...data,\r\n      Subjects: subj,\r\n    }));\r\n  };\r\n  const addClassRoomtoClass = (Year: number, Classrooms: any) => {\r\n    //func เธชเธณเธซเธฃเธฑเธเน€เธเธดเนเธกเธซเนเธญเธเน€เธฃเธตเธขเธเธ—เธตเนเน€เธฅเธทเธญเธเธกเธฒเนเธซเธกเนเน€เธเนเธฒเนเธเนเธเธเธฑเนเธเน€เธฃเธตเธขเธเธซเธฅเธฑเธเธเธ”เธ•เธเธฅเธเนเธ SelectClassRoomModal\r\n    setClassRoomModalActive(true);\r\n    setYear(() => Year);\r\n    setClassRoomList(() => Classrooms);\r\n  };\r\n  const [classRoomForAddSubj, setClassRoomForAddSubj] = useState({\r\n    Year: 0,\r\n    GradeID: \"\",\r\n    Number: 0,\r\n  }); //เธ•เธฑเธงเนเธเธฃเธเธตเนเธเธฐเน€เธเนเธเธเนเธฒเธ•เธฒเธกเธ—เธตเนเน€เธซเนเธ เธเธฐเน€เธเนเธเธเนเธ•เนเธญเน€เธกเธทเนเธญเธเธ”เธเธธเนเธกเธซเนเธญเธเน€เธฃเธตเธขเธ เน€เธเนเธ 1/1 เธเนเน€เธเนเธ Year = 1 GradeID = 101 เน€เธเนเธเธ•เนเธ\r\n  const [currentSubjectInClassRoom, setCurrentSubjectInClassRoom] = useState(\r\n    [],\r\n  ); //เธ•เธฑเธงเนเธเธฃเธเธตเนเน€เธเนเธเธเนเธญเธกเธนเธฅเธงเธดเธเธฒเธเธญเธเธซเนเธญเธเน€เธฃเธตเธขเธเธ—เธตเนเน€เธฃเธฒเน€เธฅเธทเธญเธ\r\n  const setCurrentSubject = (subj: any) => {\r\n    //เธเธฐเน€เธเนเธเธ•เธฑเธง set เธเนเธญเธกเธนเธฅเนเธซเนเธเธฑเธเธ•เธฑเธงเนเธเธฃเธ”เนเธฒเธเธเธเน€เธเธขเน (เธฅเธฐเธเธฐเธชเธฃเนเธฒเธเนเธซเนเน€เธเธฅเธทเธญเธเธ—เธตเนเนเธกเธเธฐ??)\r\n    setCurrentSubjectInClassRoom(subj);\r\n  };\r\n  const [year, setYear] = useState<number | null>(null);\r\n\r\n  // Helper function to check if a value is a valid subject_credit\r\n  const isValidCredit = (value: any): value is subject_credit => {\r\n    return typeof value === \"string\" && value in subjectCreditValues;\r\n  };\r\n\r\n  const sumTeachHour = (year: number): number => {\r\n    const getSubjectsByYear = data.Subjects.filter(\r\n      (subj) => subj.GradeID?.[0] && parseInt(subj.GradeID[0]) == year,\r\n    ); //เธเธณเธเนเธญเธกเธนเธฅเธงเธดเธเธฒเธเธญเธเนเธ•เนเธฅเธฐเธเธฑเนเธเธเธตเธญเธญเธเธกเธฒเธเธฒเธ property Subjects\r\n    const mapTeachHour = getSubjectsByYear.map((item) => {\r\n      const credit = item.Credit;\r\n      return (isValidCredit(credit) ? subjectCreditValues[credit] : 0) * 2;\r\n    }); //map credit เน€เธเนเธ array ex. => [1, 3, 1]\r\n    if (mapTeachHour.length == 0) {\r\n      //เธ–เนเธฒเนเธกเนเน€เธเธขเธกเธตเธเธฒเธฃเน€เธเธดเนเธกเธงเธดเธเธฒเนเธเธซเนเธญเธเน€เธฃเธตเธขเธเธกเธฒเธเนเธญเธ เธฃเธฐเธเธเธเธฐเธเธฑเธเน€เธเนเธ 0 เธเธฒเธ\r\n      return 0;\r\n    } else {\r\n      return mapTeachHour.reduce((a, b) => a + b); //sum เธ•เธฑเธงเน€เธฅเธเธ—เธฑเนเธเธซเธกเธ”เนเธ array เน€เธเนเธฒเธ”เนเธงเธขเธเธฑเธ (result)\r\n    }\r\n  };\r\n  const getSubjectDataByGradeID = (GradeID: string) => {\r\n    //เน€เธญเธฒเธเนเธญเธกเธนเธฅเธเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธ•เนเธญเธเธเธฒเธฃ\r\n    //เธ•เธฑเธงเธญเธขเนเธฒเธเธ–เนเธฒเธชเนเธ GradeID = 101 เนเธ เธเนเธเธฐเนเธ”เนเนเธเธเธเธตเน\r\n    // {RespID: 1, TeacherID: 1, GradeID: '101', SubjectCode: 'ddddd', AcademicYear: 2566, โ€ฆ}\r\n    // {RespID: 2, TeacherID: 1, GradeID: '101', SubjectCode: 'I20102', AcademicYear: 2566, โ€ฆ}\r\n    return data.Subjects.filter((item) => item.GradeID == GradeID);\r\n  };\r\n  const [validateStatus, setValidateStatus] = useState<boolean>(false); //เธเธญเน€เธฃเธตเธขเธ func validate เธเนเธญเธกเธนเธฅเนเธฅเนเธง เธ–เนเธฒเธเนเธฒเธเธเธฐเธ—เธณเธเธฒเธฃเน€เธเธฅเธตเนเธขเธ state\r\n  const validateEmptySubjects = (GradeID: string): boolean => {\r\n    const mapGradeID = data.Subjects.map((item) => item.GradeID);\r\n    const removeDulpicateGradeID = mapGradeID.filter(\r\n      (obj, index) => mapGradeID.findIndex((item) => item == obj) === index,\r\n    ); //เน€เธญเธฒเธ•เธฑเธงเธเนเธณเธญเธญเธ เธเธฒเธ [101, 101, 102] เน€เธเนเธ [101, 102] (array เธเธตเนเนเธเนเธ•เธฑเธงเธญเธขเนเธฒเธเน€เธชเธขเน)\r\n    return !removeDulpicateGradeID.includes(GradeID);\r\n  };\r\n\r\n  const saveData = () => {\r\n    const classRoomMap = data.Grade.map((item) => item.ClassRooms); //map เธเธฒเธเธ•เธฑเธงเนเธเธฃ data เน€เธเธทเนเธญเน€เธญเธฒเธเนเธญเธกเธนเธฅเธเธญเธเนเธ•เนเธฅเธฐเธเธฑเนเธเธเธตเธกเธฒ\r\n    const spreadClassRoom: any[] = []; //เธชเธฃเนเธฒเธ array เน€เธเธฅเนเธฒเน€เธเธทเนเธญเน€เธเนเธ object เธเธญเธเธ—เธธเธเนเธซเนเธญเธเน€เธฃเธตเธขเธเนเธเธ—เธธเธเธฃเธฐเธ”เธฑเธเธเธฑเนเธเนเธงเนเนเธ array เน€เธ”เธตเธขเธง\r\n    for (let i = 0; i < classRoomMap.length; i++) {\r\n      const classRoom = classRoomMap[i];\r\n      if (classRoom && Array.isArray(classRoom)) {\r\n        spreadClassRoom.push(...classRoom); //push เน€เธเนเธฒเนเธเธ”เนเธงเธขเธเธฒเธฃเนเธเน spread operator ex => เธเธฒเธ [[{...}, {...}], [{...}]] เน€เธเนเธ [{...}, {...}, {...}]\r\n      }\r\n    }\r\n    //findEmptySubjectInClassRoom เธเธทเธญเธเธฒเธฃเธซเธฒเธงเนเธฒ เธกเธตเธซเนเธญเธเนเธซเธเธกเธฑเนเธขเธ—เธตเนเธขเธฑเธเนเธกเนเน€เธเธดเนเธกเธงเธดเธเธฒเน€เธฃเธตเธขเธ เธ–เนเธฒเธกเธตเธเนเธเธฐเธเนเธญเธเธเธฃเธฑเธเธเธก\r\n    //return as Array => if true array length > 0, if false array length = 0\r\n    const filterSubject = data.Subjects.filter((item) =>\r\n      spreadClassRoom.map((item) => item.GradeID).includes(item.GradeID),\r\n    );\r\n    const postData = {\r\n      TeacherID: data.Teacher.TeacherID,\r\n      Resp: filterSubject,\r\n      AcademicYear: parseInt(academicYear),\r\n      Semester: `SEMESTER_${semester}`,\r\n    };\r\n    const findEmptySubjectInClassRoom = spreadClassRoom.filter((item) =>\r\n      validateEmptySubjects(item.GradeID),\r\n    );\r\n    if (findEmptySubjectInClassRoom.length > 0) {\r\n      setValidateStatus(true);\r\n      enqueueSnackbar(\r\n        \"เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธเธฑเธเธ—เธถเธเธเนเธญเธกเธนเธฅเนเธ”เนเน€เธเธทเนเธญเธเธเธฒเธเธขเธฑเธเน€เธเธดเนเธกเธงเธดเธเธฒเน€เธฃเธตเธขเธเนเธกเนเธเธฃเธเธ—เธธเธเธเธฑเนเธเน€เธฃเธตเธขเธ\",\r\n        { variant: \"warning\" },\r\n      );\r\n    } else {\r\n      setValidateStatus(false);\r\n      console.log(postData);\r\n      saveApi(postData);\r\n    }\r\n  };\r\n\r\n  const saveApi = async (data: any) => {\r\n    setIsApiLoading(true);\r\n    try {\r\n      const result = await syncAssignmentsAction({\r\n        TeacherID: data.TeacherID,\r\n        Resp: data.Resp,\r\n        AcademicYear: data.AcademicYear,\r\n        Semester: data.Semester as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n      });\r\n\r\n      // syncAssignmentsAction returns result directly, not wrapped in success/error\r\n      setValidateStatus(false);\r\n      setIsApiLoading(false);\r\n      enqueueSnackbar(\"เธเธฑเธเธ—เธถเธเธเนเธญเธกเธนเธฅเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      responsibilityData.mutate();\r\n    } catch (error) {\r\n      console.error(error);\r\n      const errorMessage =\r\n        error instanceof Error ? error.message : \"Unknown error\";\r\n      enqueueSnackbar(\"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธเธฑเธเธ—เธถเธ: \" + errorMessage, {\r\n        variant: \"error\",\r\n      });\r\n      setIsApiLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {classRoomModalActive ? (\r\n        <SelectClassRoomModal\r\n          confirmChange={changeClassRoomList as any}\r\n          closeModal={() => setClassRoomModalActive(false)}\r\n          classList={classRoomList}\r\n          year={year || 0}\r\n        />\r\n      ) : null}\r\n      {addSubjectModalActive ? (\r\n        <AddSubjectModal\r\n          classRoomData={classRoomForAddSubj}\r\n          closeModal={() => setAddSubjectModalActive(false)}\r\n          addSubjectToClass={addSubjectToClassRoom}\r\n          currentSubject={data.Subjects}\r\n          subjectByGradeID={currentSubjectInClassRoom}\r\n        />\r\n      ) : null}\r\n      {responsibilityData.isValidating || isApiLoading ? <Loading /> : null}\r\n      <span className=\"flex flex-col gap-4 my-4\">\r\n        <div className=\"flex w-full h-[55px] justify-between items-center\">\r\n          <div className=\"flex w-full justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <p\r\n                className=\"text-md\"\r\n                onClick={() => {\r\n                  console.log(data);\r\n                }}\r\n              >\r\n                เธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธ\r\n              </p>\r\n              <p className=\"text-gray-500 text-xs\">\r\n                (เธเธธเธ“เธเธฃเธน{data.Teacher.Firstname} {data.Teacher.Lastname})\r\n              </p>\r\n            </div>\r\n            <div\r\n              onClick={() => {\r\n                router.back();\r\n              }}\r\n              className=\"flex gap-2 items-center justify-between cursor-pointer\"\r\n            >\r\n              <TbArrowBackUp\r\n                size={30}\r\n                className={`text-gray-700 duration-300`}\r\n              />\r\n              <p className=\"text-sm text-gray-500\">เธขเนเธญเธเธเธฅเธฑเธ</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Map เธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธเธฃเธนเธเธเธเธฑเนเธเธฃเธฑเธเธเธดเธ”เธเธญเธ */}\r\n        {/* <div className=\"flex flex-row gap-3\">\r\n          {responsibilityData.data.map((item: any) => (\r\n            <React.Fragment key={`responsibility${item.RespID}`}>\r\n              {responsibilityData.data.length !== 0 ? (\r\n                <MiniButton\r\n                  width={45}\r\n                  height={25}\r\n                  border={true}\r\n                  borderColor=\"#c7c7c7\"\r\n                  title={`เธก.${item.GradeID.substring(0,1)}/${item.GradeID.substring(2)}`}\r\n                />\r\n              ) : null}\r\n            </React.Fragment>\r\n          ))}\r\n        </div> */}\r\n        {/* Map เธเธฑเนเธเน€เธฃเธตเธขเธเธเธญเธเธญเธฒเธเธฒเธฃเธขเนเธเธเธเธฑเนเธเนเธ—เธตเนเธ•เนเธญเธเธฃเธฑเธเธเธดเธ”เธเธญเธ */}\r\n        {data.Grade.map((grade: any, index: number) => (\r\n          <Fragment key={`Grade${grade.Year}`}>\r\n            <div className=\"flex flex-col gap-3 w-full border border-[#EDEEF3] duration-300\">\r\n              <div className=\"flex w-full h-[55px] justify-between items-center px-4\">\r\n                <div\r\n                  className=\"flex items-center gap-6 cursor-pointer\"\r\n                  onClick={() => {\r\n                    hiddenCard(index);\r\n                  }}\r\n                >\r\n                  <p className=\"text-md\">เธก.{grade.Year}</p>\r\n                  <IoIosArrowDown\r\n                    className={`${\r\n                      cardHidden.includes(index) ? `rotate-0` : `rotate-180`\r\n                    } duration-500`}\r\n                    size={20}\r\n                  />\r\n                </div>\r\n                <div className=\"flex flex-row justify-between items-center gap-5\">\r\n                  <div className=\"flex gap-4\">\r\n                    {/* // Map เธซเนเธญเธเน€เธฃเธตเธขเธเธเนเธญเธเนเธ•เนเธฅเธฐเธเธฑเนเธเน€เธฃเธตเธขเธ */}\r\n                    {grade.ClassRooms.map((room: any) => (\r\n                      <Fragment key={`Class${room.GradeID}`}>\r\n                        <MiniButton\r\n                          width={80}\r\n                          height={30}\r\n                          buttonColor=\"#fff\"\r\n                          titleColor=\"#000dff\"\r\n                          border={true}\r\n                          borderColor=\"#EDEEF3\"\r\n                          isSelected={false}\r\n                          hoverable={true}\r\n                          handleClick={() => {\r\n                            (setAddSubjectModalActive(true),\r\n                              setClassRoomForAddSubj(() => ({\r\n                                Year: grade.Year,\r\n                                GradeID: room.GradeID,\r\n                                Number: parseInt(room.GradeID.substring(2)),\r\n                              })));\r\n                            // setCurrentSubject(room.Subjects);\r\n                            setCurrentSubject(\r\n                              getSubjectDataByGradeID(room.GradeID),\r\n                            );\r\n                          }}\r\n                          title={`เธก.${grade.Year}/${room.GradeID.substring(2)}`}\r\n                        />\r\n                      </Fragment>\r\n                    ))}\r\n                  </div>\r\n                  <IoMdAddCircle\r\n                    onClick={() => {\r\n                      addClassRoomtoClass(grade.Year, grade.ClassRooms);\r\n                    }}\r\n                    size={24}\r\n                    className=\"fill-gray-500 cursor-pointer\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              {grade.ClassRooms.length === 0 ? null : (\r\n                <div\r\n                  className={`${\r\n                    cardHidden.includes(index) ? \"hidden\" : null\r\n                  } flex flex-col gap-3 pl-4 pb-3`}\r\n                >\r\n                  {grade.ClassRooms.map((room: any) => (\r\n                    <Fragment key={`Details for Class ${room.GradeID}`}>\r\n                      <div className=\"flex gap-3\">\r\n                        <MiniButton\r\n                          width={80}\r\n                          height={30}\r\n                          buttonColor=\"#fff\"\r\n                          titleColor=\"#000dff\"\r\n                          border={true}\r\n                          borderColor=\"#EDEEF3\"\r\n                          isSelected={false}\r\n                          hoverable={true}\r\n                          handleClick={() => {\r\n                            (setAddSubjectModalActive(true),\r\n                              setClassRoomForAddSubj(() => ({\r\n                                Year: grade.Year,\r\n                                GradeID: room.GradeID,\r\n                                Number: parseInt(room.GradeID.substring(2)),\r\n                              })));\r\n                            setCurrentSubject(\r\n                              getSubjectDataByGradeID(room.GradeID),\r\n                            );\r\n                          }}\r\n                          title={`เธก.${grade.Year}/${room.GradeID.substring(2)}`}\r\n                        />\r\n                        <div className=\"flex w-full flex-col gap-3 mt-1\">\r\n                          <p className=\"text-sm text-[#676E85]\">\r\n                            {getSubjectDataByGradeID(room.GradeID).length === 0\r\n                              ? \"เนเธกเนเธเธเธเนเธญเธกเธนเธฅ เธเธ”เธ—เธตเนเธเธฑเนเธเน€เธฃเธตเธขเธเน€เธเธทเนเธญเน€เธเธดเนเธกเธงเธดเธเธฒ\"\r\n                              : `เธฃเธฑเธเธเธดเธ”เธเธญเธเธ—เธฑเนเธเธซเธกเธ” ${\r\n                                  getSubjectDataByGradeID(room.GradeID).length\r\n                                } เธงเธดเธเธฒ`}\r\n                          </p>\r\n                          {getSubjectDataByGradeID(room.GradeID).map(\r\n                            (subject: any, index: number) => {\r\n                              const credit = subject.Credit;\r\n                              const hoursPerWeek =\r\n                                (isValidCredit(credit)\r\n                                  ? subjectCreditValues[credit]\r\n                                  : 0) * 2;\r\n                              return (\r\n                                <Fragment\r\n                                  key={`${subject.SubjectCode}(${room.GradeID})${index}`}\r\n                                >\r\n                                  <div className=\"flex justify-between items-center pr-3\">\r\n                                    <MiniButton\r\n                                      width={200}\r\n                                      height={30}\r\n                                      buttonColor=\"#fff\"\r\n                                      titleColor=\"#4F515E\"\r\n                                      border={true}\r\n                                      borderColor=\"#EDEEF3\"\r\n                                      isSelected={false}\r\n                                      hoverable={false}\r\n                                      handleClick={() => {}}\r\n                                      title={`${subject.SubjectCode} ${subject.SubjectName}`}\r\n                                    />\r\n                                    <p className=\"text-sm text-[#4F515E]\">\r\n                                      เธเธณเธเธงเธ {hoursPerWeek} เธเธฒเธ\r\n                                    </p>\r\n                                  </div>\r\n                                </Fragment>\r\n                              );\r\n                            },\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </Fragment>\r\n                  ))}\r\n                  <div className=\"w-full pr-3 mt-4 flex justify-between items-center\">\r\n                    <p className=\"text-sm text-gray-400\">\r\n                      เธเธณเธเธงเธเธเธฒเธเธ—เธตเนเธชเธญเธเธ—เธฑเนเธเธซเธกเธ”\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-400\">\r\n                      {sumTeachHour(grade.Year)} เธเธฒเธ\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </Fragment>\r\n        ))}\r\n        <button\r\n          onClick={saveData}\r\n          className=\"flex w-full bg-emerald-100 hover:bg-emerald-200 duration-300 cursor-pointer h-10 rounded justify-center items-center\"\r\n        >\r\n          <p className=\"text-emerald-500 text-sm\">เธเธฑเธเธ—เธถเธเธเนเธญเธกเธนเธฅ</p>\r\n        </button>\r\n      </span>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ClassroomResponsibility;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\components\\SelectClassModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[236,239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[236,239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[286,289],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[286,289],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport React, { useState } from \"react\";\r\n\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\n\r\ntype ClassItem = {\r\n  Year: string;\r\n};\r\n\r\ntype props = {\r\n  closeModal: any;\r\n  classList: ClassItem[];\r\n  confirmChange: any;\r\n};\r\n\r\nfunction SelectClassModal({ closeModal, classList, confirmChange }: props) {\r\n  //เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธเนเธฅเนเธง\r\n  const [selectedClassList, setSelectedClassList] =\r\n    useState<ClassItem[]>(classList);\r\n  //เธเธฑเนเธเน€เธฃเธตเธขเธเธ—เธตเนเธขเธฑเธเนเธกเนเน€เธฅเธทเธญเธ\r\n  const [unSelectedClassList, setUnSelectedClassList] = useState<ClassItem[]>(\r\n    [\r\n      { Year: \"1\" },\r\n      { Year: \"2\" },\r\n      { Year: \"3\" },\r\n      { Year: \"4\" },\r\n      { Year: \"5\" },\r\n      { Year: \"6\" },\r\n    ].filter(\r\n      (item) =>\r\n        !selectedClassList\r\n          .map((selectedItem) => selectedItem.Year)\r\n          .includes(item.Year),\r\n    ),\r\n  );\r\n  const addSelectedClassList = (item: ClassItem) => {\r\n    //เธ•เธฑเธงเนเธเธฃ newList เธเธฐเน€เธเธดเนเธกเธเธญเธเนเธซเธกเนเธฅเธเนเธเธเธฃเนเธญเธกเธเธฑเธ sort เนเธฅเนเธง set state\r\n    const newList = [...selectedClassList, item]; //.sort((a, b) => a.Year.localeCompare(b.Year))\r\n    setSelectedClassList(() => newList);\r\n    //เธเธฒเธเธเธฑเนเธ copy เธ•เธฑเธงเธ—เธตเนเธเธฐเธฅเธเธกเธฒเนเธงเน เนเธฅเนเธง Splice เธญเธญเธเนเธ”เธขเธเธฒเธฃเนเธเน indexOf เน€เธเธทเนเธญเน€เธเนเธ index เธเธญเธเนเธญเน€เธ—เธก\r\n    const unSelected = [...unSelectedClassList];\r\n    unSelected.splice(unSelectedClassList.indexOf(item), 1);\r\n    //เธงเธฒเธ array เธ—เธตเนเธฅเธเนเธฅเนเธงเธฅเธเนเธ\r\n    setUnSelectedClassList(() => unSelected);\r\n  };\r\n  const removeSelectedClassList = (item: ClassItem) => {\r\n    //เธ—เธณเธเธฒเธเน€เธซเธกเธทเธญเธเธเธฑเธเธเธฑเธ addSelectedClassList\r\n    const newList = [...unSelectedClassList, item]; //.sort((a, b) => a.Year.localeCompare(b.Year))\r\n    setUnSelectedClassList(() => newList);\r\n    const selected = [...selectedClassList];\r\n    selected.splice(selectedClassList.indexOf(item), 1);\r\n    setSelectedClassList(() => selected);\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-[550px] h-auto p-[50px] gap-8 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex flex-col w-full gap-3 h-auto\">\r\n            <div className=\"flex justify-between\">\r\n              <p className=\"text-lg select-none\">เธฃเธฐเธ”เธฑเธเธเธฑเนเธเธ—เธตเนเธฃเธฑเธเธเธดเธ”เธเธญเธ</p>\r\n              <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n            </div>\r\n            <p className=\"text-xs text-gray-300\">\r\n              เธเธฅเธดเธเธเธฒเธเธเธฃเธญเธเธ”เนเธฒเธเธฅเนเธฒเธเน€เธเธทเนเธญเน€เธฅเธทเธญเธเธเธถเนเธเธกเธฒเธ”เนเธฒเธเธเธ\r\n            </p>\r\n          </div>\r\n          {/* เธฃเธฐเธ”เธฑเธเธเธฑเนเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธฅเนเธง */}\r\n          <div className=\"flex flex-col gap-3\">\r\n            <p className=\"text-sm text-gray-500\">เธฃเธฐเธ”เธฑเธเธเธฑเนเธเธ—เธตเนเน€เธฅเธทเธญเธเนเธฅเนเธง</p>\r\n            <div\r\n              className={`flex items-center flex-wrap gap-4 w-full ${\r\n                selectedClassList.length === 0 ? \"h-[45px]\" : null\r\n              } border border-gray-300 px-3 py-3 rounded`}\r\n            >\r\n              {selectedClassList.map((item) => (\r\n                <React.Fragment key={item.Year}>\r\n                  <MiniButton\r\n                    handleClick={() => removeSelectedClassList(item)}\r\n                    width=\"fit-content\"\r\n                    height={25}\r\n                    border={true}\r\n                    isSelected={true}\r\n                    borderColor=\"#c7c7c7\"\r\n                    buttonColor=\"#ffffff\"\r\n                    titleColor=\"#222222\"\r\n                    title={`เธก.${item.Year}`}\r\n                    hoverable={false}\r\n                  />\r\n                </React.Fragment>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          {/* เน€เธฅเธทเธญเธเธฃเธฐเธ”เธฑเธเธเธฑเนเธเธเธฒเธเธ—เธตเนเธเธตเน */}\r\n          <div className=\"flex flex-col gap-3\">\r\n            <p className=\"text-sm text-gray-500\">เน€เธฅเธทเธญเธเธฃเธฐเธ”เธฑเธเธเธฑเนเธเธเธฒเธเธ—เธตเนเธเธตเน</p>\r\n            <div\r\n              className={`flex items-center flex-wrap gap-4 w-full ${\r\n                unSelectedClassList.length === 0 ? \"h-[45px]\" : null\r\n              } border border-gray-300 px-3 py-3 rounded`}\r\n            >\r\n              {unSelectedClassList.map((item) => (\r\n                <React.Fragment key={item.Year}>\r\n                  <MiniButton\r\n                    handleClick={() => addSelectedClassList(item)}\r\n                    width={45}\r\n                    height={25}\r\n                    border={true}\r\n                    borderColor=\"#c7c7c7\"\r\n                    buttonColor=\"#ffffff\"\r\n                    titleColor=\"#222222\"\r\n                    title={`เฆฎ.${item.Year}`}\r\n                    isSelected={false}\r\n                    hoverable={false}\r\n                  />\r\n                </React.Fragment>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <span className=\"w-full flex justify-end\">\r\n            {/* <Button title=\"เธขเธทเธเธขเธฑเธ\" width={150} handleClick={handleSubmit} /> */}\r\n            <button\r\n              onClick={() => confirmChange(selectedClassList)}\r\n              className=\" w-[100px] bg-green-500 hover:bg-green-600 duration-500 text-white py-2 px-4 rounded\"\r\n            >\r\n              เธขเธทเธเธขเธฑเธ\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectClassModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\BreakSlotSelect.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1549,1552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1549,1552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Presentation Layer: Break Slot Select Component\r\n *\r\n * MUI Select dropdown for choosing break timeslot periods.\r\n * Replaces legacy custom Dropdown component.\r\n *\r\n * @module BreakSlotSelect\r\n */\r\n\r\nimport React from \"react\";\r\nimport {\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  FormHelperText,\r\n  SelectChangeEvent,\r\n} from \"@mui/material\";\r\nimport { LunchDining as LunchIcon } from \"@mui/icons-material\";\r\n\r\ninterface BreakSlotSelectProps {\r\n  /** Current selected slot number */\r\n  value: number;\r\n  /** Callback when selection changes */\r\n  onChange: (slot: number) => void;\r\n  /** Label for the select */\r\n  label: string;\r\n  /** Total number of timeslots available */\r\n  maxSlots: number;\r\n  /** Validation error message */\r\n  error?: string;\r\n  /** Helper text */\r\n  helperText?: string;\r\n  /** Disable the select */\r\n  disabled?: boolean;\r\n  /** Full width */\r\n  fullWidth?: boolean;\r\n}\r\n\r\n/**\r\n * Select component for choosing break timeslot period\r\n */\r\nexport function BreakSlotSelect({\r\n  value,\r\n  onChange,\r\n  label,\r\n  maxSlots,\r\n  error,\r\n  helperText,\r\n  disabled = false,\r\n  fullWidth = true,\r\n}: BreakSlotSelectProps) {\r\n  const handleChange = (event: SelectChangeEvent<unknown>) => {\r\n    onChange(Number(event.target.value));\r\n  };\r\n\r\n  return (\r\n    <FormControl fullWidth={fullWidth} error={!!error} disabled={disabled}>\r\n      <InputLabel id={`break-slot-${label}`}>{label}</InputLabel>\r\n      <Select\r\n        labelId={`break-slot-${label}`}\r\n        value={value}\r\n        onChange={handleChange as any}\r\n        label={label}\r\n        startAdornment={<LunchIcon sx={{ mr: 1, color: \"action.active\" }} />}\r\n      >\r\n        {Array.from({ length: maxSlots }, (_, i) => i + 1).map((slot) => (\r\n          <MenuItem key={slot} value={slot}>\r\n            เธเธฒเธเธ—เธตเน {slot}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n      {(error || helperText) && (\r\n        <FormHelperText>{error || helperText}</FormHelperText>\r\n      )}\r\n    </FormControl>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\CompletenessIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\ConfigContentSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\ConfigField.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\ConfigForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\ConfigSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\ConfigStatusBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":101,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":101,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * ConfigStatusBadge Component\r\n * Display config status with appropriate colors and actions\r\n */\r\n\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Menu,\r\n  MenuItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Divider,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport {\r\n  MoreVert as MoreIcon,\r\n  Edit as DraftIcon,\r\n  Publish as PublishIcon,\r\n  Lock as LockIcon,\r\n  Archive as ArchiveIcon,\r\n} from \"@mui/icons-material\";\r\nimport { enqueueSnackbar } from \"notistack\";\r\nimport { updateConfigStatusAction } from \"@/features/config/application/actions/config-lifecycle.actions\";\r\n\r\ntype ConfigStatus = \"DRAFT\" | \"PUBLISHED\" | \"LOCKED\" | \"ARCHIVED\";\r\n\r\ntype Props = {\r\n  configId: string;\r\n  currentStatus: ConfigStatus;\r\n  completeness: number;\r\n  onStatusChange?: () => void;\r\n  readOnly?: boolean;\r\n};\r\n\r\nconst STATUS_CONFIG = {\r\n  DRAFT: { color: \"default\" as const, label: \"เนเธเธเธฃเนเธฒเธ\", icon: DraftIcon },\r\n  PUBLISHED: { color: \"success\" as const, label: \"เน€เธเธขเนเธเธฃเน\", icon: PublishIcon },\r\n  LOCKED: { color: \"warning\" as const, label: \"เธฅเนเธญเธ\", icon: LockIcon },\r\n  ARCHIVED: { color: \"error\" as const, label: \"เน€เธเนเธเธ–เธฒเธงเธฃ\", icon: ArchiveIcon },\r\n};\r\n\r\nexport function ConfigStatusBadge({\r\n  configId,\r\n  currentStatus,\r\n  completeness,\r\n  onStatusChange,\r\n  readOnly = false,\r\n}: Props) {\r\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n  const [confirmDialog, setConfirmDialog] = useState<{\r\n    open: boolean;\r\n    newStatus: ConfigStatus | null;\r\n  }>({ open: false, newStatus: null });\r\n\r\n  const config = STATUS_CONFIG[currentStatus];\r\n  const StatusIcon = config.icon;\r\n\r\n  const handleOpenMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleStatusClick = (newStatus: ConfigStatus) => {\r\n    setConfirmDialog({ open: true, newStatus });\r\n    handleCloseMenu();\r\n  };\r\n\r\n  const handleConfirmStatusChange = async () => {\r\n    if (!confirmDialog.newStatus) return;\r\n\r\n    try {\r\n      const result = await updateConfigStatusAction({\r\n        configId,\r\n        status: confirmDialog.newStatus,\r\n      });\r\n\r\n      if (result.success) {\r\n        enqueueSnackbar(\r\n          `เน€เธเธฅเธตเนเธขเธเธชเธ–เธฒเธเธฐเน€เธเนเธ ${STATUS_CONFIG[confirmDialog.newStatus].label} เธชเธณเน€เธฃเนเธ`,\r\n          {\r\n            variant: \"success\",\r\n          },\r\n        );\r\n        onStatusChange?.();\r\n      } else {\r\n        enqueueSnackbar(result.error?.message || \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”\", { variant: \"error\" });\r\n      }\r\n    } catch (error) {\r\n      enqueueSnackbar(\"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเน€เธเธฅเธตเนเธขเธเธชเธ–เธฒเธเธฐ\", { variant: \"error\" });\r\n    }\r\n\r\n    setConfirmDialog({ open: false, newStatus: null });\r\n  };\r\n\r\n  // Determine available transitions\r\n  const availableTransitions: ConfigStatus[] = [];\r\n  if (currentStatus === \"DRAFT\") {\r\n    if (completeness >= 30) availableTransitions.push(\"PUBLISHED\");\r\n  } else if (currentStatus === \"PUBLISHED\") {\r\n    availableTransitions.push(\"DRAFT\", \"LOCKED\");\r\n  } else if (currentStatus === \"LOCKED\") {\r\n    availableTransitions.push(\"PUBLISHED\", \"ARCHIVED\");\r\n  } else if (currentStatus === \"ARCHIVED\") {\r\n    availableTransitions.push(\"LOCKED\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Box\r\n        data-testid=\"config-status-badge\"\r\n        sx={{ display: \"flex\", alignItems: \"center\", gap: 1, flexWrap: \"wrap\" }}\r\n      >\r\n        <Chip\r\n          icon={<StatusIcon />}\r\n          label={config.label}\r\n          color={config.color}\r\n          size=\"small\"\r\n        />\r\n\r\n        {!readOnly && availableTransitions.length > 0 && (\r\n          <IconButton size=\"small\" onClick={handleOpenMenu}>\r\n            <MoreIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        )}\r\n      </Box>\r\n\r\n      {/* Status change menu */}\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleCloseMenu}\r\n      >\r\n        <MenuItem disabled sx={{ fontSize: \"0.875rem\", fontWeight: \"bold\" }}>\r\n          เน€เธเธฅเธตเนเธขเธเธชเธ–เธฒเธเธฐ\r\n        </MenuItem>\r\n        <Divider />\r\n        {availableTransitions.map((status) => {\r\n          const transConfig = STATUS_CONFIG[status];\r\n          const TransIcon = transConfig.icon;\r\n          return (\r\n            <MenuItem key={status} onClick={() => handleStatusClick(status)}>\r\n              <ListItemIcon>\r\n                <TransIcon fontSize=\"small\" />\r\n              </ListItemIcon>\r\n              <ListItemText>{transConfig.label}</ListItemText>\r\n            </MenuItem>\r\n          );\r\n        })}\r\n      </Menu>\r\n\r\n      {/* Confirmation dialog */}\r\n      <Dialog\r\n        open={confirmDialog.open}\r\n        onClose={() => setConfirmDialog({ open: false, newStatus: null })}\r\n      >\r\n        <DialogTitle>เธขเธทเธเธขเธฑเธเธเธฒเธฃเน€เธเธฅเธตเนเธขเธเธชเธ–เธฒเธเธฐ</DialogTitle>\r\n        <DialogContent>\r\n          {confirmDialog.newStatus && (\r\n            <Typography>\r\n              เธ•เนเธญเธเธเธฒเธฃเน€เธเธฅเธตเนเธขเธเธชเธ–เธฒเธเธฐเธเธฒเธ <strong>{config.label}</strong> เน€เธเนเธ{\" \"}\r\n              <strong>{STATUS_CONFIG[confirmDialog.newStatus].label}</strong>{\" \"}\r\n              เนเธเนเธซเธฃเธทเธญเนเธกเน?\r\n            </Typography>\r\n          )}\r\n\r\n          {confirmDialog.newStatus === \"PUBLISHED\" && (\r\n            <Typography variant=\"body2\" color=\"warning.main\" sx={{ mt: 2 }}>\r\n              โ ๏ธ เธเธฒเธฃเน€เธเธขเนเธเธฃเนเธเธฐเธ—เธณเนเธซเนเธ•เธฒเธฃเธฒเธเธเธตเนเธเธฃเธฒเธเธเธ•เนเธญเธเธฃเธนเนเธฅเธฐเธเธฑเธเน€เธฃเธตเธขเธ\r\n            </Typography>\r\n          )}\r\n\r\n          {confirmDialog.newStatus === \"LOCKED\" && (\r\n            <Typography variant=\"body2\" color=\"warning.main\" sx={{ mt: 2 }}>\r\n              ๐”’ เธเธฒเธฃเธฅเนเธญเธเธเธฐเธ—เธณเนเธซเนเนเธกเนเธชเธฒเธกเธฒเธฃเธ–เนเธเนเนเธเนเธ”เน เธเธเธเธงเนเธฒเธเธฐเธเธฅเธ”เธฅเนเธญเธ\r\n            </Typography>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => setConfirmDialog({ open: false, newStatus: null })}\r\n          >\r\n            เธขเธเน€เธฅเธดเธ\r\n          </Button>\r\n          <Button onClick={handleConfirmStatusChange} variant=\"contained\">\r\n            เธขเธทเธเธขเธฑเธ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\NumberInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\TimeslotPreview.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":232,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6869,6872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6869,6872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * TimeslotPreview Component\r\n * Visual timeline showing timeslots with breaks\r\n */\r\n\r\nimport React from \"react\";\r\nimport { Box, Paper, Typography, Chip } from \"@mui/material\";\r\nimport {\r\n  Schedule as ScheduleIcon,\r\n  LunchDining as LunchIcon,\r\n  Coffee as CoffeeIcon,\r\n} from \"@mui/icons-material\";\r\n\r\ntype ConfigData = {\r\n  StartTime: string;\r\n  Duration: number;\r\n  TimeslotPerDay: number;\r\n  BreakDuration: number;\r\n  BreakTimeslots: {\r\n    Junior: number;\r\n    Senior: number;\r\n  };\r\n  HasMinibreak: boolean;\r\n  MiniBreak?: {\r\n    Duration: number;\r\n    SlotNumber: number;\r\n  };\r\n};\r\n\r\ntype Props = {\r\n  config: ConfigData;\r\n};\r\n\r\nexport function TimeslotPreview({ config }: Props) {\r\n  const calculateTimeslots = () => {\r\n    const timeslots: Array<{\r\n      number: number;\r\n      start: string;\r\n      end: string;\r\n      type: \"class\" | \"break\" | \"minibreak\";\r\n      breakFor?: \"junior\" | \"senior\" | \"both\";\r\n    }> = [];\r\n\r\n    // Parse start time\r\n    const [hours, minutes] = config.StartTime.split(\":\").map(Number);\r\n    if (hours === undefined || minutes === undefined) {\r\n      return [];\r\n    }\r\n    let currentTime = hours * 60 + minutes; // Convert to minutes\r\n\r\n    for (let i = 1; i <= config.TimeslotPerDay; i++) {\r\n      const start = formatTime(currentTime);\r\n      currentTime += config.Duration;\r\n      const end = formatTime(currentTime);\r\n\r\n      timeslots.push({\r\n        number: i,\r\n        start,\r\n        end,\r\n        type: \"class\",\r\n      });\r\n\r\n      // Check for lunch break\r\n      if (\r\n        i === config.BreakTimeslots.Junior ||\r\n        i === config.BreakTimeslots.Senior\r\n      ) {\r\n        const breakFor =\r\n          i === config.BreakTimeslots.Junior &&\r\n          i === config.BreakTimeslots.Senior\r\n            ? \"both\"\r\n            : i === config.BreakTimeslots.Junior\r\n              ? \"junior\"\r\n              : \"senior\";\r\n\r\n        const breakStart = formatTime(currentTime);\r\n        currentTime += config.BreakDuration;\r\n        const breakEnd = formatTime(currentTime);\r\n\r\n        timeslots.push({\r\n          number: i,\r\n          start: breakStart,\r\n          end: breakEnd,\r\n          type: \"break\",\r\n          breakFor,\r\n        });\r\n      }\r\n\r\n      // Check for mini break\r\n      if (\r\n        config.HasMinibreak &&\r\n        config.MiniBreak &&\r\n        i === config.MiniBreak.SlotNumber\r\n      ) {\r\n        const miniStart = formatTime(currentTime);\r\n        currentTime += config.MiniBreak.Duration;\r\n        const miniEnd = formatTime(currentTime);\r\n\r\n        timeslots.push({\r\n          number: i,\r\n          start: miniStart,\r\n          end: miniEnd,\r\n          type: \"minibreak\",\r\n        });\r\n      }\r\n    }\r\n\r\n    return timeslots;\r\n  };\r\n\r\n  const formatTime = (totalMinutes: number): string => {\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const minutes = totalMinutes % 60;\r\n    return `${hours.toString().padStart(2, \"0\")}:${minutes.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const slots = calculateTimeslots();\r\n  const endTime = slots[slots.length - 1]?.end || config.StartTime;\r\n\r\n  return (\r\n    <Paper elevation={0} sx={{ p: 3, border: 1, borderColor: \"divider\" }}>\r\n      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 2 }}>\r\n        <ScheduleIcon color=\"primary\" />\r\n        <Typography variant=\"h6\" fontWeight=\"bold\">\r\n          เธ•เธฑเธงเธญเธขเนเธฒเธเธ•เธฒเธฃเธฒเธเน€เธงเธฅเธฒ\r\n        </Typography>\r\n        <Chip\r\n          label={`${config.StartTime} - ${endTime}`}\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n        />\r\n      </Box>\r\n\r\n      <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1 }}>\r\n        {slots.map((slot, index) => (\r\n          <Box\r\n            key={index}\r\n            sx={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: 2,\r\n              p: 1.5,\r\n              borderRadius: 1,\r\n              bgcolor:\r\n                slot.type === \"break\"\r\n                  ? \"warning.light\"\r\n                  : slot.type === \"minibreak\"\r\n                    ? \"info.light\"\r\n                    : \"grey.100\",\r\n              border: 1,\r\n              borderColor:\r\n                slot.type === \"break\"\r\n                  ? \"warning.main\"\r\n                  : slot.type === \"minibreak\"\r\n                    ? \"info.main\"\r\n                    : \"grey.300\",\r\n            }}\r\n          >\r\n            {slot.type === \"class\" ? (\r\n              <>\r\n                <Chip\r\n                  label={`เธเธฒเธเธ—เธตเน ${slot.number}`}\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  sx={{ minWidth: 80 }}\r\n                />\r\n                <Typography variant=\"body2\" fontWeight=\"medium\">\r\n                  {slot.start} - {slot.end}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  ({config.Duration} เธเธฒเธ—เธต)\r\n                </Typography>\r\n              </>\r\n            ) : slot.type === \"break\" ? (\r\n              <>\r\n                <LunchIcon sx={{ color: \"warning.dark\" }} />\r\n                <Typography\r\n                  variant=\"body2\"\r\n                  fontWeight=\"bold\"\r\n                  color=\"warning.dark\"\r\n                >\r\n                  เธเธฑเธเน€เธ—เธตเนเธขเธ\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  {slot.start} - {slot.end}\r\n                </Typography>\r\n                <Chip\r\n                  label={\r\n                    slot.breakFor === \"both\"\r\n                      ? \"เธก.เธ•เนเธ + เธก.เธเธฅเธฒเธข\"\r\n                      : slot.breakFor === \"junior\"\r\n                        ? \"เธก.เธ•เนเธ\"\r\n                        : \"เธก.เธเธฅเธฒเธข\"\r\n                  }\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  color=\"warning\"\r\n                />\r\n              </>\r\n            ) : (\r\n              <>\r\n                <CoffeeIcon sx={{ color: \"info.dark\" }} />\r\n                <Typography variant=\"body2\" fontWeight=\"bold\" color=\"info.dark\">\r\n                  เธเธฑเธเน€เธฅเนเธ\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  {slot.start} - {slot.end}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  ({config.MiniBreak?.Duration} เธเธฒเธ—เธต)\r\n                </Typography>\r\n              </>\r\n            )}\r\n          </Box>\r\n        ))}\r\n      </Box>\r\n\r\n      {/* Summary */}\r\n      <Box sx={{ mt: 2, p: 2, bgcolor: \"grey.50\", borderRadius: 1 }}>\r\n        <Typography variant=\"caption\" color=\"text.secondary\">\r\n          <strong>เธชเธฃเธธเธ:</strong> {config.TimeslotPerDay} เธเธฒเธเน€เธฃเธตเธขเธ โ€ข เน€เธฃเธดเนเธก{\" \"}\r\n          {config.StartTime} โ€ข เธเธ {endTime} โ€ข เธฃเธงเธกเน€เธงเธฅเธฒเธเธฃเธฐเธกเธฒเธ“{\" \"}\r\n          {calculateTotalDuration(slots)} เธเธฑเนเธงเนเธกเธ\r\n        </Typography>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nfunction calculateTotalDuration(slots: any[]): string {\r\n  if (slots.length === 0) return \"0\";\r\n  const firstStart = slots[0].start;\r\n  const lastEnd = slots[slots.length - 1].end;\r\n\r\n  const [startH, startM] = firstStart.split(\":\").map(Number);\r\n  const [endH, endM] = lastEnd.split(\":\").map(Number);\r\n\r\n  const totalMinutes = endH * 60 + endM - (startH * 60 + startM);\r\n  const hours = Math.floor(totalMinutes / 60);\r\n  const minutes = totalMinutes % 60;\r\n\r\n  return minutes > 0\r\n    ? `${hours}.${Math.round((minutes / 60) * 10)}`\r\n    : `${hours}`;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\TimeslotPreviewGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\_components\\ValidationSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\component\\CloneTimetableDataModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCurrentTime' is assigned a value but never used.","line":58,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":62,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":62,"endColumn":16,"suggestions":[{"fix":{"range":[1760,1782],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'validate' and 'validateData'. Either include them or remove the dependency array.","line":63,"column":6,"nodeType":"ArrayExpression","endLine":63,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [cloneList, validate, validateData]","fix":{"range":[1789,1800],"text":"[cloneList, validate, validateData]"}}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":87,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":87,"endColumn":16,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[2429,2429],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[2429,2429],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3332,3335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3332,3335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":116,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":116,"endColumn":18,"suggestions":[{"fix":{"range":[3346,3365],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":146,"column":55,"nodeType":"MemberExpression","messageId":"limited","endLine":146,"endColumn":66}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, type JSX } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport CheckBox from \"@/components/mui/CheckBox\";\r\nimport { enqueueSnackbar } from \"notistack\";\r\nimport useSWR from \"swr\";\r\nimport { CircularProgress } from \"@mui/material\";\r\n\r\n// Server Actions\r\nimport {\r\n  getAllConfigsAction,\r\n  copyConfigAction,\r\n} from \"@/features/config/application/actions/config.actions\";\r\n\r\nimport type { ModalCloseHandler } from \"@/types/events\";\r\n\r\ntype TableConfigItem = {\r\n  ConfigID: string;\r\n  AcademicYear: number;\r\n  Semester: string;\r\n  ConfigJSON: string;\r\n};\r\n\r\ntype props = {\r\n  closeModal: ModalCloseHandler;\r\n  academicYear: string;\r\n  semester: string;\r\n  mutate: () => void;\r\n  setIsCopying: (copying: boolean) => void;\r\n};\r\n\r\nfunction CloneTimetableDataModal({\r\n  closeModal,\r\n  academicYear,\r\n  semester,\r\n  mutate,\r\n  setIsCopying,\r\n}: props) {\r\n  const [selectedCloneData, setSelectedCloneData] = useState<string>(\"\"); //เน€เธเนเธเธเธตเนเธฅเธฐเน€เธ—เธญเธกเธ—เธตเนเธเธฐเน€เธญเธฒเธเนเธญเธกเธนเธฅเธกเธฒ\r\n  const [cloneList, setCloneList] = useState({\r\n    assign: false,\r\n    lock: false,\r\n    timetable: false,\r\n  });\r\n  const [validate, setValidate] = useState(false); //เน€เธเนเธเธเนเธฒเธเธญเธเธเธฒเธฃเธ•เธฃเธงเธเธชเธญเธเธเนเธญเธกเธนเธฅเธ—เธตเนเธ•เธดเนเธ checkbox\r\n\r\n  function validateData() {\r\n    if (Object.values(cloneList).includes(true)) {\r\n      setValidate(true);\r\n    } else {\r\n      setValidate(false);\r\n    }\r\n  }\r\n\r\n  const [currentTime, setCurrentTime] = useState(semester + \"/\" + academicYear);\r\n\r\n  useEffect(() => {\r\n    validateData();\r\n    console.log(validate);\r\n  }, [cloneList]);\r\n\r\n  const tableConfig = useSWR(\"all-configs\", async () => {\r\n    try {\r\n      const result = await getAllConfigsAction(undefined);\r\n      if (!result.success) {\r\n        throw new Error(result.error?.message || \"Failed to fetch configs\");\r\n      }\r\n      return result.data;\r\n    } catch (error) {\r\n      console.error(\"Error fetching configs:\", error);\r\n      return [];\r\n    }\r\n  });\r\n\r\n  // เน€เธเนเธเธเนเธฒเธเธญเธเธ—เธตเนเธ•เธดเนเธ checkbox\r\n  const confirmed = () => {\r\n    if (!validate) {\r\n      enqueueSnackbar(\"เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธเนเธญเธกเธนเธฅเธ—เธตเนเธ•เนเธญเธเธเธฒเธฃเธเธฑเธ”เธฅเธญเธ\", {\r\n        variant: \"warning\",\r\n      });\r\n      return;\r\n    }\r\n    setIsCopying(true);\r\n    copyData();\r\n    closeModal();\r\n  };\r\n  const cancel = () => {\r\n    closeModal();\r\n  };\r\n  //Function เธ•เธฑเธงเธเธตเนเนเธเนเธฅเธเธเนเธญเธกเธนเธฅเธซเธเธถเนเธเธ•เธฑเธงเธเธฃเนเธญเธกเธเธฑเธเธซเธฅเธฒเธขเธ•เธฑเธงเธเธฒเธเธเธฒเธฃเธ•เธดเนเธ checkbox\r\n  async function copyData() {\r\n    try {\r\n      const result = await copyConfigAction({\r\n        fromConfigId: selectedCloneData,\r\n        toAcademicYear: parseInt(academicYear),\r\n        toSemester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        copyAssignments: cloneList.assign,\r\n        copyLocks: cloneList.lock,\r\n        copySchedules: cloneList.timetable,\r\n      });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      enqueueSnackbar(\"เน€เธฃเธตเธขเธเธเนเธญเธกเธนเธฅเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      console.log(error);\r\n      enqueueSnackbar(\r\n        \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเน€เธฃเธตเธขเธเธเนเธญเธกเธนเธฅ: \" + (error.message || \"Unknown error\"),\r\n        { variant: \"error\" },\r\n      );\r\n    } finally {\r\n      setIsCopying(false);\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-fit h-fit p-7 gap-10 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เธเธฑเธ”เธฅเธญเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancel} />\r\n          </div>\r\n          <div className=\"flex flex-col gap-5 w-[500px] h-auto justify-between items-center border p-3 rounded\">\r\n            <div className=\"flex w-full justify-between items-center\">\r\n              <b className=\"text-sm\">เธเธฑเธ”เธฅเธญเธเธเนเธญเธกเธนเธฅเนเธเธ—เธตเนเน€เธ—เธญเธก</b>\r\n              <p className=\"text-sm\">\r\n                {semester}/{academicYear}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex flex-col w-full justify-center items-center\">\r\n              <div className=\"flex w-full justify-between items-center\">\r\n                <b className=\"text-sm\" onClick={() => console.log(cloneList)}>\r\n                  เน€เธฅเธทเธญเธเน€เธ—เธญเธกเธ—เธตเนเธ•เนเธญเธเธเธฒเธฃเธเธฑเธ”เธฅเธญเธ\r\n                </b>\r\n                <div className=\"flex gap-3\">\r\n                  {tableConfig.isValidating && !tableConfig.data ? (\r\n                    <CircularProgress />\r\n                  ) : (\r\n                    <Dropdown\r\n                      data={tableConfig.data ?? []}\r\n                      renderItem={({\r\n                        data,\r\n                      }: {\r\n                        data: unknown;\r\n                      }): JSX.Element => {\r\n                        const item = data as TableConfigItem;\r\n                        return item.ConfigID !== currentTime ? (\r\n                          <li className=\"w-full text-sm\">{item.ConfigID}</li>\r\n                        ) : (\r\n                          <></>\r\n                        );\r\n                      }}\r\n                      currentValue={selectedCloneData}\r\n                      handleChange={(value: unknown) => {\r\n                        const item = value as TableConfigItem;\r\n                        setSelectedCloneData(() => item.ConfigID);\r\n                      }}\r\n                      searchFunction={undefined}\r\n                    />\r\n                  )}\r\n                </div>\r\n              </div>\r\n              {selectedCloneData.length !== 0 ? (\r\n                <div className=\"flex w-full flex-col gap-3\">\r\n                  <CheckBox\r\n                    label={\"เธเธฒเธฃเธกเธญเธเธซเธกเธฒเธขเธงเธดเธเธฒเน€เธฃเธตเธขเธ\"}\r\n                    value={\"\"}\r\n                    name={\"Assign\"}\r\n                    handleClick={() =>\r\n                      setCloneList(() => ({\r\n                        ...cloneList,\r\n                        assign: !cloneList.assign,\r\n                      }))\r\n                    }\r\n                    checked={false}\r\n                  />\r\n                  <CheckBox\r\n                    label={\"เธเธฒเธเธฅเนเธญเธ\"}\r\n                    value={\"\"}\r\n                    name={\"LockData\"}\r\n                    handleClick={() =>\r\n                      setCloneList(() => ({\r\n                        ...cloneList,\r\n                        lock: !cloneList.lock,\r\n                      }))\r\n                    }\r\n                    disabled={!cloneList.assign}\r\n                  />\r\n                  <CheckBox\r\n                    label={\"เธ•เธฒเธฃเธฒเธเธชเธญเธ\"}\r\n                    value={\"\"}\r\n                    name={\"Timeslot\"}\r\n                    handleClick={() =>\r\n                      setCloneList(() => ({\r\n                        ...cloneList,\r\n                        timetable: !cloneList.timetable,\r\n                      }))\r\n                    }\r\n                    disabled={!cloneList.assign}\r\n                  />\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n          <span className=\"w-full flex gap-3 justify-end h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n              reverseIcon={false}\r\n              isDisabled={false}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default CloneTimetableDataModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\component\\ConfirmDeleteModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":26,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":26,"endColumn":23,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[722,722],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[722,722],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1654,1657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1654,1657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AiOutlineClose } from \"react-icons/ai\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\n\r\n// Server Actions\r\nimport { deleteTimeslotsByTermAction } from \"@/features/timeslot/application/actions/timeslot.actions\";\r\n\r\nimport type { ModalCloseHandler } from \"@/types/events\";\r\n\r\ntype props = {\r\n  closeModal: ModalCloseHandler;\r\n  academicYear: string;\r\n  semester: string;\r\n  mutate: () => void;\r\n};\r\n\r\nfunction ConfirmDeleteModal({\r\n  closeModal,\r\n  academicYear,\r\n  semester,\r\n  mutate,\r\n}: props) {\r\n  const confirmed = () => {\r\n    removeMultiData();\r\n    closeModal();\r\n  };\r\n  const cancel = () => {\r\n    closeModal();\r\n  };\r\n  //Function เธ•เธฑเธงเธเธตเนเนเธเนเธฅเธเธเนเธญเธกเธนเธฅเธซเธเธถเนเธเธ•เธฑเธงเธเธฃเนเธญเธกเธเธฑเธเธซเธฅเธฒเธขเธ•เธฑเธงเธเธฒเธเธเธฒเธฃเธ•เธดเนเธ checkbox\r\n  const removeMultiData = async () => {\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธฅเธเธเนเธญเธกเธนเธฅ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await deleteTimeslotsByTermAction({\r\n        AcademicYear: parseInt(academicYear),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n      });\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธฅเธเธเนเธญเธกเธนเธฅเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n      window.location.reload();\r\n    } catch (err: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธฅเธเธเนเธญเธกเธนเธฅเนเธกเนเธชเธณเน€เธฃเนเธ \" + (err.message || \"Unknown error\"), {\r\n        variant: \"error\",\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-fit h-fit p-7 gap-10 bg-white rounded\">\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none\">เธฅเธเธเนเธญเธกเธนเธฅ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={cancel} />\r\n          </div>\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none font-bold\">\r\n              เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธเธ•เธฒเธฃเธฒเธเธชเธญเธเน€เธ—เธญเธก {semester} เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ {academicYear}{\" \"}\r\n              เนเธเนเธซเธฃเธทเธญเนเธกเน\r\n            </p>\r\n          </div>\r\n          <span className=\"w-full flex gap-3 justify-end h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default ConfirmDeleteModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\component\\Counter.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":6,"column":13,"nodeType":"Identifier","messageId":"bannedFunctionType","endLine":6,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { IoMdRemove, IoMdAdd } from \"react-icons/io\";\r\ntype Props = {\r\n  classifier: string;\r\n  currentValue: number;\r\n  onChange: Function;\r\n  isDisabled: boolean;\r\n};\r\n\r\nfunction Counter({\r\n  classifier,\r\n  currentValue = 1,\r\n  onChange,\r\n  isDisabled,\r\n}: Props) {\r\n  return (\r\n    <>\r\n      <div className=\"flex w-fit justify-between h-[45px] select-none gap-5 px-3 items-center\">\r\n        <div\r\n          style={{ display: isDisabled ? \"none\" : \"flex\" }}\r\n          onClick={() => onChange(currentValue - 1)}\r\n          className=\"p-2 drop-shadow w-fit bg-white rounded cursor-pointer hover:bg-slate-100 duration-300\"\r\n        >\r\n          <IoMdRemove size={20} className=\"cursor-pointer\" />\r\n        </div>\r\n        <p className=\"text-md text-gray-600\">\r\n          {currentValue} {classifier}\r\n        </p>\r\n        <div\r\n          style={{ display: isDisabled ? \"none\" : \"flex\" }}\r\n          onClick={() => onChange(currentValue + 1)}\r\n          className=\"p-2 drop-shadow w-fit bg-white rounded cursor-pointer hover:bg-slate-100 duration-300\"\r\n        >\r\n          <IoMdAdd size={20} className=\"cursor-pointer\" />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Counter;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\component\\SelectedValue.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSelectedValue' is assigned a value but never used.","line":10,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { MdArrowBackIosNew, MdArrowForwardIos } from \"react-icons/md\";\r\n\r\ntype Props = {\r\n  values: string | number[];\r\n};\r\n\r\nfunction SelectedValue({ values = [2565, 2566, 2567, 2568] }: Props) {\r\n  const [index, setIndex] = useState<number>(0);\r\n  const [selectedValue, setSelectedValue] = useState<string | number[]>(values);\r\n  const fowardValue = (): void => {\r\n    if (index + 1 === values.length) {\r\n      // console.log(\"no\");\r\n    } else {\r\n      setIndex(() => index + 1);\r\n    }\r\n  };\r\n  const previousValue = (): void => {\r\n    if (index - 1 < 0) {\r\n      // console.log(\"no\");\r\n    } else {\r\n      setIndex(() => index - 1);\r\n    }\r\n  };\r\n  // const keyListener = (e: React.KeyboardEvent<HTMLDivElement>) => {\r\n  //     if (e.key === 'ArrowLeft') {\r\n  //         previousValue();\r\n  //     } else if(e.key === 'ArrowRight') {\r\n  //         fowardValue();\r\n  //     }\r\n  //   };\r\n  return (\r\n    <>\r\n      <div className=\"relative flex justify-between w-fit h-[45px] border border-[#EDEEF3] items-center gap-5 px-3 select-none\">\r\n        <MdArrowBackIosNew\r\n          className=\"cursor-pointer\"\r\n          onClick={() => previousValue()}\r\n        />\r\n        <p className=\"text-md text-gray-600\">{selectedValue[index]}</p>\r\n        <MdArrowForwardIos\r\n          className=\"cursor-pointer\"\r\n          onClick={() => fowardValue()}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default SelectedValue;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\config\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MdSchool' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsSaved' is assigned a value but never used.","line":40,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3034,3037],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3034,3037],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'tableConfig.data'. Either include it or remove the dependency array.","line":99,"column":6,"nodeType":"ArrayExpression","endLine":99,"endColumn":56,"suggestions":[{"desc":"Update the dependencies array to be: [tableConfig.isValidating, academicYear, semester, tableConfig.data]","fix":{"range":[3929,3979],"text":"[tableConfig.isValidating, academicYear, semester, tableConfig.data]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4019,4022],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4019,4022],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'configData'. Either include it or remove the dependency array. You can also do a functional update 'setConfigData(c => ...)' if you only need 'configData' in the 'setConfigData' call.","line":122,"column":6,"nodeType":"ArrayExpression","endLine":122,"endColumn":33,"suggestions":[{"desc":"Update the dependencies array to be: [configData, configData.TimeslotPerDay]","fix":{"range":[5195,5222],"text":"[configData, configData.TimeslotPerDay]"}}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":267,"column":31,"nodeType":"MemberExpression","messageId":"limited","endLine":267,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":345,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":345,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12806,12809],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12806,12809],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":403,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":403,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15266,15269],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15266,15269],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":424,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":424,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16150,16153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16150,16153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport ReplayIcon from \"@mui/icons-material/Replay\";\r\nimport Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport { useParams } from \"next/navigation\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { BsTable, BsCalendar2Day } from \"react-icons/bs\";\r\nimport { LuClock10 } from \"react-icons/lu\";\r\nimport { MdSchool, MdLunchDining } from \"react-icons/md\";\r\nimport { TbTimeDuration45 } from \"react-icons/tb\";\r\nimport CheckBox from \"@/components/mui/CheckBox\";\r\nimport PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport Counter from \"./component/Counter\";\r\nimport ConfirmDeleteModal from \"./component/ConfirmDeleteModal\";\r\nimport CloneTimetableDataModal from \"./component/CloneTimetableDataModal\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\nimport {\r\n  getConfigByTermAction,\r\n  createConfigAction,\r\n} from \"@/features/config/application/actions/config.actions\";\r\nimport useSWR from \"swr\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport Loading from \"@/app/loading\";\r\nimport {\r\n  PageLoadingSkeleton,\r\n  NetworkErrorEmptyState,\r\n} from \"@/components/feedback\";\r\nimport { useSemesterSync } from \"@/hooks\";\r\n\r\nfunction TimetableConfigValue() {\r\n  const params = useParams();\r\n\r\n  // Sync URL params with global store\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n  const [isCopying, setIsCopying] = useState(false);\r\n  const [isActiveModal, setIsActiveModal] = useState<boolean>(false);\r\n  const [isCloneDataModal, setIsCloneDataModal] = useState<boolean>(false);\r\n  const [isSaved, setIsSaved] = useState<boolean>(false);\r\n  const [addMiniBreak, setAddMiniBreak] = useState<boolean>(false);\r\n  const [configData, setConfigData] = useState({\r\n    Days: [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\"],\r\n    AcademicYear: parseInt(academicYear),\r\n    Semester: `SEMESTER_${semester}`,\r\n    StartTime: \"08:30\",\r\n    BreakDuration: 50,\r\n    BreakTimeslots: {\r\n      Junior: 4,\r\n      Senior: 5,\r\n    },\r\n    Duration: 50,\r\n    TimeslotPerDay: 8,\r\n    MiniBreak: {\r\n      Duration: 10,\r\n      SlotNumber: 2,\r\n    },\r\n    HasMinibreak: false,\r\n  });\r\n  const [isSetTimeslot, setIsSetTimeslot] = useState(false); //เธ•เธฑเนเธเธเนเธฒเนเธเนเธฅเนเธงเธเธฐ = true\r\n  const tableConfig = useSWR(`config-${academicYear}-${semester}`, async () => {\r\n    const result = await getConfigByTermAction({\r\n      AcademicYear: parseInt(academicYear),\r\n      Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n    });\r\n    return result.success ? result.data : null;\r\n  });\r\n\r\n  useEffect(() => {\r\n    const checkSetTimeslot = tableConfig.data !== undefined;\r\n    setIsSetTimeslot(() => checkSetTimeslot);\r\n    if (tableConfig.data && tableConfig.data.Config) {\r\n      // Map table_config.Config JSON to legacy local state format\r\n      // Config is stored as unstructured JSON, so we need to parse it carefully\r\n      try {\r\n        const config = tableConfig.data.Config as any;\r\n        setConfigData({\r\n          Days: config.Days || [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\"],\r\n          AcademicYear: tableConfig.data.AcademicYear,\r\n          Semester: tableConfig.data.Semester,\r\n          StartTime: config.StartTime || \"08:30\",\r\n          BreakDuration: config.BreakDuration || 50,\r\n          BreakTimeslots: {\r\n            Junior: config.BreakTimeslots?.Junior || 4,\r\n            Senior: config.BreakTimeslots?.Senior || 5,\r\n          },\r\n          Duration: config.Duration || 50,\r\n          TimeslotPerDay: config.TimeslotPerDay || 8,\r\n          MiniBreak: {\r\n            Duration: config.MiniBreak?.Duration || 10,\r\n            SlotNumber: config.MiniBreak?.SlotNumber || 2,\r\n          },\r\n          HasMinibreak: config.HasMinibreak || false,\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error parsing config JSON:\", error);\r\n      }\r\n    }\r\n  }, [tableConfig.isValidating, academicYear, semester]);\r\n  const handleChangeStartTime = (e: any) => {\r\n    const value = e.target.value;\r\n    setConfigData(() => ({ ...configData, StartTime: value }));\r\n  };\r\n  const [breakSlotMap, setBreakSlotMap] = useState<number[]>([]); //เน€เธญเธฒเนเธงเนเนเธกเธเน€เธเธทเนเธญเนเธเนเธเธฑเธ เธเธณเธซเธเธ”เธเธฒเธเธเธฑเธเน€เธ—เธตเนเธขเธ เธเนเธญเธกเธนเธฅเธ•เธฑเธงเธญเธขเนเธฒเธ => [1, 2, 3, 4, 5]\r\n  useEffect(() => {\r\n    const breakSlot: number[] = []; //เธเนเธญเธ render เน€เธชเธฃเนเธเธเธฐเนเธซเน set เธเนเธฒ default เธซเธฃเธทเธญเธเนเธฒเธ—เธตเนเนเธ”เนเธกเธฒเธเนเธญเธ\r\n    for (let i = 0; i < configData.TimeslotPerDay; i++) {\r\n      breakSlot.push(i + 1);\r\n    }\r\n    setBreakSlotMap(breakSlot);\r\n    const currentValue = configData.TimeslotPerDay;\r\n    const breakJVal = configData.BreakTimeslots.Junior;\r\n    const breakSVal = configData.BreakTimeslots.Senior;\r\n    if (breakJVal > currentValue || breakSVal > currentValue) {\r\n      const jVal = breakJVal > currentValue ? currentValue : breakJVal; //เธ–เนเธฒ range เน€เธเธดเธเธเธฐเน€เธเนเธ—เน€เธเนเธเธเนเธฒเธชเธนเธเธชเธธเธ”เธเธญเธ TimeSlotPerDay\r\n      const sVal = breakSVal > currentValue ? currentValue : breakSVal;\r\n      setConfigData(() => ({\r\n        ...configData,\r\n        BreakTimeslots: { Junior: jVal, Senior: sVal },\r\n      }));\r\n    } //เน€เธเนเธเธงเนเธฒเธ–เนเธฒเธเธฒเธเธเธฑเธเน€เธ—เธตเนเธขเธเธกเธต range เธ—เธตเนเน€เธเธดเธเธเธณเธเธงเธเธเธฒเธเธ•เนเธญเธงเธฑเธ เธเธฐเนเธซเน set เน€เธเนเธเธเนเธฒเธชเธนเธเธชเธธเธ”เธเธญเธเธเธณเธเธงเธเธเธฒเธเนเธ”เธขเธญเธฑเธ•เนเธเธกเธฑเธ•เธด\r\n  }, [configData.TimeslotPerDay]);\r\n  const handleChangeTimeSlotPerDay = (currentValue: number) => {\r\n    if (currentValue < 7 || currentValue > 10) {\r\n      return;\r\n    }\r\n    setConfigData(() => ({ ...configData, TimeslotPerDay: currentValue }));\r\n  };\r\n  const handleChangeDuration = (currentValue: number) => {\r\n    if (currentValue < 30 || currentValue > 120) {\r\n      return;\r\n    }\r\n    setConfigData(() => ({\r\n      ...configData,\r\n      Duration: currentValue,\r\n      BreakDuration: currentValue,\r\n    }));\r\n  };\r\n  // const handleChangeBreakDuration = (currentValue: number) => {\r\n  //   setConfigData(() => ({ ...configData, BreakDuration: currentValue }));\r\n  // };\r\n  const handleChangeBreakTimeJ = (currentValue: unknown) => {\r\n    setConfigData(() => ({\r\n      ...configData,\r\n      BreakTimeslots: {\r\n        Junior: currentValue as number,\r\n        Senior: configData.BreakTimeslots.Senior,\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleChangeBreakTimeS = (currentValue: unknown) => {\r\n    setConfigData(() => ({\r\n      ...configData,\r\n      BreakTimeslots: {\r\n        Junior: configData.BreakTimeslots.Junior,\r\n        Senior: currentValue as number,\r\n      },\r\n    }));\r\n  };\r\n  const handleChangeMiniBreak = (currentValue: unknown) => {\r\n    setConfigData(() => ({\r\n      ...configData,\r\n      MiniBreak: {\r\n        Duration: configData.MiniBreak.Duration,\r\n        SlotNumber: currentValue as number,\r\n      },\r\n    }));\r\n  };\r\n  const reset = () => {\r\n    setConfigData(() => ({\r\n      Days: [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\"],\r\n      AcademicYear: parseInt(academicYear),\r\n      Semester: `SEMESTER_${semester}`,\r\n      StartTime: \"08:30\",\r\n      BreakDuration: 50,\r\n      BreakTimeslots: {\r\n        Junior: 4,\r\n        Senior: 5,\r\n      },\r\n      Duration: 50,\r\n      TimeslotPerDay: 8,\r\n      MiniBreak: {\r\n        Duration: 10,\r\n        SlotNumber: 2,\r\n      },\r\n      HasMinibreak: false,\r\n    }));\r\n    enqueueSnackbar(\"เธเธทเธเธเนเธฒเน€เธฃเธดเนเธกเธ•เนเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n  };\r\n\r\n  const saved = async () => {\r\n    setIsSetTimeslot(true);\r\n    const saving = enqueueSnackbar(\"เธเธณเธฅเธฑเธเธ•เธฑเนเธเธเนเธฒเธ•เธฒเธฃเธฒเธ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n    try {\r\n      const result = await createConfigAction({\r\n        ConfigID: `${semester}-${academicYear}`,\r\n        AcademicYear: parseInt(academicYear),\r\n        Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        Config: {\r\n          ...configData,\r\n          HasMinibreak: addMiniBreak,\r\n        },\r\n      });\r\n\r\n      if (result.success) {\r\n        closeSnackbar(saving);\r\n        enqueueSnackbar(\"เธ•เธฑเนเธเธเนเธฒเธ•เธฒเธฃเธฒเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n        await tableConfig.mutate();\r\n      } else {\r\n        throw new Error(result.error?.message || \"Unknown error\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Config save error:\", error);\r\n      closeSnackbar(saving);\r\n      enqueueSnackbar(\"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเธ•เธฑเนเธเธเนเธฒเธ•เธฒเธฃเธฒเธ\", { variant: \"error\" });\r\n      setIsSetTimeslot(false);\r\n    }\r\n  };\r\n\r\n  if (tableConfig.isLoading && !isCopying) {\r\n    return <PageLoadingSkeleton />;\r\n  }\r\n\r\n  if (tableConfig.error) {\r\n    return <NetworkErrorEmptyState onRetry={() => tableConfig.mutate()} />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isCopying ? <Loading /> : null}\r\n      {isActiveModal ? (\r\n        <ConfirmDeleteModal\r\n          closeModal={() => setIsActiveModal(false)}\r\n          mutate={tableConfig.mutate}\r\n          academicYear={academicYear}\r\n          semester={semester}\r\n        />\r\n      ) : null}\r\n      {isCloneDataModal ? (\r\n        <CloneTimetableDataModal\r\n          setIsCopying={setIsCopying}\r\n          closeModal={() => setIsCloneDataModal(false)}\r\n          mutate={tableConfig.mutate}\r\n          academicYear={academicYear}\r\n          semester={semester}\r\n        />\r\n      ) : null}\r\n      <span className=\"flex flex-col gap-3 my-5 px-3\">\r\n        {!isSetTimeslot ? (\r\n          <div className=\"flex w-full py-4 justify-end items-center\">\r\n            <u\r\n              onClick={() => setIsCloneDataModal(true)}\r\n              className=\"text-blue-500 cursor-pointer hover:text-blue-600 duration-300\"\r\n            >\r\n              เน€เธฃเธตเธขเธเธเนเธญเธกเธนเธฅเธ•เธฒเธฃเธฒเธเธชเธญเธเธ—เธตเนเธกเธตเธญเธขเธนเน\r\n            </u>\r\n          </div>\r\n        ) : null}\r\n        {/* Config timeslot per day */}\r\n        <div className=\"flex w-full h-[65px] justify-between py-4 items-center\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <BsTable size={25} className=\"fill-gray-500\" />\r\n            <p onClick={() => console.log(configData)} className=\"text-md\">\r\n              เธเธณเธซเธเธ”เธเธฒเธเธ•เนเธญเธงเธฑเธ\r\n            </p>\r\n          </div>\r\n          {isSetTimeslot ? (\r\n            <p className=\" text-gray-600\">\r\n              <b>{configData.TimeslotPerDay}</b> เธเธฒเธ\r\n            </p>\r\n          ) : (\r\n            <Counter\r\n              classifier=\"เธเธฒเธ\"\r\n              currentValue={configData.TimeslotPerDay}\r\n              onChange={handleChangeTimeSlotPerDay}\r\n              isDisabled={isSetTimeslot}\r\n            />\r\n          )}\r\n        </div>\r\n        {/* Config duration */}\r\n        <div className=\"flex w-full h-[65px] justify-between py-4 items-center\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <TbTimeDuration45 size={25} className=\"stroke-gray-500\" />\r\n            <p className=\"text-md\">เธเธณเธซเธเธ”เธฃเธฐเธขเธฐเน€เธงเธฅเธฒเธ•เนเธญเธเธฒเธ</p>\r\n          </div>\r\n          {isSetTimeslot ? (\r\n            <p className=\" text-gray-600\">\r\n              <b>{configData.Duration}</b> เธเธฒเธ—เธต\r\n            </p>\r\n          ) : (\r\n            <Counter\r\n              classifier=\"เธเธฒเธ—เธต\"\r\n              currentValue={configData.Duration}\r\n              onChange={handleChangeDuration}\r\n              isDisabled={isSetTimeslot}\r\n            />\r\n          )}\r\n        </div>\r\n        {/* Config time for start class */}\r\n        <div className=\"flex w-full h-[65px] justify-between py-4 items-center\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <LuClock10 size={25} className=\"stroke-gray-500\" />\r\n            <p className=\"text-md\">เธเธณเธซเธเธ”เน€เธงเธฅเธฒเน€เธฃเธดเนเธกเธเธฒเธเนเธฃเธ</p>\r\n          </div>\r\n          {isSetTimeslot ? (\r\n            <p className=\" text-gray-600\">\r\n              <b>{configData.StartTime}</b> เธเธฒเธฌเธดเธเธฒ\r\n            </p>\r\n          ) : (\r\n            <input\r\n              type=\"time\"\r\n              value={configData.StartTime}\r\n              className=\"text-gray-500 outline-none h-[45px] border px-3 w-[140px]\"\r\n              onChange={handleChangeStartTime}\r\n            />\r\n          )}\r\n        </div>\r\n        {/* Config เธเธฑเธเน€เธฅเนเธ */}\r\n        <div className=\"flex w-full h-[65px] justify-between py-4 items-center mt-3\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <MdLunchDining size={25} className=\"fill-gray-500\" />\r\n            <p className=\"text-md\">เธเธณเธซเธเธ”เธเธฒเธเธเธฑเธเน€เธฅเนเธ</p>\r\n          </div>\r\n          <div className=\"flex flex-col-reverse gap-4\">\r\n            {!addMiniBreak && !isSetTimeslot ? (\r\n              <u\r\n                className=\" text-blue-500 cursor-pointer select-none\"\r\n                onClick={() => setAddMiniBreak(true)}\r\n              >\r\n                เน€เธเธดเนเธกเน€เธงเธฅเธฒเธเธฑเธเน€เธฅเนเธ\r\n              </u>\r\n            ) : !isSetTimeslot ? (\r\n              <div className=\"flex gap-3 items-center\">\r\n                <p className=\"text-md text-gray-500\">เธเธฑเธเน€เธฅเนเธเธเนเธญเธเธเธฒเธเธ—เธตเน</p>\r\n                <Dropdown\r\n                  width=\"100%\"\r\n                  height=\"40px\"\r\n                  data={breakSlotMap}\r\n                  currentValue={String(configData.MiniBreak.SlotNumber)}\r\n                  placeHolder=\"เน€เธฅเธทเธญเธเธเธฒเธ\"\r\n                  renderItem={({ data }: { data: any }): React.JSX.Element => (\r\n                    <li className=\"w-[70px]\">{data}</li>\r\n                  )}\r\n                  handleChange={handleChangeMiniBreak}\r\n                  searchFunction={undefined}\r\n                />\r\n                <p className=\" text-gray-500\">เน€เธงเธฅเธฒ</p>\r\n                <input\r\n                  disabled={isSetTimeslot}\r\n                  type=\"number\"\r\n                  className=\"border w-14 h-10 rounded pl-2\"\r\n                  onChange={(e) =>\r\n                    setConfigData(() => ({\r\n                      ...configData,\r\n                      MiniBreak: {\r\n                        Duration: parseInt(e.target.value),\r\n                        SlotNumber: configData.MiniBreak.SlotNumber,\r\n                      },\r\n                    }))\r\n                  }\r\n                  value={configData.MiniBreak.Duration}\r\n                />\r\n                <p className=\" text-gray-500\">เธเธฒเธ—เธต</p>\r\n                <u\r\n                  className=\" text-blue-500 ml-4 cursor-pointer select-none\"\r\n                  onClick={() => setAddMiniBreak(false)}\r\n                >\r\n                  เธขเธเน€เธฅเธดเธ\r\n                </u>\r\n              </div>\r\n            ) : (\r\n              <p className=\" text-gray-600\">\r\n                เธเนเธญเธเธเธฒเธเธ—เธตเน <b>{configData.MiniBreak.SlotNumber}</b> เธฃเธฐเธขเธฐเน€เธงเธฅเธฒ{\" \"}\r\n                <b>{configData.MiniBreak.Duration}</b> เธเธฒเธ—เธต\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {/* Config lunch time */}\r\n        <div className=\"flex w-full h-auto justify-between py-4 items-center\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <MdLunchDining size={25} className=\"fill-gray-500\" />\r\n            <p className=\"text-md\">เธเธณเธซเธเธ”เธเธฒเธเธเธฑเธเน€เธ—เธตเนเธขเธ</p>\r\n          </div>\r\n          <div className=\"flex flex-col-reverse gap-4\">\r\n            <div className=\"flex justify-between items-center gap-3\">\r\n              <p className=\"text-md text-gray-500\">เธกเธฑเธเธขเธกเธเธฅเธฒเธขเธเธฒเธเธ—เธตเน</p>\r\n              {isSetTimeslot ? (\r\n                <b className=\"text-md text-gray-600\">\r\n                  {configData.BreakTimeslots.Senior}\r\n                </b>\r\n              ) : (\r\n                <Dropdown\r\n                  width=\"100%\"\r\n                  height=\"40px\"\r\n                  data={breakSlotMap}\r\n                  currentValue={String(configData.BreakTimeslots.Senior)}\r\n                  placeHolder=\"เน€เธฅเธทเธญเธเธเธฒเธ\"\r\n                  renderItem={({ data }: { data: any }): React.JSX.Element => (\r\n                    <li className=\"w-[70px]\">{data}</li>\r\n                  )}\r\n                  handleChange={handleChangeBreakTimeS}\r\n                  searchFunction={undefined}\r\n                />\r\n              )}\r\n            </div>\r\n            <div className=\"flex justify-between items-center gap-3\">\r\n              <p className=\" text-gray-500\">เธกเธฑเธเธขเธกเธ•เนเธเธเธฒเธเธ—เธตเน</p>\r\n              {isSetTimeslot ? (\r\n                <b className=\" text-gray-600\">\r\n                  {configData.BreakTimeslots.Junior}\r\n                </b>\r\n              ) : (\r\n                <Dropdown\r\n                  width=\"100%\"\r\n                  height=\"40px\"\r\n                  data={breakSlotMap}\r\n                  currentValue={String(configData.BreakTimeslots.Junior)}\r\n                  placeHolder=\"เน€เธฅเธทเธญเธเธเธฒเธ\"\r\n                  renderItem={({ data }: { data: any }): React.JSX.Element => (\r\n                    <li className=\"w-[70px]\">{data}</li>\r\n                  )}\r\n                  handleChange={handleChangeBreakTimeJ}\r\n                  searchFunction={undefined}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Config day of week */}\r\n        <div className=\"flex w-full h-[65px] justify-between py-4 items-center\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <BsCalendar2Day size={25} className=\"fill-gray-500\" />\r\n            <p className=\"text-md\">เธเธณเธซเธเธ”เธงเธฑเธเนเธเธ•เธฒเธฃเธฒเธเธชเธญเธ</p>\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            <CheckBox\r\n              label=\"เธงเธฑเธเธเธฑเธเธ—เธฃเน - เธจเธธเธเธฃเน (เธเนเธฒเน€เธฃเธดเนเธกเธ•เนเธ)\"\r\n              checked={true}\r\n              disabled={true}\r\n              value={\"\"}\r\n              name={\"\"}\r\n              handleClick={undefined}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"flex w-full h-[65px] justify-between items-center\">\r\n          {isSaved ? (\r\n            <p className=\"text-green-400\">เธ•เธฑเนเธเธเนเธฒเธชเธณเน€เธฃเนเธ !</p>\r\n          ) : (\r\n            <>\r\n              <div>\r\n                <PrimaryButton\r\n                  handleClick={() => setIsActiveModal(true)}\r\n                  title={\"เธฅเธเน€เธ—เธญเธก\"}\r\n                  color={\"danger\"}\r\n                  Icon={<DeleteIcon />}\r\n                  reverseIcon={false}\r\n                  isDisabled={!isSetTimeslot}\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-3\">\r\n                <PrimaryButton\r\n                  handleClick={reset}\r\n                  title={\"เธเธทเธเธเนเธฒเน€เธฃเธดเนเธกเธ•เนเธ\"}\r\n                  color={\"secondary\"}\r\n                  Icon={<ReplayIcon />}\r\n                  reverseIcon={false}\r\n                  isDisabled={isSetTimeslot}\r\n                />\r\n                <PrimaryButton\r\n                  handleClick={saved}\r\n                  title={\"เธ•เธฑเนเธเธเนเธฒ\"}\r\n                  color={\"success\"}\r\n                  Icon={<CheckIcon />}\r\n                  reverseIcon={false}\r\n                  isDisabled={isSetTimeslot}\r\n                />\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </span>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TimetableConfigValue;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\AddLockScheduleModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'validateData'. Either include it or remove the dependency array.","line":92,"column":6,"nodeType":"ArrayExpression","endLine":99,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [lockScheduleData.Subject, lockScheduleData.DayOfWeek, lockScheduleData.timeSlotID, lockScheduleData.Teachers, lockScheduleData.Grade, lockScheduleData.RoomName, validateData]","fix":{"range":[2925,3122],"text":"[lockScheduleData.Subject, lockScheduleData.DayOfWeek, lockScheduleData.timeSlotID, lockScheduleData.Teachers, lockScheduleData.Grade, lockScheduleData.RoomName, validateData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport SelectDayOfWeek from \"./SelectDayOfWeek\";\r\nimport SelectSubject from \"./SelectSubject\";\r\nimport SelectMultipleTimeSlot from \"./SelectMultipleTimeSlot\";\r\nimport SelectTeacher from \"./SelectTeacher\";\r\nimport SelectedClassRoom from \"./SelectedClassRoom\";\r\nimport SelectRoomName from \"./SelectRoomName\";\r\nimport type { room, subject } from \"@/prisma/generated/client\";\r\nimport { subject_credit, SubjectCategory } from \"@/prisma/generated/client\";\r\nimport type {\r\n  ModalCloseHandler,\r\n  ModalConfirmHandler,\r\n  InputChangeHandler,\r\n} from \"@/types/events\";\r\nimport type { LockScheduleFormData } from \"@/types/lock-schedule\";\r\n\r\ntype Props = {\r\n  closeModal: ModalCloseHandler;\r\n  confirmChange: ModalConfirmHandler<LockScheduleFormData>;\r\n};\r\n\r\nfunction AddLockScheduleModal({\r\n  closeModal,\r\n  confirmChange: _confirmChange,\r\n}: Props) {\r\n  const [lockScheduleData, setLockScheduledata] =\r\n    useState<LockScheduleFormData>({\r\n      Subject: {\r\n        SubjectCode: \"\",\r\n        SubjectName: \"\",\r\n        Credit: subject_credit.CREDIT_05,\r\n        Category: SubjectCategory.CORE,\r\n        LearningArea: null,\r\n        ActivityType: null,\r\n        IsGraded: true,\r\n        Description: \"\",\r\n      },\r\n      DayOfWeek: \"\",\r\n      timeSlotID: [],\r\n      Teachers: [],\r\n      Grade: [],\r\n      RoomName: null,\r\n    });\r\n  const [isEmptyData, setIsEmptyData] = useState({\r\n    Subject: false,\r\n    DayOfWeek: false,\r\n    timeSlotID: false,\r\n    Teachers: false,\r\n    ClassRooms: false,\r\n    RoomName: false,\r\n  });\r\n  const timeSlotHandleChange: InputChangeHandler = (e) => {\r\n    const value = e.target.value;\r\n    const timeSlot = [...lockScheduleData.timeSlotID];\r\n    setLockScheduledata(() => ({\r\n      ...lockScheduleData,\r\n      timeSlotID: timeSlot.includes(value)\r\n        ? timeSlot.filter((item) => item !== value)\r\n        : [...timeSlot, value],\r\n    }));\r\n  };\r\n  const classRoomHandleChange = (value: string) => {\r\n    const grade = [...lockScheduleData.Grade];\r\n    if (!lockScheduleData.Grade.includes(value)) {\r\n      grade.push(value);\r\n    } else {\r\n      grade.splice(grade.indexOf(value), 1);\r\n    }\r\n    setLockScheduledata(() => ({\r\n      ...lockScheduleData,\r\n      Grade: grade,\r\n    }));\r\n  };\r\n  const validateData = () => {\r\n    setIsEmptyData(() => ({\r\n      Subject: lockScheduleData.Subject.SubjectCode.length === 0,\r\n      DayOfWeek: lockScheduleData.DayOfWeek.length === 0,\r\n      timeSlotID:\r\n        lockScheduleData.timeSlotID.length === 0 ||\r\n        lockScheduleData.timeSlotID.length > 2,\r\n      Teachers: lockScheduleData.Teachers.length === 0,\r\n      RoomName: lockScheduleData.RoomName == null,\r\n      ClassRooms: lockScheduleData.Grade.length === 0,\r\n    }));\r\n  };\r\n  useEffect(() => {\r\n    const validate = () => {\r\n      validateData();\r\n    };\r\n    return validate();\r\n  }, [\r\n    lockScheduleData.Subject,\r\n    lockScheduleData.DayOfWeek,\r\n    lockScheduleData.timeSlotID,\r\n    lockScheduleData.Teachers,\r\n    lockScheduleData.Grade,\r\n    lockScheduleData.RoomName,\r\n  ]);\r\n  const addItemAndCloseModal = () => {\r\n    const cond =\r\n      isEmptyData.Subject ||\r\n      isEmptyData.DayOfWeek ||\r\n      isEmptyData.timeSlotID ||\r\n      isEmptyData.Teachers ||\r\n      isEmptyData.ClassRooms ||\r\n      isEmptyData.RoomName;\r\n    if (cond) {\r\n      validateData();\r\n    } else {\r\n      // confirmChange(lockScheduleData);\r\n      // closeModal();\r\n    }\r\n  };\r\n  // เนเธเนเธชเธฅเธฑเธเธชเธฑเธเน€เธเธฅเธตเนเธขเธเธเนเธญเธกเธนเธฅเธเธฑเธ component เธขเนเธญเธข //\r\n  const handleSubjectChange = (value: subject) => {\r\n    setLockScheduledata(() => ({\r\n      ...lockScheduleData,\r\n      Subject: value,\r\n    }));\r\n  };\r\n  const handleDayChange = (value: string) => {\r\n    setLockScheduledata(() => ({\r\n      ...lockScheduleData,\r\n      DayOfWeek: value,\r\n    }));\r\n  };\r\n  const handleRoomChange = (value: room) => {\r\n    setLockScheduledata(() => ({\r\n      ...lockScheduleData,\r\n      RoomName: value.RoomName,\r\n    }));\r\n  };\r\n  // Note: teacher list is managed by child components via props\r\n  // เนเธเนเธชเธฅเธฑเธเธชเธฑเธเน€เธเธฅเธตเนเธขเธเธเนเธญเธกเธนเธฅเธเธฑเธ component เธขเนเธญเธข //\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-[500px] bg-red-200 items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-[831px] h-fit overflow-y-scroll overflow-x-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-xl select-none\">เน€เธเธดเนเธกเธงเธดเธเธฒเธฅเนเธญเธ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n          </div>\r\n          <div className=\"flex flex-col gap-5 p-4 w-full h-[550px] overflow-y-scroll border border-[#EDEEF3]\">\r\n            <SelectSubject\r\n              currentValue={`${\r\n                lockScheduleData.Subject.SubjectCode === \"\"\r\n                  ? \"\"\r\n                  : `${lockScheduleData.Subject.SubjectCode} ${lockScheduleData.Subject.SubjectName}`\r\n              }`}\r\n              handleSubjectChange={handleSubjectChange}\r\n              required={isEmptyData.Subject}\r\n            />\r\n            <SelectDayOfWeek\r\n              dayOfWeek={lockScheduleData.DayOfWeek}\r\n              handleDayChange={handleDayChange}\r\n              required={isEmptyData.DayOfWeek}\r\n            />\r\n            <SelectMultipleTimeSlot\r\n              subject={lockScheduleData.Subject}\r\n              timeSlotHandleChange={timeSlotHandleChange}\r\n              checkedCondition={lockScheduleData.timeSlotID}\r\n              required={isEmptyData.timeSlotID}\r\n              daySelected={lockScheduleData.DayOfWeek}\r\n            />\r\n            <SelectRoomName\r\n              roomName={lockScheduleData.RoomName}\r\n              handleRoomChange={handleRoomChange}\r\n            />\r\n            <SelectTeacher\r\n              subject={lockScheduleData.Subject}\r\n              setTeacherList={undefined}\r\n              required={isEmptyData.Teachers}\r\n              teachers={lockScheduleData.Teachers}\r\n            />\r\n            <SelectedClassRoom\r\n              teachers={lockScheduleData.Teachers}\r\n              Grade={lockScheduleData.Grade}\r\n              subject={lockScheduleData.Subject}\r\n              classRoomHandleChange={classRoomHandleChange}\r\n              required={isEmptyData.ClassRooms}\r\n            />\r\n          </div>\r\n          <span className=\"flex w-full justify-end\">\r\n            <button\r\n              onClick={() => {\r\n                addItemAndCloseModal();\r\n              }}\r\n              className=\"w-[75px] h-[45px] bg-blue-100 hover:bg-blue-200 duration-300 p-3 rounded text-blue-600 text-sm\"\r\n            >\r\n              เธขเธทเธเธขเธฑเธ\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddLockScheduleModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\BulkLockModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'timeslots' logical expression could make the dependencies of useMemo Hook (at line 199) change on every render. To fix this, wrap the initialization of 'timeslots' in its own useMemo() Hook.","line":74,"column":9,"nodeType":"VariableDeclarator","endLine":74,"endColumn":40},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'grades' logical expression could make the dependencies of useMemo Hook (at line 199) change on every render. To fix this, wrap the initialization of 'grades' in its own useMemo() Hook.","line":75,"column":9,"nodeType":"VariableDeclarator","endLine":75,"endColumn":34},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'subjects' logical expression could make the dependencies of useMemo Hook (at line 199) change on every render. To fix this, wrap the initialization of 'subjects' in its own useMemo() Hook.","line":76,"column":9,"nodeType":"VariableDeclarator","endLine":76,"endColumn":38},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'rooms' logical expression could make the dependencies of useMemo Hook (at line 98) change on every render. To fix this, wrap the initialization of 'rooms' in its own useMemo() Hook.","line":77,"column":9,"nodeType":"VariableDeclarator","endLine":77,"endColumn":32},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'rooms' logical expression could make the dependencies of useMemo Hook (at line 199) change on every render. To fix this, wrap the initialization of 'rooms' in its own useMemo() Hook.","line":77,"column":9,"nodeType":"VariableDeclarator","endLine":77,"endColumn":32},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'DAY_NAMES' object makes the dependencies of useMemo Hook (at line 199) change on every render. To fix this, wrap the initialization of 'DAY_NAMES' in its own useMemo() Hook.","line":122,"column":9,"nodeType":"VariableDeclarator","endLine":128,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useMemo } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Checkbox,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  Grid,\r\n  Paper,\r\n  Stack,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TextField,\r\n  Typography,\r\n  Alert,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport {\r\n  Lock as LockIcon,\r\n  CheckCircle as CheckCircleIcon,\r\n} from \"@mui/icons-material\";\r\nimport { RoomAutocomplete } from \"@/components/room\";\r\nimport type { room } from \"@/prisma/generated/client\";\r\nimport { enqueueSnackbar } from \"notistack\";\r\nimport { createBulkLocksAction } from \"@/features/lock/application/actions/lock.actions\";\r\nimport type { semester } from \"@/prisma/generated/client\";\r\nimport { useRoomAvailability } from \"@/hooks/useRoomAvailability\";\r\n\r\ninterface BulkLockModalProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  // configId may be wired later; keep but mark unused to satisfy lint\r\n  _configId?: string;\r\n  timeslots?: Array<{ TimeslotID: string; Day: string; PeriodStart: number }>;\r\n  grades?: Array<{ GradeID: string; GradeName: string }>;\r\n  subjects?: Array<{\r\n    SubjectCode: string;\r\n    SubjectName: string;\r\n    RespID: number;\r\n  }>;\r\n  rooms?: Array<{\r\n    RoomID: number;\r\n    RoomName: string;\r\n    Building?: string;\r\n    Floor?: string;\r\n  }>;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport default function BulkLockModal({\r\n  open,\r\n  onClose,\r\n  _configId,\r\n  timeslots: propTimeslots,\r\n  grades: propGrades,\r\n  subjects: propSubjects,\r\n  rooms: propRooms,\r\n  onSuccess,\r\n}: BulkLockModalProps) {\r\n  // Use props if provided, otherwise empty arrays (component can be extended to fetch data)\r\n  const timeslots = propTimeslots || [];\r\n  const grades = propGrades || [];\r\n  const subjects = propSubjects || [];\r\n  const rooms = propRooms || [];\r\n  const [selectedTimeslots, setSelectedTimeslots] = useState<Set<string>>(\r\n    new Set(),\r\n  );\r\n  const [selectedGrades, setSelectedGrades] = useState<Set<string>>(new Set());\r\n  const [selectedSubject, setSelectedSubject] = useState<string>(\"\");\r\n  const [selectedRoom, setSelectedRoom] = useState<{\r\n    RoomID: number;\r\n    RoomName: string;\r\n    Building?: string;\r\n    Floor?: string;\r\n  } | null>(null);\r\n  const normalizedRooms: room[] = useMemo(\r\n    () =>\r\n      rooms.map((r) => ({\r\n        RoomID: r.RoomID,\r\n        RoomName: r.RoomName,\r\n        Building: r.Building ?? \"-\",\r\n        Floor: r.Floor ?? \"-\",\r\n        class_schedule: [],\r\n      })),\r\n    [rooms],\r\n  );\r\n  // Derive academic year & semester from first timeslot ID (pattern: \"1-2567-MON1\")\r\n  const derivedTerm = useMemo(() => {\r\n    if (!propTimeslots || propTimeslots.length === 0) return null;\r\n    const firstId = propTimeslots[0]?.TimeslotID; // e.g. 1-2567-MON1\r\n    if (!firstId) return null;\r\n    const parts = firstId.split(\"-\");\r\n    if (parts.length < 3) return null;\r\n    const semNum = parts[0];\r\n    const yearNum = Number(parts[1]);\r\n    if (!yearNum || (semNum !== \"1\" && semNum !== \"2\")) return null;\r\n    const semEnum: semester = semNum === \"1\" ? \"SEMESTER_1\" : \"SEMESTER_2\";\r\n    return { academicYear: yearNum, semester: semEnum };\r\n  }, [propTimeslots]);\r\n\r\n  const { availabilityMap } = useRoomAvailability({\r\n    academicYear: derivedTerm?.academicYear,\r\n    semester: derivedTerm?.semester,\r\n    selectedTimeslots: selectedTimeslots,\r\n    enabled: !!derivedTerm,\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const DAY_NAMES: Record<string, string> = {\r\n    MON: \"เธเธฑเธเธ—เธฃเน\",\r\n    TUE: \"เธญเธฑเธเธเธฒเธฃ\",\r\n    WED: \"เธเธธเธ\",\r\n    THU: \"เธเธคเธซเธฑเธชเธเธ”เธต\",\r\n    FRI: \"เธจเธธเธเธฃเน\",\r\n  };\r\n\r\n  const handleTimeslotToggle = (timeslotId: string) => {\r\n    setSelectedTimeslots((prev) => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(timeslotId)) {\r\n        newSet.delete(timeslotId);\r\n      } else {\r\n        newSet.add(timeslotId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const handleGradeToggle = (gradeId: string) => {\r\n    setSelectedGrades((prev) => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(gradeId)) {\r\n        newSet.delete(gradeId);\r\n      } else {\r\n        newSet.add(gradeId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const handleSelectAllTimeslots = () => {\r\n    if (selectedTimeslots.size === timeslots.length) {\r\n      setSelectedTimeslots(new Set());\r\n    } else {\r\n      setSelectedTimeslots(new Set(timeslots.map((t) => t.TimeslotID)));\r\n    }\r\n  };\r\n\r\n  const handleSelectAllGrades = () => {\r\n    if (selectedGrades.size === grades.length) {\r\n      setSelectedGrades(new Set());\r\n    } else {\r\n      setSelectedGrades(new Set(grades.map((g) => g.GradeID)));\r\n    }\r\n  };\r\n\r\n  const totalLocks = selectedTimeslots.size * selectedGrades.size;\r\n\r\n  const previewData = useMemo(() => {\r\n    const preview: Array<{\r\n      timeslot: string;\r\n      grade: string;\r\n      subject: string;\r\n      room: string;\r\n    }> = [];\r\n\r\n    selectedTimeslots.forEach((timeslotId) => {\r\n      const timeslot = timeslots.find((t) => t.TimeslotID === timeslotId);\r\n      selectedGrades.forEach((gradeId) => {\r\n        const grade = grades.find((g) => g.GradeID === gradeId);\r\n        const subject = subjects.find((s) => s.SubjectCode === selectedSubject);\r\n        const room = rooms.find((r) => r.RoomID === selectedRoom?.RoomID);\r\n\r\n        if (timeslot && grade && subject && room) {\r\n          preview.push({\r\n            timeslot: `${DAY_NAMES[timeslot.Day]} เธเธฒเธ ${timeslot.PeriodStart}`,\r\n            grade: grade.GradeName,\r\n            subject: subject.SubjectName,\r\n            room: room.RoomName,\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    return preview;\r\n  }, [\r\n    selectedTimeslots,\r\n    selectedGrades,\r\n    selectedSubject,\r\n    selectedRoom,\r\n    timeslots,\r\n    grades,\r\n    subjects,\r\n    rooms,\r\n    DAY_NAMES,\r\n  ]);\r\n\r\n  const handleSubmit = async () => {\r\n    if (\r\n      !selectedSubject ||\r\n      !selectedRoom?.RoomID ||\r\n      selectedTimeslots.size === 0 ||\r\n      selectedGrades.size === 0\r\n    ) {\r\n      enqueueSnackbar(\"เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธเนเธญเธกเธนเธฅเนเธซเนเธเธฃเธเธ–เนเธงเธ\", { variant: \"warning\" });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const subject = subjects.find((s) => s.SubjectCode === selectedSubject);\r\n      if (!subject) {\r\n        throw new Error(\"เนเธกเนเธเธเธงเธดเธเธฒเธ—เธตเนเน€เธฅเธทเธญเธ\");\r\n      }\r\n\r\n      const locks = Array.from(selectedTimeslots).flatMap((timeslotId) =>\r\n        Array.from(selectedGrades).map((gradeId) => ({\r\n          SubjectCode: selectedSubject,\r\n          RoomID: selectedRoom.RoomID,\r\n          TimeslotID: timeslotId,\r\n          GradeID: gradeId,\r\n          RespID: subject.RespID,\r\n        })),\r\n      );\r\n\r\n      const result = await createBulkLocksAction({ locks });\r\n\r\n      if (result.success) {\r\n        enqueueSnackbar(\r\n          `เธชเธฃเนเธฒเธเธเธฒเธเธฅเนเธญเธเธชเธณเน€เธฃเนเธ ${result.data?.count || 0} เธฃเธฒเธขเธเธฒเธฃ`,\r\n          { variant: \"success\" },\r\n        );\r\n        onSuccess();\r\n        handleClose();\r\n      } else {\r\n        const message = result.error?.message || \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”\";\r\n        throw new Error(String(message));\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      enqueueSnackbar(\r\n        `เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”: ${error instanceof Error ? error.message : \"Unknown error\"}`,\r\n        { variant: \"error\" },\r\n      );\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setSelectedTimeslots(new Set());\r\n    setSelectedGrades(new Set());\r\n    setSelectedSubject(\"\");\r\n    setSelectedRoom(null);\r\n    onClose();\r\n  };\r\n\r\n  const canPreview =\r\n    selectedSubject &&\r\n    selectedRoom?.RoomID &&\r\n    selectedTimeslots.size > 0 &&\r\n    selectedGrades.size > 0;\r\n\r\n  return (\r\n    <Dialog open={open} onClose={handleClose} maxWidth=\"lg\" fullWidth>\r\n      <DialogTitle>\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n          <LockIcon />\r\n          <Typography variant=\"h6\">เธฅเนเธญเธเธซเธฅเธฒเธขเธเธฒเธเธเธฃเนเธญเธกเธเธฑเธ (Bulk Lock)</Typography>\r\n        </Stack>\r\n      </DialogTitle>\r\n      <DialogContent dividers>\r\n        <Grid container spacing={3}>\r\n          {/* Subject Selection */}\r\n          <Grid size={{ xs: 12, md: 6 }}>\r\n            <FormControl fullWidth>\r\n              <TextField\r\n                select\r\n                label=\"เธงเธดเธเธฒ\"\r\n                value={selectedSubject}\r\n                onChange={(e) => setSelectedSubject(e.target.value)}\r\n                SelectProps={{ native: true }}\r\n              >\r\n                <option value=\"\">เน€เธฅเธทเธญเธเธงเธดเธเธฒ</option>\r\n                {subjects.map((subject) => (\r\n                  <option key={subject.SubjectCode} value={subject.SubjectCode}>\r\n                    {subject.SubjectCode} - {subject.SubjectName}\r\n                  </option>\r\n                ))}\r\n              </TextField>\r\n            </FormControl>\r\n          </Grid>\r\n\r\n          {/* Room Selection (Enhanced) */}\r\n          <Grid size={{ xs: 12, md: 6 }}>\r\n            <RoomAutocomplete\r\n              rooms={normalizedRooms}\r\n              value={\r\n                selectedRoom\r\n                  ? ({\r\n                      RoomID: selectedRoom.RoomID,\r\n                      RoomName: selectedRoom.RoomName,\r\n                      Building: selectedRoom.Building ?? \"-\",\r\n                      Floor: selectedRoom.Floor ?? \"-\",\r\n                      class_schedule: [],\r\n                    } as room)\r\n                  : null\r\n              }\r\n              onChange={(room) =>\r\n                setSelectedRoom(\r\n                  room\r\n                    ? {\r\n                        RoomID: room.RoomID,\r\n                        RoomName: room.RoomName,\r\n                        Building: room.Building,\r\n                        Floor: room.Floor,\r\n                      }\r\n                    : null,\r\n                )\r\n              }\r\n              label=\"เธซเนเธญเธเน€เธฃเธตเธขเธ\"\r\n              placeholder=\"เน€เธฅเธทเธญเธเธซเนเธญเธ\"\r\n              availabilityMap={availabilityMap}\r\n              showAvailability\r\n            />\r\n          </Grid>\r\n\r\n          {/* Timeslot Selection */}\r\n          <Grid size={{ xs: 12, md: 6 }}>\r\n            <Card variant=\"outlined\">\r\n              <CardContent>\r\n                <Stack\r\n                  direction=\"row\"\r\n                  justifyContent=\"space-between\"\r\n                  alignItems=\"center\"\r\n                  mb={2}\r\n                >\r\n                  <Typography variant=\"subtitle1\">เน€เธฅเธทเธญเธเธเธฒเธเน€เธฃเธตเธขเธ</Typography>\r\n                  <Button size=\"small\" onClick={handleSelectAllTimeslots}>\r\n                    {selectedTimeslots.size === timeslots.length\r\n                      ? \"เธขเธเน€เธฅเธดเธเธ—เธฑเนเธเธซเธกเธ”\"\r\n                      : \"เน€เธฅเธทเธญเธเธ—เธฑเนเธเธซเธกเธ”\"}\r\n                  </Button>\r\n                </Stack>\r\n                <FormGroup>\r\n                  {timeslots.map((timeslot) => (\r\n                    <FormControlLabel\r\n                      key={timeslot.TimeslotID}\r\n                      control={\r\n                        <Checkbox\r\n                          checked={selectedTimeslots.has(timeslot.TimeslotID)}\r\n                          onChange={() =>\r\n                            handleTimeslotToggle(timeslot.TimeslotID)\r\n                          }\r\n                        />\r\n                      }\r\n                      label={`${DAY_NAMES[timeslot.Day]} เธเธฒเธ ${timeslot.PeriodStart}`}\r\n                    />\r\n                  ))}\r\n                </FormGroup>\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  color=\"text.secondary\"\r\n                  sx={{ mt: 1, display: \"block\" }}\r\n                >\r\n                  เน€เธฅเธทเธญเธเนเธฅเนเธง: {selectedTimeslots.size} เธเธฒเธ\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n\r\n          {/* Grade Selection */}\r\n          <Grid size={{ xs: 12, md: 6 }}>\r\n            <Card variant=\"outlined\">\r\n              <CardContent>\r\n                <Stack\r\n                  direction=\"row\"\r\n                  justifyContent=\"space-between\"\r\n                  alignItems=\"center\"\r\n                  mb={2}\r\n                >\r\n                  <Typography variant=\"subtitle1\">เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธ</Typography>\r\n                  <Button size=\"small\" onClick={handleSelectAllGrades}>\r\n                    {selectedGrades.size === grades.length\r\n                      ? \"เธขเธเน€เธฅเธดเธเธ—เธฑเนเธเธซเธกเธ”\"\r\n                      : \"เน€เธฅเธทเธญเธเธ—เธฑเนเธเธซเธกเธ”\"}\r\n                  </Button>\r\n                </Stack>\r\n                <FormGroup>\r\n                  {grades.map((grade) => (\r\n                    <FormControlLabel\r\n                      key={grade.GradeID}\r\n                      control={\r\n                        <Checkbox\r\n                          checked={selectedGrades.has(grade.GradeID)}\r\n                          onChange={() => handleGradeToggle(grade.GradeID)}\r\n                        />\r\n                      }\r\n                      label={grade.GradeName}\r\n                    />\r\n                  ))}\r\n                </FormGroup>\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  color=\"text.secondary\"\r\n                  sx={{ mt: 1, display: \"block\" }}\r\n                >\r\n                  เน€เธฅเธทเธญเธเนเธฅเนเธง: {selectedGrades.size} เธเธฑเนเธ\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n\r\n          {/* Preview */}\r\n          <Grid size={12}>\r\n            <Alert severity=\"info\" icon={<CheckCircleIcon />}>\r\n              เธเธณเธเธงเธเธเธฒเธเธฅเนเธญเธเธ—เธตเนเธเธฐเธชเธฃเนเธฒเธ: <strong>{totalLocks} เธเธฒเธ</strong>\r\n              {totalLocks > 0 && (\r\n                <Typography variant=\"caption\" display=\"block\" sx={{ mt: 0.5 }}>\r\n                  ({selectedTimeslots.size} เธเธฒเธเน€เธฃเธตเธขเธ ร— {selectedGrades.size}{\" \"}\r\n                  เธเธฑเนเธ)\r\n                </Typography>\r\n              )}\r\n            </Alert>\r\n\r\n            {canPreview &&\r\n              previewData.length > 0 &&\r\n              previewData.length <= 20 && (\r\n                <Box sx={{ mt: 2 }}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom>\r\n                    เธ•เธฑเธงเธญเธขเนเธฒเธเธเธฒเธเธฅเนเธญเธ:\r\n                  </Typography>\r\n                  <TableContainer\r\n                    component={Paper}\r\n                    variant=\"outlined\"\r\n                    sx={{ maxHeight: 300 }}\r\n                  >\r\n                    <Table size=\"small\" stickyHeader>\r\n                      <TableHead>\r\n                        <TableRow>\r\n                          <TableCell>เธเธฒเธเน€เธฃเธตเธขเธ</TableCell>\r\n                          <TableCell>เธเธฑเนเธ</TableCell>\r\n                          <TableCell>เธงเธดเธเธฒ</TableCell>\r\n                          <TableCell>เธซเนเธญเธ</TableCell>\r\n                        </TableRow>\r\n                      </TableHead>\r\n                      <TableBody>\r\n                        {previewData.slice(0, 20).map((row, index) => (\r\n                          <TableRow key={index}>\r\n                            <TableCell>{row.timeslot}</TableCell>\r\n                            <TableCell>{row.grade}</TableCell>\r\n                            <TableCell>{row.subject}</TableCell>\r\n                            <TableCell>{row.room}</TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </TableContainer>\r\n                  {previewData.length > 20 && (\r\n                    <Typography\r\n                      variant=\"caption\"\r\n                      color=\"text.secondary\"\r\n                      sx={{ mt: 1, display: \"block\" }}\r\n                    >\r\n                      เนเธชเธ”เธ 20 เธฃเธฒเธขเธเธฒเธฃเนเธฃเธเธเธฒเธ {previewData.length} เธฃเธฒเธขเธเธฒเธฃเธ—เธฑเนเธเธซเธกเธ”\r\n                    </Typography>\r\n                  )}\r\n                </Box>\r\n              )}\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} disabled={isSubmitting}>\r\n          เธขเธเน€เธฅเธดเธ\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            void handleSubmit();\r\n          }}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          disabled={isSubmitting || !canPreview}\r\n          startIcon={\r\n            isSubmitting ? <CircularProgress size={20} /> : <LockIcon />\r\n          }\r\n        >\r\n          {isSubmitting ? \"เธเธณเธฅเธฑเธเธชเธฃเนเธฒเธ...\" : `เธชเธฃเนเธฒเธเธเธฒเธเธฅเนเธญเธ ${totalLocks} เธฃเธฒเธขเธเธฒเธฃ`}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\DeleteLockScheduleModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":22,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":22,"endColumn":36,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[698,698],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[698,698],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1087,1090],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1087,1090],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import PrimaryButton from \"@/components/mui/PrimaryButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { deleteLocksAction } from \"@/features/lock/application/actions/lock.actions\";\r\nimport { enqueueSnackbar } from \"notistack\";\r\nimport type { ModalCloseHandler } from \"@/types/events\";\r\n\r\ntype DeleteLockScheduleData = {\r\n  ClassIDs: number[];\r\n  SubjectCode: string;\r\n  SubjectName: string;\r\n};\r\n\r\ntype props = {\r\n  closeModal: ModalCloseHandler;\r\n  deleteData: DeleteLockScheduleData;\r\n  mutate: () => void;\r\n};\r\n\r\nfunction DeleteLockScheduleModal({ closeModal, deleteData, mutate }: props) {\r\n  const confirmed = () => {\r\n    deleteLockSchedule(deleteData);\r\n    closeModal();\r\n  };\r\n  const cancel = () => {\r\n    closeModal();\r\n  };\r\n\r\n  const deleteLockSchedule = async (data: DeleteLockScheduleData) => {\r\n    const deleteData = data.ClassIDs;\r\n\r\n    try {\r\n      await deleteLocksAction(deleteData);\r\n      mutate();\r\n      enqueueSnackbar(\"เธฅเธเธเนเธญเธกเธนเธฅเธเธฒเธเธฅเนเธญเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n    } catch (error: any) {\r\n      enqueueSnackbar(\r\n        \"เธฅเธเธเนเธญเธกเธนเธฅเธเธฒเธเธฅเนเธญเธเนเธกเนเธชเธณเน€เธฃเนเธ: \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div className=\"flex flex-col w-fit h-fit p-7 gap-10 bg-white rounded\">\r\n          {/* Content */}\r\n          {/* <div className=\"flex w-full h-auto justify-between items-center\"></div> */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-lg select-none font-bold\">\r\n              เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธเธเนเธญเธกเธนเธฅเธเธฒเธเธฅเนเธญเธ{\" \"}\r\n              <i>\r\n                {deleteData.SubjectCode} - {deleteData.SubjectName}\r\n              </i>{\" \"}\r\n              เนเธเนเธซเธฃเธทเธญเนเธกเน\r\n            </p>\r\n          </div>\r\n          <span className=\"w-full flex gap-3 justify-end h-11\">\r\n            <PrimaryButton\r\n              handleClick={cancel}\r\n              title={\"เธขเธเน€เธฅเธดเธ\"}\r\n              color={\"danger\"}\r\n              Icon={<CloseIcon />}\r\n            />\r\n            <PrimaryButton\r\n              handleClick={confirmed}\r\n              title={\"เธขเธทเธเธขเธฑเธ\"}\r\n              color={\"success\"}\r\n              Icon={<CheckIcon />}\r\n            />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default DeleteLockScheduleModal;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\LockCalendarView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\LockSchedule.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4855,4858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4855,4858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\LockScheduleForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'subject' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'timeslot' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dayOfWeekThai' is defined but never used.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":184,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":184,"endColumn":16,"suggestions":[{"fix":{"range":[5374,5393],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'validateData'. Either include it or remove the dependency array.","line":225,"column":6,"nodeType":"ArrayExpression","endLine":233,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [lockScheduleData.SubjectName, lockScheduleData.SubjectCode, lockScheduleData.DayOfWeek, lockScheduleData.timeslots, lockScheduleData.teachers, lockScheduleData.GradeIDs, validateData]","fix":{"range":[6612,6849],"text":"[lockScheduleData.SubjectName, lockScheduleData.SubjectCode, lockScheduleData.DayOfWeek, lockScheduleData.timeslots, lockScheduleData.teachers, lockScheduleData.GradeIDs, validateData]"}}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":264,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":264,"endColumn":41,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[7640,7640],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[7640,7640],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":271,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":271,"endColumn":16,"suggestions":[{"fix":{"range":[7802,7821],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleAddTeacherList' is assigned a value but never used.","line":275,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":275,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'removeTeacherFromList' is assigned a value but never used.","line":281,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":281,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":329,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9782,9785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9782,9785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":343,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":343,"endColumn":16,"suggestions":[{"fix":{"range":[10113,10131],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":363,"column":46,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":363,"endColumn":48,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[10953,10955],"text":"==="},"desc":"Use '===' instead of '=='."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useReducer, useMemo } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport SelectDayOfWeek from \"./SelectDayOfWeek\";\r\nimport SelectSubject from \"./SelectSubject\";\r\nimport SelectMultipleTimeSlot from \"./SelectMultipleTimeSlot\";\r\nimport SelectTeacher from \"./SelectTeacher\";\r\nimport SelectedClassRoom from \"./SelectedClassRoom\";\r\nimport SelectRoomName from \"./SelectRoomName\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { useRoomAvailability } from \"@/hooks/useRoomAvailability\";\r\nimport type {\r\n  room,\r\n  semester,\r\n  subject,\r\n  teacher,\r\n  timeslot,\r\n} from \"@/prisma/generated/client\";\r\nimport { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\nimport { createLockAction } from \"@/features/lock/application/actions/lock.actions\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\nimport { useTeachers } from \"@/hooks\";\r\n\r\nimport type { ModalCloseHandler, InputChangeHandler } from \"@/types/events\";\r\nimport type { SubjectWithResponsibilities } from \"@/types/lock-schedule\";\r\n\r\ntype Props = {\r\n  closeModal: ModalCloseHandler;\r\n  data?: LockScheduleData;\r\n  mutate: () => void;\r\n};\r\n\r\ntype LockScheduleData = {\r\n  SubjectCode: string;\r\n  SubjectName: string;\r\n  DayOfWeek: string;\r\n  timeslots: string[];\r\n  teachers: teacher[];\r\n  GradeIDs: string[];\r\n  room: room | null;\r\n  subject: SubjectWithResponsibilities | null;\r\n};\r\n\r\ntype IsEmptyData = {\r\n  Subject: boolean;\r\n  DayOfWeek: boolean;\r\n  timeslots: boolean;\r\n  teachers: boolean;\r\n  GradeIDs: boolean;\r\n  // room: boolean;\r\n};\r\n\r\ntype Action =\r\n  | { type: \"SET_SUBJECT\"; payload: SubjectWithResponsibilities }\r\n  | { type: \"SET_DAY_OF_WEEK\"; payload: string }\r\n  | { type: \"SET_TIME_SLOT\"; payload: string[] }\r\n  | { type: \"SET_TEACHERS\"; payload: teacher[] }\r\n  | { type: \"SET_GRADE\"; payload: string[] }\r\n  | { type: \"SET_ROOM_NAME\"; payload: room | null }\r\n  | { type: \"SET_IS_EMPTY_DATA\"; payload: IsEmptyData };\r\n\r\nconst initialState: {\r\n  lockScheduleData: LockScheduleData;\r\n  isEmptyData: IsEmptyData;\r\n} = {\r\n  lockScheduleData: {\r\n    SubjectCode: \"\",\r\n    SubjectName: \"\",\r\n    DayOfWeek: \"\",\r\n    timeslots: [],\r\n    teachers: [],\r\n    GradeIDs: [],\r\n    room: { RoomID: -1, RoomName: \"\", Building: \"\", Floor: \"\" },\r\n    subject: null,\r\n  },\r\n  isEmptyData: {\r\n    Subject: false,\r\n    DayOfWeek: false,\r\n    timeslots: false,\r\n    teachers: false,\r\n    GradeIDs: false,\r\n    // room: false,\r\n  },\r\n};\r\n\r\nconst reducer = (state: typeof initialState, action: Action) => {\r\n  switch (action.type) {\r\n    case \"SET_SUBJECT\":\r\n      return {\r\n        ...state,\r\n        lockScheduleData: {\r\n          ...state.lockScheduleData,\r\n          SubjectName: action.payload?.SubjectName || \"\",\r\n          SubjectCode: action.payload?.SubjectCode || \"\",\r\n          subject: action.payload,\r\n        },\r\n      };\r\n    case \"SET_DAY_OF_WEEK\":\r\n      return {\r\n        ...state,\r\n        lockScheduleData: {\r\n          ...state.lockScheduleData,\r\n          DayOfWeek: action.payload,\r\n        },\r\n      };\r\n    case \"SET_TIME_SLOT\":\r\n      return {\r\n        ...state,\r\n        lockScheduleData: {\r\n          ...state.lockScheduleData,\r\n          timeslots: action.payload,\r\n        },\r\n      };\r\n    case \"SET_TEACHERS\":\r\n      return {\r\n        ...state,\r\n        lockScheduleData: {\r\n          ...state.lockScheduleData,\r\n          teachers: action.payload,\r\n        },\r\n      };\r\n    case \"SET_GRADE\":\r\n      return {\r\n        ...state,\r\n        lockScheduleData: {\r\n          ...state.lockScheduleData,\r\n          GradeIDs: action.payload,\r\n        },\r\n      };\r\n    case \"SET_ROOM_NAME\":\r\n      return {\r\n        ...state,\r\n        lockScheduleData: {\r\n          ...state.lockScheduleData,\r\n          room: action.payload,\r\n        },\r\n      };\r\n    case \"SET_IS_EMPTY_DATA\":\r\n      return {\r\n        ...state,\r\n        isEmptyData: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nfunction LockScheduleForm({ closeModal, data, mutate }: Props) {\r\n  const teacherData = useTeachers();\r\n  const params = useParams();\r\n  const semesterAndyear = params.semesterAndyear as string | undefined; // pattern e.g. 1-2567\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    ...initialState,\r\n    lockScheduleData: {\r\n      ...initialState.lockScheduleData,\r\n      ...data,\r\n      DayOfWeek: data?.DayOfWeek || \"\",\r\n    },\r\n  });\r\n\r\n  const { lockScheduleData, isEmptyData } = state;\r\n\r\n  // Derive academic year / semester from route param for fetching locked schedules\r\n  const derivedTerm = useMemo(() => {\r\n    if (!semesterAndyear) return null;\r\n    const parts = semesterAndyear.split(\"-\");\r\n    if (parts.length !== 2) return null;\r\n    const semPart = parts[0];\r\n    const yearNum = Number(parts[1]);\r\n    if (!yearNum || (semPart !== \"1\" && semPart !== \"2\")) return null;\r\n    const semEnum: semester = semPart === \"1\" ? \"SEMESTER_1\" : \"SEMESTER_2\";\r\n    return { academicYear: yearNum, semester: semEnum };\r\n  }, [semesterAndyear]);\r\n\r\n  // Shared availability hook (centralized logic)\r\n  const { availabilityMap } = useRoomAvailability({\r\n    academicYear: derivedTerm?.academicYear,\r\n    semester: derivedTerm?.semester,\r\n    selectedTimeslots: lockScheduleData.timeslots,\r\n    enabled: !!derivedTerm,\r\n  });\r\n\r\n  const timeSlotHandleChange: InputChangeHandler = (e) => {\r\n    const value = e.target.value;\r\n    console.log(value);\r\n    const timeSlot = [...lockScheduleData.timeslots];\r\n    dispatch({\r\n      type: \"SET_TIME_SLOT\",\r\n      payload: timeSlot.includes(value)\r\n        ? timeSlot.filter((item) => item !== value)\r\n        : [...timeSlot, value],\r\n    });\r\n  };\r\n\r\n  const classRoomHandleChange = (value: string) => {\r\n    const grade = [...lockScheduleData.GradeIDs];\r\n    if (!lockScheduleData.GradeIDs.includes(value)) {\r\n      grade.push(value);\r\n    } else {\r\n      grade.splice(grade.indexOf(value), 1);\r\n    }\r\n    dispatch({ type: \"SET_GRADE\", payload: grade });\r\n  };\r\n\r\n  const validateData = () => {\r\n    dispatch({\r\n      type: \"SET_IS_EMPTY_DATA\",\r\n      payload: {\r\n        Subject: lockScheduleData.SubjectCode.length === 0,\r\n        DayOfWeek: lockScheduleData.DayOfWeek.length === 0,\r\n        timeslots:\r\n          lockScheduleData.timeslots.length === 0 ||\r\n          lockScheduleData.timeslots.length > 2,\r\n        teachers: lockScheduleData.teachers.length === 0,\r\n        // room: lockScheduleData.room.RoomID === -1,\r\n        GradeIDs: lockScheduleData.GradeIDs.length === 0,\r\n      },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const validate = () => {\r\n      validateData();\r\n    };\r\n    return validate();\r\n  }, [\r\n    lockScheduleData.SubjectName,\r\n    lockScheduleData.SubjectCode,\r\n    lockScheduleData.DayOfWeek,\r\n    lockScheduleData.timeslots,\r\n    lockScheduleData.teachers,\r\n    lockScheduleData.GradeIDs,\r\n    // lockScheduleData.room,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: \"SET_DAY_OF_WEEK\",\r\n      payload: initialState.lockScheduleData.DayOfWeek,\r\n    });\r\n    dispatch({\r\n      type: \"SET_TIME_SLOT\",\r\n      payload: initialState.lockScheduleData.timeslots,\r\n    });\r\n    dispatch({\r\n      type: \"SET_GRADE\",\r\n      payload: initialState.lockScheduleData.GradeIDs,\r\n    });\r\n  }, [lockScheduleData.subject]);\r\n  const handleConfirm = () => {\r\n    const cond =\r\n      isEmptyData.Subject ||\r\n      isEmptyData.DayOfWeek ||\r\n      isEmptyData.timeslots ||\r\n      isEmptyData.teachers ||\r\n      isEmptyData.GradeIDs;\r\n    // isEmptyData.room;\r\n    if (cond) {\r\n      validateData();\r\n      enqueueSnackbar(\"เธเธฃเธธเธ“เธฒเธเธฃเธญเธเธเนเธญเธกเธนเธฅเนเธซเนเธเธฃเธเธ–เนเธงเธ\", { variant: \"warning\" });\r\n      return;\r\n    }\r\n\r\n    if (!data) {\r\n      addLockSchedule(lockScheduleData);\r\n    } else {\r\n      editLockSchedule(lockScheduleData);\r\n    }\r\n  };\r\n\r\n  const setTeacherList = (value: teacher[]) => {\r\n    console.log(value);\r\n    dispatch({ type: \"SET_TEACHERS\", payload: value });\r\n  };\r\n\r\n  const handleAddTeacherList = (value: teacher) => {\r\n    const teacherList = [...lockScheduleData.teachers];\r\n    teacherList.push(value);\r\n    dispatch({ type: \"SET_TEACHERS\", payload: teacherList });\r\n  };\r\n\r\n  const removeTeacherFromList = (value: teacher) => {\r\n    const teacherList = [...lockScheduleData.teachers];\r\n    const index = teacherList.indexOf(value);\r\n    teacherList.splice(index, 1);\r\n    dispatch({ type: \"SET_TEACHERS\", payload: teacherList });\r\n  };\r\n\r\n  const handleSubjectChange = (value: SubjectWithResponsibilities) => {\r\n    // console.log(value);\r\n    const resps = value.teachers_responsibility;\r\n    const teacherIDs = new Set(resps.map((item) => item.TeacherID));\r\n    const teacherFilter = teacherData.data.filter((item) =>\r\n      teacherIDs.has(item.TeacherID),\r\n    );\r\n    setTeacherList(teacherFilter);\r\n    dispatch({ type: \"SET_SUBJECT\", payload: value });\r\n  };\r\n\r\n  const handleDayChange = (value: string) => {\r\n    dispatch({ type: \"SET_DAY_OF_WEEK\", payload: value });\r\n    dispatch({ type: \"SET_TIME_SLOT\", payload: [] });\r\n  };\r\n\r\n  const handleRoomChange = (value: room) => {\r\n    dispatch({ type: \"SET_ROOM_NAME\", payload: value });\r\n  };\r\n\r\n  const addLockSchedule = async (data: LockScheduleData) => {\r\n    closeModal();\r\n    const loadbar = enqueueSnackbar(\"เธเธณเธฅเธฑเธเน€เธเธดเนเธกเธเธฒเธเธฅเนเธญเธ\", {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      // Transform data to match createLockAction schema\r\n      const lockInput = {\r\n        SubjectCode: data.SubjectCode,\r\n        timeslots: data.timeslots,\r\n        GradeIDs: data.GradeIDs,\r\n        RespIDs: data.teachers.map((t) => t.TeacherID),\r\n        RoomID: data.room?.RoomID || null,\r\n      };\r\n\r\n      await createLockAction(lockInput);\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธเธฒเธเธฅเนเธญเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      mutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เนเธเธเธฒเธฃเน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเธเธฒเธเธฅเนเธญเธ: \" +\r\n          (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const editLockSchedule = (data: LockScheduleData) => {\r\n    console.log(data);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.75)\" }}\r\n        className=\"z-40 flex w-full h-screen items-center justify-center fixed left-0 top-0\"\r\n      >\r\n        <div\r\n          className={`relative flex flex-col w-[831px] h-fit overflow-hidden p-12 gap-10 bg-white rounded`}\r\n        >\r\n          {/* Content */}\r\n          <div className=\"flex w-full h-auto justify-between items-center\">\r\n            <p className=\"text-xl select-none\">เน€เธเธดเนเธกเธงเธดเธเธฒเธฅเนเธญเธ</p>\r\n            <AiOutlineClose className=\"cursor-pointer\" onClick={closeModal} />\r\n          </div>\r\n          <div className=\"flex flex-col gap-5 p-4 w-full h-[550px] overflow-y-scroll border border-[#EDEEF3]\">\r\n            <SelectSubject\r\n              currentValue={`${\r\n                lockScheduleData.SubjectCode == \"\"\r\n                  ? \"\"\r\n                  : `${lockScheduleData.SubjectCode} ${lockScheduleData.SubjectName}`\r\n              }`}\r\n              handleSubjectChange={handleSubjectChange}\r\n              required={isEmptyData.Subject}\r\n            />\r\n            <SelectTeacher\r\n              teachers={lockScheduleData.teachers}\r\n              subject={lockScheduleData.subject ?? undefined}\r\n              setTeacherList={setTeacherList}\r\n              required={isEmptyData.teachers}\r\n            />\r\n            <SelectDayOfWeek\r\n              dayOfWeek={lockScheduleData.DayOfWeek}\r\n              handleDayChange={handleDayChange}\r\n              required={isEmptyData.DayOfWeek}\r\n            />\r\n            <SelectMultipleTimeSlot\r\n              subject={lockScheduleData.subject ?? undefined}\r\n              timeSlotHandleChange={timeSlotHandleChange}\r\n              checkedCondition={lockScheduleData.timeslots}\r\n              required={isEmptyData.timeslots}\r\n              daySelected={lockScheduleData.DayOfWeek}\r\n            />\r\n            <SelectRoomName\r\n              roomName={lockScheduleData.room?.RoomName ?? \"\"}\r\n              handleRoomChange={handleRoomChange}\r\n              availabilityMap={availabilityMap}\r\n              showAvailability\r\n            />\r\n            <SelectedClassRoom\r\n              teachers={lockScheduleData.teachers}\r\n              subject={lockScheduleData.subject ?? undefined}\r\n              Grade={lockScheduleData.GradeIDs}\r\n              classRoomHandleChange={classRoomHandleChange}\r\n              required={isEmptyData.GradeIDs}\r\n            />\r\n          </div>\r\n          <span className=\"flex w-full justify-end\">\r\n            <button\r\n              onClick={() => {\r\n                handleConfirm();\r\n              }}\r\n              className=\"w-[75px] h-[45px] bg-blue-100 hover:bg-blue-200 duration-300 p-3 rounded text-blue-600 text-sm\"\r\n            >\r\n              เธขเธทเธเธขเธฑเธ\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LockScheduleForm;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\LockTemplatesModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectDayOfWeek.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectMultipleTimeSlot.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'subject_credit' is defined but never used.","line":3,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'use' is defined but never used.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'teacher' is defined but never used.","line":8,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":31},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectMultipleTimeSlot.tsx:34:7\n  32 |   useEffect(() => {\n  33 |     if (!timeSlotData.isLoading) {\n> 34 |       setTimeSlot(() =>\n     |       ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  35 |         timeSlotData.data\n  36 |           .filter((item) => item.DayOfWeek === props.daySelected)\n  37 |           .map((item) => item.TimeslotID),","line":34,"column":7,"nodeType":null,"endLine":34,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'timeSlotData.data'. Either include it or remove the dependency array.","line":40,"column":6,"nodeType":"ArrayExpression","endLine":40,"endColumn":49,"suggestions":[{"desc":"Update the dependencies array to be: [timeSlotData.isLoading, props.daySelected, timeSlotData.data]","fix":{"range":[1335,1378],"text":"[timeSlotData.isLoading, props.daySelected, timeSlotData.data]"}}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":75,"column":30,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":75,"endColumn":32,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[2747,2749],"text":"==="},"desc":"Use '===' instead of '=='."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTimeslots, useSemesterSync } from \"@/hooks\";\r\nimport { subjectCreditValues } from \"@/models/credit-value\";\r\nimport type { subject_credit } from \"@/prisma/generated/client\";\r\nimport { useParams } from \"next/navigation\";\r\nimport React, { Fragment, use, useEffect, useState } from \"react\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\n\r\nimport type { subject, teacher } from \"@/prisma/generated/client\";\r\n\r\ntype Props = {\r\n  subject?: subject;\r\n  timeSlotHandleChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  checkedCondition: string[];\r\n  required: boolean;\r\n  daySelected?: string;\r\n};\r\n\r\nfunction SelectMultipleTimeSlot(props: Props) {\r\n  // /timeslot?AcademicYear=2566&Semester=SEMESTER_2\r\n  const params = useParams();\r\n\r\n  // Use useSemesterSync to extract and sync semester with global store\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n\r\n  const timeSlotData = useTimeslots(\r\n    parseInt(academicYear || \"0\"),\r\n    parseInt(semester || \"0\"),\r\n  );\r\n  const [timeSlot, setTimeSlot] = useState<string[]>([]);\r\n  useEffect(() => {\r\n    if (!timeSlotData.isLoading) {\r\n      setTimeSlot(() =>\r\n        timeSlotData.data\r\n          .filter((item) => item.DayOfWeek === props.daySelected)\r\n          .map((item) => item.TimeslotID),\r\n      );\r\n    }\r\n  }, [timeSlotData.isLoading, props.daySelected]);\r\n\r\n  const checkTimeslotCond = (index: number) => {\r\n    if (!props.subject?.Credit) return false;\r\n    const creditValue = subjectCreditValues[props.subject.Credit];\r\n    if (!creditValue) return false;\r\n    const timeslotCredit = creditValue * 2;\r\n    const checkedIndex = props.checkedCondition.map((item) =>\r\n      timeSlot.indexOf(item),\r\n    );\r\n\r\n    // เธ–เนเธฒเนเธกเนเธกเธตเธเธฒเธฃเน€เธฅเธทเธญเธ\r\n    if (checkedIndex.length === 0 || checkedIndex.includes(index)) return true;\r\n    // เธ–เนเธฒเน€เธฅเธทเธญเธเธกเธฒเธเธเธงเนเธฒ 1 เธ•เธฑเธง\r\n    if (checkedIndex.length >= timeslotCredit) return false;\r\n    const min = Math.min(...checkedIndex);\r\n    const max = Math.max(...checkedIndex);\r\n    return index === min - 1 || index === max + 1;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between w-full\">\r\n        <div className=\"text-sm flex gap-1 items-center\">\r\n          <p>เธเธฒเธเธ—เธตเน</p>\r\n          <p className=\"text-red-500\">*</p>\r\n          {props.required ? (\r\n            <div className=\"ml-3 flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n              <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n              <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"flex flex-col gap-3\">\r\n          <div className=\"flex flex-wrap gap-3 w-[230px] relative\">\r\n            {timeSlot.length == 0 || !props.subject ? (\r\n              <p className=\"text-sm text-red-500 absolute right-0\">\r\n                *เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธงเธฑเธเธ—เธตเนเน€เธฃเธตเธขเธเนเธฅเธฐเธงเธดเธเธฒ\r\n              </p>\r\n            ) : (\r\n              timeSlot.map((item, index) => (\r\n                <Fragment key={`slot${item}`}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    value={item}\r\n                    name=\"checkboxTimeSlot\"\r\n                    onChange={props.timeSlotHandleChange}\r\n                    checked={props.checkedCondition.includes(item)}\r\n                    disabled={!checkTimeslotCond(index)}\r\n                  />\r\n                  <label>{index + 1}</label>\r\n                </Fragment>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectMultipleTimeSlot;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectRoomName.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Typography' is defined but never used.","line":5,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useRooms } from \"@/hooks\";\r\nimport { RoomAutocomplete } from \"@/components/room\";\r\nimport type { room } from \"@/prisma/generated/client\";\r\nimport React from \"react\";\r\nimport { Box, Typography } from \"@mui/material\";\r\n\r\ntype Props = {\r\n  roomName: string | null;\r\n  handleRoomChange: (value: room) => void;\r\n  required?: boolean;\r\n  availabilityMap?: Record<number, \"available\" | \"occupied\" | \"partial\">;\r\n  showAvailability?: boolean;\r\n};\r\n\r\n/**\r\n * Enhanced room selection component with MUI Autocomplete\r\n * Features:\r\n * - Building/floor grouping\r\n * - Case-insensitive search\r\n * - Visual icons and metadata\r\n * - Accessible keyboard navigation\r\n */\r\nfunction SelectRoomName({\r\n  roomName,\r\n  handleRoomChange,\r\n  required = false,\r\n  availabilityMap,\r\n  showAvailability,\r\n}: Props) {\r\n  const { data: rooms } = useRooms();\r\n\r\n  // Find the currently selected room by name\r\n  const selectedRoom = roomName\r\n    ? rooms.find((r) => r.RoomName === roomName) || null\r\n    : null;\r\n\r\n  return (\r\n    <Box sx={{ width: \"100%\" }}>\r\n      <RoomAutocomplete\r\n        rooms={rooms}\r\n        value={selectedRoom}\r\n        onChange={(room) => {\r\n          if (room) {\r\n            handleRoomChange(room);\r\n          }\r\n        }}\r\n        label=\"เธชเธ–เธฒเธเธ—เธตเนเน€เธฃเธตเธขเธ\"\r\n        placeholder=\"เน€เธฅเธทเธญเธเธซเนเธญเธเน€เธฃเธตเธขเธ\"\r\n        required={required}\r\n        fullWidth\r\n        size=\"small\"\r\n        availabilityMap={availabilityMap}\r\n        showAvailability={showAvailability}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default SelectRoomName;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectSubject.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectSubject.tsx:51:7\n  49 |       | undefined;\n  50 |     if (result?.success && result.data) {\n> 51 |       setSubject(result.data);\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  52 |       setSubjectFilter(result.data);\n  53 |     }\n  54 |   }, [respData.isValidating, respData.data]);","line":51,"column":7,"nodeType":null,"endLine":51,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Dropdown from \"@/components/elements/input/selected_input/Dropdown\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport { useParams } from \"next/navigation\";\r\nimport React, { useEffect, useState, type JSX } from \"react\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport useSWR from \"swr\";\r\n\r\nimport { useSemesterSync } from \"@/hooks\";\r\nimport { getLockedRespsAction } from \"@/features/assign/application/actions/assign.actions\";\r\nimport type { InputChangeHandler } from \"@/types/events\";\r\nimport type { SubjectWithResponsibilities } from \"@/types/lock-schedule\";\r\nimport type { ActionResult } from \"@/shared/lib/action-wrapper\";\r\n\r\ntype Props = {\r\n  currentValue: string;\r\n  handleSubjectChange: (value: SubjectWithResponsibilities) => void;\r\n  required: boolean;\r\n};\r\n\r\nfunction SelectSubject(props: Props) {\r\n  const params = useParams();\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n\r\n  const respData = useSWR(\r\n    semester && academicYear\r\n      ? [\"locked-subjects\", semester, academicYear]\r\n      : null,\r\n    async ([, sem, year]) => {\r\n      return await getLockedRespsAction({\r\n        Semester: `SEMESTER_${sem}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        AcademicYear: parseInt(year),\r\n      });\r\n    },\r\n    {\r\n      //refreshInterval: 15000,\r\n      revalidateOnMount: true,\r\n    },\r\n  );\r\n  const [subject, setSubject] = useState<SubjectWithResponsibilities[]>([]);\r\n  const [subjectFilter, setSubjectFilter] = useState<\r\n    SubjectWithResponsibilities[]\r\n  >([]);\r\n\r\n  useEffect(() => {\r\n    const result = respData.data as\r\n      | ActionResult<SubjectWithResponsibilities[]>\r\n      | undefined;\r\n    if (result?.success && result.data) {\r\n      setSubject(result.data);\r\n      setSubjectFilter(result.data);\r\n    }\r\n  }, [respData.isValidating, respData.data]);\r\n\r\n  const searchHandle: InputChangeHandler = (event) => {\r\n    const text = event.target.value;\r\n    searchName(text);\r\n  };\r\n\r\n  const searchName = (name: string) => {\r\n    const res = subjectFilter.filter((item) =>\r\n      `${item.SubjectCode} ${item.SubjectName}`.match(name),\r\n    );\r\n    setSubject(res);\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between w-full items-center\">\r\n        <div className=\"text-sm flex gap-1 items-center\">\r\n          <p>เธงเธดเธเธฒ</p>\r\n          <p className=\"text-red-500\">*</p>\r\n          {props.required ? (\r\n            <div className=\"ml-3 flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n              <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n              <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        {!respData.isValidating ? (\r\n          <Dropdown\r\n            data={subject as unknown[]}\r\n            renderItem={({ data }: { data: unknown }): JSX.Element => (\r\n              <li className=\"w-full text-sm\">\r\n                {(data as SubjectWithResponsibilities).SubjectCode}{\" \"}\r\n                {(data as SubjectWithResponsibilities).SubjectName}\r\n              </li>\r\n            )}\r\n            width={300}\r\n            height={40}\r\n            currentValue={props.currentValue}\r\n            placeHolder={\"เธ•เธฑเธงเน€เธฅเธทเธญเธ\"}\r\n            handleChange={(value: unknown) =>\r\n              props.handleSubjectChange(value as SubjectWithResponsibilities)\r\n            }\r\n            useSearchBar={true}\r\n            searchFunction={searchHandle}\r\n          />\r\n        ) : (\r\n          <CircularProgress size={20} />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectSubject;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectTeacher.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SearchBar' is defined but never used.","line":1,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":41,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import SearchBar from \"@/components/mui/SearchBar\";\r\nimport MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\n\r\nimport type { subject, teacher } from \"@/prisma/generated/client\";\r\n\r\ntype Props = {\r\n  subject?: subject;\r\n  setTeacherList?: (teachers: teacher[]) => void;\r\n  required?: boolean;\r\n  teachers?: teacher[];\r\n  teacherSelected?: teacher[];\r\n  addTeacherFunction?: (teacher: teacher) => void;\r\n  removeTeacherFunction?: (index: number) => void;\r\n};\r\n\r\nfunction SelectTeacher(props: Props) {\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-col gap-5 justify-between w-full\">\r\n        <div className=\"flex justify-between items-center relative\">\r\n          <div className=\"text-sm flex gap-1 items-center\">\r\n            <p>เธเธฃเธน</p>\r\n            <p className=\"text-red-500\">*</p>\r\n            {props.required ? (\r\n              <div className=\"ml-3 flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n                <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n                <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          {!props.subject ? (\r\n            <div className=\"flex flex-wrap gap-3 w-[230px] relative\">\r\n              <p className=\"text-sm text-red-500 absolute right-0\">\r\n                *เธเธฃเธธเธ“เธฒเน€เธฅเธทเธญเธเธงเธดเธเธฒ\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex flex-wrap gap-3 justify-end\">\r\n              {props.teachers?.map((item, index) => (\r\n                <Fragment key={`teacherSelected${item.TeacherID}`}>\r\n                  <MiniButton\r\n                    handleClick={() => {}}\r\n                    title={`${item.Firstname} - ${item.Department}`}\r\n                    border={true}\r\n                    buttonColor=\"#ffffff\"\r\n                    titleColor=\"#222222\"\r\n                    width=\"fit-content\"\r\n                    height={30}\r\n                    borderColor=\"#888888\"\r\n                    isSelected={false}\r\n                    hoverable={false}\r\n                  />\r\n                </Fragment>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectTeacher;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectedClassRoom.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\component\\SelectedClassRoom.tsx:78:7\n  76 |         return filterResData;\n  77 |       };\n> 78 |       setAllClassRoom((prev) =>\n     |       ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  79 |         prev.map((item) => ({\n  80 |           ...item,\n  81 |           rooms: ClassRoomClassify(item.Year),","line":78,"column":7,"nodeType":null,"endLine":78,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import MiniButton from \"@/components/elements/static/MiniButton\";\r\nimport { Skeleton } from \"@mui/material\";\r\nimport type { subject } from \"@/prisma/generated/client\";\r\nimport { useParams } from \"next/navigation\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport { BsInfo } from \"react-icons/bs\";\r\nimport useSWR from \"swr\";\r\n\r\nimport { useSemesterSync } from \"@/hooks\";\r\nimport { getGradeLevelsForLockAction } from \"@/features/gradelevel/application/actions/gradelevel.actions\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\n\r\ntype Props = {\r\n  teachers?: teacher[];\r\n  Grade: string[];\r\n  subject?: subject;\r\n  classRoomHandleChange: (value: string) => void;\r\n  required?: boolean;\r\n};\r\n\r\nfunction SelectedClassRoom(props: Props) {\r\n  const params = useParams();\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n  const teacherIDs = props.teachers?.map((teacher) => teacher.TeacherID) || [];\r\n\r\n  const { data, isValidating } = useSWR(\r\n    props.subject && semester && academicYear && teacherIDs.length > 0\r\n      ? [\r\n          \"gradelevels-for-lock\",\r\n          props.subject.SubjectCode,\r\n          semester,\r\n          academicYear,\r\n          ...teacherIDs,\r\n        ]\r\n      : null,\r\n    async ([, subjectCode, sem, year, ...ids]) => {\r\n      return await getGradeLevelsForLockAction({\r\n        SubjectCode: subjectCode,\r\n        AcademicYear: parseInt(year),\r\n        Semester: `SEMESTER_${sem}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n        TeacherIDs: ids.map((id) => Number(id)),\r\n      });\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n    },\r\n  );\r\n\r\n  const [allClassRoom, setAllClassRoom] = useState([\r\n    { Year: 1, rooms: [] as string[] },\r\n    { Year: 2, rooms: [] as string[] },\r\n    { Year: 3, rooms: [] as string[] },\r\n    { Year: 4, rooms: [] as string[] },\r\n    { Year: 5, rooms: [] as string[] },\r\n    { Year: 6, rooms: [] as string[] },\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (data && \"success\" in data && data.success && data.data) {\r\n      const ClassRoomClassify = (year: number): string[] => {\r\n        //function เธชเธณเธซเธฃเธฑเธเธเธณเนเธเธเธเธฑเนเธเน€เธฃเธตเธขเธเธชเธณเธซเธฃเธฑเธเธเธณเธเนเธญเธกเธนเธฅเนเธเนเธเนเธเธฒเธเน€เธเธทเนเธญเนเธชเธ”เธเธเธฅเธเธเธซเธเนเธฒเน€เธงเนเธเนเธ”เธขเน€เธเธเธฒเธฐ\r\n        //เธฃเธนเธเนเธเธเธเนเธญเธกเธนเธฅ เธเธฐเธกเธฒเธเธฃเธฐเธกเธฒเธ“เธเธตเน\r\n        //{GradeID: '101', Year: 1, Number: 1}\r\n        //{GradeID: '101', Year: 1, Number: 1}\r\n        //{GradeID: '102', Year: 1, Number: 2}\r\n        const grades = data.data as {\r\n          GradeID: string;\r\n          Year: number;\r\n          Number: number;\r\n        }[];\r\n        const filterResData = grades\r\n          .filter((grade) => grade.Year === year)\r\n          .map((item) => item.GradeID); //เน€เธเนเธ Year === 1 เธเนเธเธฐเน€เธญเธฒเนเธ•เนเธเนเธญเธกเธนเธฅเธเธญเธ เธก.1 เธกเธฒ\r\n        return filterResData;\r\n      };\r\n      setAllClassRoom((prev) =>\r\n        prev.map((item) => ({\r\n          ...item,\r\n          rooms: ClassRoomClassify(item.Year),\r\n        })),\r\n      );\r\n    }\r\n  }, [isValidating, data]);\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-col gap-3 justify-between w-full\">\r\n        <div className=\"text-sm flex gap-2 items-center\">\r\n          <div className=\"text-sm flex gap-1\">\r\n            <p>เน€เธฅเธทเธญเธเธเธฑเนเธเน€เธฃเธตเธขเธ</p>\r\n            <p className=\"text-red-500\">*</p>\r\n          </div>\r\n          <p className=\"text-blue-500\">(เธเธฅเธดเธเธ—เธตเนเธเธฑเนเธเน€เธฃเธตเธขเธเน€เธเธทเนเธญเน€เธฅเธทเธญเธ)</p>\r\n          {props.required ? (\r\n            <div className=\"ml-3 flex gap-2 px-2 py-1 w-fit items-center bg-red-100 rounded\">\r\n              <BsInfo className=\"bg-red-500 rounded-full fill-white\" />\r\n              <p className=\"text-red-500 text-sm\">เธ•เนเธญเธเธเธฒเธฃ</p>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        {[1, 2, 3, 4, 5, 6].map((grade) => (\r\n          <Fragment key={`selectGrade${grade}`}>\r\n            <div className=\"flex justify-between p-2 w-full h-fit border border-[#EDEEF3] items-center\">\r\n              <p>{`เธก.${grade}`}</p>\r\n              {/* <CheckBox label={`เธก.${grade}`} /> */}\r\n              <div className=\"flex flex-wrap w-1/2 justify-end gap-3\">\r\n                {isValidating ? (\r\n                  <Fragment>\r\n                    <Skeleton variant=\"rectangular\" width={100} height={30} />\r\n                  </Fragment>\r\n                ) : (\r\n                  allClassRoom\r\n                    .filter((item) => item.Year === grade)[0]\r\n                    ?.rooms.map((classroom: string) => (\r\n                      <Fragment key={`เธก.${classroom}`}>\r\n                        <MiniButton\r\n                          titleColor={\r\n                            props.Grade.includes(classroom)\r\n                              ? \"#008022\"\r\n                              : \"#222222\"\r\n                          }\r\n                          borderColor={\r\n                            props.Grade.includes(classroom)\r\n                              ? \"#9fedb3\"\r\n                              : \"#888888\"\r\n                          }\r\n                          buttonColor={\r\n                            props.Grade.includes(classroom)\r\n                              ? \"#abffc1\"\r\n                              : \"#ffffff\"\r\n                          }\r\n                          border={true}\r\n                          title={`เธก.${grade}/${classroom.substring(2)}`}\r\n                          handleClick={() => {\r\n                            props.classRoomHandleChange(classroom);\r\n                          }}\r\n                          width=\"fit-content\"\r\n                          height={30}\r\n                          isSelected={false}\r\n                          hoverable={false}\r\n                        />\r\n                      </Fragment>\r\n                    ))\r\n                )}\r\n              </div>\r\n            </div>\r\n          </Fragment>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectedClassRoom;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\lock\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":5,"column":14,"nodeType":"TSTypeLiteral","messageId":"noEmptyObject","endLine":5,"endColumn":16,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[112,114],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[112,114],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'props' is defined but never used. Allowed unused args must match /^_/u.","line":7,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport LockSchedule from \"./component/LockSchedule\";\r\n\r\ntype Props = {};\r\n\r\nfunction LockSchedulePage(props: Props) {\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-col gap-3 my-5\">\r\n        <LockSchedule />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LockSchedulePage;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nB:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\[semesterAndyear]\\page.tsx:38:5\n  36 |   useEffect(() => {\n  37 |     const currentTab = getCurrentTab();\n> 38 |     setTabSelect(currentTab);\n     |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  39 |   }, [pathName]);\n  40 |\n  41 |   const handleTabChange = (_event: React.SyntheticEvent, newValue: string) => {","line":38,"column":5,"nodeType":null,"endLine":38,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'getCurrentTab'. Either include it or remove the dependency array.","line":39,"column":6,"nodeType":"ArrayExpression","endLine":39,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [getCurrentTab, pathName]","fix":{"range":[1343,1353],"text":"[getCurrentTab, pathName]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useParams, usePathname, useRouter } from \"next/navigation\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Box, Tabs, Tab, Link } from \"@mui/material\";\r\nimport KeyboardBackspaceIcon from \"@mui/icons-material/KeyboardBackspace\";\r\nimport AssignmentIcon from \"@mui/icons-material/Assignment\";\r\nimport LockIcon from \"@mui/icons-material/Lock\";\r\nimport CalendarMonthIcon from \"@mui/icons-material/CalendarMonth\";\r\nimport { useSemesterSync } from \"@/hooks\";\r\n\r\nfunction Schedule() {\r\n  const pathName = usePathname();\r\n  const router = useRouter();\r\n  const params = useParams();\r\n\r\n  // Sync URL params with global store\r\n  const { semester, academicYear } = useSemesterSync(\r\n    params.semesterAndyear as string,\r\n  );\r\n\r\n  const path = pathName.substring(0, 16);\r\n\r\n  // Extract current tab from URL path (e.g., \"/schedule/1-2567/assign\" -> \"assign\")\r\n  const getCurrentTab = (): string => {\r\n    const parts = pathName.split(\"/\");\r\n    if (parts.length > 3) {\r\n      // Handle nested routes like \"arrange/teacher-arrange\"\r\n      return parts.slice(3).join(\"/\");\r\n    }\r\n    return \"\";\r\n  };\r\n\r\n  const [tabSelect, setTabSelect] = useState<string>(getCurrentTab());\r\n\r\n  // Sync tab state with URL changes\r\n  useEffect(() => {\r\n    const currentTab = getCurrentTab();\r\n    setTabSelect(currentTab);\r\n  }, [pathName]);\r\n\r\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: string) => {\r\n    setTabSelect(newValue);\r\n    router.replace(`${path}/${newValue}`);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          py: 3,\r\n        }}\r\n      >\r\n        <Box>\r\n          <h1 className=\"text-xl font-bold\">\r\n            เธ•เธฒเธฃเธฒเธเธชเธญเธ เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน {semester} เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ {academicYear}\r\n          </h1>\r\n        </Box>\r\n        <Link\r\n          sx={{\r\n            display: \"flex\",\r\n            gap: 1,\r\n            alignItems: \"center\",\r\n            cursor: \"pointer\",\r\n            textDecoration: \"none\",\r\n          }}\r\n          href=\"/dashboard\"\r\n        >\r\n          <KeyboardBackspaceIcon sx={{ color: \"text.secondary\" }} />\r\n          <Box\r\n            component=\"span\"\r\n            sx={{ color: \"text.secondary\", fontSize: \"0.875rem\" }}\r\n          >\r\n            เน€เธเธฅเธตเนเธขเธเธ เธฒเธเน€เธฃเธตเธขเธ\r\n          </Box>\r\n        </Link>\r\n      </Box>\r\n\r\n      <Box sx={{ mb: 3 }}>\r\n        <Tabs\r\n          value={tabSelect}\r\n          onChange={handleTabChange}\r\n          variant=\"scrollable\"\r\n          scrollButtons=\"auto\"\r\n          aria-label=\"schedule tabs\"\r\n          sx={{\r\n            \"& .MuiTabs-indicator\": {\r\n              height: 4,\r\n              borderRadius: \"4px 4px 0 0\",\r\n              background: \"linear-gradient(90deg, #06b6d4, #3b82f6)\",\r\n              boxShadow: \"0 2px 8px rgba(59, 130, 246, 0.3)\",\r\n            },\r\n            \"& .MuiTab-root\": {\r\n              fontSize: \"0.95rem\",\r\n              fontWeight: 500,\r\n              textTransform: \"none\",\r\n              minHeight: 64,\r\n              px: 3,\r\n              transition: \"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)\",\r\n              color: \"#6b7280\",\r\n              \"&:hover\": {\r\n                backgroundColor: \"rgba(6, 182, 212, 0.08)\",\r\n                color: \"#0891b2\",\r\n                transform: \"translateY(-2px)\",\r\n              },\r\n              \"&.Mui-selected\": {\r\n                color: \"#0891b2\",\r\n                fontWeight: 600,\r\n                background:\r\n                  \"linear-gradient(to bottom, rgba(6, 182, 212, 0.05), transparent)\",\r\n              },\r\n              \"& .MuiSvgIcon-root\": {\r\n                fontSize: \"1.3rem\",\r\n                transition: \"transform 0.3s ease\",\r\n              },\r\n              \"&.Mui-selected .MuiSvgIcon-root\": {\r\n                transform: \"scale(1.1)\",\r\n              },\r\n            },\r\n            borderBottom: \"2px solid\",\r\n            borderColor: \"rgba(229, 231, 235, 1)\",\r\n            boxShadow: \"0 1px 3px rgba(0, 0, 0, 0.05)\",\r\n          }}\r\n        >\r\n          <Tab\r\n            icon={<AssignmentIcon />}\r\n            iconPosition=\"start\"\r\n            label=\"เธกเธญเธเธซเธกเธฒเธขเธงเธดเธเธฒเน€เธฃเธตเธขเธ\"\r\n            value=\"assign\"\r\n          />\r\n          <Tab\r\n            icon={<LockIcon />}\r\n            iconPosition=\"start\"\r\n            label=\"เธฅเนเธญเธเธเธฒเธเธชเธญเธ\"\r\n            value=\"lock\"\r\n          />\r\n          <Tab\r\n            icon={<CalendarMonthIcon />}\r\n            iconPosition=\"start\"\r\n            label=\"เธเธฑเธ”เธ•เธฒเธฃเธฒเธเธชเธญเธ\"\r\n            value=\"arrange/teacher-arrange\"\r\n          />\r\n        </Tabs>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Schedule;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\schedule\\select-semester\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\signin\\SignInForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\signin\\WelcomePanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\signin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\app\\theme.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'alpha' is defined but never used.","line":2,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3386,3389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3386,3389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { createTheme, alpha } from \"@mui/material\";\r\nimport { Sarabun } from \"next/font/google\";\r\n\r\nconst sarabun = Sarabun({\r\n  subsets: [\"thai\", \"latin\"],\r\n  weight: [\"300\", \"400\", \"500\", \"700\"],\r\n});\r\n\r\nconst theme = createTheme({\r\n  typography: {\r\n    fontFamily: sarabun.style.fontFamily,\r\n    // Improve readability with better font sizes\r\n    h1: { fontSize: \"2.5rem\", fontWeight: 700, lineHeight: 1.2 },\r\n    h2: { fontSize: \"2rem\", fontWeight: 600, lineHeight: 1.3 },\r\n    h3: { fontSize: \"1.75rem\", fontWeight: 600, lineHeight: 1.4 },\r\n    h4: { fontSize: \"1.5rem\", fontWeight: 500, lineHeight: 1.5 },\r\n    h5: { fontSize: \"1.25rem\", fontWeight: 500, lineHeight: 1.6 },\r\n    h6: { fontSize: \"1rem\", fontWeight: 500, lineHeight: 1.6 },\r\n    body1: { fontSize: \"1rem\", lineHeight: 1.7 },\r\n    body2: { fontSize: \"0.875rem\", lineHeight: 1.6 },\r\n    button: { textTransform: \"none\", fontWeight: 500 }, // Remove uppercase\r\n  },\r\n  palette: {\r\n    primary: {\r\n      main: \"#3B82F6\", // blue-500\r\n      light: \"#DBEAFE\", // blue-100\r\n      dark: \"#1E3A8A\", // blue-900\r\n      contrastText: \"#FFFFFF\",\r\n    },\r\n    secondary: {\r\n      main: \"#A855F7\", // purple-500\r\n      light: \"#E9D5FF\", // purple-100\r\n      dark: \"#6B21A8\", // purple-900\r\n      contrastText: \"#FFFFFF\",\r\n    },\r\n    success: {\r\n      main: \"#10B981\", // green-500\r\n      light: \"#D1FAE5\", // green-100\r\n      dark: \"#065F46\", // green-900\r\n    },\r\n    warning: {\r\n      main: \"#F59E0B\", // amber-500\r\n      light: \"#FEF3C7\", // amber-100\r\n      dark: \"#92400E\", // amber-900\r\n    },\r\n    error: {\r\n      main: \"#EF4444\", // red-500\r\n      light: \"#FEE2E2\", // red-100\r\n      dark: \"#991B1B\", // red-900\r\n    },\r\n    info: {\r\n      main: \"#06B6D4\", // cyan-500\r\n      light: \"#CFFAFE\", // cyan-100\r\n      dark: \"#164E63\", // cyan-900\r\n    },\r\n    background: {\r\n      default: \"#F9FAFB\", // gray-50\r\n      paper: \"#FFFFFF\",\r\n    },\r\n    text: {\r\n      primary: \"#111827\", // gray-900\r\n      secondary: \"#6B7280\", // gray-500\r\n      disabled: \"#9CA3AF\", // gray-400\r\n    },\r\n  },\r\n  shape: {\r\n    borderRadius: 8, // More modern rounded corners\r\n  },\r\n  shadows: [\r\n    \"none\",\r\n    \"0 1px 2px 0 rgba(0, 0, 0, 0.05)\", // sm\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)\", // base\r\n    \"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)\", // md\r\n    \"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)\", // lg\r\n    \"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)\", // xl\r\n    \"0 25px 50px -12px rgba(0, 0, 0, 0.25)\", // 2xl\r\n    // Additional shadows for MUI compatibility (need exactly 25 total)\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n    \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\",\r\n  ] as any,\r\n  components: {\r\n    MuiButton: {\r\n      styleOverrides: {\r\n        root: {\r\n          borderRadius: 6,\r\n          padding: \"8px 16px\",\r\n          fontSize: \"0.875rem\",\r\n          fontWeight: 500,\r\n          boxShadow: \"none\",\r\n          \"&:hover\": {\r\n            boxShadow: \"none\",\r\n          },\r\n        },\r\n        sizeSmall: {\r\n          padding: \"4px 12px\",\r\n          fontSize: \"0.8125rem\",\r\n        },\r\n        sizeLarge: {\r\n          padding: \"12px 24px\",\r\n          fontSize: \"1rem\",\r\n        },\r\n      },\r\n    },\r\n    MuiTextField: {\r\n      defaultProps: {\r\n        size: \"small\", // Smaller default for better density\r\n      },\r\n      styleOverrides: {\r\n        root: {\r\n          \"& .MuiOutlinedInput-root\": {\r\n            borderRadius: 6,\r\n          },\r\n        },\r\n      },\r\n    },\r\n    MuiCard: {\r\n      styleOverrides: {\r\n        root: {\r\n          borderRadius: 8,\r\n          boxShadow:\r\n            \"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)\",\r\n        },\r\n      },\r\n    },\r\n    MuiPaper: {\r\n      styleOverrides: {\r\n        root: {\r\n          borderRadius: 8,\r\n        },\r\n        elevation1: {\r\n          boxShadow: \"0 1px 2px 0 rgba(0, 0, 0, 0.05)\",\r\n        },\r\n        elevation2: {\r\n          boxShadow:\r\n            \"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)\",\r\n        },\r\n        elevation3: {\r\n          boxShadow:\r\n            \"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)\",\r\n        },\r\n      },\r\n    },\r\n    MuiChip: {\r\n      styleOverrides: {\r\n        root: {\r\n          borderRadius: 6,\r\n          fontWeight: 500,\r\n        },\r\n      },\r\n    },\r\n    MuiAlert: {\r\n      styleOverrides: {\r\n        root: {\r\n          borderRadius: 6,\r\n        },\r\n      },\r\n    },\r\n    MuiDialog: {\r\n      styleOverrides: {\r\n        paper: {\r\n          borderRadius: 12, // Slightly more rounded for modals\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\dialogs\\ConfirmDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\dialogs\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\input\\field\\NumberField.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[262,265],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[262,265],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { JSX } from \"react\";\r\n\r\ninterface INumberFieldProps {\r\n  width?: string | number;\r\n  height?: string | number;\r\n  placeHolder?: string;\r\n  disabled?: boolean;\r\n  label?: string;\r\n  value?: number | string;\r\n  borderColor?: string;\r\n  handleChange?: any;\r\n}\r\nfunction NumberField({\r\n  width = \"auto\",\r\n  height = \"auto\",\r\n  placeHolder = \"\",\r\n  disabled = false,\r\n  value,\r\n  label,\r\n  handleChange,\r\n  borderColor = \"\",\r\n}: INumberFieldProps): JSX.Element {\r\n  const numberFieldStyleProperty: object = {\r\n    width: width,\r\n    height: height,\r\n    borderWidth: 1,\r\n    borderColor: borderColor,\r\n  };\r\n  return (\r\n    <div className=\"flex flex-col text-left gap-2\">\r\n      <label className=\"text-sm font-bold\">{label}</label>\r\n      <input\r\n        className=\"rounded text-field px-[15px] py-[10px] text-sm placeholder:text-sm\"\r\n        type=\"number\"\r\n        style={numberFieldStyleProperty}\r\n        placeholder={placeHolder}\r\n        onChange={handleChange}\r\n        disabled={disabled}\r\n        value={value}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NumberField;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\input\\field\\SearchBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'value' is defined but never used. Allowed unused args must match /^_/u.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import SearchIcon from \"@mui/icons-material/Search\";\r\n\r\ninterface SearchBarProps {\r\n  width?: string | number | null;\r\n  height?: string | number;\r\n  placeHolder?: string;\r\n  fill?: string;\r\n  handleChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n  value?: string;\r\n}\r\n\r\nfunction SearchBar({\r\n  width = null,\r\n  height,\r\n  placeHolder = \"เธเนเธเธซเธฒ\",\r\n  fill = \"#EDEEF3\",\r\n  handleChange,\r\n  value,\r\n}: SearchBarProps) {\r\n  return (\r\n    <div className=\"flex items-center rounded relative\">\r\n      <input\r\n        type=\"text\"\r\n        className=\"text-field pl-[45px]\"\r\n        placeholder={placeHolder}\r\n        style={{\r\n          width: width == null ? \"fit-content\" : width,\r\n          height: height,\r\n          backgroundColor: fill,\r\n        }}\r\n        onChange={handleChange}\r\n      />\r\n      <div className=\"flex gap-3 absolute left-3 text-gray-500\">\r\n        <SearchIcon fontSize=\"small\" aria-hidden=\"true\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\input\\field\\TextField.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\input\\selected_input\\CheckBox.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[142,145],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[142,145],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { JSX } from \"react\";\r\n\r\ninterface ICheckBoxProps {\r\n  label: string;\r\n  value: string | number;\r\n  name: string;\r\n  handleClick: any;\r\n  checked: boolean;\r\n  disabled?: boolean;\r\n}\r\nfunction CheckBox({\r\n  label = \"Checkbox\",\r\n  value,\r\n  name,\r\n  handleClick,\r\n  checked = false,\r\n  disabled = false,\r\n}: ICheckBoxProps): JSX.Element {\r\n  return (\r\n    <div className=\"flex justify-center items-center gap-3 flex-row w-fit h-fit\">\r\n      {checked ? (\r\n        <input\r\n          type=\"checkbox\"\r\n          className=\"outline-none\"\r\n          value={value}\r\n          name={name}\r\n          onClick={handleClick}\r\n          checked\r\n          disabled={disabled}\r\n        />\r\n      ) : (\r\n        <input\r\n          type=\"checkbox\"\r\n          className=\"outline-none\"\r\n          value={value}\r\n          name={name}\r\n          onClick={handleClick}\r\n          disabled={disabled}\r\n        />\r\n      )}\r\n      <label className=\"select-none text-gray-500 text-sm\">{label}</label>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckBox;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\input\\selected_input\\Dropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\snackbar\\SnackbarProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\static\\Button.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[451,454],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[451,454],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1575,1578],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1575,1578],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, {\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n  type CSSProperties,\r\n  type MouseEventHandler,\r\n  type ReactElement,\r\n} from \"react\";\r\n\r\n//Image component from next\r\nimport Image, { type StaticImageData } from \"next/image\";\r\n\r\n//Import functions\r\nimport { hexToRGB } from \"@/functions/componentFunctions\";\r\n\r\n// เนเธเนเธเธฑเธ props เธ—เธตเนเธฃเธฑเธเธกเธฒเนเธซเน component เธเธฃเนเธญเธกเธเธณเธซเธเธ”เธเนเธฒ default\r\ntype ButtonProps = {\r\n  icon?: string | StaticImageData | ReactElement<any>; //SVG เธซเธฃเธทเธญ React Element เธชเธณเธซเธฃเธฑเธเนเธชเธ”เธเนเธญเธเธญเธ\r\n  iconAlt?: string; //เธเนเธญเธเธงเธฒเธก alt เธเธญเธ icon\r\n  title?: string; //Label\r\n  buttonColor?: string; //เธชเธตเธเธธเนเธก\r\n  titleColor?: string; //เธชเธตเธเนเธญเธเธงเธฒเธก\r\n  fontSize?: number; //เธเธเธฒเธ”เธเนเธญเธเธงเธฒเธก\r\n  fontWeight?: CSSProperties[\"fontWeight\"]; //เธเธงเธฒเธกเธซเธเธฒเธเธญเธเธเนเธญเธเธงเธฒเธก\r\n  width?: number | string | null; //เธเธงเธฒเธกเธเธงเนเธฒเธเธเธธเนเธก เนเธชเนเนเธ”เนเธ—เธฑเนเธเธเนเธฒเธ•เธฑเธงเน€เธฅเธเนเธฅเธฐ เธเนเธฒเน€เธเธญเธฃเนเน€เธเนเธเน€เธเนเธ string ex '75%'\r\n  height?: number | string | null; //เน€เธเนเธเน€เธ”เธตเธขเธงเธเธฑเธเธเธฑเธเธเธงเธฒเธกเธเธงเนเธฒเธ\r\n  handleClick?: MouseEventHandler<HTMLButtonElement>; //เธฃเธฑเธเธเธฑเธเธเนเธเธฑเนเธเน€เธเธทเนเธญเนเธเนเธเธฑเธ onClick (เธฃเธญเธเธฃเธฑเธเธเธทเนเธญเน€เธ”เธดเธก)\r\n  onClick?: React.MouseEventHandler<HTMLButtonElement>; // standard onClick prop\r\n  className?: string; //className เน€เธเธดเนเธกเน€เธ•เธดเธกเธเธญเธเธเธธเนเธก\r\n  labelClassName?: string; //className เน€เธเธดเนเธกเน€เธ•เธดเธกเธเธญเธเธ•เธฑเธงเธซเธเธฑเธเธชเธทเธญ\r\n  labelStyle?: CSSProperties; //style เธเธญเธเธ•เธฑเธงเธซเธเธฑเธเธชเธทเธญ\r\n  iconPosition?: \"left\" | \"right\"; //เธเธณเธซเธเธ”เธ•เธณเนเธซเธเนเธเธเธญเธ icon\r\n} & Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"title\" | \"color\">;\r\n\r\nconst clampColorValue = (value: number): number =>\r\n  Math.max(0, Math.min(255, value));\r\n\r\nconst isStaticImageData = (\r\n  value: string | StaticImageData | ReactElement<any>,\r\n): value is StaticImageData => {\r\n  return (\r\n    typeof value === \"object\" &&\r\n    value !== null &&\r\n    \"src\" in value &&\r\n    \"height\" in value &&\r\n    \"width\" in value\r\n  );\r\n};\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(function Button(\r\n  {\r\n    icon,\r\n    iconAlt,\r\n    title,\r\n    buttonColor = \"#2F80ED\",\r\n    titleColor = \"#FFF\",\r\n    fontSize = 16,\r\n    fontWeight = 300,\r\n    width,\r\n    height = 45,\r\n    handleClick,\r\n    className,\r\n    labelClassName,\r\n    labelStyle,\r\n    iconPosition = \"left\",\r\n    style: customStyle,\r\n    disabled: disabledProp = false,\r\n    onClick,\r\n    onMouseEnter: onMouseEnterProp,\r\n    onMouseLeave: onMouseLeaveProp,\r\n    ...rest\r\n  },\r\n  ref,\r\n): React.JSX.Element {\r\n  const [isHover, setIsHover] = useState(false); //Hover state เนเธเนเธเธฑเธเธเธธเนเธก\r\n\r\n  const {\r\n    [\"aria-label\"]: ariaLabelProp,\r\n    type: typeProp = \"button\",\r\n    ...buttonProps\r\n  } = rest;\r\n\r\n  const disabled = disabledProp;\r\n\r\n  useEffect(() => {\r\n    // เธฃเธตเน€เธเนเธ• hover state เน€เธกเธทเนเธญเธเธธเนเธกเธ–เธนเธ disabled เน€เธเธทเนเธญเธเนเธญเธเธเธฑเธเธชเธตเธเธดเธ”เธเธฅเธฒเธ”\r\n    if (disabled && isHover) {\r\n      setIsHover(false);\r\n    }\r\n  }, [disabled, isHover]);\r\n\r\n  const buttonRGB = useMemo(() => hexToRGB(buttonColor), [buttonColor]);\r\n  const titleRGB = useMemo(() => hexToRGB(titleColor), [titleColor]);\r\n\r\n  //เน€เธเนเธเธเนเธฒเธชเธต RGB เธเธญเธเธเธธเนเธก เน€เธเธทเนเธญเธเธณเนเธเนเธเนเธเธณเธเธงเธ“ hover color\r\n  const backgroundColor =\r\n    !disabled && isHover\r\n      ? `rgb(${clampColorValue(buttonRGB.r - 10)}, ${clampColorValue(buttonRGB.g - 10)}, ${clampColorValue(buttonRGB.b - 10)})`\r\n      : `rgb(${buttonRGB.r}, ${buttonRGB.g}, ${buttonRGB.b})`;\r\n\r\n  const textColor = `rgb(${titleRGB.r}, ${titleRGB.g}, ${titleRGB.b})`;\r\n\r\n  const resolvedWidth = width ?? \"fit-content\";\r\n  const resolvedHeight = height ?? 45;\r\n\r\n  //style property เนเธเนเน€เธเนเธเธเนเธฒเธเธญเธ component props (เนเธชเนเนเธ tailwind เนเธกเนเนเธ”เนเธเนเธฐ ;-;)\r\n  const buttonStyleProperty: CSSProperties = {\r\n    backgroundColor,\r\n    color: textColor,\r\n    width: resolvedWidth,\r\n    height: resolvedHeight,\r\n    opacity: disabled ? 0.5 : 1,\r\n    ...(customStyle ?? {}),\r\n  };\r\n\r\n  const titleStyle: CSSProperties = {\r\n    color: textColor,\r\n    fontSize,\r\n    fontWeight,\r\n    ...(labelStyle ?? {}),\r\n  };\r\n\r\n  const clickHandler = handleClick ?? onClick;\r\n\r\n  const handleMouseEnter = (\r\n    event: React.MouseEvent<HTMLButtonElement>,\r\n  ): void => {\r\n    if (!disabled) {\r\n      setIsHover(true);\r\n    }\r\n    onMouseEnterProp?.(event);\r\n  };\r\n\r\n  const handleMouseLeave = (\r\n    event: React.MouseEvent<HTMLButtonElement>,\r\n  ): void => {\r\n    if (!disabled) {\r\n      setIsHover(false);\r\n    }\r\n    onMouseLeaveProp?.(event);\r\n  };\r\n\r\n  const displayTitle =\r\n    typeof title === \"string\" && title.trim().length > 0 ? title : \"Button\";\r\n\r\n  const finalAriaLabel = ariaLabelProp ?? displayTitle;\r\n\r\n  const contentClassName = `flex gap-[10px] items-center${iconPosition === \"right\" ? \" flex-row-reverse\" : \"\"}`;\r\n  const titleClassName = labelClassName\r\n    ? `text-sm ${labelClassName}`\r\n    : \"text-sm\";\r\n\r\n  const renderIcon = (): React.ReactNode => {\r\n    if (!icon) {\r\n      return null;\r\n    }\r\n\r\n    if (typeof icon === \"string\" || isStaticImageData(icon)) {\r\n      return <Image src={icon} alt={iconAlt ?? displayTitle} />;\r\n    }\r\n\r\n    return icon;\r\n  };\r\n\r\n  const baseButtonClass = `flex items-center justify-center px-[15px] py-[10px] rounded${\r\n    disabled ? \"\" : \" cursor-pointer duration-300\"\r\n  } select-none`;\r\n  const mergedButtonClass = className\r\n    ? `${baseButtonClass} ${className}`\r\n    : baseButtonClass;\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      type={typeProp}\r\n      className={mergedButtonClass}\r\n      style={buttonStyleProperty}\r\n      onClick={clickHandler}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n      disabled={disabled}\r\n      aria-label={finalAriaLabel}\r\n      {...buttonProps}\r\n    >\r\n      <div className={contentClassName}>\r\n        {renderIcon()}\r\n        <p className={titleClassName} style={titleStyle}>\r\n          {displayTitle}\r\n        </p>\r\n      </div>\r\n    </button>\r\n  );\r\n});\r\n\r\nexport default Button;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\static\\ErrorState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\static\\MiniButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":59,"column":11,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":59,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":62,"column":11,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":62,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { hexToRGB } from \"@/functions/componentFunctions\";\nimport React, { useState } from \"react\";\n\nimport { IoIosRemoveCircle } from \"react-icons/io\";\n\ninterface IMiniButtonProps {\n  title: string;\n  buttonColor?: string;\n  titleColor?: string;\n  width?: string | number;\n  height?: string | number;\n  border?: boolean;\n  borderColor?: string;\n  isSelected?: boolean;\n  handleClick?: (event: React.MouseEvent<HTMLDivElement>) => void;\n  hoverable?: boolean;\n}\nfunction MiniButton({\n  title = \"Button\",\n  titleColor = \"#000000\",\n  buttonColor = \"#FFFFFF\",\n  width,\n  height = 30,\n  border = false,\n  borderColor = \"#222222\",\n  isSelected = false,\n  hoverable = false,\n  handleClick,\n}: IMiniButtonProps): React.JSX.Element {\n  interface RGBColor {\n    r: number;\n    g: number;\n    b: number;\n  }\n  const [isHover, setIsHover] = useState(false);\n  const buttonRGB: RGBColor = hexToRGB(buttonColor);\n  const buttonRGBString: string = isHover\n    ? `rgb(${buttonRGB.r - 20}, ${buttonRGB.g - 20}, ${buttonRGB.b - 20})`\n    : `rgb(${buttonRGB.r}, ${buttonRGB.g}, ${buttonRGB.b})`;\n  const titleRGB: RGBColor = hexToRGB(titleColor);\n  const titleRGBString: string = `rgb(${titleRGB.r}, ${titleRGB.g}, ${titleRGB.b})`;\n  const borderRGB: RGBColor = hexToRGB(borderColor);\n  const borderRGBString: string = `rgb(${borderRGB.r}, ${borderRGB.g}, ${borderRGB.b})`;\n  return (\n    <div>\n      <div\n        onClick={handleClick}\n        className={\n          \"flex justify-center items-center px-2 gap-2 rounded cursor-pointer select-none duration-300\"\n        }\n        style={{\n          width: width == null ? \"fit-content\" : width,\n          height: height,\n          borderWidth: border ? 1 : \"none\",\n          borderColor: borderRGBString,\n          backgroundColor: buttonRGBString,\n        }}\n        onMouseEnter={() => {\n          hoverable ? setIsHover(true) : null;\n        }}\n        onMouseLeave={() => {\n          hoverable ? setIsHover(false) : null;\n        }}\n      >\n        <p className=\"text-sm\" style={{ color: titleRGBString }}>\n          {title}\n        </p>\n        {isSelected ? <IoIosRemoveCircle className=\"fill-red-500\" /> : null}\n      </div>\n    </div>\n  );\n}\n\nexport default MiniButton;\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\elements\\static\\PrimaryButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":3,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":3,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[59,62],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[59,62],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\ntype Props = {\r\n  handleClick: any;\r\n  title: string;\r\n  color: string;\r\n  Icon?: React.JSX.Element | null;\r\n  reverseIcon: boolean;\r\n  isDisabled: boolean;\r\n};\r\nfunction PrimaryButton(props: Props): React.JSX.Element {\r\n  return (\r\n    <>\r\n      {props.color === \"info\" ? (\r\n        <button\r\n          className={`flex w-fit ${\r\n            props.reverseIcon ? \"flex-row-reverse\" : \"\"\r\n          } items-center bg-cyan-100 hover:bg-cyan-200 duration-500 text-cyan-500 px-4 py-3 gap-1 rounded text-sm`}\r\n          style={{\r\n            backgroundColor: props.isDisabled ? \"#b5b5b5\" : \"\",\r\n            color: props.isDisabled ? \"#808080\" : \"\",\r\n          }}\r\n          onClick={props.handleClick}\r\n          disabled={props.isDisabled}\r\n        >\r\n          {props.Icon}\r\n          {props.title}\r\n        </button>\r\n      ) : props.color === \"secondary\" ? (\r\n        <button\r\n          className={`flex w-fit ${\r\n            props.reverseIcon ? \"flex-row-reverse\" : \"\"\r\n          } items-center bg-purple-100 hover:bg-purple-200 duration-500 text-purple-500 px-4 py-3 gap-1 rounded text-sm`}\r\n          style={{\r\n            backgroundColor: props.isDisabled ? \"#b5b5b5\" : \"\",\r\n            color: props.isDisabled ? \"#808080\" : \"\",\r\n          }}\r\n          onClick={props.handleClick}\r\n          disabled={props.isDisabled}\r\n        >\r\n          {props.Icon}\r\n          {props.title}\r\n        </button>\r\n      ) : props.color === \"warning\" ? (\r\n        <button\r\n          className={`flex w-fit ${\r\n            props.reverseIcon ? \"flex-row-reverse\" : \"\"\r\n          } items-center bg-amber-100 hover:bg-amber-200 duration-500 text-amber-500 px-4 py-3 gap-1 rounded text-sm`}\r\n          style={{\r\n            backgroundColor: props.isDisabled ? \"#b5b5b5\" : \"\",\r\n            color: props.isDisabled ? \"#808080\" : \"\",\r\n          }}\r\n          onClick={props.handleClick}\r\n          disabled={props.isDisabled}\r\n        >\r\n          {props.Icon}\r\n          {props.title}\r\n        </button>\r\n      ) : props.color === \"success\" ? (\r\n        <button\r\n          className={`flex w-fit ${\r\n            props.reverseIcon ? \"flex-row-reverse\" : \"\"\r\n          } items-center bg-green-100 hover:bg-green-200 duration-500 text-green-500 px-4 py-3 gap-1 rounded text-sm`}\r\n          style={{\r\n            backgroundColor: props.isDisabled ? \"#b5b5b5\" : \"\",\r\n            color: props.isDisabled ? \"#808080\" : \"\",\r\n          }}\r\n          onClick={props.handleClick}\r\n          disabled={props.isDisabled}\r\n        >\r\n          {props.Icon}\r\n          {props.title}\r\n        </button>\r\n      ) : props.color === \"danger\" ? (\r\n        <button\r\n          className={`flex w-fit ${\r\n            props.reverseIcon ? \"flex-row-reverse\" : \"\"\r\n          } items-center bg-red-100 hover:bg-red-200 duration-500 text-red-500 px-4 py-3 gap-1 rounded text-sm`}\r\n          style={{\r\n            backgroundColor: props.isDisabled ? \"#b5b5b5\" : \"\",\r\n            color: props.isDisabled ? \"#808080\" : \"\",\r\n          }}\r\n          onClick={props.handleClick}\r\n          disabled={props.isDisabled}\r\n        >\r\n          {props.Icon}\r\n          {props.title}\r\n        </button>\r\n      ) : (\r\n        <button\r\n          className={`flex w-fit ${\r\n            props.reverseIcon ? \"flex-row-reverse\" : \"\"\r\n          } items-center bg-blue-100 hover:bg-blue-200 duration-500 text-blue-500 px-4 py-3 gap-1 rounded text-sm`}\r\n          style={{\r\n            backgroundColor: props.isDisabled ? \"#b5b5b5\" : \"\",\r\n            color: props.isDisabled ? \"#808080\" : \"\",\r\n          }}\r\n          onClick={props.handleClick}\r\n          disabled={props.isDisabled}\r\n        >\r\n          {props.Icon}\r\n          {props.title}\r\n        </button>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PrimaryButton;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\error\\ErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":48,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { Component, ErrorInfo, ReactNode } from \"react\";\r\nimport { Box, Typography, Button, Paper, Stack } from \"@mui/material\";\r\nimport ErrorOutlineIcon from \"@mui/icons-material/ErrorOutline\";\r\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\r\nimport HomeIcon from \"@mui/icons-material/Home\";\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n  errorInfo: ErrorInfo | null;\r\n}\r\n\r\n/**\r\n * ErrorBoundary - React error boundary for graceful crash recovery\r\n *\r\n * Usage:\r\n * ```tsx\r\n * <ErrorBoundary>\r\n *   <YourComponent />\r\n * </ErrorBoundary>\r\n * ```\r\n *\r\n * With custom fallback:\r\n * ```tsx\r\n * <ErrorBoundary fallback={<CustomErrorUI />}>\r\n *   <YourComponent />\r\n * </ErrorBoundary>\r\n * ```\r\n */\r\nexport class ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): Partial<State> {\r\n    // Update state so the next render will show the fallback UI\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\r\n    // Log error to console (in production, send to error tracking service)\r\n    console.error(\"ErrorBoundary caught an error:\", error, errorInfo);\r\n\r\n    // Update state with error details\r\n    this.setState({\r\n      error,\r\n      errorInfo,\r\n    });\r\n\r\n    // Call optional error handler\r\n    if (this.props.onError) {\r\n      this.props.onError(error, errorInfo);\r\n    }\r\n  }\r\n\r\n  handleReset = (): void => {\r\n    this.setState({\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    });\r\n  };\r\n\r\n  handleGoHome = (): void => {\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  render(): ReactNode {\r\n    if (this.state.hasError) {\r\n      // Use custom fallback if provided\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      // Default error UI\r\n      return (\r\n        <Box\r\n          sx={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            minHeight: \"100vh\",\r\n            p: 3,\r\n            bgcolor: \"grey.50\",\r\n          }}\r\n        >\r\n          <Paper\r\n            elevation={3}\r\n            sx={{\r\n              maxWidth: 600,\r\n              width: \"100%\",\r\n              p: { xs: 3, sm: 4, md: 5 },\r\n              textAlign: \"center\",\r\n            }}\r\n          >\r\n            <ErrorOutlineIcon\r\n              sx={{\r\n                fontSize: { xs: 64, sm: 80 },\r\n                color: \"error.main\",\r\n                mb: 2,\r\n              }}\r\n            />\r\n\r\n            <Typography\r\n              variant=\"h4\"\r\n              component=\"h1\"\r\n              gutterBottom\r\n              sx={{\r\n                fontWeight: 600,\r\n                fontSize: { xs: \"1.5rem\", sm: \"2rem\" },\r\n              }}\r\n            >\r\n              เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”\r\n            </Typography>\r\n\r\n            <Typography\r\n              variant=\"body1\"\r\n              color=\"text.secondary\"\r\n              sx={{ mb: 3, fontSize: { xs: \"0.875rem\", sm: \"1rem\" } }}\r\n            >\r\n              เธเธญเธญเธ เธฑเธข เน€เธเธดเธ”เธเนเธญเธเธดเธ”เธเธฅเธฒเธ”เธ—เธตเนเนเธกเนเธเธฒเธ”เธเธดเธ”\r\n              เธเธฃเธธเธ“เธฒเธฅเธญเธเธฃเธตเน€เธเธฃเธเธซเธเนเธฒเธเธตเนเธซเธฃเธทเธญเธเธฅเธฑเธเนเธเธซเธเนเธฒเนเธฃเธ\r\n            </Typography>\r\n\r\n            {/* Show error details in development */}\r\n            {process.env.NODE_ENV === \"development\" && this.state.error && (\r\n              <Paper\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  p: 2,\r\n                  mb: 3,\r\n                  textAlign: \"left\",\r\n                  bgcolor: \"grey.100\",\r\n                  maxHeight: 200,\r\n                  overflow: \"auto\",\r\n                }}\r\n              >\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  component=\"pre\"\r\n                  sx={{\r\n                    fontFamily: \"monospace\",\r\n                    fontSize: \"0.75rem\",\r\n                    whiteSpace: \"pre-wrap\",\r\n                    wordBreak: \"break-word\",\r\n                  }}\r\n                >\r\n                  {this.state.error.toString()}\r\n                  {this.state.errorInfo &&\r\n                    \"\\n\\n\" + this.state.errorInfo.componentStack}\r\n                </Typography>\r\n              </Paper>\r\n            )}\r\n\r\n            <Stack\r\n              direction={{ xs: \"column\", sm: \"row\" }}\r\n              spacing={2}\r\n              justifyContent=\"center\"\r\n            >\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                startIcon={<RefreshIcon />}\r\n                onClick={this.handleReset}\r\n                sx={{ minWidth: { xs: \"100%\", sm: 140 } }}\r\n              >\r\n                เธฅเธญเธเธญเธตเธเธเธฃเธฑเนเธ\r\n              </Button>\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                startIcon={<HomeIcon />}\r\n                onClick={this.handleGoHome}\r\n                sx={{ minWidth: { xs: \"100%\", sm: 140 } }}\r\n              >\r\n                เธเธฅเธฑเธเธซเธเนเธฒเนเธฃเธ\r\n              </Button>\r\n            </Stack>\r\n          </Paper>\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\error\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\feedback\\EmptyStates.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\feedback\\LoadingStates.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\feedback\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\mui\\CheckBox.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useLegacyAPI' is assigned a value but never used.","line":84,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":84,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * MUI-based CheckBox Component\r\n *\r\n * This is a backward-compatible wrapper around MUI Checkbox + FormControlLabel\r\n * that maintains the original CheckBox API.\r\n *\r\n * Migration from: src/components/elements/input/selected_input/CheckBox.tsx\r\n * Date: October 19, 2025\r\n *\r\n * @example\r\n * // Old API (still works)\r\n * <CheckBox\r\n *   label=\"Enable feature\"\r\n *   value=\"feature1\"\r\n *   name=\"features\"\r\n *   handleClick={handleToggle}\r\n *   checked={true}\r\n *   disabled={false}\r\n * />\r\n *\r\n * // New MUI API\r\n * <CheckBox\r\n *   label=\"Enable feature\"\r\n *   onChange={handleToggle}\r\n *   checked={true}\r\n * />\r\n */\r\n\r\nimport React from \"react\";\r\nimport {\r\n  Checkbox as MuiCheckbox,\r\n  FormControlLabel,\r\n  type CheckboxProps as MuiCheckboxProps,\r\n  type FormControlLabelProps,\r\n} from \"@mui/material\";\r\n\r\n// Legacy API types (backward compatibility)\r\ninterface LegacyCheckBoxProps {\r\n  label?: string;\r\n  value?: string | number;\r\n  name?: string;\r\n  handleClick?: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n  checked?: boolean;\r\n  disabled?: boolean;\r\n}\r\n\r\n// Combined type that accepts both old and new APIs\r\ntype CheckBoxProps = LegacyCheckBoxProps &\r\n  Omit<MuiCheckboxProps, \"onChange\"> & {\r\n    onChange?: React.ChangeEventHandler<HTMLInputElement>;\r\n    FormControlLabelProps?: Partial<FormControlLabelProps>;\r\n  };\r\n\r\n/**\r\n * CheckBox - MUI-based checkbox with backward compatibility\r\n *\r\n * Features:\r\n * - Proper label association for accessibility\r\n * - Indeterminate state support\r\n * - Built-in ripple effect\r\n * - Backward compatible with legacy API\r\n */\r\nconst CheckBox = React.forwardRef<HTMLButtonElement, CheckBoxProps>(\r\n  function CheckBox(\r\n    {\r\n      // Legacy props\r\n      label = \"Checkbox\",\r\n      value,\r\n      name,\r\n      handleClick,\r\n\r\n      // MUI props\r\n      checked = false,\r\n      disabled = false,\r\n      onChange,\r\n      color = \"primary\",\r\n      size = \"medium\",\r\n      FormControlLabelProps,\r\n      ...rest\r\n    },\r\n    ref,\r\n  ) {\r\n    // Determine which API is being used\r\n    const useLegacyAPI = handleClick !== undefined;\r\n\r\n    // Map legacy props to MUI props\r\n    const handleChangeEvent = handleClick || onChange;\r\n\r\n    return (\r\n      <FormControlLabel\r\n        control={\r\n          <MuiCheckbox\r\n            ref={ref}\r\n            checked={checked}\r\n            onChange={handleChangeEvent}\r\n            name={name}\r\n            value={value}\r\n            disabled={disabled}\r\n            color={color}\r\n            size={size}\r\n            sx={{\r\n              \"&.Mui-focusVisible\": {\r\n                outline: \"none\", // Match original outline-none\r\n              },\r\n            }}\r\n            {...rest}\r\n          />\r\n        }\r\n        label={label}\r\n        sx={{\r\n          \"& .MuiFormControlLabel-label\": {\r\n            fontSize: \"0.875rem\", // text-sm\r\n            color: \"text.secondary\", // text-gray-500\r\n            userSelect: \"none\", // select-none\r\n          },\r\n          ...FormControlLabelProps?.sx,\r\n        }}\r\n        {...FormControlLabelProps}\r\n      />\r\n    );\r\n  },\r\n);\r\n\r\nexport default CheckBox;\r\n\r\n// Re-export MUI components for advanced usage\r\nexport { Checkbox, FormControlLabel } from \"@mui/material\";\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\mui\\ErrorState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\mui\\PrimaryButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useLegacyAPI' is assigned a value but never used.","line":95,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":95,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * MUI-based PrimaryButton Component\r\n *\r\n * This is a backward-compatible wrapper around MUI Button that maintains\r\n * the original PrimaryButton API while leveraging MUI's features.\r\n *\r\n * Migration from: src/components/elements/static/PrimaryButton.tsx\r\n * Date: October 19, 2025\r\n *\r\n * @example\r\n * // Old API (still works)\r\n * <PrimaryButton\r\n *   handleClick={handleSave}\r\n *   title=\"Save\"\r\n *   color=\"success\"\r\n *   Icon={<CheckIcon />}\r\n *   reverseIcon={false}\r\n *   isDisabled={false}\r\n * />\r\n *\r\n * // Can also use MUI API directly\r\n * <PrimaryButton\r\n *   onClick={handleSave}\r\n *   color=\"success\"\r\n *   startIcon={<CheckIcon />}\r\n * >\r\n *   Save\r\n * </PrimaryButton>\r\n */\r\n\r\nimport React from \"react\";\r\nimport {\r\n  Button,\r\n  type ButtonProps,\r\n  type SxProps,\r\n  type Theme,\r\n} from \"@mui/material\";\r\n\r\n// Legacy API types (backward compatibility)\r\ninterface LegacyPrimaryButtonProps {\r\n  handleClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\r\n  title?: string;\r\n  color?: \"info\" | \"secondary\" | \"warning\" | \"success\" | \"danger\" | \"primary\";\r\n  Icon?: React.ReactNode | null;\r\n  reverseIcon?: boolean;\r\n  isDisabled?: boolean;\r\n}\r\n\r\n// Combined type that accepts both old and new APIs\r\ntype PrimaryButtonProps = LegacyPrimaryButtonProps &\r\n  Omit<ButtonProps, \"color\"> & {\r\n    color?:\r\n      | \"info\"\r\n      | \"secondary\"\r\n      | \"warning\"\r\n      | \"success\"\r\n      | \"danger\"\r\n      | \"primary\"\r\n      | \"error\"\r\n      | \"inherit\";\r\n    onClick?: React.MouseEventHandler<HTMLButtonElement>;\r\n  };\r\n\r\n/**\r\n * PrimaryButton - MUI-based button with backward compatibility\r\n *\r\n * Supports both legacy API (handleClick, title, Icon, reverseIcon, isDisabled)\r\n * and native MUI Button API (onClick, children, startIcon, endIcon, disabled)\r\n */\r\nconst PrimaryButton = React.forwardRef<HTMLButtonElement, PrimaryButtonProps>(\r\n  function PrimaryButton(\r\n    {\r\n      // Legacy props\r\n      handleClick,\r\n      title,\r\n      Icon,\r\n      reverseIcon,\r\n      isDisabled,\r\n\r\n      // MUI props\r\n      onClick,\r\n      children,\r\n      color = \"primary\",\r\n      variant = \"contained\",\r\n      disabled,\r\n      startIcon,\r\n      endIcon,\r\n      size = \"medium\",\r\n      sx,\r\n      ...rest\r\n    },\r\n    ref,\r\n  ) {\r\n    // Determine which API is being used\r\n    const useLegacyAPI =\r\n      handleClick !== undefined || title !== undefined || Icon !== undefined;\r\n\r\n    // Map legacy color \"danger\" to MUI \"error\"\r\n    const muiColor = color === \"danger\" ? \"error\" : color;\r\n\r\n    // Determine click handler (legacy vs new)\r\n    const handleClickEvent = handleClick || onClick;\r\n\r\n    // Determine disabled state (legacy vs new)\r\n    const isButtonDisabled = isDisabled !== undefined ? isDisabled : disabled;\r\n\r\n    // Determine icon placement\r\n    const iconStart = Icon && !reverseIcon ? Icon : startIcon;\r\n    const iconEnd = Icon && reverseIcon ? Icon : endIcon;\r\n\r\n    // Determine button content\r\n    const buttonContent = title || children;\r\n\r\n    // Custom styling to match Tailwind design\r\n    const customSx: SxProps<Theme> = {\r\n      textTransform: \"none\",\r\n      fontSize: \"0.875rem\", // text-sm\r\n      paddingX: \"1rem\", // px-4\r\n      paddingY: \"0.75rem\", // py-3\r\n      gap: \"0.25rem\", // gap-1\r\n      borderRadius: \"0.375rem\", // rounded\r\n      fontWeight: 400,\r\n      boxShadow: \"none\",\r\n      transition: \"all 500ms\",\r\n      \"&:hover\": {\r\n        boxShadow: \"none\",\r\n      },\r\n      // Match original color scheme\r\n      ...(muiColor === \"info\" && {\r\n        backgroundColor: \"#cffafe\", // cyan-100\r\n        color: \"#06b6d4\", // cyan-500\r\n        \"&:hover\": {\r\n          backgroundColor: \"#a5f3fc\", // cyan-200\r\n        },\r\n      }),\r\n      ...(muiColor === \"secondary\" && {\r\n        backgroundColor: \"#e9d5ff\", // purple-100\r\n        color: \"#a855f7\", // purple-500\r\n        \"&:hover\": {\r\n          backgroundColor: \"#d8b4fe\", // purple-200\r\n        },\r\n      }),\r\n      ...(muiColor === \"warning\" && {\r\n        backgroundColor: \"#fef3c7\", // amber-100\r\n        color: \"#f59e0b\", // amber-500\r\n        \"&:hover\": {\r\n          backgroundColor: \"#fde68a\", // amber-200\r\n        },\r\n      }),\r\n      ...(muiColor === \"success\" && {\r\n        backgroundColor: \"#d1fae5\", // green-100\r\n        color: \"#10b981\", // green-500\r\n        \"&:hover\": {\r\n          backgroundColor: \"#a7f3d0\", // green-200\r\n        },\r\n      }),\r\n      ...(muiColor === \"error\" && {\r\n        backgroundColor: \"#fee2e2\", // red-100\r\n        color: \"#ef4444\", // red-500\r\n        \"&:hover\": {\r\n          backgroundColor: \"#fecaca\", // red-200\r\n        },\r\n      }),\r\n      ...(muiColor === \"primary\" && {\r\n        backgroundColor: \"#dbeafe\", // blue-100\r\n        color: \"#3b82f6\", // blue-500\r\n        \"&:hover\": {\r\n          backgroundColor: \"#bfdbfe\", // blue-200\r\n        },\r\n      }),\r\n      ...sx,\r\n    };\r\n\r\n    return (\r\n      <Button\r\n        ref={ref}\r\n        onClick={handleClickEvent}\r\n        color={muiColor as ButtonProps[\"color\"]}\r\n        variant={variant}\r\n        disabled={isButtonDisabled}\r\n        startIcon={iconStart}\r\n        endIcon={iconEnd}\r\n        size={size}\r\n        sx={customSx}\r\n        {...rest}\r\n      >\r\n        {buttonContent}\r\n      </Button>\r\n    );\r\n  },\r\n);\r\n\r\nexport default PrimaryButton;\r\n\r\n// Re-export MUI Button for direct usage\r\nexport { Button } from \"@mui/material\";\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\mui\\SearchBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useLegacyAPI' is assigned a value but never used.","line":89,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":89,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * MUI-based SearchBar Component\r\n *\r\n * This is a backward-compatible wrapper around MUI TextField with InputAdornment\r\n * that maintains the original SearchBar API while leveraging MUI's features.\r\n *\r\n * Migration from: src/components/elements/input/field/SearchBar.tsx\r\n * Date: October 19, 2025\r\n *\r\n * @example\r\n * // Old API (still works)\r\n * <SearchBar\r\n *   placeHolder=\"Search...\"\r\n *   handleChange={handleSearch}\r\n *   value={searchTerm}\r\n *   width={300}\r\n *   fill=\"#EDEEF3\"\r\n * />\r\n *\r\n * // Can also use MUI API directly\r\n * <SearchBar\r\n *   placeholder=\"Search...\"\r\n *   onChange={handleSearch}\r\n *   value={searchTerm}\r\n *   sx={{ width: 300 }}\r\n * />\r\n */\r\n\r\nimport React from \"react\";\r\nimport {\r\n  TextField,\r\n  InputAdornment,\r\n  IconButton,\r\n  type TextFieldProps,\r\n} from \"@mui/material\";\r\nimport Search from \"@mui/icons-material/Search\";\r\nimport Clear from \"@mui/icons-material/Clear\";\r\n\r\n// Legacy API types (backward compatibility)\r\ninterface LegacySearchBarProps {\r\n  width?: string | number | null;\r\n  height?: string | number;\r\n  placeHolder?: string;\r\n  fill?: string; // Background color\r\n  handleChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n  value?: string;\r\n}\r\n\r\n// Combined type that accepts both old and new APIs\r\ntype SearchBarProps = LegacySearchBarProps &\r\n  Omit<TextFieldProps, \"placeholder\" | \"onChange\"> & {\r\n    placeholder?: string;\r\n    onChange?: React.ChangeEventHandler<HTMLInputElement>;\r\n  };\r\n\r\n/**\r\n * SearchBar - MUI-based search field with backward compatibility\r\n *\r\n * Features:\r\n * - Search icon on the left\r\n * - Optional clear button when text is present\r\n * - Custom background color support\r\n * - Backward compatible with legacy API\r\n */\r\nconst SearchBar = React.forwardRef<HTMLDivElement, SearchBarProps>(\r\n  function SearchBar(\r\n    {\r\n      // Legacy props\r\n      width = null,\r\n      height,\r\n      placeHolder = \"เธเนเธเธซเธฒ\",\r\n      fill = \"#EDEEF3\",\r\n      handleChange,\r\n\r\n      // MUI props\r\n      placeholder,\r\n      onChange,\r\n      value,\r\n      variant = \"outlined\",\r\n      size = \"small\",\r\n      sx,\r\n      ...rest\r\n    },\r\n    ref,\r\n  ) {\r\n    const [internalValue, setInternalValue] = React.useState(\"\");\r\n\r\n    // Determine which API is being used\r\n    const useLegacyAPI =\r\n      handleChange !== undefined || placeHolder !== undefined;\r\n\r\n    // Map legacy props to MUI props\r\n    const placeholderText = placeHolder || placeholder || \"เธเนเธเธซเธฒ\";\r\n    const handleChangeEvent = handleChange || onChange;\r\n\r\n    // Manage value (controlled or uncontrolled)\r\n    const currentValue = value ?? internalValue;\r\n    const hasValue = currentValue && currentValue.length > 0;\r\n\r\n    const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (!value) {\r\n        setInternalValue(event.target.value);\r\n      }\r\n      handleChangeEvent?.(event);\r\n    };\r\n\r\n    const handleClear = () => {\r\n      const event = {\r\n        target: { value: \"\" },\r\n      } as React.ChangeEvent<HTMLInputElement>;\r\n\r\n      if (!value) {\r\n        setInternalValue(\"\");\r\n      }\r\n      handleChangeEvent?.(event);\r\n    };\r\n\r\n    // Build custom sx prop\r\n    const customSx = {\r\n      width: width === null ? \"fit-content\" : width,\r\n      \"& .MuiOutlinedInput-root\": {\r\n        backgroundColor: fill,\r\n        paddingLeft: \"0.75rem\", // pl-3\r\n        ...(height && { height }),\r\n      },\r\n      \"& .MuiInputBase-input\": {\r\n        fontSize: \"0.875rem\", // text-sm\r\n        paddingLeft: \"0.5rem\", // Space after icon\r\n      },\r\n      ...sx,\r\n    };\r\n\r\n    return (\r\n      <TextField\r\n        ref={ref}\r\n        placeholder={placeholderText}\r\n        onChange={handleInputChange}\r\n        value={currentValue}\r\n        variant={variant}\r\n        size={size}\r\n        sx={customSx}\r\n        InputProps={{\r\n          startAdornment: (\r\n            <InputAdornment position=\"start\">\r\n              <Search sx={{ color: \"action.active\" }} />\r\n            </InputAdornment>\r\n          ),\r\n          endAdornment: hasValue ? (\r\n            <InputAdornment position=\"end\">\r\n              <IconButton\r\n                aria-label=\"clear search\"\r\n                onClick={handleClear}\r\n                edge=\"end\"\r\n                size=\"small\"\r\n              >\r\n                <Clear fontSize=\"small\" />\r\n              </IconButton>\r\n            </InputAdornment>\r\n          ) : null,\r\n        }}\r\n        {...rest}\r\n      />\r\n    );\r\n  },\r\n);\r\n\r\nexport default SearchBar;\r\n\r\n// Re-export MUI components for advanced usage\r\nexport { TextField, InputAdornment } from \"@mui/material\";\r\nexport { default as SearchIcon } from \"@mui/icons-material/Search\";\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\mui\\TextField.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useLegacyAPI' is assigned a value but never used.","line":85,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":85,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * MUI-based TextField Component\r\n *\r\n * This is a backward-compatible wrapper around MUI TextField that maintains\r\n * the original TextField API while leveraging MUI's features.\r\n *\r\n * Migration from: src/components/elements/input/field/TextField.tsx\r\n * Date: October 19, 2025\r\n *\r\n * @example\r\n * // Old API (still works)\r\n * <TextField\r\n *   label=\"Room Name\"\r\n *   placeHolder=\"Enter name\"\r\n *   value={name}\r\n *   handleChange={handleChange}\r\n *   disabled={false}\r\n *   width={300}\r\n * />\r\n *\r\n * // Can also use MUI API directly\r\n * <TextField\r\n *   label=\"Room Name\"\r\n *   placeholder=\"Enter name\"\r\n *   value={name}\r\n *   onChange={handleChange}\r\n *   sx={{ width: 300 }}\r\n * />\r\n */\r\n\r\nimport React from \"react\";\r\nimport {\r\n  TextField as MuiTextField,\r\n  type TextFieldProps as MuiTextFieldProps,\r\n} from \"@mui/material\";\r\n\r\n// Legacy API types (backward compatibility)\r\ninterface LegacyTextFieldProps {\r\n  width?: string | number;\r\n  height?: string | number;\r\n  placeHolder?: string;\r\n  label?: string;\r\n  handleChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n  value?: string;\r\n  borderColor?: string;\r\n}\r\n\r\n// Combined type that accepts both old and new APIs\r\ntype TextFieldProps = LegacyTextFieldProps &\r\n  Omit<MuiTextFieldProps, \"placeholder\" | \"onChange\"> & {\r\n    placeholder?: string;\r\n    onChange?: React.ChangeEventHandler<HTMLInputElement>;\r\n  };\r\n\r\n/**\r\n * TextField - MUI-based text field with backward compatibility\r\n *\r\n * Supports both legacy API (handleChange, placeHolder, width, height, borderColor)\r\n * and native MUI TextField API (onChange, placeholder, sx, variant, etc.)\r\n */\r\nconst TextField = React.forwardRef<HTMLDivElement, TextFieldProps>(\r\n  function TextField(\r\n    {\r\n      // Legacy props\r\n      width = \"auto\",\r\n      height = \"auto\",\r\n      placeHolder,\r\n      handleChange,\r\n      borderColor,\r\n\r\n      // MUI props\r\n      placeholder,\r\n      onChange,\r\n      variant = \"outlined\",\r\n      size = \"small\",\r\n      fullWidth = false,\r\n      disabled = false,\r\n      sx,\r\n      label,\r\n      ...rest\r\n    },\r\n    ref,\r\n  ) {\r\n    // Determine which API is being used\r\n    const useLegacyAPI =\r\n      handleChange !== undefined || placeHolder !== undefined;\r\n\r\n    // Map legacy props to MUI props\r\n    const placeholderText = placeHolder || placeholder;\r\n    const handleChangeEvent = handleChange || onChange;\r\n\r\n    // Build custom sx prop\r\n    const customSx = {\r\n      width: width === \"auto\" ? undefined : width,\r\n      ...(height !== \"auto\" && {\r\n        \"& .MuiInputBase-root\": {\r\n          height: height,\r\n        },\r\n      }),\r\n      ...(borderColor && {\r\n        \"& .MuiOutlinedInput-root\": {\r\n          \"& fieldset\": {\r\n            borderColor: borderColor,\r\n          },\r\n        },\r\n      }),\r\n      \"& .MuiInputBase-input\": {\r\n        fontSize: \"0.875rem\", // text-sm\r\n      },\r\n      \"& .MuiInputLabel-root\": {\r\n        fontSize: \"0.875rem\", // text-sm\r\n        fontWeight: 700, // font-bold\r\n      },\r\n      ...sx,\r\n    };\r\n\r\n    return (\r\n      <MuiTextField\r\n        ref={ref}\r\n        label={label}\r\n        placeholder={placeholderText}\r\n        onChange={handleChangeEvent}\r\n        variant={variant}\r\n        size={size}\r\n        fullWidth={fullWidth}\r\n        disabled={disabled}\r\n        sx={customSx}\r\n        {...rest}\r\n      />\r\n    );\r\n  },\r\n);\r\n\r\nexport default TextField;\r\n\r\n// Re-export MUI TextField for direct usage\r\nexport { TextField as MuiTextField } from \"@mui/material\";\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\mui\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\room\\RoomAutocomplete.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\room\\RoomMultiSelect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\room\\examples.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\room\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\tables\\EditableTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1084,1087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1084,1087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1299,1302],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1299,1302],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1343,1346],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1343,1346],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1618,1621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1618,1621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2496,2499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2496,2499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":222,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6463,6466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6463,6466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":270,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7756,7759],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7756,7759],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":348,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":348,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9934,9937],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9934,9937],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":394,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":394,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11260,11263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11260,11263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n \r\nimport React, { useState, useEffect, type ReactNode } from \"react\";\r\nimport {\r\n  Table as MuiTable,\r\n  TableHead,\r\n  TableRow as MuiTableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Checkbox,\r\n  Toolbar,\r\n  Typography,\r\n  IconButton,\r\n  TextField as MuiTextField,\r\n  TableContainer,\r\n  Paper,\r\n  TablePagination,\r\n  Button,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n} from \"@mui/material\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useConfirmDialog } from \"@/components/dialogs\";\r\nimport { closeSnackbar, enqueueSnackbar } from \"notistack\";\r\n\r\n// Generic column definition\r\nexport type ColumnDef<T> = {\r\n  key: keyof T;\r\n  label: string;\r\n  editable?: boolean;\r\n  creatable?: boolean;\r\n  required?: boolean;\r\n  type?: \"text\" | \"number\" | \"select\";\r\n  options?: { value: string | number; label: string }[];\r\n  width?: number | string;\r\n  render?: (value: any, row: T) => ReactNode;\r\n  // Optional custom renderer specifically for edit mode (row-aware editors)\r\n  // onChange should be called with the new value to update the draft\r\n  renderEdit?: (params: {\r\n    value: any;\r\n    row: T;\r\n    onChange: (newValue: any) => void;\r\n    hasError: boolean;\r\n  }) => ReactNode;\r\n};\r\n\r\n// Generic validation function type\r\nexport type ValidationFn<T> = (\r\n  id: string | number,\r\n  data: Partial<T>,\r\n  allData: T[],\r\n) => string | null;\r\n\r\n// Generic action result\r\nexport type ActionResult<T = any> = {\r\n  success: boolean;\r\n  data?: T;\r\n  error?: string | { message: string };\r\n};\r\n\r\nexport type EditableTableProps<T> = {\r\n  title: string;\r\n  columns: ColumnDef<T>[];\r\n  data: T[];\r\n  idField: keyof T;\r\n  searchFields?: (keyof T)[];\r\n  searchPlaceholder?: string;\r\n  searchTestId?: string;\r\n  validate?: ValidationFn<T>;\r\n  onCreate?: (newRow: Partial<T>) => Promise<ActionResult>;\r\n  onUpdate?: (rows: Partial<T>[]) => Promise<ActionResult>;\r\n  onDelete?: (ids: (string | number)[]) => Promise<ActionResult>;\r\n  onMutate: () => void | Promise<void>;\r\n  emptyRowFactory: () => Partial<T>;\r\n  rowsPerPageOptions?: number[];\r\n  defaultRowsPerPage?: number;\r\n  // Allow consumers to keep selection enabled even if add mode is active (useful when add flow is external)\r\n  disableSelectionDuringCreate?: boolean;\r\n};\r\n\r\nexport function EditableTable<T extends Record<string, any>>({\r\n  title,\r\n  columns,\r\n  data,\r\n  idField,\r\n  searchFields = [],\r\n  searchPlaceholder = \"เธเนเธเธซเธฒ...\",\r\n  searchTestId,\r\n  validate,\r\n  onCreate,\r\n  onUpdate,\r\n  onDelete,\r\n  onMutate,\r\n  emptyRowFactory,\r\n  rowsPerPageOptions = [5, 10, 25],\r\n  defaultRowsPerPage = 10,\r\n  disableSelectionDuringCreate = true,\r\n}: EditableTableProps<T>) {\r\n  const { confirm, dialog } = useConfirmDialog();\r\n  const [tableData, setTableData] = useState<T[]>(data);\r\n\r\n  const [selected, setSelected] = useState<(string | number)[]>([]);\r\n  const [editMode, setEditMode] = useState<boolean>(false);\r\n  const [addMode, setAddMode] = useState<boolean>(false);\r\n  const [drafts, setDrafts] = useState<Record<string | number, Partial<T>>>({});\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(defaultRowsPerPage);\r\n  const [validationErrors, setValidationErrors] = useState<\r\n    Record<string, string>\r\n  >({});\r\n\r\n  useEffect(() => {\r\n    setTableData(data);\r\n  }, [data]);\r\n\r\n  const allIds = tableData.map((r) => r[idField]).filter((x) => x != null);\r\n\r\n  const isSelected = (id: string | number) => selected.includes(id);\r\n  const toggleAll = (checked: boolean) =>\r\n    setSelected(checked ? [...allIds] : []);\r\n  const toggleOne = (id: string | number) =>\r\n    setSelected((prev) =>\r\n      prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id],\r\n    );\r\n\r\n  // Search filter\r\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  const filtered = tableData.filter((item) => {\r\n    if (!searchTerm) return true;\r\n    const lowerSearch = searchTerm.toLowerCase();\r\n    return searchFields.some((field) => {\r\n      const value = item[field];\r\n      if (value == null) return false;\r\n      return String(value).toLowerCase().includes(lowerSearch);\r\n    });\r\n  });\r\n\r\n  const paged = filtered.slice(\r\n    page * rowsPerPage,\r\n    page * rowsPerPage + rowsPerPage,\r\n  );\r\n\r\n  const handleChangePage = (_: unknown, newPage: number) => setPage(newPage);\r\n  const handleChangeRowsPerPage = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setRowsPerPage(parseInt(e.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  // Add new row\r\n  const handleAddRow = () => {\r\n    if (editMode) return;\r\n    const tempId = `new_${Date.now()}`;\r\n    setDrafts({ [tempId]: emptyRowFactory() });\r\n    setAddMode(true);\r\n  };\r\n\r\n  const handleCancelAdd = () => {\r\n    setDrafts({});\r\n    setAddMode(false);\r\n    setValidationErrors({});\r\n  };\r\n\r\n  const handleSaveNew = async () => {\r\n    if (!onCreate) {\r\n      enqueueSnackbar(\"เธเธฒเธฃเน€เธเธดเนเธกเธเนเธญเธกเธนเธฅเนเธกเนเธเธฃเนเธญเธกเนเธเนเธเธฒเธ\", { variant: \"error\" });\r\n      return;\r\n    }\r\n\r\n    const tempId = Object.keys(drafts)[0];\r\n    if (!tempId) {\r\n      enqueueSnackbar(\"เนเธกเนเธเธเธเนเธญเธกเธนเธฅเธ—เธตเนเธเธฐเน€เธเธดเนเธก\", { variant: \"error\" });\r\n      return;\r\n    }\r\n    const newRow = drafts[tempId];\r\n    if (!newRow) {\r\n      enqueueSnackbar(\"เธเนเธญเธกเธนเธฅเนเธกเนเธ–เธนเธเธ•เนเธญเธ\", { variant: \"error\" });\r\n      return;\r\n    }\r\n\r\n    // Validate\r\n    if (validate) {\r\n      const error = validate(tempId, newRow, tableData);\r\n      if (error) {\r\n        setValidationErrors({ [tempId]: error });\r\n        enqueueSnackbar(error, { variant: \"error\" });\r\n        return;\r\n      }\r\n    }\r\n\r\n    const loadbar = enqueueSnackbar(`เธเธณเธฅเธฑเธเน€เธเธดเนเธก${title}`, {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await onCreate(newRow);\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(`เน€เธเธดเนเธก${title}เธชเธณเน€เธฃเนเธ`, { variant: \"success\" });\r\n      setAddMode(false);\r\n      setDrafts({});\r\n      setValidationErrors({});\r\n      await onMutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        `เน€เธเธดเนเธก${title}เนเธกเนเธชเธณเน€เธฃเนเธ: ` + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n    }\r\n  };\r\n\r\n  // Delete rows\r\n  const handleDelete = async () => {\r\n    if (!onDelete) {\r\n      enqueueSnackbar(\"เธเธฒเธฃเธฅเธเธเนเธญเธกเธนเธฅเนเธกเนเธเธฃเนเธญเธกเนเธเนเธเธฒเธ\", { variant: \"error\" });\r\n      return;\r\n    }\r\n\r\n    const confirmed = await confirm({\r\n      title: `เธฅเธ${title}`,\r\n      message: `เธเธธเธ“เธ•เนเธญเธเธเธฒเธฃเธฅเธ${title}เธ—เธตเนเน€เธฅเธทเธญเธเธ—เธฑเนเธเธซเธกเธ” ${selected.length} เธฃเธฒเธขเธเธฒเธฃเนเธเนเธซเธฃเธทเธญเนเธกเน? เธเธฒเธฃเธ”เธณเน€เธเธดเธเธเธฒเธฃเธเธตเนเนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธขเนเธญเธเธเธฅเธฑเธเนเธ”เน`,\r\n      variant: \"danger\",\r\n      confirmText: \"เธฅเธ\",\r\n      cancelText: \"เธขเธเน€เธฅเธดเธ\",\r\n    });\r\n\r\n    if (!confirmed) return;\r\n\r\n    const loadbar = enqueueSnackbar(`เธเธณเธฅเธฑเธเธฅเธ${title}`, {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await onDelete(selected);\r\n\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(`เธฅเธ${title}เธชเธณเน€เธฃเนเธ`, { variant: \"success\" });\r\n      setSelected([]);\r\n      await onMutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        `เธฅเธ${title}เนเธกเนเธชเธณเน€เธฃเนเธ: ` + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  // Edit existing rows\r\n  const handleEnterEdit = () => {\r\n    if (selected.length === 0 || addMode) return;\r\n    const nextDrafts: Record<string | number, Partial<T>> = {};\r\n    for (const row of tableData) {\r\n      const id = row[idField];\r\n      if (id != null && selected.includes(id)) {\r\n        nextDrafts[id] = { ...row };\r\n      }\r\n    }\r\n    setDrafts(nextDrafts);\r\n    setEditMode(true);\r\n    setValidationErrors({});\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditMode(false);\r\n    setDrafts({});\r\n    setValidationErrors({});\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!onUpdate || !editMode || selected.length === 0) return;\r\n\r\n    // Validate all selected rows\r\n    const errors: Record<string, string> = {};\r\n    for (const id of selected) {\r\n      if (drafts[id] && validate) {\r\n        const error = validate(id, drafts[id], tableData);\r\n        if (error) {\r\n          errors[String(id)] = error;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (Object.keys(errors).length > 0) {\r\n      setValidationErrors(errors);\r\n      enqueueSnackbar(\"เธเธฃเธธเธ“เธฒเนเธเนเนเธเธเนเธญเธกเธนเธฅเธ—เธตเนเนเธกเนเธ–เธนเธเธ•เนเธญเธ\", { variant: \"error\" });\r\n      return;\r\n    }\r\n\r\n    const payload = selected\r\n      .filter((id) => drafts[id] !== undefined)\r\n      .map((id) => drafts[id]!);\r\n\r\n    const loadbar = enqueueSnackbar(`เธเธณเธฅเธฑเธเธเธฑเธเธ—เธถเธเธเธฒเธฃเนเธเนเนเธ${title}`, {\r\n      variant: \"info\",\r\n      persist: true,\r\n    });\r\n\r\n    try {\r\n      const result = await onUpdate(payload);\r\n      if (!result.success) {\r\n        const errorMessage =\r\n          typeof result.error === \"string\"\r\n            ? result.error\r\n            : result.error?.message || \"Unknown error\";\r\n        throw new Error(errorMessage);\r\n      }\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\"เธเธฑเธเธ—เธถเธเธเธฒเธฃเนเธเนเนเธเธชเธณเน€เธฃเนเธ\", { variant: \"success\" });\r\n      setEditMode(false);\r\n      setDrafts({});\r\n      setSelected([]);\r\n      setValidationErrors({});\r\n      await onMutate();\r\n    } catch (error: any) {\r\n      closeSnackbar(loadbar);\r\n      enqueueSnackbar(\r\n        \"เธเธฑเธเธ—เธถเธเธเธฒเธฃเนเธเนเนเธเนเธกเนเธชเธณเน€เธฃเนเธ: \" + (error.message || \"Unknown error\"),\r\n        {\r\n          variant: \"error\",\r\n        },\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderCell = (\r\n    column: ColumnDef<T>,\r\n    row: T,\r\n    isEditing: boolean,\r\n    id: string | number,\r\n  ) => {\r\n    const value = row[column.key];\r\n\r\n    // Use custom render if provided and not editing\r\n    if (!isEditing && column.render) {\r\n      return column.render(value, row);\r\n    }\r\n\r\n    // Check if field should be editable\r\n    // 1. Must be in edit mode (isEditing=true)\r\n    // 2. AND (editable is not false OR (it's a new row AND field is creatable))\r\n    const isNew = String(id).startsWith(\"new_\");\r\n    const canEdit =\r\n      isEditing && (column.editable !== false || (isNew && column.creatable));\r\n\r\n    // Not editable - just display\r\n    if (!canEdit) {\r\n      return value != null ? String(value) : \"-\";\r\n    }\r\n\r\n    // Editable and in edit mode - show input\r\n    const draftValue = drafts[id]?.[column.key] ?? value ?? \"\";\r\n    const hasError = !!validationErrors[String(id)];\r\n\r\n    // Row-aware custom edit renderer\r\n    if (column.renderEdit) {\r\n      return column.renderEdit({\r\n        value: draftValue,\r\n        row,\r\n        hasError,\r\n        onChange: (newValue: any) => {\r\n          setDrafts((d) => {\r\n            const updated = { ...d };\r\n            updated[id] = {\r\n              ...(d[id] ?? {}),\r\n              [column.key]: newValue,\r\n            } as Partial<T>;\r\n            return updated;\r\n          });\r\n        },\r\n      });\r\n    }\r\n\r\n    if (column.type === \"select\" && column.options) {\r\n      return (\r\n        <FormControl fullWidth size=\"small\" error={hasError}>\r\n          <Select\r\n            value={draftValue}\r\n            onChange={(e) => {\r\n              setDrafts((d) => {\r\n                const updated = { ...d };\r\n                updated[id] = {\r\n                  ...(d[id] ?? {}),\r\n                  [column.key]: e.target.value,\r\n                } as Partial<T>;\r\n                return updated;\r\n              });\r\n            }}\r\n          >\r\n            {column.options.map((opt) => (\r\n              <MenuItem key={opt.value} value={opt.value}>\r\n                {opt.label}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <MuiTextField\r\n        size=\"small\"\r\n        fullWidth\r\n        type={column.type === \"number\" ? \"number\" : \"text\"}\r\n        value={draftValue}\r\n        onChange={(e) => {\r\n          setDrafts((d) => {\r\n            const updated = { ...d };\r\n            updated[id] = {\r\n              ...(d[id] ?? {}),\r\n              [column.key]:\r\n                column.type === \"number\"\r\n                  ? Number(e.target.value)\r\n                  : e.target.value,\r\n            } as Partial<T>;\r\n            return updated;\r\n          });\r\n        }}\r\n        error={hasError}\r\n        helperText={hasError ? validationErrors[String(id)] : undefined}\r\n        placeholder={column.required ? `${column.label} *` : column.label}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {dialog}\r\n\r\n      <Toolbar sx={{ pl: 2, pr: 2 }}>\r\n        <Typography sx={{ flex: \"1 1 100%\" }} variant=\"h6\" component=\"div\">\r\n          {title}\r\n        </Typography>\r\n        {searchFields.length > 0 && (\r\n          <MuiTextField\r\n            size=\"small\"\r\n            placeholder={searchPlaceholder}\r\n            value={searchTerm}\r\n            onChange={handleSearch}\r\n            sx={{ mr: 2, width: 300 }}\r\n            inputProps={\r\n              searchTestId\r\n                ? {\r\n                    \"data-testid\": searchTestId,\r\n                  }\r\n                : undefined\r\n            }\r\n          />\r\n        )}\r\n        {onCreate && (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<AddIcon />}\r\n            onClick={handleAddRow}\r\n            disabled={editMode || addMode}\r\n          >\r\n            เน€เธเธดเนเธก\r\n          </Button>\r\n        )}\r\n        {onUpdate && (\r\n          <IconButton\r\n            aria-label=\"edit\"\r\n            onClick={handleEnterEdit}\r\n            disabled={selected.length === 0 || editMode || addMode}\r\n          >\r\n            <EditIcon />\r\n          </IconButton>\r\n        )}\r\n        {(editMode || addMode) && (\r\n          <>\r\n            <IconButton\r\n              aria-label=\"save\"\r\n              color=\"success\"\r\n              onClick={addMode ? handleSaveNew : handleSave}\r\n            >\r\n              <SaveIcon />\r\n            </IconButton>\r\n            <IconButton\r\n              aria-label=\"cancel\"\r\n              color=\"inherit\"\r\n              onClick={addMode ? handleCancelAdd : handleCancelEdit}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </>\r\n        )}\r\n        {onDelete && (\r\n          <IconButton\r\n            aria-label=\"delete\"\r\n            color=\"error\"\r\n            onClick={handleDelete}\r\n            disabled={selected.length === 0 || editMode || addMode}\r\n          >\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        )}\r\n      </Toolbar>\r\n\r\n      <TableContainer component={Paper}>\r\n        <MuiTable size=\"small\">\r\n          <TableHead>\r\n            <MuiTableRow>\r\n              <TableCell padding=\"checkbox\">\r\n                <Checkbox\r\n                  indeterminate={\r\n                    selected.length > 0 && selected.length < filtered.length\r\n                  }\r\n                  checked={\r\n                    filtered.length > 0 && selected.length === filtered.length\r\n                  }\r\n                  onChange={(e) => toggleAll(e.target.checked)}\r\n                  inputProps={{ \"aria-label\": \"select all\" }}\r\n                  disabled={addMode && disableSelectionDuringCreate}\r\n                />\r\n              </TableCell>\r\n              {columns.map((col) => (\r\n                <TableCell key={String(col.key)} style={{ width: col.width }}>\r\n                  {col.label}\r\n                </TableCell>\r\n              ))}\r\n            </MuiTableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {/* Add new row at top when in add mode */}\r\n            {addMode &&\r\n              Object.keys(drafts).map((tempId) => (\r\n                <MuiTableRow key={tempId} sx={{ bgcolor: \"action.hover\" }}>\r\n                  <TableCell padding=\"checkbox\">\r\n                    <Checkbox disabled />\r\n                  </TableCell>\r\n                  {columns.map((col) => (\r\n                    <TableCell key={String(col.key)}>\r\n                      {renderCell(col, drafts[tempId] as T, true, tempId)}\r\n                    </TableCell>\r\n                  ))}\r\n                </MuiTableRow>\r\n              ))}\r\n\r\n            {/* Existing rows */}\r\n            {paged.map((item) => {\r\n              const id = item[idField];\r\n              const selectedRow = isSelected(id);\r\n              const isEditing = editMode && selectedRow;\r\n              return (\r\n                <MuiTableRow key={String(id)} hover selected={selectedRow}>\r\n                  <TableCell padding=\"checkbox\">\r\n                  <Checkbox\r\n                    checked={selectedRow}\r\n                    onChange={() => toggleOne(id)}\r\n                    disabled={addMode && disableSelectionDuringCreate}\r\n                  />\r\n                </TableCell>\r\n                  {columns.map((col) => (\r\n                    <TableCell key={String(col.key)}>\r\n                      {renderCell(col, item, isEditing, id)}\r\n                    </TableCell>\r\n                  ))}\r\n                </MuiTableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </MuiTable>\r\n        <TablePagination\r\n          component=\"div\"\r\n          count={filtered.length}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n          rowsPerPage={rowsPerPage}\r\n          onRowsPerPageChange={handleChangeRowsPerPage}\r\n          rowsPerPageOptions={rowsPerPageOptions}\r\n        />\r\n      </TableContainer>\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\tables\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\templates\\Content.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\templates\\DashboardMenubar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3047,3050],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3047,3050],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport Link from \"next/link\";\r\n// @ts-expect-error - JS module without types\r\nimport { showTimetableMenu } from \"@/raw-data/menubar-data\";\r\nimport { usePathname } from \"next/navigation\";\r\nfunction DashboardMenubar() {\r\n  const pathName = usePathname();\r\n  // State placeholders removed: component no longer depends on semester params\r\n\r\n  const [linkSelected, setLinkSelected] = useState<string>(pathName);\r\n  const makePath = (link: string): string => {\r\n    const splitLink = link.split(\"/\");\r\n    return `${splitLink[1]}`;\r\n  };\r\n  return (\r\n    <>\r\n      {pathName === \"/signin\" ? null : (\r\n        <aside className=\"flex flex-col gap-8 w-[270px] flex-shrink-0 min-h-screen px-5 py-8 bg-gradient-to-b from-gray-50 to-gray-100 border-r border-gray-200 shadow-lg\">\r\n          {/* management */}\r\n          {/* <div className=\"flex flex-col w-full gap-1 h-fit border-b border-[#C8C9CD]\">\r\n            <p className=\"text-[#4F4F4F] mb-2 font-bold select-none\">\r\n              เธชเธฃเธธเธเธเนเธญเธกเธนเธฅ\r\n            </p>\r\n            {dashboardMenu.map((item, index) => {\r\n              return (\r\n                <React.Fragment key={item.id}>\r\n                  {makePath(item.link) === linkSelected ? (\r\n                    <Link\r\n                      href={makePath(item.link)}\r\n                      onClick={() => setLinkSelected(makePath(item.link))}\r\n                      className={`hoverfill flex items-center w-full gap-5 h-[45px] p-[10px] cursor-pointer border-r-8 border-cyan-600 bg-cyan-100 text-cyan-600 duration-500`}\r\n                      style={{\r\n                        marginBottom:\r\n                          index == dashboardMenu.length - 1 ? \"10px\" : 0,\r\n                      }}\r\n                    >\r\n                      <item.IconStyle.Icon className={`fill-[#0891B2]`} />\r\n                      <p className=\"text-md\">{item.title}</p>\r\n                    </Link>\r\n                  ) : (\r\n                    <Link\r\n                      href={makePath(item.link)}\r\n                      onClick={() => setLinkSelected(makePath(item.link))}\r\n                      className={`hoverfill flex items-center w-full gap-5 h-[45px] p-[10px] cursor-pointer text-[#4F4F4F] hover:bg-cyan-100 hover:text-cyan-600 duration-500`}\r\n                      style={{\r\n                        marginBottom:\r\n                          index == dashboardMenu.length - 1 ? \"10px\" : 0,\r\n                      }}\r\n                    >\r\n                      <item.IconStyle.Icon className={`iconhover`} />\r\n                      <p className=\"text-md\">{item.title}</p>\r\n                    </Link>\r\n                  )}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </div> */}\r\n          <div className=\"flex flex-col w-full gap-1 h-fit border-b border-gray-200 pb-4\">\r\n            <p className=\"text-gray-700 mb-3 font-bold text-sm uppercase tracking-wider select-none\">\r\n              เนเธชเธ”เธเธเนเธญเธกเธนเธฅ\r\n            </p>\r\n            {showTimetableMenu.map((item: any, index: number) => {\r\n              return (\r\n                <React.Fragment key={item.id}>\r\n                  {makePath(item.link) === linkSelected ? (\r\n                    <Link\r\n                      href={makePath(item.link)}\r\n                      onClick={() => setLinkSelected(makePath(item.link))}\r\n                      className={`group flex items-center w-full gap-3 h-[45px] px-4 rounded-lg cursor-pointer bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md transform scale-105 transition-all duration-300`}\r\n                      style={{\r\n                        marginBottom:\r\n                          index === showTimetableMenu.length - 1 ? \"10px\" : 0,\r\n                      }}\r\n                    >\r\n                      <item.IconStyle.Icon className={`w-5 h-5 fill-white`} />\r\n                      <p className=\"text-md font-medium\">{item.title}</p>\r\n                    </Link>\r\n                  ) : (\r\n                    <Link\r\n                      href={makePath(item.link)}\r\n                      onClick={() => setLinkSelected(makePath(item.link))}\r\n                      className={`group flex items-center w-full gap-3 h-[45px] px-4 rounded-lg cursor-pointer text-gray-600 hover:bg-gradient-to-r hover:from-cyan-50 hover:to-blue-50 hover:text-cyan-600 hover:shadow-sm transition-all duration-300`}\r\n                      style={{\r\n                        marginBottom:\r\n                          index === showTimetableMenu.length - 1 ? \"10px\" : 0,\r\n                      }}\r\n                    >\r\n                      <item.IconStyle.Icon\r\n                        className={`w-5 h-5 group-hover:fill-cyan-600 transition-colors duration-300`}\r\n                      />\r\n                      <p className=\"text-md font-medium\">{item.title}</p>\r\n                    </Link>\r\n                  )}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </div>\r\n          {/* others */}\r\n          {/* <div className=\"flex flex-col w-full h-fit border-b gap-1 border-[#C8C9CD]\">\r\n            <p className=\"text-[#4F4F4F] mb-2 font-bold select-none\">เธญเธทเนเธเน</p>\r\n            {othersMenu.map((item, index) => (\r\n              <React.Fragment key={item.id}>\r\n                {makePath(item.link) === linkSelected ? (\r\n                  <Link\r\n                    href={makePath(item.link)}\r\n                    onClick={() => setLinkSelected(makePath(item.link))}\r\n                    className={`border-r-8 border-cyan-600 bg-cyan-100 text-cyan-600 flex items-center w-full gap-5 h-[45px] p-[10px] cursor-pointer duration-500`}\r\n                    style={{\r\n                      marginBottom: index == othersMenu.length - 1 ? \"10px\" : 0,\r\n                    }}\r\n                  >\r\n                    <item.IconStyle.Icon className={`iconhover`} />\r\n                    <p className=\"text-md \">{item.title}</p>\r\n                  </Link>\r\n                ) : (\r\n                  <Link\r\n                    href={makePath(item.link)}\r\n                    onClick={() => setLinkSelected(makePath(item.link))}\r\n                    className={`hoverfill hover:border-r-8 hover:border-cyan-600 hover:bg-cyan-100 hover:text-cyan-600 flex items-center w-full gap-5 h-[45px] p-[10px] cursor-pointer text-[#4F4F4F] duration-500`}\r\n                    style={{\r\n                      marginBottom: index == othersMenu.length - 1 ? \"10px\" : 0,\r\n                    }}\r\n                  >\r\n                    <item.IconStyle.Icon className={`iconhover`} />\r\n                    <p className=\"text-md \">{item.title}</p>\r\n                  </Link>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          </div> */}\r\n        </aside>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DashboardMenubar;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\templates\\Menubar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'othersMenu' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IoIosArrowDown' is defined but never used.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'indexPoint' is assigned a value but never used.","line":15,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIndexPoint' is assigned a value but never used.","line":15,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isOpen' is assigned a value but never used.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsOpen' is assigned a value but never used.","line":16,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1432,1435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1432,1435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3629,3632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3629,3632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState, useMemo } from \"react\";\r\nimport Link from \"next/link\";\r\nimport {\r\n  managementMenu,\r\n  scheduleMenu,\r\n  othersMenu,\r\n  // @ts-expect-error - JS module without types\r\n} from \"@/raw-data/menubar-data\";\r\nimport { IoIosArrowDown } from \"react-icons/io\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nfunction Menubar() {\r\n  const pathName = usePathname();\r\n  const [indexPoint, setIndexPoint] = useState<number>(0);\r\n  const [isOpen, setIsOpen] = useState<boolean>(false);\r\n\r\n  const [linkSelected, setLinkSelected] = useState<string>(pathName);\r\n\r\n  // Extract current semester from URL if present\r\n  const currentSemester = useMemo(() => {\r\n    // Match patterns like /schedule/1-2567/* or /dashboard/1-2567/*\r\n    const match = pathName.match(/\\/(schedule|dashboard)\\/(\\d-\\d{4})/);\r\n    return match ? match[2] : null;\r\n  }, [pathName]);\r\n  return (\r\n    <>\r\n      {pathName === \"/signin\" ? null : (\r\n        <aside className=\"flex flex-col gap-8 w-[270px] flex-shrink-0 min-h-screen px-5 py-8 bg-gradient-to-b from-gray-50 to-gray-100 border-r border-gray-200 shadow-lg\">\r\n          {/* management */}\r\n          <div className=\"flex flex-col w-full gap-1 h-fit border-b border-gray-200 pb-4\">\r\n            <p className=\"text-gray-700 mb-3 font-bold text-sm uppercase tracking-wider select-none\">\r\n              เธเธฒเธฃเธเธฑเธ”เธเธฒเธฃเธเนเธญเธกเธนเธฅ\r\n            </p>\r\n            {managementMenu.map((item: any, index: number) => {\r\n              return (\r\n                <React.Fragment key={item.id}>\r\n                  {item.link === linkSelected ? (\r\n                    <Link\r\n                      href={item.link}\r\n                      onClick={() => setLinkSelected(item.link)}\r\n                      className={`group flex items-center w-full gap-3 h-[45px] px-4 rounded-lg cursor-pointer bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md transform scale-105 transition-all duration-300`}\r\n                      style={{\r\n                        marginBottom:\r\n                          index === managementMenu.length - 1 ? \"10px\" : 0,\r\n                      }}\r\n                    >\r\n                      <item.IconStyle.Icon className={`w-5 h-5 fill-white`} />\r\n                      <p className=\"text-md font-medium\">{item.title}</p>\r\n                    </Link>\r\n                  ) : (\r\n                    <Link\r\n                      href={item.link}\r\n                      onClick={() => setLinkSelected(item.link)}\r\n                      className={`group flex items-center w-full gap-3 h-[45px] px-4 rounded-lg cursor-pointer text-gray-600 hover:bg-gradient-to-r hover:from-cyan-50 hover:to-blue-50 hover:text-cyan-600 hover:shadow-sm transition-all duration-300`}\r\n                      style={{\r\n                        marginBottom:\r\n                          index === managementMenu.length - 1 ? \"10px\" : 0,\r\n                      }}\r\n                    >\r\n                      <item.IconStyle.Icon\r\n                        className={`w-5 h-5 group-hover:fill-cyan-600 transition-colors duration-300`}\r\n                      />\r\n                      <p className=\"text-md font-medium\">{item.title}</p>\r\n                    </Link>\r\n                  )}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </div>\r\n          {/* schedule */}\r\n          <div className=\"flex flex-col w-full gap-1 h-fit border-b border-gray-200 pb-4 select-none\">\r\n            <p className=\"text-gray-700 mb-3 font-bold text-sm uppercase tracking-wider select-none\">\r\n              เธ•เธฒเธฃเธฒเธเธชเธญเธ\r\n            </p>\r\n            {scheduleMenu.map((item: any, index: number) => {\r\n              // For dynamic links (เธเธฑเธ”เธ•เธฒเธฃเธฒเธเธชเธญเธ), use current semester if available\r\n              const linkHref =\r\n                item.dynamicLink && currentSemester\r\n                  ? `/schedule/${currentSemester}/arrange/teacher-arrange`\r\n                  : item.link || \"/dashboard\";\r\n\r\n              const isSelected = linkHref === linkSelected;\r\n\r\n              return (\r\n                <React.Fragment key={item.id}>\r\n                  <>\r\n                    {isSelected ? (\r\n                      <Link\r\n                        href={linkHref}\r\n                        onClick={() => setLinkSelected(linkHref)}\r\n                        className={`group flex items-center w-full gap-3 h-[45px] px-4 rounded-lg cursor-pointer bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-md transform scale-105 transition-all duration-300`}\r\n                        style={{\r\n                          marginBottom:\r\n                            index === scheduleMenu.length - 1 ? \"10px\" : 0,\r\n                        }}\r\n                      >\r\n                        <item.IconStyle.Icon className={`w-5 h-5 fill-white`} />\r\n                        <p className=\"text-md font-medium\">{item.title}</p>\r\n                      </Link>\r\n                    ) : (\r\n                      <Link\r\n                        href={linkHref}\r\n                        onClick={() => setLinkSelected(linkHref)}\r\n                        className={`group flex items-center w-full gap-3 h-[45px] px-4 rounded-lg cursor-pointer text-gray-600 hover:bg-gradient-to-r hover:from-cyan-50 hover:to-blue-50 hover:text-cyan-600 hover:shadow-sm transition-all duration-300`}\r\n                        style={{\r\n                          marginBottom:\r\n                            index === scheduleMenu.length - 1 ? \"10px\" : 0,\r\n                        }}\r\n                      >\r\n                        <item.IconStyle.Icon\r\n                          className={`w-5 h-5 group-hover:fill-cyan-600 transition-colors duration-300`}\r\n                        />\r\n                        <p className=\"text-md font-medium\">{item.title}</p>\r\n                      </Link>\r\n                    )}\r\n                  </>\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </div>\r\n          {/* others */}\r\n          {/* <div className=\"flex flex-col w-full h-fit border-b gap-1 border-[#C8C9CD]\">\r\n            <p className=\"text-[#4F4F4F] mb-2 font-bold select-none\">เธญเธทเนเธเน</p>\r\n            {othersMenu.map((item, index) => (\r\n              <React.Fragment key={item.id}>\r\n                {item.link === linkSelected ? (\r\n                  <div\r\n                    onClick={() => setLinkSelected(item.link)}\r\n                    className={`border-r-8 border-cyan-600 bg-cyan-100 text-cyan-600 flex items-center w-full gap-5 h-[45px] p-[10px] cursor-pointer duration-500`}\r\n                    style={{\r\n                      marginBottom: index == othersMenu.length - 1 ? \"10px\" : 0,\r\n                    }}\r\n                  >\r\n                    <item.IconStyle.Icon className={`iconhover`} />\r\n                    <p className=\"text-md \">{item.title}</p>\r\n                  </div>\r\n                ) : (\r\n                  <div\r\n                    onClick={() => setLinkSelected(item.link)}\r\n                    className={`hoverfill hover:border-r-8 hover:border-cyan-600 hover:bg-cyan-100 hover:text-cyan-600 flex items-center w-full gap-5 h-[45px] p-[10px] cursor-pointer text-[#4F4F4F] duration-500`}\r\n                    style={{\r\n                      marginBottom: index == othersMenu.length - 1 ? \"10px\" : 0,\r\n                    }}\r\n                  >\r\n                    <item.IconStyle.Icon className={`iconhover`} />\r\n                    <p className=\"text-md \">{item.title}</p>\r\n                  </div>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          </div> */}\r\n        </aside>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Menubar;\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\templates\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\components\\templates\\SemesterSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\config\\business-rules.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\config\\moe-standards.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\application\\actions\\analytics.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\application\\schemas\\analytics.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\domain\\services\\aggregation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\domain\\services\\calculation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\domain\\types\\analytics.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\infrastructure\\repositories\\compliance.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\infrastructure\\repositories\\overview.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\infrastructure\\repositories\\quality.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\infrastructure\\repositories\\room.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\infrastructure\\repositories\\subject.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\infrastructure\\repositories\\teacher.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\infrastructure\\repositories\\time.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\presentation\\components\\ComplianceSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\presentation\\components\\OverviewSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\presentation\\components\\QualityMetricsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\presentation\\components\\RoomUtilizationSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\presentation\\components\\SubjectDistributionSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\presentation\\components\\TeacherWorkloadSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\analytics\\presentation\\components\\TimeDistributionSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\arrange\\application\\actions\\arrange.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\arrange\\application\\schemas\\arrange.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\arrange\\domain\\services\\arrange-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\arrange\\infrastructure\\repositories\\arrange.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\assign\\application\\actions\\assign.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\assign\\application\\schemas\\assign.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\assign\\domain\\services\\assign-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\assign\\infrastructure\\repositories\\assign.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\class\\application\\actions\\class.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\class\\application\\schemas\\class.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\class\\domain\\services\\class-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\class\\infrastructure\\repositories\\class.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\application\\actions\\config-lifecycle.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\application\\actions\\config.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\application\\schemas\\config-lifecycle.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\application\\schemas\\config-validation.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\application\\schemas\\config.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\application\\services\\publish-readiness-query.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\domain\\constants\\config.constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\domain\\services\\config-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\domain\\services\\copy-config.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\domain\\services\\publish-readiness.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\domain\\types\\config-data.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\domain\\types\\publish-readiness-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\infrastructure\\repositories\\config.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":306,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6771,6774],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6771,6774],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":312,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":312,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6892,6895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6892,6895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":320,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":320,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7070,7073],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7070,7073],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":321,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":321,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7111,7114],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7111,7114],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Config Feature - Repository Layer\r\n *\r\n * Handles all database operations for table_config using Prisma.\r\n * Config stores timetable configuration settings as JSON.\r\n */\r\n\r\nimport prisma from \"@/lib/prisma\";\r\nimport {\r\n  withPrismaTransaction,\r\n  type TransactionClient,\r\n} from \"@/lib/prisma-transaction\";\r\nimport { semester, Prisma } from \"@/prisma/generated/client\";\r\nimport type { FullConfigData } from \"../../types/config-types\";\r\n\r\n/**\r\n * Type for config data\r\n */\r\nexport type ConfigData = {\r\n  ConfigID: string;\r\n  AcademicYear: number;\r\n  Semester: semester;\r\n  Config: Prisma.JsonValue;\r\n};\r\n\r\n/**\r\n * Get all configs ordered by ConfigID\r\n */\r\nexport async function findAll() {\r\n  return await prisma.table_config.findMany({\r\n    orderBy: {\r\n      ConfigID: \"asc\",\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Find config by academic year and semester\r\n * Returns null if not found\r\n */\r\nexport async function findByTerm(academicYear: number, semester: semester) {\r\n  return await prisma.table_config.findFirst({\r\n    where: {\r\n      AcademicYear: academicYear,\r\n      Semester: semester,\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Find config by ConfigID (primary key)\r\n * Returns null if not found\r\n */\r\nexport async function findByConfigId(configId: string) {\r\n  return await prisma.table_config.findUnique({\r\n    where: {\r\n      ConfigID: configId,\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Create a new config\r\n */\r\nexport async function create(data: ConfigData) {\r\n  return await prisma.table_config.create({\r\n    data: {\r\n      ConfigID: data.ConfigID,\r\n      AcademicYear: data.AcademicYear,\r\n      Semester: data.Semester,\r\n      Config: data.Config as Prisma.InputJsonValue,\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Update an existing config\r\n */\r\nexport async function update(\r\n  configId: string,\r\n  data: Partial<Omit<ConfigData, \"ConfigID\">>,\r\n) {\r\n  const updateData: Prisma.table_configUpdateInput = {\r\n    ...(data.AcademicYear !== undefined && { AcademicYear: data.AcademicYear }),\r\n    ...(data.Semester !== undefined && { Semester: data.Semester }),\r\n    ...(data.Config !== undefined && {\r\n      Config: data.Config as Prisma.InputJsonValue,\r\n    }),\r\n  };\r\n  return await prisma.table_config.update({\r\n    where: { ConfigID: configId },\r\n    data: updateData,\r\n  });\r\n}\r\n\r\n/**\r\n * Delete a config by ConfigID\r\n */\r\nexport async function deleteById(configId: string) {\r\n  return await prisma.table_config.delete({\r\n    where: {\r\n      ConfigID: configId,\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Count total configs\r\n */\r\nexport async function count(): Promise<number> {\r\n  return await prisma.table_config.count();\r\n}\r\n\r\n/**\r\n * Update config status\r\n */\r\nexport async function updateStatus(\r\n  configId: string,\r\n  status: string,\r\n  publishedAt?: Date | null,\r\n) {\r\n  return await prisma.table_config.update({\r\n    where: { ConfigID: configId },\r\n    data: {\r\n      status,\r\n      ...(publishedAt !== undefined ? { publishedAt } : {}),\r\n      updatedAt: new Date(),\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Update config completeness percentage\r\n */\r\nexport async function updateCompleteness(\r\n  configId: string,\r\n  completeness: number,\r\n) {\r\n  return await prisma.table_config.update({\r\n    where: { ConfigID: configId },\r\n    data: {\r\n      configCompleteness: completeness,\r\n      updatedAt: new Date(),\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Count entities for completeness calculation\r\n */\r\nexport async function countEntitiesForCompleteness(\r\n  academicYear: number,\r\n  semester: semester,\r\n) {\r\n  const [timeslotCount, teacherCount, subjectCount, classCount, roomCount] =\r\n    await Promise.all([\r\n      prisma.timeslot.count({\r\n        where: {\r\n          AcademicYear: academicYear,\r\n          Semester: semester,\r\n        },\r\n      }),\r\n      prisma.teachers_responsibility.count({\r\n        where: {\r\n          AcademicYear: academicYear,\r\n          Semester: semester,\r\n        },\r\n      }),\r\n      prisma.subject.count(),\r\n      prisma.gradelevel.count(),\r\n      prisma.room.count(),\r\n    ]);\r\n\r\n  return {\r\n    timeslotCount,\r\n    teacherCount,\r\n    subjectCount,\r\n    classCount,\r\n    roomCount,\r\n  };\r\n}\r\n\r\n/**\r\n * Count timeslots for a given academic term\r\n */\r\nexport async function countTimeslotsForTerm(\r\n  academicYear: number,\r\n  semester: semester,\r\n) {\r\n  return await prisma.timeslot.count({\r\n    where: {\r\n      AcademicYear: academicYear,\r\n      Semester: semester,\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Get config with schedule counts\r\n */\r\nexport async function findByIdWithCounts(\r\n  configId: string,\r\n  academicYear: number,\r\n  semester: semester,\r\n) {\r\n  const config = await prisma.table_config.findUnique({\r\n    where: { ConfigID: configId },\r\n  });\r\n\r\n  if (!config) {\r\n    return null;\r\n  }\r\n\r\n  const [timeslotCount, teacherCount, classScheduleCount] = await Promise.all([\r\n    prisma.timeslot.count({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semester,\r\n      },\r\n    }),\r\n    prisma.teachers_responsibility.count({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semester,\r\n      },\r\n    }),\r\n    prisma.class_schedule.count({\r\n      where: {\r\n        timeslot: {\r\n          AcademicYear: academicYear,\r\n          Semester: semester,\r\n        },\r\n      },\r\n    }),\r\n  ]);\r\n\r\n  return {\r\n    ...config,\r\n    counts: {\r\n      timeslots: timeslotCount,\r\n      teachers: teacherCount,\r\n      schedules: classScheduleCount,\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Get timetable configuration for a specific semester\r\n * Returns only the Config JSON field\r\n */\r\nexport async function getTimetableConfig(\r\n  academicYear: number,\r\n  semester: semester,\r\n) {\r\n  const config = await prisma.table_config.findFirst({\r\n    where: {\r\n      AcademicYear: academicYear,\r\n      Semester: semester,\r\n    },\r\n    select: {\r\n      Config: true,\r\n    },\r\n  });\r\n\r\n  return config?.Config ?? null;\r\n}\r\n\r\n/**\r\n * Fetches the data required to run the publish readiness check for a config.\r\n */\r\nexport async function findFullConfigData(\r\n  configId: string,\r\n): Promise<FullConfigData | null> {\r\n  const config = await findByConfigId(configId);\r\n  if (!config) {\r\n    return null;\r\n  }\r\n\r\n  const { AcademicYear, Semester } = config;\r\n  const [totalTimeslots, schedules, grades, programs] = await Promise.all([\r\n    countTimeslotsForTerm(AcademicYear, Semester),\r\n    prisma.class_schedule.findMany({\r\n      where: {\r\n        timeslot: {\r\n          AcademicYear,\r\n          Semester,\r\n        },\r\n      },\r\n    }),\r\n    prisma.gradelevel.findMany(),\r\n    prisma.program.findMany({\r\n      where: {\r\n        IsActive: true,\r\n      },\r\n      include: {\r\n        program_subject: {\r\n          include: {\r\n            subject: true,\r\n          },\r\n        },\r\n      },\r\n    }),\r\n  ]);\r\n\r\n  const requiredSubjects = new Map<string, string[]>();\r\n  grades.forEach((grade: any) => {\r\n    if (!grade.ProgramID) {\r\n      return;\r\n    }\r\n\r\n    const gradeProgram = programs.find(\r\n      (program: any) => program.ProgramID === grade.ProgramID,\r\n    );\r\n\r\n    if (!gradeProgram) {\r\n      return;\r\n    }\r\n\r\n    const required = gradeProgram.program_subject\r\n      .filter((ps: any) => ps.IsMandatory)\r\n      .map((ps: any) => ps.SubjectCode);\r\n\r\n    requiredSubjects.set(grade.GradeID, required);\r\n  });\r\n\r\n  return {\r\n    configId,\r\n    schedules,\r\n    grades,\r\n    programs,\r\n    totalTimeslots,\r\n    requiredSubjects,\r\n  };\r\n}\r\n\r\nexport async function transaction<T>(\r\n  callback: (tx: TransactionClient) => Promise<T>,\r\n) {\r\n  return withPrismaTransaction(callback);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\presentation\\stores\\timetable-config.store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\config\\types\\config-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\conflict\\application\\actions\\conflict.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\conflict\\application\\schemas\\conflict.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\conflict\\infrastructure\\repositories\\conflict.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\dashboard\\domain\\services\\dashboard-stats.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\dashboard\\infrastructure\\repositories\\dashboard.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":314,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7227,7230],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7227,7230],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Dashboard Repository\r\n * Aggregates data from multiple sources for dashboard statistics\r\n *\r\n * @module dashboard.repository\r\n */\r\n\r\nimport prisma from \"@/lib/prisma\";\r\nimport type { semester } from \"@/prisma/generated/client\";\r\nimport { cache } from \"react\";\r\n\r\n/**\r\n * Fetch all data needed for dashboard in a single query\r\n * Uses React cache() for request-level memoization\r\n */\r\nexport const getDashboardData = cache(async function getDashboardData(\r\n  configId: string,\r\n  academicYear: number,\r\n  sem: semester,\r\n) {\r\n  const [\r\n    config,\r\n    schedules,\r\n    teachers,\r\n    grades,\r\n    timeslots,\r\n    subjects,\r\n    responsibilities,\r\n  ] = await Promise.all([\r\n    // Get semester config\r\n    prisma.table_config.findUnique({\r\n      where: { ConfigID: configId },\r\n    }),\r\n\r\n    // Get all schedules for this semester\r\n    prisma.class_schedule.findMany({\r\n      where: {\r\n        timeslot: {\r\n          AcademicYear: academicYear,\r\n          Semester: sem,\r\n        },\r\n      },\r\n      include: {\r\n        teachers_responsibility: {\r\n          include: {\r\n            teacher: {\r\n              select: {\r\n                TeacherID: true,\r\n                Prefix: true,\r\n                Firstname: true,\r\n                Lastname: true,\r\n                Department: true,\r\n              },\r\n            },\r\n          },\r\n        },\r\n        subject: {\r\n          select: {\r\n            SubjectCode: true,\r\n            SubjectName: true,\r\n            Category: true,\r\n          },\r\n        },\r\n        gradelevel: {\r\n          select: {\r\n            GradeID: true,\r\n            Year: true,\r\n            Number: true,\r\n            ProgramID: true,\r\n          },\r\n        },\r\n        room: {\r\n          select: {\r\n            RoomID: true,\r\n            RoomName: true,\r\n          },\r\n        },\r\n        timeslot: {\r\n          select: {\r\n            TimeslotID: true,\r\n            DayOfWeek: true,\r\n            Breaktime: true,\r\n          },\r\n        },\r\n      },\r\n    }),\r\n\r\n    // Get all teachers\r\n    prisma.teacher.findMany({\r\n      orderBy: { Firstname: \"asc\" },\r\n    }),\r\n\r\n    // Get all grades\r\n    prisma.gradelevel.findMany({\r\n      orderBy: { GradeID: \"asc\" },\r\n      include: {\r\n        program: true,\r\n      },\r\n    }),\r\n\r\n    // Get all timeslots for this semester\r\n    prisma.timeslot.findMany({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: sem,\r\n      },\r\n      orderBy: [{ DayOfWeek: \"asc\" }, { StartTime: \"asc\" }],\r\n    }),\r\n\r\n    // Get all subjects\r\n    prisma.subject.findMany({\r\n      orderBy: { SubjectCode: \"asc\" },\r\n    }),\r\n\r\n    // Get teacher responsibilities for this semester\r\n    prisma.teachers_responsibility.findMany({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: sem,\r\n      },\r\n      include: {\r\n        teacher: {\r\n          select: {\r\n            TeacherID: true,\r\n            Prefix: true,\r\n            Firstname: true,\r\n            Lastname: true,\r\n          },\r\n        },\r\n        subject: {\r\n          select: {\r\n            SubjectCode: true,\r\n            SubjectName: true,\r\n          },\r\n        },\r\n        gradelevel: {\r\n          select: {\r\n            GradeID: true,\r\n            Year: true,\r\n            Number: true,\r\n          },\r\n        },\r\n      },\r\n    }),\r\n  ]);\r\n\r\n  return {\r\n    config,\r\n    schedules,\r\n    teachers,\r\n    grades,\r\n    timeslots,\r\n    subjects,\r\n    responsibilities,\r\n  };\r\n});\r\n\r\n/**\r\n * Get quick stats counts\r\n * Optimized for performance with count queries\r\n */\r\nexport const getQuickStats = cache(async function getQuickStats(\r\n  configId: string,\r\n  academicYear: number,\r\n  sem: semester,\r\n) {\r\n  const [\r\n    teacherCount,\r\n    gradeCount,\r\n    scheduleCount,\r\n    timeslotCount,\r\n    subjectCount,\r\n    responsibilityCount,\r\n  ] = await Promise.all([\r\n    prisma.teacher.count(),\r\n    prisma.gradelevel.count(),\r\n    // class_schedule doesn't have ConfigID - filter via timeslot relation\r\n    prisma.class_schedule.count({\r\n      where: {\r\n        timeslot: {\r\n          AcademicYear: academicYear,\r\n          Semester: sem,\r\n        },\r\n      },\r\n    }),\r\n    prisma.timeslot.count({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: sem,\r\n      },\r\n    }),\r\n    prisma.subject.count(),\r\n    // teachers_responsibility has AcademicYear and Semester directly\r\n    prisma.teachers_responsibility.count({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: sem,\r\n      },\r\n    }),\r\n  ]);\r\n\r\n  return {\r\n    teacherCount,\r\n    gradeCount,\r\n    scheduleCount,\r\n    timeslotCount,\r\n    subjectCount,\r\n    responsibilityCount,\r\n  };\r\n});\r\n\r\n/**\r\n * Get teachers with their schedule counts for the semester\r\n * Note: teacher doesn't have direct class_schedule relation - goes through teachers_responsibility\r\n */\r\nexport const getTeachersWithScheduleCounts = cache(\r\n  async function getTeachersWithScheduleCounts(\r\n    academicYear: number,\r\n    sem: semester,\r\n  ) {\r\n    return prisma.teacher.findMany({\r\n      include: {\r\n        teachers_responsibility: {\r\n          where: {\r\n            AcademicYear: academicYear,\r\n            Semester: sem,\r\n          },\r\n          select: {\r\n            RespID: true,\r\n            GradeID: true,\r\n            SubjectCode: true,\r\n          },\r\n        },\r\n      },\r\n      orderBy: { Firstname: \"asc\" },\r\n    });\r\n  },\r\n);\r\n\r\n/**\r\n * Get grades with their schedule counts for the semester\r\n * Note: class_schedule has ClassID (not ClassScheduleID) and no TeacherID field\r\n */\r\nexport const getGradesWithScheduleCounts = cache(\r\n  async function getGradesWithScheduleCounts(\r\n    academicYear: number,\r\n    sem: semester,\r\n  ) {\r\n    return prisma.gradelevel.findMany({\r\n      include: {\r\n        class_schedule: {\r\n          where: {\r\n            timeslot: {\r\n              AcademicYear: academicYear,\r\n              Semester: sem,\r\n            },\r\n          },\r\n          select: {\r\n            ClassID: true,\r\n            SubjectCode: true,\r\n            TimeslotID: true,\r\n          },\r\n        },\r\n        program: true,\r\n      },\r\n      orderBy: { GradeID: \"asc\" },\r\n    });\r\n  },\r\n);\r\n\r\n/**\r\n * Get subject distribution with counts\r\n * Note: class_schedule primary key is ClassID (not ClassScheduleID)\r\n */\r\nexport const getSubjectDistribution = cache(\r\n  async function getSubjectDistribution(academicYear: number, sem: semester) {\r\n    type ScheduleGroup = {\r\n      SubjectCode: string;\r\n      _count: {\r\n        ClassID: number;\r\n      };\r\n    };\r\n\r\n    const schedules = (await prisma.class_schedule.groupBy({\r\n      by: [\"SubjectCode\"],\r\n      where: {\r\n        timeslot: {\r\n          AcademicYear: academicYear,\r\n          Semester: sem,\r\n        },\r\n      },\r\n      _count: {\r\n        ClassID: true,\r\n      },\r\n      orderBy: {\r\n        _count: {\r\n          ClassID: \"desc\",\r\n        },\r\n      },\r\n    })) as ScheduleGroup[];\r\n\r\n    // Enrich with subject details\r\n    const subjectCodes = schedules.map((s) => s.SubjectCode);\r\n    const subjects = await prisma.subject.findMany({\r\n      where: {\r\n        SubjectCode: {\r\n          in: subjectCodes,\r\n        },\r\n      },\r\n    });\r\n\r\n    return schedules.map((schedule) => {\r\n      const subject = subjects.find(\r\n        (s: any) => s.SubjectCode === schedule.SubjectCode,\r\n      );\r\n      return {\r\n        subjectCode: schedule.SubjectCode,\r\n        subjectName: subject?.SubjectName || schedule.SubjectCode,\r\n        count: schedule._count.ClassID,\r\n      };\r\n    });\r\n  },\r\n);\r\n\r\n/**\r\n * Dashboard repository export\r\n */\r\nexport const dashboardRepository = {\r\n  getDashboardData,\r\n  getQuickStats,\r\n  getTeachersWithScheduleCounts,\r\n  getGradesWithScheduleCounts,\r\n  getSubjectDistribution,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\export\\teacher-timetable-excel.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1225,1228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1225,1228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1272,1275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1272,1275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1319,1322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1319,1322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2012,2015],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2012,2015],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2042,2045],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2042,2045],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport ExcelJS from \"exceljs\";\r\nimport type { teacher } from \"@/prisma/generated/client\";\r\nimport type {\r\n  ClassScheduleWithSummary,\r\n} from \"@/features/class/infrastructure/repositories/class.repository\";\r\nimport type { TimeSlotTableData } from \"@/app/dashboard/[semesterAndyear]/shared/timeSlot\";\r\nimport { dayOfWeekThai } from \"@/models/dayofweek-thai\";\r\n\r\nexport type ExportTimeslotData = {\r\n  AllData: TimeSlotTableData[\"AllData\"];\r\n  SlotAmount: number[];\r\n  DayOfWeek: Array<{ Day: string; TextColor: string; BgColor: string }>;\r\n  BreakSlot?: Array<{ TimeslotID: string; Breaktime: string; SlotNumber: number }>;\r\n};\r\n\r\nconst DAY_ORDER = [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\", \"SAT\", \"SUN\"] as const;\r\n\r\nconst findTimeslotId = (\r\n  data: ExportTimeslotData,\r\n  dayCode: string,\r\n  slotNumber: number,\r\n): string | undefined => {\r\n  return data.AllData.find((t) => {\r\n    const num = Number.parseInt(t.TimeslotID.substring(10), 10);\r\n    return t.DayOfWeek === dayCode && num === slotNumber;\r\n  })?.TimeslotID;\r\n};\r\n\r\nconst describeSchedule = (schedule: ClassScheduleWithSummary): string => {\r\n  const grade = schedule.gradelevel?.GradeID ?? schedule.GradeID ?? \"\";\r\n  const subject =\r\n    (schedule as any).subject?.SubjectName ??\r\n    (schedule as any).subject?.SubjectCode ??\r\n    (schedule as any).SubjectCode ??\r\n    \"\";\r\n  const room = schedule.room?.RoomName ?? \"\";\r\n  const base = `${grade} ${subject}`.trim();\r\n  return room ? `${base} (${room})` : base;\r\n};\r\n\r\n/**\r\n * Export teacher timetables to Excel (one sheet per teacher).\r\n * Designed for client-side use (ExcelJS).\r\n */\r\nexport async function ExportTeacherTable(\r\n  timeSlotData: ExportTimeslotData,\r\n  teachers: teacher[],\r\n  classData: ClassScheduleWithSummary[],\r\n  semester: number | string,\r\n  academicYear: number | string,\r\n) {\r\n  const workbook = new ExcelJS.Workbook();\r\n\r\n  const dayCodes = Array.from(\r\n    new Set(timeSlotData.AllData.map((t) => t.DayOfWeek)),\r\n  ).sort(\r\n    (a, b) => DAY_ORDER.indexOf(a as any) - DAY_ORDER.indexOf(b as any),\r\n  );\r\n  const days = dayCodes.map((code) => dayOfWeekThai[code] ?? code);\r\n  const slots = timeSlotData.SlotAmount;\r\n\r\n  teachers.forEach((t) => {\r\n    const sheet = workbook.addWorksheet(\r\n      `${t.Firstname ?? \"\"} ${t.Lastname ?? \"\"}`.trim() || `เธเธฃเธน-${t.TeacherID}`,\r\n      {\r\n        pageSetup: { paperSize: 9, orientation: \"landscape\" },\r\n      },\r\n    );\r\n\r\n    // Header\r\n    sheet.addRow([\r\n      `เธ•เธฒเธฃเธฒเธเธชเธญเธ: ${t.Prefix ?? \"\"}${t.Firstname ?? \"\"} ${t.Lastname ?? \"\"}`.trim(),\r\n    ]);\r\n    sheet.addRow([`เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน ${semester}/${academicYear}`]);\r\n    sheet.addRow([]); // spacer\r\n\r\n    const columns = [\r\n      { header: \"เธเธฒเธ\", key: \"slot\", width: 6 },\r\n      ...days.map((d, idx) => ({ header: d, key: dayCodes[idx], width: 22 })),\r\n    ];\r\n    sheet.columns = columns;\r\n\r\n    // Build a quick lookup of schedules per timeslot for this teacher\r\n    const schedulesByTimeslot = new Map<string, ClassScheduleWithSummary[]>();\r\n    classData\r\n      .filter((c) =>\r\n        c.teachers_responsibility.some((r) => r.TeacherID === t.TeacherID),\r\n      )\r\n      .forEach((c) => {\r\n        const arr = schedulesByTimeslot.get(c.TimeslotID) ?? [];\r\n        arr.push(c);\r\n        schedulesByTimeslot.set(c.TimeslotID, arr);\r\n      });\r\n\r\n    slots.forEach((slotNumber) => {\r\n      const row: Record<string, string | number> = { slot: slotNumber };\r\n      dayCodes.forEach((dayCode) => {\r\n        const timeslotId = findTimeslotId(timeSlotData, dayCode, slotNumber);\r\n        if (!timeslotId) {\r\n          row[dayCode] = \"\";\r\n          return;\r\n        }\r\n        const matches = schedulesByTimeslot.get(timeslotId) ?? [];\r\n        row[dayCode] = matches.map(describeSchedule).join(\", \");\r\n      });\r\n      sheet.addRow(row);\r\n    });\r\n\r\n    sheet.getRow(1).font = { bold: true, size: 14 };\r\n    sheet.getRow(2).font = { size: 12 };\r\n    sheet.eachRow((row, rowNumber) => {\r\n      row.eachCell((cell) => {\r\n        cell.alignment = { vertical: \"middle\", horizontal: \"center\", wrapText: true };\r\n        if (rowNumber > 3) {\r\n          cell.border = {\r\n            top: { style: \"thin\" },\r\n            left: { style: \"thin\" },\r\n            bottom: { style: \"thin\" },\r\n            right: { style: \"thin\" },\r\n          };\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  const buffer = await workbook.xlsx.writeBuffer();\r\n  const blob = new Blob([buffer], {\r\n    type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\r\n  });\r\n\r\n  const url = URL.createObjectURL(blob);\r\n  const link = document.createElement(\"a\");\r\n  link.href = url;\r\n  link.download = `เธ•เธฒเธฃเธฒเธเธชเธญเธ-${semester}-${academicYear}.xlsx`;\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  URL.revokeObjectURL(url);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\gradelevel\\application\\actions\\gradelevel.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\gradelevel\\application\\schemas\\gradelevel.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\gradelevel\\domain\\services\\gradelevel-validation.service.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":131,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3949,3952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3949,3952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Domain Layer: GradeLevel Validation Service\r\n *\r\n * Pure business logic and validation rules for gradelevels.\r\n * No external dependencies - can be tested independently.\r\n *\r\n * @module gradelevel-validation.service\r\n */\r\n\r\nimport { gradeLevelRepository } from \"../../infrastructure/repositories/gradelevel.repository\";\r\nimport type { CreateGradeLevelInput } from \"../../application/schemas/gradelevel.schemas\";\r\n\r\n/**\r\n * Generate GradeID from Year and Number\r\n * Pattern: Year + '0' + Number\r\n * Example: Year=1, Number=1 => \"101\"\r\n */\r\nexport function generateGradeId(year: number, number: number): string {\r\n  return `${year}0${number}`;\r\n}\r\n\r\n/**\r\n * Validate that a gradelevel with the same Year+Number combination doesn't exist\r\n * Returns error message in Thai if duplicate found, null otherwise\r\n */\r\nexport async function validateNoDuplicateGradeLevel(\r\n  year: number,\r\n  number: number,\r\n): Promise<string | null> {\r\n  const existing = await gradeLevelRepository.findDuplicate(year, number);\r\n\r\n  if (existing) {\r\n    return \"เธกเธตเธเนเธญเธกเธนเธฅเธเธฑเนเธเธเธตเธเธตเนเธญเธขเธนเนเนเธฅเนเธง เธเธฃเธธเธ“เธฒเธ•เธฃเธงเธเธชเธญเธเธญเธตเธเธเธฃเธฑเนเธ\";\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Validate multiple gradelevels for bulk creation\r\n * Checks for both internal duplicates and database duplicates\r\n * Returns array of error messages (empty if valid)\r\n */\r\nexport async function validateBulkGradeLevels(\r\n  gradelevels: CreateGradeLevelInput[],\r\n): Promise<string[]> {\r\n  const errors: string[] = [];\r\n  const seen = new Map<string, number>();\r\n\r\n  // Check for internal duplicates\r\n  for (let i = 0; i < gradelevels.length; i++) {\r\n    const gradelevel = gradelevels[i];\r\n    if (!gradelevel) continue;\r\n\r\n    const { Year, Number } = gradelevel;\r\n    const key = `${Year}-${Number}`;\r\n\r\n    if (seen.has(key)) {\r\n      errors.push(\r\n        `เธฃเธฒเธขเธเธฒเธฃเธ—เธตเน ${i + 1}: เธเนเธญเธกเธนเธฅเธเนเธณเธเธฑเธเธฃเธฒเธขเธเธฒเธฃเธ—เธตเน ${seen.get(key)! + 1} (เธเธต ${Year} เธฃเธฐเธ”เธฑเธ ${Number})`,\r\n      );\r\n    } else {\r\n      seen.set(key, i);\r\n    }\r\n  }\r\n\r\n  // Check for database duplicates\r\n  for (let i = 0; i < gradelevels.length; i++) {\r\n    const gradelevel = gradelevels[i];\r\n    if (!gradelevel) continue;\r\n\r\n    const { Year, Number } = gradelevel;\r\n    const dbError = await validateNoDuplicateGradeLevel(Year, Number);\r\n\r\n    if (dbError) {\r\n      errors.push(`เธฃเธฒเธขเธเธฒเธฃเธ—เธตเน ${i + 1}: ${dbError}`);\r\n    }\r\n  }\r\n\r\n  return errors;\r\n}\r\n\r\n/**\r\n * Find gradelevels where multiple teachers are responsible for the same subject\r\n * This is used for the lock feature to find gradelevels that share teachers\r\n *\r\n * Business logic:\r\n * 1. Get all teacher responsibilities for the given subject, year, semester, and teacher IDs\r\n * 2. Group by GradeID\r\n * 3. Return only gradelevels where at least 2 teachers are assigned\r\n */\r\nexport async function findGradeLevelsForLock(\r\n  subjectCode: string,\r\n  academicYear: number,\r\n  semester: \"SEMESTER_1\" | \"SEMESTER_2\",\r\n  teacherIds: number[],\r\n): Promise<{ GradeID: string; Year: number; Number: number }[]> {\r\n  // Get all responsibilities\r\n  const responsibilities =\r\n    await gradeLevelRepository.findTeacherResponsibilities(\r\n      subjectCode,\r\n      academicYear,\r\n      semester,\r\n      teacherIds,\r\n    );\r\n\r\n  // Group by GradeID and count unique teachers\r\n  const gradeTeacherMap = new Map<string, Set<number>>();\r\n\r\n  for (const resp of responsibilities) {\r\n    if (!gradeTeacherMap.has(resp.GradeID)) {\r\n      gradeTeacherMap.set(resp.GradeID, new Set());\r\n    }\r\n    gradeTeacherMap.get(resp.GradeID)!.add(resp.TeacherID);\r\n  }\r\n\r\n  // Filter gradelevels with at least 2 teachers\r\n  const gradeIdsWithMultipleTeachers = Array.from(gradeTeacherMap.entries())\r\n    .filter(([, teachers]) => teachers.size >= 2)\r\n    .map(([gradeId]) => gradeId);\r\n\r\n  if (gradeIdsWithMultipleTeachers.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  // Fetch the actual gradelevel records\r\n  const gradelevels = await gradeLevelRepository.findByIds(\r\n    gradeIdsWithMultipleTeachers,\r\n  );\r\n\r\n  return gradelevels.map((g: any) => ({\r\n    GradeID: g.GradeID,\r\n    Year: g.Year,\r\n    Number: g.Number,\r\n  }));\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\gradelevel\\infrastructure\\repositories\\gradelevel.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\lock\\application\\actions\\lock.actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":254,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":254,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6893,6896],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6893,6896],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":260,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":260,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7064,7067],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7064,7067],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":266,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7265,7268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7265,7268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":271,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":271,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7388,7391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7388,7391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Lock Feature - Server Actions\r\n *\r\n * Server Actions for managing locked class schedules.\r\n * Uses React 19 Server Actions with 'use server' directive.\r\n */\r\n\r\n\"use server\";\r\n\r\nimport { createAction } from \"@/shared/lib/action-wrapper\";\r\nimport * as v from \"valibot\";\r\nimport * as lockRepository from \"../../infrastructure/repositories/lock.repository\";\r\nimport { semester } from \"@/prisma/generated/client\";\r\nimport type { Prisma, class_schedule } from \"@/prisma/generated/client\";\r\nimport {\n  groupSchedulesBySubject,\r\n  validateLockInput,\r\n} from \"../../domain/services/lock-validation.service\";\r\nimport {\r\n  getLockedSchedulesSchema,\r\n  createLockSchema,\r\n  deleteLocksSchema,\r\n  type GetLockedSchedulesInput,\r\n  type CreateLockInput,\r\n  type DeleteLocksInput,\r\n} from \"../schemas/lock.schemas\";\r\n\r\n/**\r\n * Get all locked schedules for a given academic year and semester\r\n * Returns grouped data by SubjectCode\r\n */\r\nexport const getLockedSchedulesAction = createAction(\r\n  getLockedSchedulesSchema,\r\n  async (input: GetLockedSchedulesInput) => {\r\n    // Fetch raw locked schedules from database\r\n    const rawSchedules = await lockRepository.findLockedSchedules(\r\n      input.AcademicYear,\r\n      input.Semester,\r\n    );\r\n\r\n    // Group schedules by SubjectCode using domain service\r\n    const groupedSchedules = groupSchedulesBySubject(rawSchedules);\r\n\r\n    return groupedSchedules;\r\n  },\r\n);\r\n\r\n/**\r\n * Create locked schedules for multiple timeslots and grades\r\n * Creates cartesian product: timeslots ร— grades\r\n *\r\n * Example: 2 timeslots ร— 3 grades = 6 class schedules created\r\n */\r\nexport const createLockAction = createAction(\r\n  createLockSchema,\r\n  async (input: CreateLockInput) => {\r\n    // Validate input using domain service\r\n    const validationError = validateLockInput({\r\n      timeslots: input.timeslots,\r\n      GradeIDs: input.GradeIDs,\r\n      RespIDs: input.RespIDs,\r\n    });\r\n\r\n    if (validationError) {\r\n      throw new Error(validationError);\r\n    }\r\n\r\n    const created: class_schedule[] = [];\r\n    const respIds = input.RespIDs.map((respId) => ({ RespID: respId }));\r\n\r\n    // Nested loops: for each timeslot, for each grade\r\n    for (const timeslotId of input.timeslots) {\r\n      for (const gradeId of input.GradeIDs) {\r\n        // Generate ClassID using domain service\r\n\r\n        // Create single locked schedule\n        const schedule: class_schedule = await lockRepository.createLock({\r\n          IsLocked: true,\r\n          SubjectCode: input.SubjectCode,\r\n          TimeslotID: timeslotId,\r\n          RoomID: input.RoomID,\r\n          GradeID: gradeId,\r\n          RespIDs: respIds,\r\n        });\r\n\r\n        created.push(schedule);\r\n      }\r\n    }\r\n\r\n    return created;\r\n  },\r\n);\r\n\r\n/**\r\n * Delete multiple locked schedules by ClassIDs\r\n * Bulk delete operation\r\n */\r\nexport const deleteLocksAction = createAction(\r\n  deleteLocksSchema,\r\n  async (classIds: DeleteLocksInput) => {\r\n    const result: Prisma.BatchPayload =\r\n      await lockRepository.deleteMany(classIds);\r\n\r\n    return {\r\n      count: result.count,\r\n      deletedClassIds: classIds,\r\n    };\r\n  },\r\n);\r\n\r\n/**\r\n * Get count of locked schedules for a given academic year and semester\r\n * Statistics endpoint\r\n */\r\nexport const getLockedScheduleCountAction = createAction(\r\n  getLockedSchedulesSchema,\r\n  async (input: GetLockedSchedulesInput) => {\r\n    const count = await lockRepository.count(\r\n      input.AcademicYear,\r\n      input.Semester,\r\n    );\r\n\r\n    return { count };\r\n  },\r\n);\r\n\r\n/**\r\n * Create multiple locked schedules in a single transaction\r\n * Bulk lock operation for efficiency\r\n *\r\n * All locks are created atomically - if any fails, all rollback\r\n */\r\nexport const createBulkLocksAction = createAction(\r\n  v.object({\r\n    locks: v.array(\r\n      v.object({\r\n        SubjectCode: v.string(),\r\n        RoomID: v.number(),\r\n        TimeslotID: v.string(),\r\n        GradeID: v.string(),\r\n        RespID: v.number(),\r\n      }),\r\n    ),\r\n  }),\r\n  async (input: {\r\n    locks: Array<{\r\n      SubjectCode: string;\r\n      RoomID: number;\r\n      TimeslotID: string;\r\n      GradeID: string;\r\n      RespID: number;\r\n    }>;\r\n  }) => {\r\n    const created: class_schedule[] = [];\r\n\r\n    // Use transaction for atomicity\r\n    for (const lock of input.locks) {\r\n      const schedule: class_schedule = await lockRepository.createLock({\r\n        IsLocked: true,\r\n        SubjectCode: lock.SubjectCode,\r\n        TimeslotID: lock.TimeslotID,\r\n        RoomID: lock.RoomID,\r\n        GradeID: lock.GradeID,\r\n        RespIDs: [{ RespID: lock.RespID }],\r\n      });\r\n\r\n      created.push(schedule);\r\n    }\r\n\r\n    return {\r\n      count: created.length,\r\n      created,\r\n    };\r\n  },\r\n);\r\n\r\n/**\r\n * Get all available lock templates\r\n * Can optionally filter by category\r\n */\r\nexport const getLockTemplatesAction = createAction(\r\n  v.optional(\r\n    v.object({\r\n      category: v.optional(\r\n        v.picklist([\"lunch\", \"activity\", \"assembly\", \"exam\", \"other\"]),\r\n      ),\r\n    }),\r\n  ),\r\n  async (input?: {\r\n    category?: \"lunch\" | \"activity\" | \"assembly\" | \"exam\" | \"other\";\r\n  }) => {\r\n    const { LOCK_TEMPLATES, getTemplatesByCategory } = await import(\r\n      \"../../domain/models/lock-template.model\"\r\n    );\r\n\r\n    if (input?.category) {\r\n      return getTemplatesByCategory(input.category);\r\n    }\r\n\r\n    return LOCK_TEMPLATES;\r\n  },\r\n);\r\n\r\n/**\r\n * Apply a lock template to create multiple locks\r\n * Resolves template configuration to actual database records\r\n */\r\nexport const applyLockTemplateAction = createAction(\r\n  v.object({\r\n    templateId: v.string(),\r\n    AcademicYear: v.number(),\r\n    Semester: v.string(),\r\n    ConfigID: v.string(),\r\n  }),\r\n  async (input: {\r\n    templateId: string;\r\n    AcademicYear: number;\r\n    Semester: string;\r\n    ConfigID: string;\r\n  }) => {\r\n    const { getTemplateById } = await import(\r\n      \"../../domain/models/lock-template.model\"\r\n    );\r\n    const { resolveTemplate } = await import(\r\n      \"../../domain/services/lock-template.service\"\r\n    );\r\n    const lockRepo = await import(\r\n      \"../../infrastructure/repositories/lock.repository\"\r\n    );\r\n\r\n    // Get template\r\n    const template = getTemplateById(input.templateId);\r\n    if (!template) {\r\n      throw new Error(`เนเธกเนเธเธเน€เธ—เธกเน€เธเธฅเธ• ID: ${input.templateId}`);\r\n    }\r\n\r\n    // Fetch available data using repository methods\r\n    const [grades, timeslots, rooms, subjects, responsibilities] =\r\n      await Promise.all([\r\n        lockRepo.findAllGradeLevels(),\r\n        lockRepo.findTimeslotsByTerm(\r\n          input.AcademicYear,\r\n          input.Semester as semester,\r\n        ),\r\n        lockRepo.findAllRooms(),\r\n        lockRepo.findAllSubjects(),\r\n        lockRepo.findTeacherResponsibilitiesByTerm(\r\n          input.AcademicYear,\r\n          input.Semester as semester,\r\n        ),\r\n      ]);\r\n\r\n    // Transform data to match expected format\r\n    const transformedGrades = grades.map((g: any) => ({\r\n      GradeID: g.GradeID,\r\n      GradeName: `เธก.${g.Year}/${g.Number}`,\r\n      Level: g.Number,\r\n    }));\r\n\r\n    const transformedTimeslots = timeslots.map((t: any) => ({\r\n      TimeslotID: t.TimeslotID,\r\n      Day: t.DayOfWeek,\r\n      PeriodStart: t.StartTime.getHours() * 60 + t.StartTime.getMinutes(),\r\n    }));\r\n\r\n    const transformedRooms = rooms.map((r: any) => ({\r\n      RoomID: r.RoomID,\r\n      Name: r.RoomName,\r\n    }));\r\n\r\n    const transformedSubjects = subjects.map((s: any) => ({\r\n      SubjectID: s.SubjectCode,\r\n      Name_TH: s.SubjectName,\r\n    }));\r\n\r\n    // Resolve template to locks\r\n    const { locks, warnings, errors } = resolveTemplate({\r\n      template,\r\n      academicYear: input.AcademicYear,\r\n      semester: input.Semester,\r\n      configId: input.ConfigID,\r\n      availableGrades: transformedGrades,\r\n      availableTimeslots: transformedTimeslots,\r\n      availableRooms: transformedRooms,\r\n      availableSubjects: transformedSubjects,\r\n      availableResponsibilities: responsibilities,\r\n    });\r\n\r\n    if (errors.length > 0) {\r\n      throw new Error(`เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธเธณเน€เธ—เธกเน€เธเธฅเธ•เนเธเนเธเนเนเธ”เน: ${errors.join(\", \")}`);\r\n    }\r\n\r\n    // Create locks using bulk action\r\n    const created: class_schedule[] = [];\r\n    for (const lock of locks) {\r\n      const schedule: class_schedule = await lockRepository.createLock({\r\n        IsLocked: true,\r\n        SubjectCode: lock.SubjectCode,\r\n        TimeslotID: lock.TimeslotID,\r\n        RoomID: lock.RoomID,\r\n        GradeID: lock.GradeID,\r\n        RespIDs: [{ RespID: lock.RespID }],\r\n      });\r\n\r\n      created.push(schedule);\r\n    }\r\n\r\n    return {\r\n      templateName: template.name,\r\n      count: created.length,\r\n      warnings,\r\n      created,\r\n    };\r\n  },\r\n);\r\n\r\n/**\r\n * Get locked timeslot IDs for a given grade and semester\r\n * Used for preventing schedule modifications in locked slots\r\n *\r\n * @returns Array of TimeslotIDs that are locked\r\n */\r\nexport const getLockedTimeslotIDsAction = createAction(\r\n  v.object({\r\n    GradeID: v.string(),\r\n    AcademicYear: v.number(),\r\n    Semester: v.enum(semester),\r\n  }),\r\n  async (input) => {\r\n    const rawSchedules = await lockRepository.findLockedSchedules(\r\n      input.AcademicYear,\r\n      input.Semester,\r\n    );\r\n\r\n    // Filter by grade and extract unique timeslot IDs\r\n    const timeslotIDs = Array.from(\r\n      new Set(\r\n        rawSchedules\r\n          .filter((schedule) => schedule.GradeID === input.GradeID)\r\n          .map((schedule) => schedule.TimeslotID),\r\n      ),\r\n    );\r\n\r\n    return timeslotIDs;\r\n  },\r\n);\r\n/**\r\n * Get raw locked schedules for a given academic year and semester\r\n * Returns array of class_schedule objects for use in Zustand store\r\n */\r\nexport const getRawLockedSchedulesAction = createAction(\r\n  getLockedSchedulesSchema,\r\n  async (input: GetLockedSchedulesInput) => {\r\n    const rawSchedules = await lockRepository.findLockedSchedules(\r\n      input.AcademicYear,\r\n      input.Semester,\r\n    );\r\n\r\n    return rawSchedules as class_schedule[];\r\n  },\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\lock\\application\\schemas\\lock.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\lock\\domain\\models\\lock-template.model.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\lock\\domain\\services\\lock-template.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\lock\\domain\\services\\lock-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\lock\\infrastructure\\repositories\\lock.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\application\\actions\\program.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\application\\schemas\\program.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\domain\\services\\moe-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\domain\\services\\program-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\domain\\types\\enums.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\infrastructure\\repositories\\program.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":181,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4753,4756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4753,4756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":259,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6925,6928],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6925,6928],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Infrastructure Layer: Program Repository (MOE-Compliant)\r\n *\r\n * Handles all database operations for MOE-compliant programs using Prisma.\r\n * Pure data access layer with no business logic.\r\n *\r\n * @module program.repository\r\n */\r\n\r\nimport prisma from \"@/lib/prisma\";\r\nimport type {\r\n  CreateProgramInput,\r\n  UpdateProgramInput,\r\n  AssignSubjectsToProgramInput,\r\n} from \"../../application/schemas/program.schemas\";\r\nimport type { ProgramTrack } from \"@/prisma/generated/client\";\r\n\r\nexport const programRepository = {\r\n  /**\r\n   * Find all programs ordered by Year and Track\r\n   * Includes gradelevel relations and program_subject with subject details\r\n   */\r\n  async findAll() {\r\n    return prisma.program.findMany({\r\n      where: {\r\n        IsActive: true,\r\n      },\r\n      orderBy: [{ Year: \"asc\" }, { Track: \"asc\" }],\r\n      include: {\r\n        gradelevel: {\r\n          orderBy: {\r\n            Number: \"asc\",\r\n          },\r\n        },\r\n        program_subject: {\r\n          include: {\r\n            subject: true,\r\n          },\r\n          orderBy: {\r\n            SortOrder: \"asc\",\r\n          },\r\n        },\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find programs by Year (optional), Track (optional), and IsActive\r\n   */\r\n  async findByFilters(filters: {\r\n    Year?: number;\r\n    Track?: ProgramTrack;\r\n    IsActive?: boolean;\r\n  }) {\r\n    return prisma.program.findMany({\r\n      where: {\r\n        ...(filters.Year !== undefined && { Year: filters.Year }),\r\n        ...(filters.Track && { Track: filters.Track }),\r\n        ...(filters.IsActive !== undefined && { IsActive: filters.IsActive }),\r\n      },\r\n      orderBy: [{ Year: \"asc\" }, { Track: \"asc\" }],\r\n      include: {\r\n        gradelevel: {\r\n          orderBy: {\r\n            Number: \"asc\",\r\n          },\r\n        },\r\n        program_subject: {\r\n          include: {\r\n            subject: true,\r\n          },\r\n          orderBy: {\r\n            SortOrder: \"asc\",\r\n          },\r\n        },\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find a single program by ID with all relations\r\n   */\r\n  async findById(programId: number) {\r\n    return prisma.program.findUnique({\r\n      where: {\r\n        ProgramID: programId,\r\n      },\r\n      include: {\r\n        gradelevel: {\r\n          orderBy: {\r\n            Number: \"asc\",\r\n          },\r\n        },\r\n        program_subject: {\r\n          include: {\r\n            subject: true,\r\n          },\r\n          orderBy: {\r\n            SortOrder: \"asc\",\r\n          },\r\n        },\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find program by ProgramCode\r\n   */\r\n  async findByCode(programCode: string) {\r\n    return prisma.program.findUnique({\r\n      where: {\r\n        ProgramCode: programCode,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find program by Year and Track (for duplicate check)\r\n   */\r\n  async findByYearAndTrack(year: number, track: ProgramTrack) {\r\n    return prisma.program.findFirst({\r\n      where: {\r\n        Year: year,\r\n        Track: track,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find program by grade ID with subjects\r\n   * Returns program associated with a specific grade level including subjects\r\n   */\r\n  async findByGrade(gradeId: string, semester?: string, academicYear?: number) {\r\n    const gradelevel = await prisma.gradelevel.findUnique({\r\n      where: { GradeID: gradeId },\r\n      include: {\r\n        program: {\r\n          include: {\r\n            program_subject: {\r\n              include: {\r\n                subject:\r\n                  semester && academicYear\r\n                    ? {\r\n                        include: {\r\n                          teachers_responsibility: {\r\n                            where: {\r\n                              GradeID: gradeId,\r\n                              Semester: semester as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n                              AcademicYear: academicYear,\r\n                            },\r\n                            include: {\r\n                              teacher: {\r\n                                select: {\r\n                                  Prefix: true,\r\n                                  Firstname: true,\r\n                                  Lastname: true,\r\n                                },\r\n                              },\r\n                            },\r\n                          },\r\n                        },\r\n                      }\r\n                    : true,\r\n              },\r\n              orderBy: {\r\n                SortOrder: \"asc\",\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    if (!gradelevel?.program) {\r\n      return null;\r\n    }\r\n\r\n    // Transform program_subject to subjects array for easier consumption\r\n    const program = {\r\n      ...gradelevel.program,\r\n      subjects: gradelevel.program.program_subject.map((ps: any) => ({\r\n        ...ps.subject,\r\n        MinCredits: ps.MinCredits,\r\n        MaxCredits: ps.MaxCredits,\r\n        Category: ps.Category,\r\n        IsMandatory: ps.IsMandatory,\r\n        SortOrder: ps.SortOrder,\r\n        teachers_responsibility:\r\n          \"teachers_responsibility\" in ps.subject\r\n            ? ps.subject.teachers_responsibility\r\n            : [],\r\n      })),\r\n    };\r\n\r\n    return program;\r\n  },\r\n\r\n  /**\r\n   * Create a program (without subjects initially)\r\n   */\r\n  async create(data: CreateProgramInput) {\r\n    return prisma.program.create({\r\n      data: {\r\n        ProgramCode: data.ProgramCode,\r\n        ProgramName: data.ProgramName,\r\n        Year: data.Year,\r\n        Track: data.Track,\r\n        Description: data.Description,\r\n        MinTotalCredits: data.MinTotalCredits,\r\n        IsActive: data.IsActive ?? true,\r\n      },\r\n      include: {\r\n        gradelevel: true,\r\n        program_subject: {\r\n          include: {\r\n            subject: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Update a program basic info (not subjects)\r\n   */\r\n  async update(programId: number, data: Partial<UpdateProgramInput>) {\r\n    return prisma.program.update({\r\n      where: {\r\n        ProgramID: programId,\r\n      },\r\n      data: {\r\n        ...(data.ProgramCode && { ProgramCode: data.ProgramCode }),\r\n        ...(data.ProgramName && { ProgramName: data.ProgramName }),\r\n        ...(data.Track && { Track: data.Track }),\r\n        ...(data.Description !== undefined && {\r\n          Description: data.Description,\r\n        }),\r\n        ...(data.MinTotalCredits !== undefined && {\r\n          MinTotalCredits: data.MinTotalCredits,\r\n        }),\r\n        ...(data.IsActive !== undefined && { IsActive: data.IsActive }),\r\n      },\r\n      include: {\r\n        gradelevel: true,\r\n        program_subject: {\r\n          include: {\r\n            subject: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Assign subjects to a program (replaces all existing assignments)\r\n   * Uses transaction to ensure atomicity\r\n   */\r\n  async assignSubjects(data: AssignSubjectsToProgramInput) {\r\n    return prisma.$transaction(async (tx: any) => {\r\n      await tx.program_subject.deleteMany({\r\n        where: {\r\n          ProgramID: data.ProgramID,\r\n        },\r\n      });\r\n\r\n      await tx.program_subject.createMany({\r\n        data: data.subjects.map((subject, index) => ({\r\n          ProgramID: data.ProgramID,\r\n          SubjectCode: subject.SubjectCode,\r\n          Category: subject.Category,\r\n          IsMandatory: subject.IsMandatory,\r\n          MinCredits: subject.MinCredits,\r\n          MaxCredits: subject.MaxCredits,\r\n          SortOrder: subject.SortOrder ?? index + 1,\r\n        })),\r\n      });\r\n\r\n      return tx.program.findUnique({\r\n        where: {\r\n          ProgramID: data.ProgramID,\r\n        },\r\n        include: {\r\n          gradelevel: true,\r\n          program_subject: {\r\n            include: {\r\n              subject: true,\r\n            },\r\n            orderBy: {\r\n              SortOrder: \"asc\",\r\n            },\r\n          },\r\n        },\r\n      });\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Get program subjects with full subject details (for MOE validation)\r\n   */\r\n  async getProgramSubjectsWithDetails(programId: number) {\r\n    return prisma.program_subject.findMany({\r\n      where: {\r\n        ProgramID: programId,\r\n      },\r\n      include: {\r\n        subject: true,\r\n      },\r\n      orderBy: {\r\n        SortOrder: \"asc\",\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Delete a program\r\n   * Note: Will cascade delete program_subject entries\r\n   * Will set ProgramID to null in gradelevel (due to SetNull)\r\n   */\r\n  async delete(programId: number) {\r\n    return prisma.program.delete({\r\n      where: {\r\n        ProgramID: programId,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Count programs by filters (for pagination)\r\n   */\r\n  async count(filters: {\r\n    Year?: number;\r\n    Track?: ProgramTrack;\r\n    IsActive?: boolean;\r\n  }) {\r\n    return prisma.program.count({\r\n      where: {\r\n        ...(filters.Year !== undefined && { Year: filters.Year }),\r\n        ...(filters.Track && { Track: filters.Track }),\r\n        ...(filters.IsActive !== undefined && { IsActive: filters.IsActive }),\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Get programs grouped by Year (for program management page)\r\n   */\r\n  async findGroupedByYear() {\r\n    const programs = await prisma.program.findMany({\r\n      where: {\r\n        IsActive: true,\r\n      },\r\n      orderBy: [{ Year: \"asc\" }, { Track: \"asc\" }],\r\n      include: {\r\n        gradelevel: {\r\n          select: {\r\n            GradeID: true,\r\n            Number: true,\r\n          },\r\n        },\r\n        program_subject: {\r\n          select: {\r\n            SubjectCode: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    const grouped: Record<number, typeof programs> = {};\r\n    for (const program of programs) {\r\n      if (!grouped[program.Year]) {\r\n        grouped[program.Year] = [];\r\n      }\r\n      grouped[program.Year]?.push(program);\r\n    }\r\n\r\n    return grouped;\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\presentation\\components\\AssignmentSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\presentation\\components\\MOEValidationAlert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\presentation\\hooks\\useProgramSubjects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\program\\presentation\\hooks\\useSubjectAssignment.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\room\\application\\actions\\room.actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5555,5558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5555,5558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":310,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":310,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7821,7824],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7821,7824],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Application Layer: Room Server Actions\r\n *\r\n * Server Actions for room management feature.\r\n * Uses action wrapper for auth, validation, and error handling.\r\n *\r\n * @module room.actions\r\n */\r\n\r\n\"use server\";\r\n\r\nimport * as v from \"valibot\";\r\nimport { createAction } from \"@/shared/lib/action-wrapper\";\r\nimport { roomRepository } from \"../../infrastructure/repositories/room.repository\";\r\nimport { checkDuplicateRoom } from \"../../domain/services/room-validation.service\";\r\nimport {\r\n  createRoomSchema,\r\n  createRoomsSchema,\r\n  updateRoomSchema,\r\n  updateRoomsSchema,\r\n  deleteRoomsSchema,\r\n  getRoomByIdSchema,\r\n  getAvailableRoomsSchema,\r\n  getOccupiedRoomsSchema,\r\n  type CreateRoomInput,\r\n  type CreateRoomsInput,\r\n  type UpdateRoomInput,\r\n  type UpdateRoomsInput,\r\n  type DeleteRoomsInput,\r\n  type GetRoomByIdInput,\r\n  type GetAvailableRoomsInput,\r\n  type GetOccupiedRoomsInput,\r\n} from \"../schemas/room.schemas\";\r\n\r\n/**\r\n * Get all rooms ordered by RoomID\r\n *\r\n * @returns Array of all rooms\r\n *\r\n * @example\r\n * ```tsx\r\n * const rooms = await getRoomsAction();\r\n * if (!rooms.success) {\r\n *   console.error(rooms.error);\r\n * } else {\r\n *   console.log(rooms.data); // room[]\r\n * }\r\n * ```\r\n */\r\nexport const getRoomsAction = createAction(\r\n  v.object({}),\r\n  async () => {\r\n    return await roomRepository.findAll();\r\n  },\r\n);\r\n\r\n/**\r\n * Get a single room by ID\r\n *\r\n * @param input - Room ID\r\n * @returns Single room or null\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await getRoomByIdAction({ RoomID: 1 });\r\n * if (result.success) {\r\n *   console.log(result.data); // room | null\r\n * }\r\n * ```\r\n */\r\nexport const getRoomByIdAction = createAction(\r\n  getRoomByIdSchema,\r\n  async (input: GetRoomByIdInput) => {\r\n    const room = await roomRepository.findById(input.RoomID);\r\n    return room;\r\n  },\r\n);\r\n\r\n/**\r\n * Get available rooms for a specific timeslot\r\n *\r\n * Returns rooms that are NOT scheduled for the given timeslot.\r\n *\r\n * @param input - Timeslot ID\r\n * @returns Array of available rooms\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await getAvailableRoomsAction({ TimeslotID: 'T1' });\r\n * if (result.success) {\r\n *   console.log(result.data); // room[]\r\n * }\r\n * ```\r\n */\r\nexport const getAvailableRoomsAction = createAction(\r\n  getAvailableRoomsSchema,\r\n  async (input: GetAvailableRoomsInput) => {\r\n    const availableRooms = await roomRepository.findAvailableForTimeslot(\r\n      input.TimeslotID,\r\n    );\r\n    return availableRooms;\r\n  },\r\n);\r\n\r\n/**\r\n * Get occupied room IDs for a specific timeslot\r\n *\r\n * Returns array of RoomIDs that are already scheduled for the given timeslot.\r\n * Useful for displaying unavailable/occupied rooms in UI.\r\n *\r\n * @param input - Timeslot ID\r\n * @returns Array of occupied room IDs\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await getOccupiedRoomsAction({ TimeslotID: 'T1' });\r\n * if (result.success) {\r\n *   console.log(result.data); // number[]\r\n * }\r\n * ```\r\n */\r\nexport const getOccupiedRoomsAction = createAction(\r\n  getOccupiedRoomsSchema,\r\n  async (input: GetOccupiedRoomsInput) => {\r\n    const occupiedRoomIDs = await roomRepository.findOccupiedForTimeslot(\r\n      input.TimeslotID,\r\n    );\r\n    return occupiedRoomIDs;\r\n  },\r\n);\r\n\r\n/**\r\n * Create a single room\r\n *\r\n * Validates:\r\n * - No duplicate room (exact match on RoomName, Building, Floor)\r\n *\r\n * @param input - Room data\r\n * @returns Created room with RoomID\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await createRoomAction({\r\n *   RoomName: '301',\r\n *   Building: 'เธญเธฒเธเธฒเธฃ 1',\r\n *   Floor: '3',\r\n * });\r\n *\r\n * if (!result.success) {\r\n *   alert(result.error);\r\n * } else {\r\n *   console.log('Created room:', result.data.RoomID);\r\n * }\r\n * ```\r\n */\r\nexport const createRoomAction = createAction(\r\n  createRoomSchema,\r\n  async (input: CreateRoomInput) => {\r\n    // 1. Check for duplicate room\r\n    const existingRoom = await roomRepository.findDuplicate(input);\r\n    const duplicateCheck = checkDuplicateRoom(input, existingRoom);\r\n\r\n    if (duplicateCheck.isDuplicate) {\r\n      throw new Error(duplicateCheck.reason);\r\n    }\r\n\r\n    // 2. Create room\r\n    const newRoom = await roomRepository.create(input);\r\n\r\n    // 3. Revalidate cache (optional - for future cache optimization)\r\n    // revalidateTag('rooms');\r\n\r\n    return newRoom;\r\n  },\r\n);\r\n\r\n/**\r\n * Create multiple rooms (bulk operation)\r\n *\r\n * Validates each room:\r\n * - No duplicate room\r\n *\r\n * @param input - Array of room data\r\n * @returns Array of created room IDs\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await createRoomsAction([\r\n *   { RoomName: '301', Building: 'เธญเธฒเธเธฒเธฃ 1', Floor: '3' },\r\n *   { RoomName: '302', Building: 'เธญเธฒเธเธฒเธฃ 1', Floor: '3' },\r\n * ]);\r\n *\r\n * if (result.success) {\r\n *   console.log('Created room IDs:', result.data); // [1, 2]\r\n * }\r\n * ```\r\n */\r\nexport const createRoomsAction = createAction(\r\n  createRoomsSchema,\r\n  async (input: CreateRoomsInput) => {\r\n    const createdRooms = await Promise.all(\r\n      input.map(async (roomData) => {\r\n        // 1. Check for duplicate room\r\n        const existingRoom = await roomRepository.findDuplicate(roomData);\r\n        const duplicateCheck = checkDuplicateRoom(roomData, existingRoom);\r\n\r\n        if (duplicateCheck.isDuplicate) {\r\n          throw new Error(duplicateCheck.reason);\r\n        }\r\n\r\n        // 2. Create room\r\n        return await roomRepository.create(roomData);\r\n      }),\r\n    );\r\n\r\n    // 3. Revalidate cache (optional - for future cache optimization)\r\n    // revalidateTag('rooms');\r\n\r\n    // Return array of IDs\r\n    return createdRooms.map((r: any) => r.RoomID);\r\n  },\r\n);\r\n\r\n/**\r\n * Update a single room\r\n *\r\n * Validates:\r\n * - Room exists\r\n *\r\n * @param input - Updated room data with RoomID\r\n * @returns Updated room\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await updateRoomAction({\r\n *   RoomID: 1,\r\n *   RoomName: '301',\r\n *   Building: 'เธญเธฒเธเธฒเธฃ 2',\r\n *   Floor: '3',\r\n * });\r\n *\r\n * if (!result.success) {\r\n *   alert(result.error);\r\n * }\r\n * ```\r\n */\r\nexport const updateRoomAction = createAction(\r\n  updateRoomSchema,\r\n  async (input: UpdateRoomInput) => {\r\n    // 1. Check if room exists\r\n    const existingRoom = await roomRepository.findById(input.RoomID);\r\n\r\n    if (!existingRoom) {\r\n      throw new Error(\"เนเธกเนเธเธเธเนเธญเธกเธนเธฅเธซเนเธญเธ เธเธฃเธธเธ“เธฒเธ•เธฃเธงเธเธชเธญเธเธญเธตเธเธเธฃเธฑเนเธ\");\r\n    }\r\n\r\n    // 2. Update room\r\n    const updatedRoom = await roomRepository.update(input.RoomID, {\r\n      RoomName: input.RoomName,\r\n      Building: input.Building,\r\n      Floor: input.Floor,\r\n    });\r\n\r\n    // 3. Revalidate cache (optional - for future cache optimization)\r\n    // revalidateTag('rooms');\r\n\r\n    return updatedRoom;\r\n  },\r\n);\r\n\r\n/**\r\n * Update multiple rooms (bulk operation)\r\n *\r\n * @param input - Array of updated room data\r\n * @returns Array of updated room IDs\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await updateRoomsAction([\r\n *   { RoomID: 1, RoomName: '301', Building: 'เธญเธฒเธเธฒเธฃ 1', Floor: '3' },\r\n *   { RoomID: 2, RoomName: '302', Building: 'เธญเธฒเธเธฒเธฃ 1', Floor: '3' },\r\n * ]);\r\n * ```\r\n */\r\nexport const updateRoomsAction = createAction(\r\n  updateRoomsSchema,\r\n  async (input: UpdateRoomsInput) => {\r\n    const updatedRooms = await Promise.all(\r\n      input.map(async (roomData) => {\r\n        // 1. Check if room exists\r\n        const existingRoom = await roomRepository.findById(roomData.RoomID);\r\n\r\n        if (!existingRoom) {\r\n          throw new Error(\"เนเธกเนเธเธเธเนเธญเธกเธนเธฅเธซเนเธญเธ เธเธฃเธธเธ“เธฒเธ•เธฃเธงเธเธชเธญเธเธญเธตเธเธเธฃเธฑเนเธ\");\r\n        }\r\n\r\n        // 2. Update room\r\n        return await roomRepository.update(roomData.RoomID, {\r\n          RoomName: roomData.RoomName,\r\n          Building: roomData.Building,\r\n          Floor: roomData.Floor,\r\n        });\r\n      }),\r\n    );\r\n\r\n    // 3. Revalidate cache (optional - for future cache optimization)\r\n    // revalidateTag('rooms');\r\n\r\n    // Return array of IDs\r\n    return updatedRooms.map((r: any) => r.RoomID);\r\n  },\r\n);\r\n\r\n/**\r\n * Delete multiple rooms\r\n *\r\n * @param input - Array of room IDs to delete\r\n * @returns Delete count\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await deleteRoomsAction([1, 2, 3]);\r\n * if (result.success) {\r\n *   console.log(`Deleted ${result.data.count} rooms`);\r\n * }\r\n * ```\r\n */\r\nexport const deleteRoomsAction = createAction(\r\n  deleteRoomsSchema,\r\n  async (input: DeleteRoomsInput) => {\r\n    const result = await roomRepository.deleteMany(input);\r\n\r\n    // Revalidate cache (optional - for future cache optimization)\r\n    // revalidateTag('rooms');\r\n\r\n    return result;\r\n  },\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\room\\application\\schemas\\room.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\room\\domain\\services\\room-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\room\\infrastructure\\repositories\\room.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":112,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2493,2496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2493,2496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":113,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2538,2541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2538,2541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Infrastructure Layer: Room Repository\r\n *\r\n * Handles all database operations for rooms using Prisma.\r\n * Pure data access layer with no business logic.\r\n * Uses React cache() for request-level memoization.\r\n *\r\n * @module room.repository\r\n */\r\n\r\nimport { cache } from \"react\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport type {\r\n  CreateRoomInput,\r\n  UpdateRoomInput,\r\n} from \"../../application/schemas/room.schemas\";\r\n\r\n/**\r\n * Find all rooms ordered by RoomID\r\n * Cached per request using React cache()\r\n */\r\nconst findAllRooms = cache(async () => {\r\n  return prisma.room.findMany({\r\n    orderBy: {\r\n      RoomID: \"asc\",\r\n    },\r\n  });\r\n});\r\n\r\n/**\r\n * Find a single room by ID\r\n * Cached per request using React cache()\r\n */\r\nconst findRoomById = cache(async (roomId: number) => {\r\n  return prisma.room.findUnique({\r\n    where: {\r\n      RoomID: roomId,\r\n    },\r\n  });\r\n});\r\n\r\nexport const roomRepository = {\r\n  /**\r\n   * Find all rooms ordered by RoomID\r\n   * Cached per request using React cache()\r\n   */\r\n  async findAll() {\r\n    return findAllRooms();\r\n  },\r\n\r\n  /**\r\n   * Find a single room by ID\r\n   * Cached per request using React cache()\r\n   */\r\n  async findById(roomId: number) {\r\n    return findRoomById(roomId);\r\n  },\r\n\r\n  /**\r\n   * Check if a room with exact details already exists\r\n   */\r\n  async findDuplicate(data: CreateRoomInput) {\r\n    return prisma.room.findFirst({\r\n      where: {\r\n        RoomName: data.RoomName,\r\n        Building: data.Building,\r\n        Floor: data.Floor,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find available rooms for a specific timeslot\r\n   * (rooms that are NOT scheduled for the given timeslot)\r\n   */\r\n  async findAvailableForTimeslot(timeslotId: string) {\r\n    return prisma.room.findMany({\r\n      where: {\r\n        class_schedule: {\r\n          every: {\r\n            NOT: {\r\n              TimeslotID: timeslotId,\r\n            },\r\n          },\r\n        },\r\n      },\r\n      orderBy: {\r\n        RoomName: \"asc\",\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find occupied room IDs for a specific timeslot\r\n   * Returns array of RoomIDs that are already scheduled\r\n   */\r\n  async findOccupiedForTimeslot(timeslotId: string) {\r\n    const occupiedRooms = await prisma.class_schedule.findMany({\r\n      where: {\r\n        TimeslotID: timeslotId,\r\n        RoomID: {\r\n          not: null,\r\n        },\r\n      },\r\n      select: {\r\n        RoomID: true,\r\n      },\r\n      distinct: [\"RoomID\"],\r\n    });\r\n\r\n    return occupiedRooms\r\n      .map((schedule: any) => schedule.RoomID)\r\n      .filter((id: any): id is number => id !== null);\r\n  },\r\n\r\n  /**\r\n   * Create a single room\r\n   */\r\n  async create(data: CreateRoomInput) {\r\n    return prisma.room.create({\r\n      data: {\r\n        RoomName: data.RoomName,\r\n        Building: data.Building,\r\n        Floor: data.Floor,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Update a room by ID\r\n   */\r\n  async update(roomId: number, data: Omit<UpdateRoomInput, \"RoomID\">) {\r\n    return prisma.room.update({\r\n      where: {\r\n        RoomID: roomId,\r\n      },\r\n      data: {\r\n        RoomName: data.RoomName,\r\n        Building: data.Building,\r\n        Floor: data.Floor,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Delete multiple rooms by IDs\r\n   */\r\n  async deleteMany(roomIds: number[]) {\r\n    return prisma.room.deleteMany({\r\n      where: {\r\n        RoomID: {\r\n          in: roomIds,\r\n        },\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Get room count (useful for statistics)\r\n   */\r\n  async count() {\r\n    return prisma.room.count();\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\application\\actions\\schedule-arrangement.actions.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\application\\actions\\schedule-arrangement.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\application\\schemas\\schedule-arrangement.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\domain\\constants\\arrangement.constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\domain\\constants\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\domain\\models\\conflict.model.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\domain\\services\\conflict-detector.service.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\domain\\services\\conflict-detector.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\infrastructure\\repositories\\schedule.repository.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\infrastructure\\repositories\\schedule.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1872,1875],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1872,1875],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":113,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3475,3478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3475,3478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Infrastructure Layer: Schedule Repository\r\n *\r\n * Data access layer for schedule-related database operations.\r\n * Uses Prisma ORM to interact with MySQL database.\r\n *\r\n * Responsibilities:\r\n * - Fetch schedules and related data\r\n * - Create, update, delete schedules\r\n * - Transform Prisma types to domain models\r\n *\r\n * @module schedule.repository\r\n */\r\n\r\nimport prisma from \"@/lib/prisma\";\r\nimport { semester } from \"@/prisma/generated/client\";\r\nimport type {\r\n  ExistingSchedule,\r\n  TeacherResponsibility,\r\n} from \"../../domain/models/conflict.model\";\r\n\r\n/**\r\n * Repository for schedule-related database operations\r\n */\r\nexport class ScheduleRepository {\r\n  /**\r\n   * Find all schedules for a specific academic term\r\n   * Includes teacher information for conflict detection\r\n   *\r\n   * @param academicYear - Academic year (e.g., 2566)\r\n   * @param semester - Semester (SEMESTER_1 or SEMESTER_2)\r\n   * @returns Array of existing schedules with full details\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * const repo = new ScheduleRepository();\r\n   * const schedules = await repo.findSchedulesByTerm(2566, 'SEMESTER_1');\r\n   * // Returns schedules with teacher names, room names, subject names\r\n   * ```\r\n   */\r\n  async findSchedulesByTerm(\r\n    academicYear: number,\r\n    semesterValue: string,\r\n  ): Promise<ExistingSchedule[]> {\r\n    const schedules = await prisma.class_schedule.findMany({\r\n      where: {\r\n        timeslot: {\r\n          AcademicYear: academicYear,\r\n          Semester: semesterValue as semester,\r\n        },\r\n      },\r\n      include: {\r\n        subject: true,\r\n        room: true,\r\n        gradelevel: true,\r\n        timeslot: true,\r\n        teachers_responsibility: {\r\n          include: {\r\n            teacher: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    // Transform Prisma types to domain model\r\n    return schedules.map((schedule: any) => {\r\n      // Get the first teacher from teachers_responsibility (if any)\r\n      const firstTeacher = schedule.teachers_responsibility[0];\r\n      const teacher = firstTeacher?.teacher;\r\n\r\n      return {\r\n        classId: schedule.ClassID,\r\n        timeslotId: schedule.TimeslotID,\r\n        subjectCode: schedule.SubjectCode,\r\n        subjectName: schedule.subject.SubjectName,\r\n        roomId: schedule.RoomID,\r\n        roomName: schedule.room?.RoomName,\r\n        gradeId: schedule.GradeID,\r\n        isLocked: schedule.IsLocked,\r\n        teacherId: teacher?.TeacherID,\r\n        teacherName: teacher\r\n          ? `${teacher.Prefix} ${teacher.Firstname} ${teacher.Lastname}`\r\n          : undefined,\r\n      };\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Find all teacher responsibilities for a specific academic term\r\n   * Used for checking if teachers are assigned to teach specific subjects/grades\r\n   *\r\n   * @param academicYear - Academic year\r\n   * @param semester - Semester\r\n   * @returns Array of teacher responsibilities\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * const responsibilities = await repo.findResponsibilitiesByTerm(2566, 'SEMESTER_1');\r\n   * // Returns which teachers can teach which subjects for which grades\r\n   * ```\r\n   */\r\n  async findResponsibilitiesByTerm(\r\n    academicYear: number,\r\n    semesterValue: string,\r\n  ): Promise<TeacherResponsibility[]> {\r\n    const responsibilities = await prisma.teachers_responsibility.findMany({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semesterValue as semester,\r\n      },\r\n    });\r\n\r\n    return responsibilities.map((resp: any) => ({\r\n      respId: resp.RespID,\r\n      teacherId: resp.TeacherID,\r\n      gradeId: resp.GradeID,\r\n      subjectCode: resp.SubjectCode,\r\n      academicYear: resp.AcademicYear,\r\n      semester: resp.Semester,\r\n      teachHour: resp.TeachHour,\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Create a new schedule entry\r\n   *\r\n   * @param data - Schedule data to create\r\n   * @returns Created schedule\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * const schedule = await repo.createSchedule({\r\n   *   ClassID: 'C_001',\r\n   *   TimeslotID: 'T1',\r\n   *   SubjectCode: 'MATH101',\r\n   *   RoomID: 101,\r\n   *   GradeID: 'M1-1',\r\n   *   IsLocked: false,\r\n   * });\r\n   * ```\r\n   */\r\n  async createSchedule(data: {\r\n    TimeslotID: string;\r\n    SubjectCode: string;\r\n    RoomID?: number | null;\r\n    GradeID: string;\r\n    IsLocked?: boolean;\r\n  }) {\r\n    return await prisma.class_schedule.create({\r\n      data,\r\n      include: {\r\n        subject: true,\r\n        room: true,\r\n        gradelevel: true,\r\n        timeslot: true,\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update an existing schedule entry\r\n   *\r\n   * @param classId - Class ID to update\r\n   * @param data - Fields to update\r\n   * @returns Updated schedule\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * const updated = await repo.updateSchedule('C_001', {\r\n   *   RoomID: 102,\r\n   *   IsLocked: true,\r\n   * });\r\n   * ```\r\n   */\r\n  async updateSchedule(\r\n    classId: number,\r\n    data: {\r\n      TimeslotID?: string;\r\n      SubjectCode?: string;\r\n      RoomID?: number | null;\r\n      GradeID?: string;\r\n      IsLocked?: boolean;\r\n    },\r\n  ) {\r\n    return await prisma.class_schedule.update({\r\n      where: { ClassID: classId },\r\n      data,\r\n      include: {\r\n        subject: true,\r\n        room: true,\r\n        gradelevel: true,\r\n        timeslot: true,\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Delete a schedule entry\r\n   *\r\n   * @param classId - Class ID to delete\r\n   * @returns Deleted schedule\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * await repo.deleteSchedule('C_001');\r\n   * ```\r\n   */\r\n  async deleteSchedule(classId: number) {\r\n    return await prisma.class_schedule.delete({\r\n      where: { ClassID: classId },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Find a specific schedule by class ID\r\n   *\r\n   * @param classId - Class ID to find\r\n   * @returns Schedule or null if not found\r\n   */\r\n  async findScheduleById(classId: number) {\r\n    return await prisma.class_schedule.findUnique({\r\n      where: { ClassID: classId },\r\n      include: {\r\n        subject: true,\r\n        room: true,\r\n        gradelevel: true,\r\n        timeslot: true,\r\n        teachers_responsibility: {\r\n          include: {\r\n            teacher: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Link a teacher to a class schedule\r\n   * Creates/updates the many-to-many relationship\r\n   *\r\n   * @param classId - Class schedule ID\r\n   * @param respId - Teacher responsibility ID\r\n   */\r\n  async linkTeacherToSchedule(classId: number, respId: number) {\r\n    // This updates the many-to-many relation\r\n    return await prisma.teachers_responsibility.update({\r\n      where: { RespID: respId },\r\n      data: {\r\n        class_schedule: {\r\n          connect: { ClassID: classId },\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Unlink a teacher from a class schedule\r\n   *\r\n   * @param classId - Class schedule ID\r\n   * @param respId - Teacher responsibility ID\r\n   */\r\n  async unlinkTeacherFromSchedule(classId: number, respId: number) {\r\n    return await prisma.teachers_responsibility.update({\r\n      where: { RespID: respId },\r\n      data: {\r\n        class_schedule: {\r\n          disconnect: { ClassID: classId },\r\n        },\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Singleton instance for use across the application\r\n */\r\nexport const scheduleRepository = new ScheduleRepository();\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\components\\examples\\DraggableSubjectCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\components\\examples\\DroppableTimeslot.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_timeSlotData' is assigned a value but never used.","line":135,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":135,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_setShowErrorMsg' is assigned a value but never used.","line":137,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":137,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_setIsSaving' is assigned a value but never used.","line":140,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":140,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * DroppableTimeslot.tsx\r\n *\r\n * MIGRATION EXAMPLE: react-beautiful-dnd โ’ @dnd-kit\r\n * STORE USAGE: Zustand arrangement-ui.store.ts\r\n *\r\n * This component demonstrates:\r\n * 1. Zustand store for timeslot state and validation\r\n * 2. @dnd-kit useDroppable for drop zones (replaces react-beautiful-dnd's Droppable)\r\n * 3. Integration with conflict detection service\r\n * 4. Server Action calls for schedule updates\r\n *\r\n * BEFORE (react-beautiful-dnd):\r\n * ```tsx\r\n * <Droppable droppableId={timeslotId}>\r\n *   {(provided, snapshot) => (\r\n *     <div ref={provided.innerRef} {...provided.droppableProps}>\r\n *       {children}\r\n *       {provided.placeholder}\r\n *     </div>\r\n *   )}\r\n * </Droppable>\r\n * ```\r\n *\r\n * AFTER (@dnd-kit):\r\n * ```tsx\r\n * const {setNodeRef, isOver} = useDroppable({id: timeslotId, data: {...}});\r\n * <div ref={setNodeRef}>\r\n *   {children}\r\n * </div>\r\n * ```\r\n */\r\n\r\n\"use client\";\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport { useDroppable } from \"@dnd-kit/core\";\r\nimport { Box, Paper, Typography, Chip, CircularProgress } from \"@mui/material\";\r\nimport LockIcon from \"@mui/icons-material/Lock\";\r\nimport WarningIcon from \"@mui/icons-material/Warning\";\r\nimport CheckCircleIcon from \"@mui/icons-material/CheckCircle\";\r\n\r\n// Import Zustand store hooks\r\nimport {\r\n  useArrangementUIStore,\r\n  useTimeslotData,\r\n  useSaveState,\r\n} from \"../../stores/arrangement-ui.store\";\r\n\r\n/**\r\n * Props interface for DroppableTimeslot\r\n *\r\n * MIGRATION NOTE:\r\n * - react-beautiful-dnd: droppableId, type, isDropDisabled\r\n * - @dnd-kit: id, data (for validation), disabled\r\n */\r\ninterface DroppableTimeslotProps {\r\n  /** Unique timeslot identifier */\r\n  timeslotId: string;\r\n\r\n  /** Day of week (1-7 for Mon-Sun) */\r\n  dayOfWeek: number;\r\n\r\n  /** Time display (e.g., \"08:00 - 09:00\") */\r\n  timeRange: string;\r\n\r\n  /** Current subject assigned (if any) */\r\n  assignedSubject?: {\r\n    subjectCode: string;\r\n    subjectName: string;\r\n    roomName?: string;\r\n  };\r\n\r\n  /** Whether this timeslot is locked (e.g., assembly) */\r\n  isLocked?: boolean;\r\n\r\n  /** Grade context for conflict checking */\r\n  gradeId: string;\r\n\r\n  /** Teacher context for conflict checking */\r\n  teacherId?: string;\r\n}\r\n\r\n/**\r\n * Day name mapping for display\r\n */\r\nconst DAY_NAMES: Record<number, string> = {\r\n  1: \"เธเธฑเธเธ—เธฃเน\",\r\n  2: \"เธญเธฑเธเธเธฒเธฃ\",\r\n  3: \"เธเธธเธ\",\r\n  4: \"เธเธคเธซเธฑเธชเธเธ”เธต\",\r\n  5: \"เธจเธธเธเธฃเน\",\r\n  6: \"เน€เธชเธฒเธฃเน\",\r\n  7: \"เธญเธฒเธ—เธดเธ•เธขเน\",\r\n};\r\n\r\n/**\r\n * DroppableTimeslot Component\r\n *\r\n * Renders a droppable timeslot cell that:\r\n * 1. Uses Zustand store for conflict data and save state\r\n * 2. Uses @dnd-kit for drop zone functionality\r\n * 3. Shows visual feedback for drag-over states\r\n * 4. Validates drops using conflict detection service\r\n * 5. Calls Server Actions for persistence\r\n *\r\n * @example\r\n * ```tsx\r\n * <DroppableTimeslot\r\n *   timeslotId=\"slot-123\"\r\n *   dayOfWeek={1}\r\n *   timeRange=\"08:00 - 09:00\"\r\n *   gradeId=\"grade-10-1\"\r\n *   teacherId=\"teacher-123\"\r\n * />\r\n * ```\r\n */\r\nexport function DroppableTimeslot({\r\n  timeslotId,\r\n  dayOfWeek,\r\n  timeRange,\r\n  assignedSubject,\r\n  isLocked = false,\r\n  gradeId,\r\n  teacherId,\r\n}: DroppableTimeslotProps) {\r\n  /**\r\n   * ZUSTAND STORE INTEGRATION\r\n   *\r\n   * Using selector hooks and store actions:\r\n   * - timeSlotData: All timeslot data including assignments\r\n   * - isSaving: Save operation state\r\n   * - Store actions: setShowErrorMsg, setIsSaving\r\n   */\r\n  const _timeSlotData = useTimeslotData(); // Selector hook - available for future use\r\n  const isSaving = useSaveState(); // Returns boolean directly\r\n  const _setShowErrorMsg = useArrangementUIStore(\r\n    (state) => state.setShowErrorMsg,\r\n  );\r\n  const _setIsSaving = useArrangementUIStore((state) => state.setIsSaving);\r\n\r\n  /**\r\n   * Check if this specific timeslot has conflicts\r\n   * (In real implementation, this would come from conflict detection service)\r\n   */\r\n  const hasConflict = useMemo(() => {\r\n    // Example: Check if timeslot has error flag in store\r\n    // In actual implementation, integrate with ConflictDetectorService\r\n    return false; // Placeholder - integrate with conflict detection\r\n  }, []);\r\n\r\n  /**\r\n   * @DND-KIT INTEGRATION\r\n   *\r\n   * useDroppable hook replaces react-beautiful-dnd's Droppable:\r\n   * - setNodeRef: Ref to attach to droppable element\r\n   * - isOver: Boolean indicating if draggable is over this droppable\r\n   * - active: Current draggable data (or null)\r\n   *\r\n   * MIGRATION MAPPING:\r\n   * react-beautiful-dnd          โ’  @dnd-kit\r\n   * ----------------------------- โ’ ---------------------------\r\n   * provided.innerRef             โ’  setNodeRef\r\n   * provided.droppableProps       โ’  (no equivalent - just use ref)\r\n   * snapshot.isDraggingOver       โ’  isOver\r\n   * snapshot.draggingOverWith     โ’  active?.id\r\n   * provided.placeholder          โ’  (not needed - CSS handles layout)\r\n   *\r\n   * Data property usage:\r\n   * - Pass context for validation in DndContext.onDragOver/onDragEnd\r\n   * - Allows type checking (e.g., only accept 'subject' draggables)\r\n   */\r\n  const { setNodeRef, isOver, active } = useDroppable({\r\n    id: timeslotId,\r\n    disabled: isLocked || isSaving,\r\n    data: {\r\n      type: \"timeslot\",\r\n      timeslotId,\r\n      dayOfWeek,\r\n      gradeId,\r\n      teacherId,\r\n      isLocked,\r\n      hasAssignment: !!assignedSubject,\r\n    },\r\n  });\r\n\r\n  /**\r\n   * Determine if drop is valid based on dragging item\r\n   *\r\n   * This is a client-side preview - actual validation happens server-side\r\n   * via conflict detection service in Server Action\r\n   */\r\n  const canAcceptDrop = useMemo(() => {\r\n    if (!active || isLocked) return false;\r\n\r\n    // Check if dragging a subject\r\n    const dragData = active.data.current;\r\n    if (dragData?.type !== \"subject\") return false;\r\n\r\n    // Check if subject has remaining hours\r\n    if (dragData.remainingHours <= 0) return false;\r\n\r\n    // Check if dropping on same teacher's slot\r\n    if (teacherId && dragData.teacherId !== teacherId) return false;\r\n\r\n    return true;\r\n  }, [active, isLocked, teacherId]);\r\n\r\n  /**\r\n   * Visual state calculation\r\n   */\r\n  const bgColor = useMemo(() => {\r\n    if (isLocked) return \"action.disabledBackground\";\r\n    if (hasConflict) return \"error.light\";\r\n    if (isOver && canAcceptDrop) return \"success.light\";\r\n    if (isOver && !canAcceptDrop) return \"error.light\";\r\n    if (assignedSubject) return \"primary.light\";\r\n    return \"background.paper\";\r\n  }, [isLocked, hasConflict, isOver, canAcceptDrop, assignedSubject]);\r\n\r\n  const borderColor = useMemo(() => {\r\n    if (isLocked) return \"action.disabled\";\r\n    if (hasConflict) return \"error.main\";\r\n    if (isOver && canAcceptDrop) return \"success.main\";\r\n    if (isOver && !canAcceptDrop) return \"error.main\";\r\n    if (assignedSubject) return \"primary.main\";\r\n    return \"divider\";\r\n  }, [isLocked, hasConflict, isOver, canAcceptDrop, assignedSubject]);\r\n\r\n  /**\r\n   * Status icon based on state\r\n   */\r\n  const StatusIcon = useMemo(() => {\r\n    if (isSaving) return <CircularProgress size={16} />;\r\n    if (isLocked) return <LockIcon fontSize=\"small\" />;\r\n    if (hasConflict) return <WarningIcon fontSize=\"small\" color=\"error\" />;\r\n    if (assignedSubject && !hasConflict)\r\n      return <CheckCircleIcon fontSize=\"small\" color=\"success\" />;\r\n    return null;\r\n  }, [isSaving, isLocked, hasConflict, assignedSubject]);\r\n\r\n  return (\r\n    <Paper\r\n      ref={setNodeRef}\r\n      elevation={isOver ? 4 : 1}\r\n      sx={{\r\n        p: 1.5,\r\n        minHeight: 100,\r\n        border: 2,\r\n        borderColor,\r\n        bgcolor: bgColor,\r\n        transition: \"all 0.2s ease\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: 0.5,\r\n        // Visual feedback for drag over\r\n        transform: isOver ? \"scale(1.02)\" : \"scale(1)\",\r\n        // Disable pointer events during save\r\n        pointerEvents: isSaving ? \"none\" : \"auto\",\r\n        opacity: isLocked ? 0.6 : 1,\r\n      }}\r\n    >\r\n      {/* Header: Time and Status */}\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Typography\r\n          variant=\"caption\"\r\n          fontWeight=\"medium\"\r\n          color=\"text.secondary\"\r\n        >\r\n          {DAY_NAMES[dayOfWeek]} {timeRange}\r\n        </Typography>\r\n        {StatusIcon}\r\n      </Box>\r\n\r\n      {/* Assigned Subject Display */}\r\n      {assignedSubject && (\r\n        <Box>\r\n          <Typography variant=\"body2\" fontWeight=\"bold\" noWrap>\r\n            {assignedSubject.subjectCode}\r\n          </Typography>\r\n          <Typography variant=\"caption\" color=\"text.secondary\" noWrap>\r\n            {assignedSubject.subjectName}\r\n          </Typography>\r\n          {assignedSubject.roomName && (\r\n            <Chip\r\n              label={assignedSubject.roomName}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{ mt: 0.5, height: 20, fontSize: \"0.7rem\" }}\r\n            />\r\n          )}\r\n        </Box>\r\n      )}\r\n\r\n      {/* Locked State Message */}\r\n      {isLocked && (\r\n        <Typography variant=\"caption\" color=\"text.disabled\" fontStyle=\"italic\">\r\n          เธเนเธงเธเน€เธงเธฅเธฒเธ–เธนเธเธฅเนเธญเธ\r\n        </Typography>\r\n      )}\r\n\r\n      {/* Drop Preview Message */}\r\n      {isOver && (\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            inset: 0,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            bgcolor: canAcceptDrop\r\n              ? \"rgba(46, 125, 50, 0.1)\"\r\n              : \"rgba(211, 47, 47, 0.1)\",\r\n            border: 2,\r\n            borderColor: canAcceptDrop ? \"success.main\" : \"error.main\",\r\n            borderStyle: \"dashed\",\r\n            borderRadius: 1,\r\n            pointerEvents: \"none\",\r\n          }}\r\n        >\r\n          <Typography\r\n            variant=\"body2\"\r\n            fontWeight=\"bold\"\r\n            color={canAcceptDrop ? \"success.main\" : \"error.main\"}\r\n          >\r\n            {canAcceptDrop ? \"เธงเธฒเธเธ—เธตเนเธเธตเน\" : \"เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธงเธฒเธเนเธ”เน\"}\r\n          </Typography>\r\n        </Box>\r\n      )}\r\n\r\n      {/* Conflict Warning */}\r\n      {hasConflict && !isOver && (\r\n        <Box sx={{ mt: \"auto\" }}>\r\n          <Chip\r\n            icon={<WarningIcon />}\r\n            label=\"เธกเธตเธเนเธญเธเธฑเธ”เนเธขเนเธ\"\r\n            size=\"small\"\r\n            color=\"error\"\r\n            variant=\"filled\"\r\n            sx={{ height: 24, fontSize: \"0.7rem\" }}\r\n          />\r\n        </Box>\r\n      )}\r\n    </Paper>\r\n  );\r\n}\r\n\r\n/**\r\n * USAGE EXAMPLE WITH DNDCONTEXT:\r\n *\r\n * ```tsx\r\n * 'use client';\r\n *\r\n * import { DndContext, DragEndEvent, closestCenter, PointerSensor, useSensor, useSensors } from '@dnd-kit/core';\r\n * import { DroppableTimeslot } from './DroppableTimeslot';\r\n * import { useArrangementUIStore } from '../stores/arrangement-ui.store';\r\n * import { arrangeScheduleAction } from '@/features/schedule-arrangement/application/actions/schedule-arrangement.actions';\r\n *\r\n * export function TimetableGrid() {\r\n *   const sensors = useSensors(\r\n *     useSensor(PointerSensor, {\r\n *       activationConstraint: { distance: 10 }\r\n *     })\r\n *   );\r\n *\r\n *   const setIsSaving = useArrangementUIStore((state) => state.setIsSaving);\r\n *   const setShowErrorMsg = useArrangementUIStore((state) => state.setShowErrorMsg);\r\n *\r\n *   const handleDragEnd = async (event: DragEndEvent) => {\r\n *     const { active, over } = event;\r\n *     if (!over) return;\r\n *\r\n *     // Get drag data\r\n *     const subjectData = active.data.current;\r\n *     const timeslotData = over.data.current;\r\n *\r\n *     // Validate drop target\r\n *     if (timeslotData?.type !== 'timeslot') return;\r\n *     if (timeslotData.isLocked) return;\r\n *\r\n *     // Call Server Action with optimistic UI\r\n *     setIsSaving(true);\r\n *     try {\r\n *       const result = await arrangeScheduleAction({\r\n *         timeslotId: timeslotData.timeslotId,\r\n *         subjectCode: subjectData.subjectCode,\r\n *         teacherId: subjectData.teacherId,\r\n *         gradeId: timeslotData.gradeId,\r\n *         roomId: null, // Room selection handled separately\r\n *       });\r\n *\r\n *       if (!result.success) {\r\n *         setShowErrorMsg(timeslotData.timeslotId, true);\r\n *       }\r\n *     } catch (error) {\r\n *       console.error('Failed to arrange schedule:', error);\r\n *       setShowErrorMsg(timeslotData.timeslotId, true);\r\n *     } finally {\r\n *       setIsSaving(false);\r\n *     }\r\n *   };\r\n *\r\n *   return (\r\n *     <DndContext\r\n *       sensors={sensors}\r\n *       collisionDetection={closestCenter}\r\n *       onDragEnd={handleDragEnd}\r\n *     >\r\n *       <Grid container spacing={1}>\r\n *         {timeslots.map((slot) => (\r\n *           <Grid item xs={12} sm={6} md={4} key={slot.timeslotId}>\r\n *             <DroppableTimeslot\r\n *               timeslotId={slot.timeslotId}\r\n *               dayOfWeek={slot.dayOfWeek}\r\n *               timeRange={`${slot.startTime} - ${slot.endTime}`}\r\n *               gradeId={currentGrade}\r\n *               teacherId={currentTeacher}\r\n *               assignedSubject={slot.assignment}\r\n *               isLocked={slot.isLocked}\r\n *             />\r\n *           </Grid>\r\n *         ))}\r\n *       </Grid>\r\n *     </DndContext>\r\n *   );\r\n * }\r\n * ```\r\n *\r\n * MIGRATION NOTES:\r\n *\r\n * 1. NO PLACEHOLDER NEEDED:\r\n *    - react-beautiful-dnd: required {provided.placeholder} for layout\r\n *    - @dnd-kit: CSS handles layout automatically\r\n *\r\n * 2. COLLISION DETECTION:\r\n *    - Built-in strategies: closestCenter, closestCorners, rectIntersection, pointerWithin\r\n *    - Custom strategies for complex layouts\r\n *\r\n * 3. DATA PROP PATTERN:\r\n *    - Pass validation context via data prop\r\n *    - Access in onDragEnd: event.active.data.current, event.over.data.current\r\n *    - Type-safe with TypeScript generics\r\n *\r\n * 4. SENSOR CONFIGURATION:\r\n *    - PointerSensor: Mouse/touch with activation constraints\r\n *    - KeyboardSensor: Accessibility support\r\n *    - Custom sensors for specific input handling\r\n *\r\n * 5. PERFORMANCE:\r\n *    - @dnd-kit uses transform instead of position for 60fps\r\n *    - Minimal re-renders with proper memoization\r\n *    - Zustand selectors prevent unnecessary updates\r\n */\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\hooks\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\hooks\\useArrangeSchedule.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\hooks\\useConflictValidation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\hooks\\useScheduleFilters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\stores\\arrangement-ui.store.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":465,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":465,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13747,13750],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13747,13750],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":487,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":487,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14365,14368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14365,14368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Schedule Arrangement UI Store\r\n *\r\n * Manages all UI state for the teacher/student schedule arrangement pages.\r\n * Replaces 34+ useState hooks with centralized Zustand state management.\r\n *\r\n * Created: Week 5 - Phase 2 Refactoring\r\n * Pattern: Zustand store with devtools middleware\r\n * Related Docs: Context7 Zustand v5.0.8\r\n */\r\n\r\nimport { create } from \"zustand\";\r\nimport { devtools } from \"zustand/middleware\";\r\nimport type { class_schedule, teacher } from \"@/prisma/generated/client\";\r\n\r\n// Phase 1: Import strict types from schedule.types.ts\r\nimport type {\r\n  SubjectData,\r\n  TimeslotData,\r\n  SubjectPayload,\r\n  TimeslotChange,\r\n  BreakSlotData,\r\n  DayOfWeekDisplay,\r\n  TimeslotErrorStateMap,\r\n} from \"@/types/schedule.types\";\r\n\r\n// ============================================================================\r\n// Type Definitions (imported from schedule.types.ts)\r\n// ============================================================================\r\n\r\n// Phase 1: All main types imported from @/types/schedule.types\r\n// Local definitions removed to avoid conflicts\r\n\r\n// Issue #108: Migrated ErrorState โ’ TimeslotErrorStateMap (from schedule.types.ts)\r\n// Future optimization: Consider migrating to Set-based TimeslotErrorState for O(1) lookups\r\n\r\n// ============================================================================\r\n// Store State Interface\r\n// ============================================================================\r\n\r\ninterface ArrangementUIState {\r\n  // === Teacher Selection ===\r\n  currentTeacherID: string | null;\r\n  teacherData: teacher | null;\r\n\r\n  // === Subject Selection & Dragging ===\r\n  selectedSubject: SubjectData | null; // Changed from non-null to nullable\r\n  draggedSubject: SubjectData | null;\r\n  yearSelected: number | null;\r\n\r\n  // === Subject Change/Swap Operations ===\r\n  changeTimeSlotSubject: SubjectData | null; // Changed from non-null to nullable\r\n  destinationSubject: SubjectData | null; // Changed from non-null to nullable\r\n  timeslotIDtoChange: TimeslotChange;\r\n  isClickToChangeSubject: boolean; // Fixed typo: was isCilckToChangeSubject\r\n\r\n  // === Subject Data ===\r\n  subjectData: SubjectData[];\r\n  scheduledSubjects: SubjectData[];\r\n\r\n  // === Timeslot Data ===\r\n  timeSlotData: {\r\n    AllData: TimeslotData[];\r\n    SlotAmount: number[];\r\n    DayOfWeek: DayOfWeekDisplay[]; // Use proper type\r\n    BreakSlot: BreakSlotData[]; // Use proper type\r\n  };\r\n  lockData: class_schedule[];\r\n\r\n  // === Modal State ===\r\n  isActiveModal: boolean;\r\n  subjectPayload: SubjectPayload | null; // Changed to nullable\r\n\r\n  // === Error & Lock Display ===\r\n  showErrorMsgByTimeslotID: TimeslotErrorStateMap;\r\n  showLockDataMsgByTimeslotID: TimeslotErrorStateMap;\r\n\r\n  // === Save State ===\r\n  isSaving: boolean;\r\n\r\n  // === Filters (for future use) ===\r\n  filters: {\r\n    academicYear: number | null;\r\n    semester: string | null;\r\n    gradeLevel: string | null;\r\n  };\r\n\r\n  // === History Stack (Undo/Redo) ===\r\n  history: {\r\n    past: SubjectData[][];\r\n    present: SubjectData[];\r\n    future: SubjectData[][];\r\n  };\r\n}\r\n\r\n// ============================================================================\r\n// Store Actions Interface\r\n// ============================================================================\r\n\r\ninterface ArrangementUIActions {\r\n  // === Teacher Actions ===\r\n  setCurrentTeacherID: (id: string | null) => void;\r\n  setTeacherData: (data: teacher | null) => void;\r\n\r\n  // === Subject Selection Actions ===\r\n  setSelectedSubject: (subject: SubjectData | null) => void;\r\n  setDraggedSubject: (subject: SubjectData | null) => void;\r\n  setYearSelected: (year: number | null) => void;\r\n  clearSelectedSubject: () => void;\r\n\r\n  // === Subject Change Actions ===\r\n  setChangeTimeSlotSubject: (subject: SubjectData | null) => void;\r\n  setDestinationSubject: (subject: SubjectData | null) => void;\r\n  setTimeslotIDtoChange: (change: TimeslotChange) => void;\r\n  setIsClickToChangeSubject: (isClicked: boolean) => void;\r\n  clearChangeSubjectState: () => void;\r\n\r\n  // === Subject Data Actions ===\r\n  setSubjectData: (data: SubjectData[]) => void;\r\n  setScheduledSubjects: (subjects: SubjectData[]) => void;\r\n  addSubjectToData: (subject: SubjectData) => void;\r\n  removeSubjectFromData: (subjectCode: string) => void;\r\n\r\n  // === Timeslot Actions ===\r\n  setTimeSlotData: (data: Partial<ArrangementUIState[\"timeSlotData\"]>) => void;\r\n  updateTimeslotSubject: (\r\n    timeslotID: string,\r\n    subject: SubjectData | null,\r\n  ) => void;\r\n  setLockData: (data: class_schedule[]) => void;\r\n\r\n  // === Modal Actions ===\r\n  openModal: (payload: SubjectPayload) => void;\r\n  closeModal: () => void;\r\n  setSubjectPayload: (payload: SubjectPayload) => void;\r\n\r\n  // === Error Display Actions ===\r\n  setShowErrorMsg: (timeslotID: string, show: boolean) => void;\r\n  setShowLockDataMsg: (timeslotID: string, show: boolean) => void;\r\n  clearErrorMessages: () => void;\r\n\r\n  // === Save State Actions ===\r\n  setIsSaving: (saving: boolean) => void;\r\n\r\n  // === Filter Actions ===\r\n  setFilters: (filters: Partial<ArrangementUIState[\"filters\"]>) => void;\r\n\r\n  // === History Actions (Undo/Redo) ===\r\n  pushHistory: (scheduledSubjects: SubjectData[]) => void;\r\n  undo: () => void;\r\n  redo: () => void;\r\n  canUndo: () => boolean;\r\n  canRedo: () => boolean;\r\n  clearHistory: () => void;\r\n\r\n  // === Reset Actions ===\r\n  resetAllState: () => void;\r\n  resetOnTeacherChange: () => void;\r\n}\r\n\r\n// ============================================================================\r\n// Initial State\r\n// ============================================================================\r\n\r\nconst initialState: ArrangementUIState = {\r\n  // Teacher\r\n  currentTeacherID: null,\r\n  teacherData: null,\r\n\r\n  // Subject Selection - now properly null\r\n  selectedSubject: null,\r\n  draggedSubject: null,\r\n  yearSelected: null,\r\n\r\n  // Subject Change - now properly null\r\n  changeTimeSlotSubject: null,\r\n  destinationSubject: null,\r\n  timeslotIDtoChange: { source: \"\", destination: \"\" },\r\n  isClickToChangeSubject: false, // Fixed typo\r\n\r\n  // Subject Data\r\n  subjectData: [],\r\n  scheduledSubjects: [],\r\n\r\n  // Timeslot Data\r\n  timeSlotData: {\r\n    AllData: [],\r\n    SlotAmount: [],\r\n    DayOfWeek: [],\r\n    BreakSlot: [],\r\n  },\r\n  lockData: [],\r\n\r\n  // Modal - now properly null\r\n  isActiveModal: false,\r\n  subjectPayload: null,\r\n\r\n  // Error Display\r\n  showErrorMsgByTimeslotID: {},\r\n  showLockDataMsgByTimeslotID: {},\r\n\r\n  // Save State\r\n  isSaving: false,\r\n\r\n  // Filters\r\n  filters: {\r\n    academicYear: null,\r\n    semester: null,\r\n    gradeLevel: null,\r\n  },\r\n\r\n  // History Stack\r\n  history: {\r\n    past: [],\r\n    present: [],\r\n    future: [],\r\n  },\r\n};\r\n\r\n// ============================================================================\r\n// Store Creation\r\n// ============================================================================\r\n\r\ntype ArrangementUIStore = ArrangementUIState & ArrangementUIActions;\r\n\r\nexport const useArrangementUIStore = create<ArrangementUIStore>()(\r\n  devtools(\r\n    (set, get) => ({\r\n      ...initialState,\r\n\r\n      // === Teacher Actions ===\r\n      setCurrentTeacherID: (id) =>\r\n        set(\r\n          { currentTeacherID: id },\r\n          undefined,\r\n          \"arrangement/setCurrentTeacherID\",\r\n        ),\r\n\r\n      setTeacherData: (data) =>\r\n        set({ teacherData: data }, undefined, \"arrangement/setTeacherData\"),\r\n\r\n      // === Subject Selection Actions ===\r\n      setSelectedSubject: (subject) =>\r\n        set(\r\n          {\r\n            selectedSubject: subject,\r\n            yearSelected: subject?.gradelevel?.year || null, // Fixed casing: Year -> year\r\n          },\r\n          undefined,\r\n          \"arrangement/setSelectedSubject\",\r\n        ),\r\n\r\n      setDraggedSubject: (subject) =>\r\n        set(\r\n          { draggedSubject: subject },\r\n          undefined,\r\n          \"arrangement/setDraggedSubject\",\r\n        ),\r\n\r\n      setYearSelected: (year) =>\r\n        set({ yearSelected: year }, undefined, \"arrangement/setYearSelected\"),\r\n\r\n      clearSelectedSubject: () =>\r\n        set(\r\n          {\r\n            selectedSubject: null,\r\n            draggedSubject: null,\r\n            yearSelected: null,\r\n          },\r\n          undefined,\r\n          \"arrangement/clearSelectedSubject\",\r\n        ),\r\n\r\n      // === Subject Change Actions ===\r\n      setChangeTimeSlotSubject: (subject) =>\r\n        set(\r\n          { changeTimeSlotSubject: subject },\r\n          undefined,\r\n          \"arrangement/setChangeTimeSlotSubject\",\r\n        ),\r\n\r\n      setDestinationSubject: (subject) =>\r\n        set(\r\n          { destinationSubject: subject },\r\n          undefined,\r\n          \"arrangement/setDestinationSubject\",\r\n        ),\r\n\r\n      setTimeslotIDtoChange: (change) =>\r\n        set(\r\n          { timeslotIDtoChange: change },\r\n          undefined,\r\n          \"arrangement/setTimeslotIDtoChange\",\r\n        ),\r\n\r\n      setIsClickToChangeSubject: (\r\n        isClicked: boolean, // Fixed typo, added type\r\n      ) =>\r\n        set(\r\n          { isClickToChangeSubject: isClicked },\r\n          undefined,\r\n          \"arrangement/setIsClickToChangeSubject\",\r\n        ),\r\n\r\n      clearChangeSubjectState: () =>\r\n        set(\r\n          {\r\n            changeTimeSlotSubject: null,\r\n            destinationSubject: null,\r\n            timeslotIDtoChange: { source: \"\", destination: \"\" },\r\n            isClickToChangeSubject: false, // Fixed typo\r\n          },\r\n          undefined,\r\n          \"arrangement/clearChangeSubjectState\",\r\n        ),\r\n\r\n      // === Subject Data Actions ===\r\n      setSubjectData: (data) =>\r\n        set({ subjectData: data }, undefined, \"arrangement/setSubjectData\"),\r\n\r\n      setScheduledSubjects: (subjects) =>\r\n        set(\r\n          { scheduledSubjects: subjects },\r\n          undefined,\r\n          \"arrangement/setScheduledSubjects\",\r\n        ),\r\n\r\n      addSubjectToData: (subject) =>\r\n        set(\r\n          (state) => ({\r\n            subjectData: [...state.subjectData, subject],\r\n          }),\r\n          undefined,\r\n          \"arrangement/addSubjectToData\",\r\n        ),\r\n\r\n      removeSubjectFromData: (subjectCode) =>\r\n        set(\r\n          (state) => ({\r\n            subjectData: state.subjectData.filter(\r\n              (s) => s.subjectCode !== subjectCode,\r\n            ), // Fixed casing\r\n          }),\r\n          undefined,\r\n          \"arrangement/removeSubjectFromData\",\r\n        ),\r\n\r\n      // === Timeslot Actions ===\r\n      setTimeSlotData: (data) =>\r\n        set(\r\n          (state) => ({\r\n            timeSlotData: { ...state.timeSlotData, ...data },\r\n          }),\r\n          undefined,\r\n          \"arrangement/setTimeSlotData\",\r\n        ),\r\n\r\n      updateTimeslotSubject: (timeslotID, subject) =>\r\n        set(\r\n          (state) => ({\r\n            timeSlotData: {\r\n              ...state.timeSlotData,\r\n              AllData: state.timeSlotData.AllData.map((slot) =>\r\n                slot.TimeslotID === timeslotID ? { ...slot, subject } : slot,\r\n              ),\r\n            },\r\n          }),\r\n          undefined,\r\n          \"arrangement/updateTimeslotSubject\",\r\n        ),\r\n\r\n      setLockData: (data) =>\r\n        set({ lockData: data }, undefined, \"arrangement/setLockData\"),\r\n\r\n      // === Modal Actions ===\r\n      openModal: (payload) =>\r\n        set(\r\n          { isActiveModal: true, subjectPayload: payload },\r\n          undefined,\r\n          \"arrangement/openModal\",\r\n        ),\r\n\r\n      closeModal: () =>\r\n        set(\r\n          { isActiveModal: false, subjectPayload: null }, // Fixed: use null instead of empty object\r\n          undefined,\r\n          \"arrangement/closeModal\",\r\n        ),\r\n\r\n      setSubjectPayload: (payload) =>\r\n        set(\r\n          { subjectPayload: payload },\r\n          undefined,\r\n          \"arrangement/setSubjectPayload\",\r\n        ),\r\n\r\n      // === Error Display Actions ===\r\n      setShowErrorMsg: (timeslotID, show) =>\r\n        set(\r\n          (state) => ({\r\n            showErrorMsgByTimeslotID: {\r\n              ...state.showErrorMsgByTimeslotID,\r\n              [timeslotID]: show,\r\n            },\r\n          }),\r\n          undefined,\r\n          \"arrangement/setShowErrorMsg\",\r\n        ),\r\n\r\n      setShowLockDataMsg: (timeslotID, show) =>\r\n        set(\r\n          (state) => ({\r\n            showLockDataMsgByTimeslotID: {\r\n              ...state.showLockDataMsgByTimeslotID,\r\n              [timeslotID]: show,\r\n            },\r\n          }),\r\n          undefined,\r\n          \"arrangement/setShowLockDataMsg\",\r\n        ),\r\n\r\n      clearErrorMessages: () =>\r\n        set(\r\n          {\r\n            showErrorMsgByTimeslotID: {},\r\n            showLockDataMsgByTimeslotID: {},\r\n          },\r\n          undefined,\r\n          \"arrangement/clearErrorMessages\",\r\n        ),\r\n\r\n      // === Save State Actions ===\r\n      setIsSaving: (saving) =>\r\n        set({ isSaving: saving }, undefined, \"arrangement/setIsSaving\"),\r\n\r\n      // === Filter Actions ===\r\n      setFilters: (filters) =>\r\n        set(\r\n          (state) => ({\r\n            filters: { ...state.filters, ...filters },\r\n          }),\r\n          undefined,\r\n          \"arrangement/setFilters\",\r\n        ),\r\n\r\n      // === History Actions (Undo/Redo) ===\r\n      pushHistory: (scheduledSubjects) =>\r\n        set(\r\n          (state) => ({\r\n            history: {\r\n              past: [...state.history.past, state.history.present],\r\n              present: scheduledSubjects,\r\n              future: [], // Clear future when new action is performed\r\n            },\r\n            scheduledSubjects,\r\n          }),\r\n          undefined,\r\n          \"arrangement/pushHistory\",\r\n        ),\r\n\r\n      undo: () =>\r\n        set(\r\n          (state) => {\r\n            const { past, present, future } = state.history;\r\n            if (past.length === 0) return state as any;\r\n\r\n            const previous = past[past.length - 1];\r\n            const newPast = past.slice(0, past.length - 1);\r\n\r\n            return {\r\n              history: {\r\n                past: newPast,\r\n                present: previous,\r\n                future: [present, ...future],\r\n              },\r\n              scheduledSubjects: previous,\r\n            };\r\n          },\r\n          undefined,\r\n          \"arrangement/undo\",\r\n        ),\r\n\r\n      redo: () =>\r\n        set(\r\n          (state) => {\r\n            const { past, present, future } = state.history;\r\n            if (future.length === 0) return state as any;\r\n\r\n            const next = future[0];\r\n            const newFuture = future.slice(1);\r\n\r\n            return {\r\n              history: {\r\n                past: [...past, present],\r\n                present: next,\r\n                future: newFuture,\r\n              },\r\n              scheduledSubjects: next,\r\n            };\r\n          },\r\n          undefined,\r\n          \"arrangement/redo\",\r\n        ),\r\n\r\n      canUndo: () => {\r\n        const state = get();\r\n        return state.history.past.length > 0;\r\n      },\r\n\r\n      canRedo: () => {\r\n        const state = get();\r\n        return state.history.future.length > 0;\r\n      },\r\n\r\n      clearHistory: () =>\r\n        set(\r\n          {\r\n            history: {\r\n              past: [],\r\n              present: [],\r\n              future: [],\r\n            },\r\n          },\r\n          undefined,\r\n          \"arrangement/clearHistory\",\r\n        ),\r\n\r\n      // === Reset Actions ===\r\n      resetAllState: () =>\r\n        set(initialState, undefined, \"arrangement/resetAllState\"),\r\n\r\n      resetOnTeacherChange: () =>\r\n        set(\r\n          {\r\n            selectedSubject: null, // Fixed: use null\r\n            draggedSubject: null,\r\n            yearSelected: null,\r\n            changeTimeSlotSubject: null, // Fixed: use null\r\n            destinationSubject: null, // Fixed: use null\r\n            timeslotIDtoChange: { source: \"\", destination: \"\" },\r\n            isClickToChangeSubject: false, // Fixed typo\r\n            subjectPayload: null, // Fixed: use null\r\n            showErrorMsgByTimeslotID: {},\r\n            showLockDataMsgByTimeslotID: {},\r\n            history: {\r\n              past: [],\r\n              present: [],\r\n              future: [],\r\n            },\r\n          },\r\n          undefined,\r\n          \"arrangement/resetOnTeacherChange\",\r\n        ),\r\n    }),\r\n    { name: \"arrangement-ui-store\" },\r\n  ),\r\n);\r\n\r\n// ============================================================================\r\n// Selector Hooks (Optional - for better performance)\r\n// ============================================================================\r\n\r\n/**\r\n * Example selector hooks for optimized component re-renders\r\n * Use these instead of selecting the entire store when you only need specific values\r\n */\r\n\r\nexport const useCurrentTeacher = () =>\r\n  useArrangementUIStore((state) => ({\r\n    id: state.currentTeacherID,\r\n    data: state.teacherData,\r\n  }));\r\n\r\nexport const useSelectedSubject = () =>\r\n  useArrangementUIStore((state) => state.selectedSubject);\r\n\r\nexport const useTimeslotData = () =>\r\n  useArrangementUIStore((state) => state.timeSlotData);\r\n\r\nexport const useModalState = () =>\r\n  useArrangementUIStore((state) => ({\r\n    isOpen: state.isActiveModal,\r\n    payload: state.subjectPayload,\r\n  }));\r\n\r\nexport const useSaveState = () =>\r\n  useArrangementUIStore((state) => state.isSaving);\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\stores\\slices\\teacher-selection.slice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\schedule-arrangement\\presentation\\stores\\teacher-arrange.store.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":455,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":455,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14028,14031],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14028,14031],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Teacher Arrange Store (Context7-Powered Refactor)\r\n *\r\n * Production-ready Zustand store with best practices from pmndrs/zustand docs.\r\n * Implements immer middleware for immutable updates and persist middleware for filter preferences.\r\n *\r\n * Features:\r\n * - Immer middleware for draft-based state updates\r\n * - Persist middleware for filter/preference persistence\r\n * - Optimized selectors to prevent unnecessary re-renders\r\n * - Type-safe actions with proper TypeScript inference\r\n * - DevTools integration for debugging\r\n *\r\n * Context7 Sources:\r\n * - Store creation: /pmndrs/zustand/docs/guides/typescript.md\r\n * - Immer middleware: /pmndrs/zustand/docs/integrations/immer-middleware.md\r\n * - Persist middleware: /pmndrs/zustand/docs/middlewares/persist.md\r\n * - Selector patterns: /pmndrs/zustand (best practices)\r\n *\r\n * Created: Phase 3 - Context7-Powered Zustand Implementation\r\n * Related: AGENTS.md, .github/copilot-instructions.md\r\n */\r\n\r\nimport { create } from \"zustand\";\r\nimport { devtools, persist, createJSONStorage } from \"zustand/middleware\";\r\nimport { immer } from \"zustand/middleware/immer\";\r\nimport { useShallow } from \"zustand/react/shallow\";\r\nimport type { class_schedule, teacher } from \"@/prisma/generated/client\";\r\n\r\n// Import strict types from schedule.types.ts\r\nimport type {\r\n  SubjectData,\r\n  TimeslotData,\r\n  SubjectPayload,\r\n  TimeslotChange,\r\n  BreakSlotData,\r\n  DayOfWeekDisplay,\r\n  TimeslotErrorStateMap,\r\n} from \"@/types/schedule.types\";\r\n\r\n// ============================================================================\r\n// Type Definitions\r\n// ============================================================================\r\n\r\n/**\r\n * Error display state by timeslot\r\n * Maps timeslot IDs to boolean flags for error/lock visibility\r\n * Issue #108: Migrated to TimeslotErrorStateMap from schedule.types.ts\r\n */\r\n// export interface ErrorState removed - using TimeslotErrorStateMap from schedule.types.ts\r\n\r\n/**\r\n * Timeslot container structure\r\n * Groups timeslot data with metadata for rendering\r\n */\r\nexport interface TimeSlotContainer {\r\n  AllData: TimeslotData[];\r\n  SlotAmount: number[];\r\n  DayOfWeek: DayOfWeekDisplay[];\r\n  BreakSlot: BreakSlotData[];\r\n}\r\n\r\n/**\r\n * History stack for undo/redo operations\r\n * Implements standard undo/redo pattern with past/present/future\r\n */\r\nexport interface HistoryStack {\r\n  past: SubjectData[][];\r\n  present: SubjectData[];\r\n  future: SubjectData[][];\r\n}\r\n\r\n/**\r\n * Persisted filter preferences\r\n * Only these fields are saved to localStorage\r\n */\r\nexport interface FilterPreferences {\r\n  academicYear: number | null;\r\n  semester: string | null;\r\n  gradeLevel: string | null;\r\n}\r\n\r\n// ============================================================================\r\n// Store State Interface\r\n// ============================================================================\r\n\r\ninterface TeacherArrangeState {\r\n  // === Teacher Context ===\r\n  currentTeacherID: string | null;\r\n  teacherData: teacher | null;\r\n\r\n  // === Subject Selection & Dragging ===\r\n  selectedSubject: SubjectData | null;\r\n  draggedSubject: SubjectData | null;\r\n  yearSelected: number | null;\r\n\r\n  // === Subject Change/Swap Operations ===\r\n  changeTimeSlotSubject: SubjectData | null;\r\n  destinationSubject: SubjectData | null;\r\n  timeslotIDtoChange: TimeslotChange;\r\n  isClickToChangeSubject: boolean;\r\n\r\n  // === Subject Collections ===\r\n  subjectData: SubjectData[];\r\n  scheduledSubjects: SubjectData[];\r\n\r\n  // === Timeslot Data ===\r\n  timeSlotData: TimeSlotContainer;\r\n  lockData: class_schedule[];\r\n\r\n  // === Modal State ===\r\n  isActiveModal: boolean;\r\n  subjectPayload: SubjectPayload | null;\r\n\r\n  // === Error & Lock Display ===\r\n  showErrorMsgByTimeslotID: TimeslotErrorStateMap;\r\n  showLockDataMsgByTimeslotID: TimeslotErrorStateMap;\r\n\r\n  // === Save State ===\r\n  isSaving: boolean;\r\n\r\n  // === Filters (persisted to localStorage) ===\r\n  filters: FilterPreferences;\r\n\r\n  // === History Stack (Undo/Redo) ===\r\n  history: HistoryStack;\r\n}\r\n\r\n// ============================================================================\r\n// Store Actions Interface\r\n// ============================================================================\r\n\r\ninterface TeacherArrangeActions {\r\n  // === Teacher Actions ===\r\n  setCurrentTeacherID: (id: string | null) => void;\r\n  setTeacherData: (data: teacher | null) => void;\r\n\r\n  // === Subject Selection Actions ===\r\n  setSelectedSubject: (subject: SubjectData | null) => void;\r\n  setDraggedSubject: (subject: SubjectData | null) => void;\r\n  setYearSelected: (year: number | null) => void;\r\n  clearSelectedSubject: () => void;\r\n\r\n  // === Subject Change Actions ===\r\n  setChangeTimeSlotSubject: (subject: SubjectData | null) => void;\r\n  setDestinationSubject: (subject: SubjectData | null) => void;\r\n  setTimeslotIDtoChange: (change: TimeslotChange) => void;\r\n  setIsClickToChangeSubject: (isClicked: boolean) => void;\r\n  clearChangeSubjectState: () => void;\r\n\r\n  // === Subject Data Actions ===\r\n  setSubjectData: (data: SubjectData[]) => void;\r\n  setScheduledSubjects: (subjects: SubjectData[]) => void;\r\n  addSubjectToData: (subject: SubjectData) => void;\r\n  removeSubjectFromData: (subjectCode: string) => void;\r\n  updateSubjectInData: (\r\n    subjectCode: string,\r\n    updates: Partial<SubjectData>,\r\n  ) => void;\r\n\r\n  // === Timeslot Actions ===\r\n  setTimeSlotData: (data: Partial<TimeSlotContainer>) => void;\r\n  updateTimeslotSubject: (\r\n    timeslotID: string,\r\n    subject: SubjectData | null,\r\n  ) => void;\r\n  swapTimeslots: (sourceID: string, destID: string) => void;\r\n  setLockData: (data: class_schedule[]) => void;\r\n\r\n  // === Modal Actions ===\r\n  openModal: (payload: SubjectPayload) => void;\r\n  closeModal: () => void;\r\n  setSubjectPayload: (payload: SubjectPayload | null) => void;\r\n\r\n  // === Error Display Actions ===\r\n  setShowErrorMsg: (timeslotID: string, show: boolean) => void;\r\n  setShowLockDataMsg: (timeslotID: string, show: boolean) => void;\r\n  clearErrorMessages: () => void;\r\n  clearAllErrors: () => void;\r\n\r\n  // === Save State Actions ===\r\n  setIsSaving: (saving: boolean) => void;\r\n\r\n  // === Filter Actions ===\r\n  setFilters: (filters: Partial<FilterPreferences>) => void;\r\n  resetFilters: () => void;\r\n\r\n  // === History Actions (Undo/Redo) ===\r\n  pushHistory: (scheduledSubjects: SubjectData[]) => void;\r\n  undo: () => void;\r\n  redo: () => void;\r\n  canUndo: () => boolean;\r\n  canRedo: () => boolean;\r\n  clearHistory: () => void;\r\n\r\n  // === Reset Actions ===\r\n  resetAllState: () => void;\r\n  resetOnTeacherChange: () => void;\r\n}\r\n\r\n// ============================================================================\r\n// Initial State\r\n// ============================================================================\r\n\r\nconst initialState: TeacherArrangeState = {\r\n  // Teacher Context\r\n  currentTeacherID: null,\r\n  teacherData: null,\r\n\r\n  // Subject Selection\r\n  selectedSubject: null,\r\n  draggedSubject: null,\r\n  yearSelected: null,\r\n\r\n  // Subject Change/Swap\r\n  changeTimeSlotSubject: null,\r\n  destinationSubject: null,\r\n  timeslotIDtoChange: { source: \"\", destination: \"\" },\r\n  isClickToChangeSubject: false,\r\n\r\n  // Subject Collections\r\n  subjectData: [],\r\n  scheduledSubjects: [],\r\n\r\n  // Timeslot Data\r\n  timeSlotData: {\r\n    AllData: [],\r\n    SlotAmount: [],\r\n    DayOfWeek: [],\r\n    BreakSlot: [],\r\n  },\r\n  lockData: [],\r\n\r\n  // Modal State\r\n  isActiveModal: false,\r\n  subjectPayload: null,\r\n\r\n  // Error Display\r\n  showErrorMsgByTimeslotID: {},\r\n  showLockDataMsgByTimeslotID: {},\r\n\r\n  // Save State\r\n  isSaving: false,\r\n\r\n  // Filters (will be persisted)\r\n  filters: {\r\n    academicYear: null,\r\n    semester: null,\r\n    gradeLevel: null,\r\n  },\r\n\r\n  // History Stack\r\n  history: {\r\n    past: [],\r\n    present: [],\r\n    future: [],\r\n  },\r\n};\r\n\r\n// ============================================================================\r\n// Store Creation (Context7 Best Practices)\r\n// ============================================================================\r\n\r\ntype TeacherArrangeStore = TeacherArrangeState & TeacherArrangeActions;\r\n\r\n/**\r\n * Main teacher arrange store\r\n *\r\n * Middleware Stack:\r\n * 1. immer - Enables draft-based mutations for cleaner update logic\r\n * 2. persist - Saves filter preferences to localStorage\r\n * 3. devtools - Redux DevTools integration for debugging\r\n *\r\n * Pattern from Context7:\r\n * - Use create<Type>()() for proper TypeScript inference\r\n * - Apply middlewares from innermost to outermost\r\n * - Use immer for complex nested updates\r\n * - Persist only user preferences, not ephemeral state\r\n */\r\nexport const useTeacherArrangeStore = create<TeacherArrangeStore>()(\r\n  devtools(\r\n    persist(\r\n      immer((set, get) => ({\r\n        ...initialState,\r\n\r\n        // ========================================================================\r\n        // Teacher Actions\r\n        // ========================================================================\r\n\r\n        setCurrentTeacherID: (id) =>\r\n          set(\r\n            (state) => {\r\n              state.currentTeacherID = id;\r\n            },\r\n            undefined,\r\n            \"teacher/setCurrentTeacherID\",\r\n          ),\r\n\r\n        setTeacherData: (data) =>\r\n          set(\r\n            (state) => {\r\n              state.teacherData = data;\r\n            },\r\n            undefined,\r\n            \"teacher/setTeacherData\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Subject Selection Actions (with immer draft mutations)\r\n        // ========================================================================\r\n\r\n        setSelectedSubject: (subject) =>\r\n          set(\r\n            (state) => {\r\n              state.selectedSubject = subject;\r\n              state.yearSelected = subject?.gradelevel?.year || null;\r\n            },\r\n            undefined,\r\n            \"subject/setSelectedSubject\",\r\n          ),\r\n\r\n        setDraggedSubject: (subject) =>\r\n          set(\r\n            (state) => {\r\n              state.draggedSubject = subject;\r\n            },\r\n            undefined,\r\n            \"subject/setDraggedSubject\",\r\n          ),\r\n\r\n        setYearSelected: (year) =>\r\n          set(\r\n            (state) => {\r\n              state.yearSelected = year;\r\n            },\r\n            undefined,\r\n            \"subject/setYearSelected\",\r\n          ),\r\n\r\n        clearSelectedSubject: () =>\r\n          set(\r\n            (state) => {\r\n              state.selectedSubject = null;\r\n              state.draggedSubject = null;\r\n              state.yearSelected = null;\r\n            },\r\n            undefined,\r\n            \"subject/clearSelectedSubject\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Subject Change Actions\r\n        // ========================================================================\r\n\r\n        setChangeTimeSlotSubject: (subject) =>\r\n          set(\r\n            (state) => {\r\n              state.changeTimeSlotSubject = subject;\r\n            },\r\n            undefined,\r\n            \"subject/setChangeTimeSlotSubject\",\r\n          ),\r\n\r\n        setDestinationSubject: (subject) =>\r\n          set(\r\n            (state) => {\r\n              state.destinationSubject = subject;\r\n            },\r\n            undefined,\r\n            \"subject/setDestinationSubject\",\r\n          ),\r\n\r\n        setTimeslotIDtoChange: (change) =>\r\n          set(\r\n            (state) => {\r\n              state.timeslotIDtoChange = change;\r\n            },\r\n            undefined,\r\n            \"subject/setTimeslotIDtoChange\",\r\n          ),\r\n\r\n        setIsClickToChangeSubject: (isClicked) =>\r\n          set(\r\n            (state) => {\r\n              state.isClickToChangeSubject = isClicked;\r\n            },\r\n            undefined,\r\n            \"subject/setIsClickToChangeSubject\",\r\n          ),\r\n\r\n        clearChangeSubjectState: () =>\r\n          set(\r\n            (state) => {\r\n              state.changeTimeSlotSubject = null;\r\n              state.destinationSubject = null;\r\n              state.timeslotIDtoChange = { source: \"\", destination: \"\" };\r\n              state.isClickToChangeSubject = false;\r\n            },\r\n            undefined,\r\n            \"subject/clearChangeSubjectState\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Subject Data Actions (immer simplifies array operations)\r\n        // ========================================================================\r\n\r\n        setSubjectData: (data) =>\r\n          set(\r\n            (state) => {\r\n              state.subjectData = data;\r\n            },\r\n            undefined,\r\n            \"data/setSubjectData\",\r\n          ),\r\n\r\n        setScheduledSubjects: (subjects) =>\r\n          set(\r\n            (state) => {\r\n              state.scheduledSubjects = subjects;\r\n            },\r\n            undefined,\r\n            \"data/setScheduledSubjects\",\r\n          ),\r\n\r\n        addSubjectToData: (subject) =>\r\n          set(\r\n            (state) => {\r\n              // Immer allows direct push()\r\n              state.subjectData.push(subject);\r\n            },\r\n            undefined,\r\n            \"data/addSubjectToData\",\r\n          ),\r\n\r\n        removeSubjectFromData: (subjectCode) =>\r\n          set(\r\n            (state) => {\r\n              // Immer allows filter() assignments\r\n              state.subjectData = state.subjectData.filter(\r\n                (s) => s.subjectCode !== subjectCode,\r\n              );\r\n            },\r\n            undefined,\r\n            \"data/removeSubjectFromData\",\r\n          ),\r\n\r\n        updateSubjectInData: (subjectCode, updates) =>\r\n          set(\r\n            (state) => {\r\n              const index = state.subjectData.findIndex(\r\n                (s) => s.subjectCode === subjectCode,\r\n              );\r\n              if (index !== -1 && state.subjectData[index]) {\r\n                // Immer allows direct mutation - cast to any to bypass WritableDraft type\r\n                Object.assign(state.subjectData[index], updates as any);\r\n              }\r\n            },\r\n            undefined,\r\n            \"data/updateSubjectInData\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Timeslot Actions (immer shines with nested updates)\r\n        // ========================================================================\r\n\r\n        setTimeSlotData: (data) =>\r\n          set(\r\n            (state) => {\r\n              // Immer handles nested spread automatically\r\n              Object.assign(state.timeSlotData, data);\r\n            },\r\n            undefined,\r\n            \"timeslot/setTimeSlotData\",\r\n          ),\r\n\r\n        updateTimeslotSubject: (timeslotID, subject) =>\r\n          set(\r\n            (state) => {\r\n              const slot = state.timeSlotData.AllData.find(\r\n                (s) => s.TimeslotID === timeslotID,\r\n              );\r\n              if (slot) {\r\n                slot.subject = subject;\r\n              }\r\n            },\r\n            undefined,\r\n            \"timeslot/updateTimeslotSubject\",\r\n          ),\r\n\r\n        swapTimeslots: (sourceID, destID) =>\r\n          set(\r\n            (state) => {\r\n              const sourceSlot = state.timeSlotData.AllData.find(\r\n                (s) => s.TimeslotID === sourceID,\r\n              );\r\n              const destSlot = state.timeSlotData.AllData.find(\r\n                (s) => s.TimeslotID === destID,\r\n              );\r\n\r\n              if (sourceSlot && destSlot) {\r\n                // Immer allows simple swap\r\n                const tempSubject = sourceSlot.subject;\r\n                sourceSlot.subject = destSlot.subject;\r\n                destSlot.subject = tempSubject;\r\n              }\r\n            },\r\n            undefined,\r\n            \"timeslot/swapTimeslots\",\r\n          ),\r\n\r\n        setLockData: (data) =>\r\n          set(\r\n            (state) => {\r\n              state.lockData = data;\r\n            },\r\n            undefined,\r\n            \"timeslot/setLockData\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Modal Actions\r\n        // ========================================================================\r\n\r\n        openModal: (payload) =>\r\n          set(\r\n            (state) => {\r\n              state.isActiveModal = true;\r\n              state.subjectPayload = payload;\r\n            },\r\n            undefined,\r\n            \"modal/openModal\",\r\n          ),\r\n\r\n        closeModal: () =>\r\n          set(\r\n            (state) => {\r\n              state.isActiveModal = false;\r\n              state.subjectPayload = null;\r\n            },\r\n            undefined,\r\n            \"modal/closeModal\",\r\n          ),\r\n\r\n        setSubjectPayload: (payload) =>\r\n          set(\r\n            (state) => {\r\n              state.subjectPayload = payload;\r\n            },\r\n            undefined,\r\n            \"modal/setSubjectPayload\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Error Display Actions\r\n        // ========================================================================\r\n\r\n        setShowErrorMsg: (timeslotID, show) =>\r\n          set(\r\n            (state) => {\r\n              state.showErrorMsgByTimeslotID[timeslotID] = show;\r\n            },\r\n            undefined,\r\n            \"error/setShowErrorMsg\",\r\n          ),\r\n\r\n        setShowLockDataMsg: (timeslotID, show) =>\r\n          set(\r\n            (state) => {\r\n              state.showLockDataMsgByTimeslotID[timeslotID] = show;\r\n            },\r\n            undefined,\r\n            \"error/setShowLockDataMsg\",\r\n          ),\r\n\r\n        clearErrorMessages: () =>\r\n          set(\r\n            (state) => {\r\n              state.showErrorMsgByTimeslotID = {};\r\n              state.showLockDataMsgByTimeslotID = {};\r\n            },\r\n            undefined,\r\n            \"error/clearErrorMessages\",\r\n          ),\r\n\r\n        clearAllErrors: () =>\r\n          set(\r\n            (state) => {\r\n              state.showErrorMsgByTimeslotID = {};\r\n              state.showLockDataMsgByTimeslotID = {};\r\n            },\r\n            undefined,\r\n            \"error/clearAllErrors\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Save State Actions\r\n        // ========================================================================\r\n\r\n        setIsSaving: (saving) =>\r\n          set(\r\n            (state) => {\r\n              state.isSaving = saving;\r\n            },\r\n            undefined,\r\n            \"save/setIsSaving\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Filter Actions (persisted to localStorage)\r\n        // ========================================================================\r\n\r\n        setFilters: (filters) =>\r\n          set(\r\n            (state) => {\r\n              Object.assign(state.filters, filters);\r\n            },\r\n            undefined,\r\n            \"filter/setFilters\",\r\n          ),\r\n\r\n        resetFilters: () =>\r\n          set(\r\n            (state) => {\r\n              state.filters = {\r\n                academicYear: null,\r\n                semester: null,\r\n                gradeLevel: null,\r\n              };\r\n            },\r\n            undefined,\r\n            \"filter/resetFilters\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // History Actions (Undo/Redo)\r\n        // ========================================================================\r\n\r\n        pushHistory: (scheduledSubjects) =>\r\n          set(\r\n            (state) => {\r\n              state.history.past.push(state.history.present);\r\n              state.history.present = scheduledSubjects;\r\n              state.history.future = []; // Clear future on new action\r\n              state.scheduledSubjects = scheduledSubjects;\r\n            },\r\n            undefined,\r\n            \"history/pushHistory\",\r\n          ),\r\n\r\n        undo: () =>\r\n          set(\r\n            (state) => {\r\n              if (state.history.past.length === 0) return;\r\n\r\n              const previous = state.history.past.pop()!;\r\n              state.history.future.unshift(state.history.present);\r\n              state.history.present = previous;\r\n              state.scheduledSubjects = previous;\r\n            },\r\n            undefined,\r\n            \"history/undo\",\r\n          ),\r\n\r\n        redo: () =>\r\n          set(\r\n            (state) => {\r\n              if (state.history.future.length === 0) return;\r\n\r\n              const next = state.history.future.shift()!;\r\n              state.history.past.push(state.history.present);\r\n              state.history.present = next;\r\n              state.scheduledSubjects = next;\r\n            },\r\n            undefined,\r\n            \"history/redo\",\r\n          ),\r\n\r\n        canUndo: () => get().history.past.length > 0,\r\n\r\n        canRedo: () => get().history.future.length > 0,\r\n\r\n        clearHistory: () =>\r\n          set(\r\n            (state) => {\r\n              state.history = {\r\n                past: [],\r\n                present: [],\r\n                future: [],\r\n              };\r\n            },\r\n            undefined,\r\n            \"history/clearHistory\",\r\n          ),\r\n\r\n        // ========================================================================\r\n        // Reset Actions\r\n        // ========================================================================\r\n\r\n        resetAllState: () =>\r\n          set(() => initialState, undefined, \"reset/resetAllState\"),\r\n\r\n        resetOnTeacherChange: () =>\r\n          set(\r\n            (state) => {\r\n              // Keep teacher context and filters, reset everything else\r\n              state.selectedSubject = null;\r\n              state.draggedSubject = null;\r\n              state.yearSelected = null;\r\n              state.changeTimeSlotSubject = null;\r\n              state.destinationSubject = null;\r\n              state.timeslotIDtoChange = { source: \"\", destination: \"\" };\r\n              state.isClickToChangeSubject = false;\r\n              state.subjectPayload = null;\r\n              state.showErrorMsgByTimeslotID = {};\r\n              state.showLockDataMsgByTimeslotID = {};\r\n              state.history = {\r\n                past: [],\r\n                present: [],\r\n                future: [],\r\n              };\r\n            },\r\n            undefined,\r\n            \"reset/resetOnTeacherChange\",\r\n          ),\r\n      })),\r\n      {\r\n        name: \"teacher-arrange-filters\", // localStorage key\r\n        // Persist only filter preferences (Context7 partialize pattern)\r\n        partialize: (state) => ({ filters: state.filters }),\r\n        storage: createJSONStorage(() => localStorage),\r\n        version: 1,\r\n      },\r\n    ),\r\n    { name: \"teacher-arrange-store\" }, // DevTools name\r\n  ),\r\n);\r\n\r\n// ============================================================================\r\n// Optimized Selector Hooks (Context7 Best Practice)\r\n// ============================================================================\r\n\r\n/**\r\n * Selector hooks prevent unnecessary re-renders by only subscribing to specific state slices.\r\n * Pattern from Context7: Use shallow selectors for objects, direct selectors for primitives.\r\n */\r\n\r\nexport const useCurrentTeacher = () =>\r\n  useTeacherArrangeStore(\r\n    useShallow((state) => ({\r\n      id: state.currentTeacherID,\r\n      data: state.teacherData,\r\n    })),\r\n  );\r\n\r\nexport const useSelectedSubject = () =>\r\n  useTeacherArrangeStore((state) => state.selectedSubject);\r\n\r\nexport const useDraggedSubject = () =>\r\n  useTeacherArrangeStore((state) => state.draggedSubject);\r\n\r\nexport const useYearSelected = () =>\r\n  useTeacherArrangeStore((state) => state.yearSelected);\r\n\r\nexport const useSubjectData = () =>\r\n  useTeacherArrangeStore((state) => state.subjectData);\r\n\r\nexport const useScheduledSubjects = () =>\r\n  useTeacherArrangeStore((state) => state.scheduledSubjects);\r\n\r\nexport const useTimeslotData = () =>\r\n  useTeacherArrangeStore((state) => state.timeSlotData);\r\n\r\nexport const useLockData = () =>\r\n  useTeacherArrangeStore((state) => state.lockData);\r\n\r\nexport const useModalState = () =>\r\n  useTeacherArrangeStore(\r\n    useShallow((state) => ({\r\n      isOpen: state.isActiveModal,\r\n      payload: state.subjectPayload,\r\n    })),\r\n  );\r\n\r\nexport const useErrorState = () =>\r\n  useTeacherArrangeStore(\r\n    useShallow((state) => ({\r\n      errorMessages: state.showErrorMsgByTimeslotID,\r\n      lockMessages: state.showLockDataMsgByTimeslotID,\r\n    })),\r\n  );\r\n\r\nexport const useSaveState = () =>\r\n  useTeacherArrangeStore((state) => state.isSaving);\r\n\r\nexport const useFilters = () =>\r\n  useTeacherArrangeStore((state) => state.filters);\r\n\r\nexport const useHistoryControls = () =>\r\n  useTeacherArrangeStore(\r\n    useShallow((state) => ({\r\n      canUndo: state.canUndo(),\r\n      canRedo: state.canRedo(),\r\n      undo: state.undo,\r\n      redo: state.redo,\r\n    })),\r\n  );\r\n\r\n// ============================================================================\r\n// Store Actions Hook (for components needing only actions)\r\n// ============================================================================\r\n\r\n/**\r\n * Actions-only hook for components that only trigger updates\r\n * Uses useShallow to prevent re-renders from new object references\r\n * Context7: /pmndrs/zustand/docs/hooks/use-shallow.md\r\n */\r\nexport const useTeacherArrangeActions = () =>\r\n  useTeacherArrangeStore(\r\n    useShallow((state) => ({\r\n      // Teacher\r\n      setCurrentTeacherID: state.setCurrentTeacherID,\r\n      setTeacherData: state.setTeacherData,\r\n\r\n      // Subject Selection\r\n      setSelectedSubject: state.setSelectedSubject,\r\n      setDraggedSubject: state.setDraggedSubject,\r\n      setYearSelected: state.setYearSelected,\r\n      clearSelectedSubject: state.clearSelectedSubject,\r\n\r\n      // Subject Change\r\n      setChangeTimeSlotSubject: state.setChangeTimeSlotSubject,\r\n      setDestinationSubject: state.setDestinationSubject,\r\n      setTimeslotIDtoChange: state.setTimeslotIDtoChange,\r\n      setIsClickToChangeSubject: state.setIsClickToChangeSubject,\r\n      clearChangeSubjectState: state.clearChangeSubjectState,\r\n\r\n      // Subject Data\r\n      setSubjectData: state.setSubjectData,\r\n      setScheduledSubjects: state.setScheduledSubjects,\r\n      addSubjectToData: state.addSubjectToData,\r\n      removeSubjectFromData: state.removeSubjectFromData,\r\n      updateSubjectInData: state.updateSubjectInData,\r\n\r\n      // Timeslot\r\n      setTimeSlotData: state.setTimeSlotData,\r\n      updateTimeslotSubject: state.updateTimeslotSubject,\r\n      swapTimeslots: state.swapTimeslots,\r\n      setLockData: state.setLockData,\r\n\r\n      // Modal\r\n      openModal: state.openModal,\r\n      closeModal: state.closeModal,\r\n      setSubjectPayload: state.setSubjectPayload,\r\n\r\n      // Error\r\n      setShowErrorMsg: state.setShowErrorMsg,\r\n      setShowLockDataMsg: state.setShowLockDataMsg,\r\n      clearErrorMessages: state.clearErrorMessages,\r\n      clearAllErrors: state.clearAllErrors,\r\n\r\n      // Save\r\n      setIsSaving: state.setIsSaving,\r\n\r\n      // Filter\r\n      setFilters: state.setFilters,\r\n      resetFilters: state.resetFilters,\r\n\r\n      // History\r\n      pushHistory: state.pushHistory,\r\n      undo: state.undo,\r\n      redo: state.redo,\r\n      clearHistory: state.clearHistory,\r\n\r\n      // Reset\r\n      resetAllState: state.resetAllState,\r\n      resetOnTeacherChange: state.resetOnTeacherChange,\r\n    })),\r\n  );\r\n\r\n// ============================================================================\r\n// Type Exports\r\n// ============================================================================\r\n\r\nexport type { TeacherArrangeState, TeacherArrangeActions, TeacherArrangeStore };\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\semester\\application\\actions\\semester.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\semester\\application\\schemas\\semester.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\semester\\infrastructure\\repositories\\semester.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":303,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7919,7922],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7919,7922],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":341,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8906,8909],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8906,8909],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Semester Repository\r\n * Data access layer for semester/table_config operations\r\n */\r\n\r\nimport prisma from \"@/lib/prisma\";\r\nimport {\r\n  withPrismaTransaction,\r\n  type TransactionClient,\r\n} from \"@/lib/prisma-transaction\";\r\nimport type { Prisma, semester } from \"@/prisma/generated/client\";\r\nimport type {\r\n  SemesterFilter,\r\n  SemesterStatus,\r\n} from \"../../application/schemas/semester.schemas\";\r\n\r\nexport class SemesterRepository {\r\n  /**\r\n   * Get all semesters with optional filtering\r\n   */\r\n  async findMany(filter?: SemesterFilter) {\r\n    const where: Prisma.table_configWhereInput = {};\r\n\r\n    // Apply filters\r\n    if (filter?.status) {\r\n      where.status = filter.status;\r\n    }\r\n\r\n    if (filter?.year) {\r\n      where.AcademicYear = filter.year;\r\n    }\r\n\r\n    if (filter?.search) {\r\n      // Search in ConfigID or year\r\n      where.OR = [\r\n        { ConfigID: { contains: filter.search, mode: \"insensitive\" } },\r\n        { AcademicYear: { equals: Number.parseInt(filter.search) || 0 } },\r\n      ];\r\n    }\r\n\r\n    if (!filter?.showArchived) {\r\n      where.status = { not: \"ARCHIVED\" };\r\n    }\r\n\r\n    // Build orderBy\r\n    const orderBy: Prisma.table_configOrderByWithRelationInput = {};\r\n    if (filter?.sortBy === \"recent\") {\r\n      orderBy.lastAccessedAt = filter.sortOrder || \"desc\";\r\n    } else if (filter?.sortBy === \"name\") {\r\n      orderBy.ConfigID = filter.sortOrder || \"asc\";\r\n    } else if (filter?.sortBy === \"status\") {\r\n      orderBy.status = filter.sortOrder || \"asc\";\r\n    } else if (filter?.sortBy === \"year\") {\r\n      orderBy.AcademicYear = filter.sortOrder || \"desc\";\r\n    } else if (filter?.sortBy === \"completeness\") {\r\n      orderBy.configCompleteness = filter.sortOrder || \"desc\";\r\n    } else {\r\n      // Default: most recent first\r\n      orderBy.updatedAt = \"desc\";\r\n    }\r\n\r\n    const semesters = await prisma.table_config.findMany({\r\n      where,\r\n      orderBy,\r\n    });\r\n\r\n    return semesters;\r\n  }\r\n\r\n  /**\r\n   * Get recent semesters (last accessed)\r\n   */\r\n  async findRecent(limit = 2) {\r\n    return prisma.table_config.findMany({\r\n      where: {\r\n        status: { not: \"ARCHIVED\" },\r\n        // Exclude rows where lastAccessedAt is null by requiring a minimal date\r\n        lastAccessedAt: { gt: new Date(0) },\r\n      },\r\n      orderBy: { lastAccessedAt: \"desc\" },\r\n      take: limit,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get pinned semesters\r\n   */\r\n  async findPinned() {\r\n    return prisma.table_config.findMany({\r\n      where: {\r\n        isPinned: true,\r\n        status: { not: \"ARCHIVED\" },\r\n      },\r\n      orderBy: { updatedAt: \"desc\" },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Find semester by ConfigID\r\n   */\r\n  async findById(configId: string) {\r\n    return prisma.table_config.findUnique({\r\n      where: { ConfigID: configId },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Find semester by year and semester number\r\n   */\r\n  async findByYearAndSemester(academicYear: number, semester: number) {\r\n    const semesterEnum = semester === 1 ? \"SEMESTER_1\" : \"SEMESTER_2\";\r\n    return prisma.table_config.findFirst({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semesterEnum,\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Create new semester\r\n   */\r\n  async create(data: {\r\n    academicYear: number;\r\n    semester: number;\r\n    config?: Prisma.InputJsonValue;\r\n  }) {\r\n    const semesterEnum = data.semester === 1 ? \"SEMESTER_1\" : \"SEMESTER_2\";\r\n    const configId = `${data.semester}-${data.academicYear}`;\r\n\r\n    return prisma.table_config.create({\r\n      data: {\r\n        ConfigID: configId,\r\n        AcademicYear: data.academicYear,\r\n        Semester: semesterEnum,\r\n        Config: (data.config || {}) as Prisma.InputJsonValue,\r\n        status: \"DRAFT\",\r\n        configCompleteness: 0,\r\n        isPinned: false,\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update semester status\r\n   */\r\n  async updateStatus(configId: string, status: SemesterStatus) {\r\n    const updates: Prisma.table_configUpdateInput = { status };\r\n\r\n    // Set publishedAt when publishing\r\n    if (status === \"PUBLISHED\") {\r\n      updates.publishedAt = new Date();\r\n    }\r\n\r\n    return prisma.table_config.update({\r\n      where: { ConfigID: configId },\r\n      data: updates,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle pin status\r\n   */\r\n  async togglePin(configId: string, isPinned: boolean) {\r\n    return prisma.table_config.update({\r\n      where: { ConfigID: configId },\r\n      data: { isPinned },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Track semester access\r\n   */\r\n  async trackAccess(configId: string) {\r\n    return prisma.table_config.update({\r\n      where: { ConfigID: configId },\r\n      data: { lastAccessedAt: new Date() },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update config completeness percentage\r\n   */\r\n  async updateCompleteness(configId: string, completeness: number) {\r\n    return prisma.table_config.update({\r\n      where: { ConfigID: configId },\r\n      data: { configCompleteness: Math.min(100, Math.max(0, completeness)) },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Delete semester (soft delete by archiving)\r\n   */\r\n  async archive(configId: string) {\r\n    return prisma.table_config.update({\r\n      where: { ConfigID: configId },\r\n      data: { status: \"ARCHIVED\" },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get semester statistics (class count, teacher count, etc.)\r\n   */\r\n  async getStatistics(configId: string) {\r\n    const config = await prisma.table_config.findUnique({\r\n      where: { ConfigID: configId },\r\n    });\r\n\r\n    if (!config) {\r\n      return null;\r\n    }\r\n\r\n    const [academicYear, semesterNum] = configId.split(\"-\").map(Number);\r\n    const semesterEnum = semesterNum === 1 ? \"SEMESTER_1\" : \"SEMESTER_2\";\r\n\r\n    // Get counts for this semester\r\n    const [timeslotCount, responsibilityCount] = await Promise.all([\r\n      prisma.timeslot.count({\r\n        where: {\r\n          AcademicYear: academicYear,\r\n          Semester: semesterEnum,\r\n        },\r\n      }),\r\n      prisma.teachers_responsibility.count({\r\n        where: {\r\n          AcademicYear: academicYear,\r\n          Semester: semesterEnum,\r\n        },\r\n      }),\r\n    ]);\r\n\r\n    // Get unique teachers and classes\r\n    const uniqueTeachers = await prisma.teachers_responsibility.findMany({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semesterEnum,\r\n      },\r\n      select: { TeacherID: true },\r\n      distinct: [\"TeacherID\"],\r\n    });\r\n\r\n    const uniqueClasses = await prisma.teachers_responsibility.findMany({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semesterEnum,\r\n      },\r\n      select: { GradeID: true },\r\n      distinct: [\"GradeID\"],\r\n    });\r\n\r\n    const uniqueSubjects = await prisma.teachers_responsibility.findMany({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semesterEnum,\r\n      },\r\n      select: { SubjectCode: true },\r\n      distinct: [\"SubjectCode\"],\r\n    });\r\n\r\n    // Get total room count (rooms are not semester-specific)\r\n    const roomCount = await prisma.room.count();\r\n\r\n    return {\r\n      timeslotCount,\r\n      teacherCount: uniqueTeachers.length,\r\n      classCount: uniqueClasses.length,\r\n      subjectCount: uniqueSubjects.length,\r\n      responsibilityCount,\r\n      roomCount,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Find timeslots for a given academic year and semester\r\n   */\r\n  async findTimeslots(academicYear: number, sem: semester) {\r\n    return await prisma.timeslot.findMany({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: sem,\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Copy timeslots from source to target semester\r\n   */\r\n  async copyTimeslots(\r\n    sourceYear: number,\r\n    sourceSem: semester,\r\n    targetYear: number,\r\n    targetSem: semester,\r\n    sourceSemesterNum: number,\r\n    targetSemesterNum: number,\r\n  ) {\r\n    const timeslots = await this.findTimeslots(sourceYear, sourceSem);\r\n\r\n    if (timeslots.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    await prisma.timeslot.createMany({\r\n      data: timeslots.map((ts: any) => ({\r\n        TimeslotID: ts.TimeslotID.replace(\r\n          `${sourceSemesterNum}-${sourceYear}`,\r\n          `${targetSemesterNum}-${targetYear}`,\r\n        ),\r\n        AcademicYear: targetYear,\r\n        Semester: targetSem,\r\n        StartTime: ts.StartTime,\r\n        EndTime: ts.EndTime,\r\n        Breaktime: ts.Breaktime,\r\n        DayOfWeek: ts.DayOfWeek,\r\n      })),\r\n      skipDuplicates: true,\r\n    });\r\n\r\n    return timeslots;\r\n  }\r\n\r\n  /**\r\n   * Create multiple timeslots\r\n   */\r\n  async createTimeslots(timeslots: Prisma.timeslotCreateManyInput[]) {\r\n    return await prisma.timeslot.createMany({\r\n      data: timeslots,\r\n      skipDuplicates: true,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Create semester with timeslots in a transaction\r\n   */\r\n  async createWithTimeslots(data: {\r\n    configId: string;\r\n    academicYear: number;\r\n    semester: semester;\r\n    config: object;\r\n    timeslots?: Prisma.timeslotCreateManyInput[];\r\n  }) {\r\n    return await prisma.$transaction(async (tx: any) => {\r\n      // Create semester\r\n      const newSemester = await tx.table_config.create({\r\n        data: {\r\n          ConfigID: data.configId,\r\n          AcademicYear: data.academicYear,\r\n          Semester: data.semester,\r\n          Config: data.config,\r\n          status: \"DRAFT\",\r\n          isPinned: false,\r\n          configCompleteness: 0,\r\n        },\r\n      });\r\n\r\n      // Create timeslots if provided\r\n      if (data.timeslots && data.timeslots.length > 0) {\r\n        await tx.timeslot.createMany({\r\n          data: data.timeslots,\r\n        });\r\n\r\n        // Update completeness\r\n        await tx.table_config.update({\r\n          where: { ConfigID: newSemester.ConfigID },\r\n          data: { configCompleteness: 25 },\r\n        });\r\n      }\r\n\r\n      return newSemester;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Run a generic Prisma transaction\r\n   */\r\n  async transaction<T>(callback: (tx: TransactionClient) => Promise<T>) {\r\n    return withPrismaTransaction(callback);\r\n  }\r\n}\r\n\r\nexport const semesterRepository = new SemesterRepository();\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\subject\\application\\actions\\subject.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\subject\\application\\schemas\\subject.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\subject\\domain\\services\\subject-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\subject\\infrastructure\\repositories\\subject.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1941,1944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1941,1944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Infrastructure Layer: Subject Repository\r\n *\r\n * Handles all database operations for subjects using Prisma.\r\n * Pure data access layer with no business logic.\r\n *\r\n * @module subject.repository\r\n */\r\n\r\nimport prisma from \"@/lib/prisma\";\r\nimport type { subject } from \"@/prisma/generated/client\";\r\nimport type {\r\n  CreateSubjectInput,\r\n  UpdateSubjectInput,\r\n} from \"../../application/schemas/subject.schemas\";\r\n\r\nexport const subjectRepository = {\r\n  /**\r\n   * Find all subjects ordered by SubjectCode\r\n   */\r\n  async findAll() {\r\n    return prisma.subject.findMany({\r\n      orderBy: {\r\n        SubjectCode: \"asc\",\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find a single subject by SubjectCode (primary key)\r\n   */\r\n  async findByCode(subjectCode: string) {\r\n    return prisma.subject.findUnique({\r\n      where: {\r\n        SubjectCode: subjectCode,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find subject by SubjectName (for duplicate check)\r\n   */\r\n  async findByName(subjectName: string) {\r\n    return prisma.subject.findFirst({\r\n      where: {\r\n        SubjectName: subjectName,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find subjects by grade through program relationship\r\n   * Returns subjects available for a specific grade level\r\n   * Note: Subjects are determined by the grade's program, not by semester\r\n   */\r\n  async findByGrade(gradeId: string): Promise<subject[]> {\r\n    // Get the gradelevel with its program\r\n    const gradelevel = await prisma.gradelevel.findUnique({\r\n      where: { GradeID: gradeId },\r\n      include: {\r\n        program: {\r\n          include: {\r\n            program_subject: {\r\n              include: {\r\n                subject: true,\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    if (!gradelevel?.program) {\r\n      return [];\r\n    }\r\n\r\n    // Extract subjects from program_subject relation\r\n    const subjects = gradelevel.program.program_subject.map(\r\n      (ps: any) => ps.subject,\r\n    );\r\n\r\n    return subjects;\r\n  },\r\n\r\n  /**\r\n   * Create a single subject\r\n   * Note: SubjectCode whitespace is trimmed in domain layer before calling this\r\n   */\r\n  async create(data: CreateSubjectInput) {\r\n    return prisma.subject.create({\r\n      data: {\r\n        SubjectCode: data.SubjectCode,\r\n        SubjectName: data.SubjectName,\r\n        Credit: data.Credit,\r\n        Category: data.Category,\r\n        LearningArea: data.LearningArea,\r\n        ActivityType: data.ActivityType,\r\n        IsGraded: data.IsGraded,\r\n        Description: data.Description,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Update a subject by SubjectCode\r\n   * Note: Updating SubjectCode itself may break relations - use with caution\r\n   */\r\n  async update(subjectCode: string, data: UpdateSubjectInput) {\r\n    return prisma.subject.update({\r\n      where: {\r\n        SubjectCode: subjectCode,\r\n      },\r\n      data: {\r\n        SubjectCode: data.SubjectCode,\r\n        SubjectName: data.SubjectName,\r\n        Credit: data.Credit,\r\n        Category: data.Category,\r\n        LearningArea: data.LearningArea,\r\n        ActivityType: data.ActivityType,\r\n        IsGraded: data.IsGraded,\r\n        Description: data.Description,\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Delete multiple subjects by SubjectCode array\r\n   */\r\n  async deleteMany(subjectCodes: string[]) {\r\n    return prisma.subject.deleteMany({\r\n      where: {\r\n        SubjectCode: {\r\n          in: subjectCodes,\r\n        },\r\n      },\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Get subject count\r\n   */\r\n  async count() {\r\n    return prisma.subject.count();\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teacher\\application\\actions\\teacher.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teacher\\application\\schemas\\teacher.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teacher\\domain\\services\\teacher-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teacher\\infrastructure\\repositories\\teacher.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\application\\actions\\teaching-assignment.actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":317,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":317,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9037,9040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9037,9040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":319,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":319,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9104,9107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9104,9107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":374,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":374,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10845,10848],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10845,10848],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":385,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11232,11235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11232,11235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":385,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11240,11243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11240,11243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Application Layer: Teaching Assignment Server Actions\r\n *\r\n * Server Actions for teacher-subject assignment management feature.\r\n * Handles assignment CRUD operations with validation and workload checks.\r\n *\r\n * @module teaching-assignment.actions\r\n */\r\n\r\n\"use server\";\r\n\r\nimport * as v from \"valibot\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { createAction } from \"@/shared/lib/action-wrapper\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport * as teachingAssignmentRepository from \"../../infrastructure/repositories/teaching-assignment.repository\";\r\nimport {\r\n  validateAssignment,\r\n  validateBulkAssignments,\r\n} from \"../../domain/services/teacher-validation.service\";\r\nimport {\r\n  assignTeacherSchema,\r\n  unassignTeacherSchema,\r\n  bulkAssignSchema,\r\n  copyAssignmentsSchema,\r\n  clearAssignmentsSchema,\r\n  type AssignTeacherInput,\r\n  type UnassignTeacherInput,\r\n  type BulkAssignInput,\r\n  type CopyAssignmentsInput,\r\n  type ClearAssignmentsInput,\r\n} from \"../schemas/teaching-assignment.schemas\";\r\nimport { createLogger } from \"@/lib/logger\";\r\n\r\nconst log = createLogger(\"TeachingAssignment\");\r\n\r\n/**\r\n * Assign a teacher to a subject\r\n * Validates workload limits and creates/updates assignment\r\n *\r\n * @param input - Assignment details (TeacherID, SubjectCode, GradeID, Semester, Year, TeachHour)\r\n * @returns Assignment result with validation status\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await assignTeacherAction({\r\n *   TeacherID: \"T001\",\r\n *   SubjectCode: \"TH101\",\r\n *   GradeID: \"M1\",\r\n *   Semester: \"1\",\r\n *   AcademicYear: 2567,\r\n *   TeachHour: 4\r\n * });\r\n * if (result.success) {\r\n *   console.log(\"Assignment created:\", result.data);\r\n * } else {\r\n *   console.error(\"Validation failed:\", result.error);\r\n * }\r\n * ```\r\n */\r\nexport const assignTeacherAction = createAction(\r\n  assignTeacherSchema,\r\n  async (input: AssignTeacherInput) => {\r\n    // Validate assignment (workload, duplicates, etc.)\r\n    const validation = await validateAssignment({\r\n      teacherId: input.TeacherID,\r\n      subjectCode: input.SubjectCode,\r\n      gradeId: input.GradeID,\r\n      semester: input.Semester,\r\n      year: input.AcademicYear,\r\n      additionalHours: input.TeachHour,\r\n    });\r\n\r\n    if (!validation.valid) {\r\n      // Return validation errors in Thai\r\n      throw new Error(validation.errors.join(\", \") || \"เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เธกเธญเธเธซเธกเธฒเธขเนเธ”เน\");\r\n    }\r\n\r\n    // Create/update assignment\r\n    const assignment =\r\n      await teachingAssignmentRepository.assignTeacherToSubject({\r\n        TeacherID: input.TeacherID,\r\n        SubjectCode: input.SubjectCode,\r\n        GradeID: input.GradeID,\r\n        Semester: input.Semester,\r\n        AcademicYear: input.AcademicYear,\r\n        TeachHour: input.TeachHour,\r\n      });\r\n\r\n    // Revalidate relevant pages\r\n    revalidatePath(\"/management/teacher-assignment\");\r\n    revalidatePath(\r\n      `/schedule/${input.GradeID}-${input.Semester}-${input.AcademicYear}`,\r\n    );\r\n\r\n    return {\r\n      assignment,\r\n      warnings: validation.warnings,\r\n    };\r\n  },\r\n);\r\n\r\n/**\r\n * Unassign a teacher from a subject\r\n * Removes the assignment record\r\n *\r\n * @param input - Responsibility ID to delete\r\n * @returns Success status\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await unassignTeacherAction({ RespID: 123 });\r\n * if (result.success) {\r\n *   console.log(\"Assignment removed\");\r\n * }\r\n * ```\r\n */\r\nexport const unassignTeacherAction = createAction(\r\n  unassignTeacherSchema,\r\n  async (input: UnassignTeacherInput) => {\r\n    // Note: This would need additional fields (SubjectCode, GradeID, Semester, Year, TeacherID)\r\n    // to call unassignTeacherFromSubject properly\r\n    // For now, we can delete directly by RespID using Prisma\r\n    await prisma.teachers_responsibility.delete({\r\n      where: { RespID: input.RespID },\r\n    });\r\n\r\n    // Revalidate all teacher assignment pages\r\n    revalidatePath(\"/management/teacher-assignment\");\r\n\r\n    return { success: true };\r\n  },\r\n);\r\n\r\n/**\r\n * Bulk assign multiple teachers\r\n * Validates all assignments together and applies in transaction\r\n *\r\n * @param input - Array of assignments\r\n * @returns Bulk operation result with validation summary\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await bulkAssignTeachersAction({\r\n *   assignments: [\r\n *     { TeacherID: \"T001\", SubjectCode: \"TH101\", ... },\r\n *     { TeacherID: \"T002\", SubjectCode: \"EN101\", ... }\r\n *   ]\r\n * });\r\n * if (result.success) {\r\n *   console.log(`${result.data.successCount} assignments created`);\r\n * }\r\n * ```\r\n */\r\nexport const bulkAssignTeachersAction = createAction(\r\n  bulkAssignSchema,\r\n  async (input: BulkAssignInput) => {\r\n    // Map input to validation format\r\n    const validationInput = input.assignments.map((a) => ({\r\n      teacherId: a.TeacherID,\r\n      subjectCode: a.SubjectCode,\r\n      gradeId: a.GradeID,\r\n      semester: a.Semester,\r\n      year: a.AcademicYear,\r\n      hours: a.TeachHour,\r\n    }));\r\n\r\n    // Validate all assignments together\r\n    const validation = await validateBulkAssignments(validationInput);\r\n\r\n    if (!validation.valid) {\r\n      // Return all validation errors\r\n      throw new Error(\r\n        `เธเธเธเนเธญเธเธดเธ”เธเธฅเธฒเธ” ${validation.errors.length} เธฃเธฒเธขเธเธฒเธฃ:\\n` +\r\n          validation.errors.map((e) => `- ${e}`).join(\"\\n\"),\r\n      );\r\n    }\r\n\r\n    // Apply assignments in transaction\r\n    const results = await teachingAssignmentRepository.bulkAssignTeachers(\r\n      input.assignments,\r\n    );\r\n\r\n    // Revalidate pages\r\n    revalidatePath(\"/management/teacher-assignment\");\r\n\r\n    return {\r\n      successCount: results.length,\r\n      warnings: validation.warnings,\r\n      assignments: results,\r\n    };\r\n  },\r\n);\r\n\r\n/**\r\n * Copy assignments from previous semester\r\n * Clones teacher assignments to a new semester/year\r\n *\r\n * @param input - Source and target semester/year details\r\n * @returns Copied assignments count\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await copyAssignmentsAction({\r\n *   sourceGradeID: \"M1\",\r\n *   sourceSemester: \"1\",\r\n *   sourceYear: 2567,\r\n *   targetGradeID: \"M1\",\r\n *   targetSemester: \"2\",\r\n *   targetYear: 2567\r\n * });\r\n * if (result.success) {\r\n *   console.log(`Copied ${result.data.count} assignments`);\r\n * }\r\n * ```\r\n */\r\nexport const copyAssignmentsAction = createAction(\r\n  copyAssignmentsSchema,\r\n  async (input: CopyAssignmentsInput) => {\r\n    const copiedAssignments =\r\n      await teachingAssignmentRepository.copyAssignmentsFromPreviousSemester(\r\n        input.sourceGradeID,\r\n        input.sourceSemester,\r\n        input.sourceYear,\r\n        input.targetGradeID,\r\n        input.targetSemester,\r\n        input.targetYear,\r\n      );\r\n\r\n    // Revalidate pages\r\n    revalidatePath(\"/management/teacher-assignment\");\r\n\r\n    return {\r\n      count: copiedAssignments.length,\r\n      assignments: copiedAssignments,\r\n    };\r\n  },\r\n);\r\n\r\n/**\r\n * Clear all assignments for a grade/semester/year\r\n * Removes all teacher assignments in the specified context\r\n *\r\n * @param input - Grade ID, Semester, and Academic Year\r\n * @returns Success status with count of removed assignments\r\n *\r\n * @example\r\n * ```tsx\r\n * const result = await clearAllAssignmentsAction({\r\n *   GradeID: \"M1\",\r\n *   Semester: \"1\",\r\n *   AcademicYear: 2567\r\n * });\r\n * if (result.success) {\r\n *   console.log(`Removed ${result.data.count} assignments`);\r\n * }\r\n * ```\r\n */\r\nexport const clearAllAssignmentsAction = createAction(\r\n  clearAssignmentsSchema,\r\n  async (input: ClearAssignmentsInput) => {\r\n    const deletedCount = await teachingAssignmentRepository.clearAllAssignments(\r\n      input.GradeID,\r\n      input.Semester,\r\n      input.AcademicYear,\r\n    );\r\n\r\n    // Revalidate pages\r\n    revalidatePath(\"/management/teacher-assignment\");\r\n\r\n    return {\r\n      count: deletedCount,\r\n    };\r\n  },\r\n);\r\n\r\n/**\r\n * Fetch subjects and assignments for a grade/semester/year\r\n * Returns subjects with their assigned teachers\r\n *\r\n * @param gradeId - Grade ID (e.g., \"M1\", \"M2\")\r\n * @param semester - Semester (\"SEMESTER_1\" or \"SEMESTER_2\")\r\n * @param academicYear - Academic year (e.g., 2567)\r\n * @returns Subjects with assignment data\r\n */\r\nconst getSubjectsWithAssignmentsSchema = v.object({\r\n  gradeId: v.string(),\r\n  semester: v.picklist([\"SEMESTER_1\", \"SEMESTER_2\"]),\r\n  academicYear: v.number(),\r\n});\r\n\r\nexport const getSubjectsWithAssignments = createAction(\r\n  getSubjectsWithAssignmentsSchema,\r\n  async (input: {\r\n    gradeId: string;\r\n    semester: \"SEMESTER_1\" | \"SEMESTER_2\";\r\n    academicYear: number;\r\n  }) => {\r\n    log.debug(\"getSubjectsWithAssignments called\", input);\r\n\r\n    const subjectsData = await teachingAssignmentRepository.findSubjectsByGrade(\r\n      input.gradeId,\r\n    );\r\n    log.debug(\"Found subjects\", {\r\n      count: subjectsData.length,\r\n      gradeId: input.gradeId,\r\n    });\r\n\r\n    const assignments =\r\n      await teachingAssignmentRepository.findAssignmentsByContext(\r\n        input.gradeId,\r\n        input.semester,\r\n        input.academicYear,\r\n      );\r\n    log.debug(\"Found assignments\", { count: assignments.length });\r\n\r\n    return subjectsData.map((subjectData: any) => {\r\n      const assignment = assignments.find(\r\n        (a: any) => a.SubjectCode === subjectData.SubjectCode,\r\n      );\r\n\r\n      return {\r\n        SubjectCode: subjectData.SubjectCode,\r\n        SubjectName: subjectData.subject.SubjectName,\r\n        Credit: subjectData.subject.Credit,\r\n        assignedTeacher: assignment\r\n          ? {\r\n              RespID: assignment.RespID,\r\n              TeacherID: assignment.TeacherID,\r\n              TeachHour: assignment.TeachHour,\r\n              TeacherName: assignment.teacher\r\n                ? `${assignment.teacher.Prefix}${assignment.teacher.Firstname} ${assignment.teacher.Lastname}`\r\n                : \"เนเธกเนเธ—เธฃเธฒเธเธเธทเนเธญ\",\r\n            }\r\n          : undefined,\r\n      };\r\n    });\r\n  },\r\n);\r\n\r\n/**\r\n * Fetch all teachers for dropdown selection\r\n * Returns teachers with their current workload information\r\n *\r\n * @param semester - Semester to calculate workload for\r\n * @param academicYear - Academic year to calculate workload for\r\n * @returns Teachers with workload data\r\n */\r\ntype GetTeachersWithWorkloadInput = {\r\n  semester: \"SEMESTER_1\" | \"SEMESTER_2\";\r\n  academicYear: number;\r\n};\r\n\r\nconst getTeachersWithWorkloadSchema = v.object({\r\n  semester: v.picklist([\"SEMESTER_1\", \"SEMESTER_2\"]),\r\n  academicYear: v.number(),\r\n});\r\n\r\nexport const getTeachersWithWorkload = createAction(\r\n  getTeachersWithWorkloadSchema,\r\n  async (input: GetTeachersWithWorkloadInput) => {\r\n    const teachers = await prisma.teacher.findMany({\r\n      select: {\r\n        TeacherID: true,\r\n        Prefix: true,\r\n        Firstname: true,\r\n        Lastname: true,\r\n      },\r\n      orderBy: [{ Prefix: \"asc\" }, { Firstname: \"asc\" }],\r\n    });\r\n\r\n    // Calculate workload for each teacher\r\n    const teachersWithWorkload = await Promise.all(\r\n      teachers.map(async (teacher: any) => {\r\n        // Get teacher's workload from repository\r\n        const assignments =\r\n          await teachingAssignmentRepository.findTeacherWorkload(\r\n            teacher.TeacherID,\r\n            input.semester,\r\n            input.academicYear,\r\n          );\r\n\r\n        // Calculate total hours and determine status\r\n        const totalHours = assignments.reduce(\r\n          (sum: any, a: any) => sum + a.TeachHour,\r\n          0,\r\n        );\r\n        let status: \"ok\" | \"warning\" | \"overload\";\r\n        if (totalHours >= 25) {\r\n          status = \"overload\";\r\n        } else if (totalHours >= 20) {\r\n          status = \"warning\";\r\n        } else {\r\n          status = \"ok\";\r\n        }\r\n\r\n        return {\r\n          TeacherID: teacher.TeacherID,\r\n          TeacherName: `${teacher.Prefix}${teacher.Firstname} ${teacher.Lastname}`,\r\n          currentWorkload: {\r\n            totalHours,\r\n            status,\r\n            assignments: assignments.length,\r\n          },\r\n        };\r\n      }),\r\n    );\r\n\r\n    return teachersWithWorkload;\r\n  },\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\application\\schemas\\teaching-assignment.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\domain\\services\\teacher-validation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\domain\\types\\teaching-assignment.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\infrastructure\\repositories\\teaching-assignment.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":303,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7736,7739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7736,7739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":364,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":364,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9336,9339],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9336,9339],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Teaching Assignment Repository\r\n * Data access layer for teacher-subject assignments (teachers_responsibility table)\r\n */\r\n\r\nimport prisma from \"@/lib/prisma\";\r\nimport { semester } from \"@/prisma/generated/client\";\r\nimport { cache } from \"react\";\r\n\r\n// ============================================================================\r\n// Query Methods\r\n// ============================================================================\r\n\r\n/**\r\n * Get all assignments for specific grade + semester + year\r\n * Cached per request using React cache()\r\n */\r\nexport const findAssignmentsByContext = cache(\r\n  async (gradeId: string, semester: semester, academicYear: number) => {\r\n    return prisma.teachers_responsibility.findMany({\r\n      where: {\r\n        GradeID: gradeId,\r\n        Semester: semester,\r\n        AcademicYear: academicYear,\r\n      },\r\n      include: {\r\n        teacher: {\r\n          select: {\r\n            TeacherID: true,\r\n            Prefix: true,\r\n            Firstname: true,\r\n            Lastname: true,\r\n            Department: true,\r\n          },\r\n        },\r\n        subject: {\r\n          select: {\r\n            SubjectCode: true,\r\n            SubjectName: true,\r\n            Credit: true,\r\n            Category: true,\r\n          },\r\n        },\r\n        gradelevel: {\r\n          select: {\r\n            GradeID: true,\r\n            Year: true,\r\n            Number: true,\r\n          },\r\n        },\r\n      },\r\n      orderBy: [{ subject: { SubjectName: \"asc\" } }],\r\n    });\r\n  },\r\n);\r\n\r\n/**\r\n * Get teacher's full workload across all grades for semester + year\r\n * Used for workload calculation and validation\r\n */\r\nexport const findTeacherWorkload = cache(\r\n  async (teacherId: number, semester: semester, academicYear: number) => {\r\n    return prisma.teachers_responsibility.findMany({\r\n      where: {\r\n        TeacherID: teacherId,\r\n        Semester: semester,\r\n        AcademicYear: academicYear,\r\n      },\r\n      include: {\r\n        teacher: {\r\n          select: {\r\n            TeacherID: true,\r\n            Prefix: true,\r\n            Firstname: true,\r\n            Lastname: true,\r\n          },\r\n        },\r\n        subject: {\r\n          select: {\r\n            SubjectCode: true,\r\n            SubjectName: true,\r\n            Credit: true,\r\n            Category: true,\r\n          },\r\n        },\r\n        gradelevel: {\r\n          select: {\r\n            GradeID: true,\r\n            Year: true,\r\n            Number: true,\r\n          },\r\n        },\r\n      },\r\n      orderBy: [\r\n        { gradelevel: { GradeID: \"asc\" } },\r\n        { subject: { SubjectName: \"asc\" } },\r\n      ],\r\n    });\r\n  },\r\n);\r\n\r\n/**\r\n * Get all subjects for a grade's program\r\n * Used to display all subjects that need teacher assignment\r\n */\r\nexport const findSubjectsByGrade = cache(async (gradeId: string) => {\r\n  // First get the grade's program\r\n  const grade = await prisma.gradelevel.findUnique({\r\n    where: { GradeID: gradeId },\r\n    select: { ProgramID: true },\r\n  });\r\n\r\n  if (!grade?.ProgramID) {\r\n    return [];\r\n  }\r\n\r\n  // Then get all subjects in that program\r\n  return prisma.program_subject.findMany({\r\n    where: { ProgramID: grade.ProgramID },\r\n    include: {\r\n      subject: {\r\n        select: {\r\n          SubjectCode: true,\r\n          SubjectName: true,\r\n          Credit: true,\r\n          Category: true,\r\n        },\r\n      },\r\n    },\r\n    orderBy: { subject: { SubjectName: \"asc\" } },\r\n  });\r\n});\r\n\r\n/**\r\n * Get all active teachers\r\n * Used for teacher selector dropdown\r\n */\r\nexport const findAllTeachers = cache(async () => {\r\n  return prisma.teacher.findMany({\r\n    select: {\r\n      TeacherID: true,\r\n      Prefix: true,\r\n      Firstname: true,\r\n      Lastname: true,\r\n      Department: true,\r\n    },\r\n    orderBy: [{ Firstname: \"asc\" }, { Lastname: \"asc\" }],\r\n  });\r\n});\r\n\r\n// ============================================================================\r\n// Mutation Methods\r\n// ============================================================================\r\n\r\n/**\r\n * Assign teacher to subject\r\n * Creates new assignment or updates if already exists\r\n */\r\nexport async function assignTeacherToSubject(data: {\r\n  SubjectCode: string;\r\n  GradeID: string;\r\n  Semester: semester;\r\n  AcademicYear: number;\r\n  TeacherID: number;\r\n  TeachHour: number;\r\n}) {\r\n  // Check if assignment already exists\r\n  const existing = await prisma.teachers_responsibility.findFirst({\r\n    where: {\r\n      SubjectCode: data.SubjectCode,\r\n      GradeID: data.GradeID,\r\n      Semester: data.Semester,\r\n      AcademicYear: data.AcademicYear,\r\n      TeacherID: data.TeacherID,\r\n    },\r\n  });\r\n\r\n  if (existing) {\r\n    // Update existing\r\n    return prisma.teachers_responsibility.update({\r\n      where: { RespID: existing.RespID },\r\n      data: { TeachHour: data.TeachHour },\r\n    });\r\n  }\r\n\r\n  // Create new\r\n  return prisma.teachers_responsibility.create({ data });\r\n}\r\n\r\n/**\r\n * Remove teacher assignment from subject\r\n */\r\nexport async function unassignTeacherFromSubject(data: {\r\n  SubjectCode: string;\r\n  GradeID: string;\r\n  Semester: semester;\r\n  AcademicYear: number;\r\n  TeacherID: number;\r\n}) {\r\n  // Find the assignment\r\n  const assignment = await prisma.teachers_responsibility.findFirst({\r\n    where: {\r\n      SubjectCode: data.SubjectCode,\r\n      GradeID: data.GradeID,\r\n      Semester: data.Semester,\r\n      AcademicYear: data.AcademicYear,\r\n      TeacherID: data.TeacherID,\r\n    },\r\n  });\r\n\r\n  if (!assignment) {\r\n    throw new Error(\"Assignment not found\");\r\n  }\r\n\r\n  return prisma.teachers_responsibility.delete({\r\n    where: { RespID: assignment.RespID },\r\n  });\r\n}\r\n\r\n/**\r\n * Bulk assign teachers to subjects (transaction)\r\n * Ensures all assignments succeed or all fail\r\n */\r\nexport async function bulkAssignTeachers(\r\n  assignments: Array<{\r\n    SubjectCode: string;\r\n    GradeID: string;\r\n    Semester: semester;\r\n    AcademicYear: number;\r\n    TeacherID: number;\r\n    TeachHour: number;\r\n  }>,\r\n) {\r\n  // For each assignment, check if it exists and update or create\r\n  const operations = await Promise.all(\r\n    assignments.map(async (data) => {\r\n      const existing = await prisma.teachers_responsibility.findFirst({\r\n        where: {\r\n          SubjectCode: data.SubjectCode,\r\n          GradeID: data.GradeID,\r\n          Semester: data.Semester,\r\n          AcademicYear: data.AcademicYear,\r\n          TeacherID: data.TeacherID,\r\n        },\r\n      });\r\n\r\n      if (existing) {\r\n        return prisma.teachers_responsibility.update({\r\n          where: { RespID: existing.RespID },\r\n          data: { TeachHour: data.TeachHour },\r\n        });\r\n      }\r\n\r\n      return prisma.teachers_responsibility.create({ data });\r\n    }),\r\n  );\r\n\r\n  return operations;\r\n}\r\n\r\n/**\r\n * Remove all assignments for a grade + semester + year\r\n * Used for \"Clear All\" functionality\r\n */\r\nexport async function clearAllAssignments(\r\n  gradeId: string,\r\n  semester: semester,\r\n  academicYear: number,\r\n) {\r\n  return prisma.teachers_responsibility.deleteMany({\r\n    where: {\r\n      GradeID: gradeId,\r\n      Semester: semester,\r\n      AcademicYear: academicYear,\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Copy assignments from previous semester\r\n * Useful for semester-to-semester continuity\r\n */\r\nexport async function copyAssignmentsFromPreviousSemester(\r\n  sourceGradeId: string,\r\n  sourceSemester: semester,\r\n  sourceYear: number,\r\n  targetGradeId: string,\r\n  targetSemester: semester,\r\n  targetYear: number,\r\n) {\r\n  // Get source assignments\r\n  const sourceAssignments = await prisma.teachers_responsibility.findMany({\r\n    where: {\r\n      GradeID: sourceGradeId,\r\n      Semester: sourceSemester,\r\n      AcademicYear: sourceYear,\r\n    },\r\n  });\r\n\r\n  // Create target assignments\r\n  const targetAssignments = sourceAssignments.map(\r\n    (\r\n      assignment: any,\r\n    ): {\r\n      SubjectCode: string;\r\n      GradeID: string;\r\n      Semester: semester;\r\n      AcademicYear: number;\r\n      TeacherID: number;\r\n      TeachHour: number;\r\n    } => ({\r\n      SubjectCode: assignment.SubjectCode,\r\n      GradeID: targetGradeId,\r\n      Semester: targetSemester,\r\n      AcademicYear: targetYear,\r\n      TeacherID: assignment.TeacherID,\r\n      TeachHour: assignment.TeachHour,\r\n    }),\r\n  );\r\n\r\n  // Bulk insert\r\n  return bulkAssignTeachers(targetAssignments);\r\n}\r\n\r\n// ============================================================================\r\n// Utility Methods\r\n// ============================================================================\r\n\r\n/**\r\n * Check if assignment already exists\r\n */\r\nexport async function assignmentExists(data: {\r\n  SubjectCode: string;\r\n  GradeID: string;\r\n  Semester: semester;\r\n  AcademicYear: number;\r\n  TeacherID: number;\r\n}): Promise<boolean> {\r\n  const count = await prisma.teachers_responsibility.count({\r\n    where: {\r\n      SubjectCode: data.SubjectCode,\r\n      GradeID: data.GradeID,\r\n      Semester: data.Semester,\r\n      AcademicYear: data.AcademicYear,\r\n      TeacherID: data.TeacherID,\r\n    },\r\n  });\r\n  return count > 0;\r\n}\r\n\r\n/**\r\n * Get assignment statistics for a context\r\n */\r\nexport async function getAssignmentStats(\r\n  gradeId: string,\r\n  semester: semester,\r\n  academicYear: number,\r\n) {\r\n  const [totalSubjects, assignments] = await Promise.all([\r\n    findSubjectsByGrade(gradeId),\r\n    findAssignmentsByContext(gradeId, semester, academicYear),\r\n  ]);\r\n\r\n  const uniqueSubjects = new Set(assignments.map((a: any) => a.SubjectCode));\r\n  const assignedCount = uniqueSubjects.size;\r\n\r\n  return {\r\n    totalSubjects: totalSubjects.length,\r\n    assignedSubjects: assignedCount,\r\n    unassignedSubjects: totalSubjects.length - assignedCount,\r\n    totalAssignments: assignments.length, // Can be > subjects if multiple teachers per subject\r\n  };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\presentation\\components\\AssignmentFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\presentation\\components\\SubjectAssignmentTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\presentation\\components\\TeacherAssignmentPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\presentation\\components\\TeacherSelector.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2060,2063],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2060,2063],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Autocomplete,\r\n  Chip,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport { Add as AddIcon } from \"@mui/icons-material\";\r\nimport type { semester } from \"@/prisma/generated/client\";\r\nimport { getTeachersWithWorkload } from \"../../application/actions/teaching-assignment.actions\";\r\nimport {\r\n  getWorkloadColor,\r\n  type WorkloadStatus,\r\n} from \"../../domain/types/teaching-assignment.types\";\r\n\r\ninterface TeacherOption {\r\n  id: number;\r\n  name: string;\r\n  currentHours: number;\r\n  status: WorkloadStatus;\r\n}\r\n\r\ninterface TeacherSelectorProps {\r\n  subjectCode: string;\r\n  gradeId: string; // Not used yet but kept for future features\r\n  semester: semester;\r\n  academicYear: number;\r\n  defaultHours: number;\r\n  onAssign: (subjectCode: string, teacherId: number, hours: number) => void;\r\n}\r\n\r\n/**\r\n * Teacher Selector Component\r\n * Autocomplete with workload indicators for teacher selection\r\n */\r\nexport function TeacherSelector({\r\n  subjectCode,\r\n  gradeId: _gradeId, // Prefix with underscore to mark as intentionally unused\r\n  semester,\r\n  academicYear,\r\n  defaultHours,\r\n  onAssign,\r\n}: TeacherSelectorProps) {\r\n  const [teachers, setTeachers] = useState<TeacherOption[]>([]);\r\n  const [selectedTeacher, setSelectedTeacher] = useState<TeacherOption | null>(\r\n    null,\r\n  );\r\n  const [hours, setHours] = useState<number>(defaultHours);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Fetch teachers with workload on mount\r\n  useEffect(() => {\r\n    const fetchTeachers = async () => {\r\n      setIsLoading(true);\r\n\r\n      try {\r\n        const result = await getTeachersWithWorkload({\r\n          semester,\r\n          academicYear,\r\n        });\r\n\r\n        if (!result.success || !result.data) {\r\n          throw new Error(result.error?.message ?? \"Failed to fetch teachers\");\r\n        }\r\n\r\n        // Map server action response to component state\r\n        const teachersWithWorkload: TeacherOption[] = result.data.map(\r\n          (teacher: any) => ({\r\n            id: teacher.TeacherID,\r\n            name: teacher.TeacherName,\r\n            currentHours: teacher.currentWorkload.totalHours,\r\n            status: teacher.currentWorkload.status,\r\n          }),\r\n        );\r\n\r\n        setTeachers(teachersWithWorkload);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch teachers:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    void fetchTeachers();\r\n  }, [semester, academicYear]);\r\n\r\n  const handleAssign = () => {\r\n    if (!selectedTeacher) return;\r\n    onAssign(subjectCode, selectedTeacher.id, hours);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ display: \"flex\", gap: 1, alignItems: \"flex-start\" }}>\r\n      <Autocomplete\r\n        size=\"small\"\r\n        sx={{ minWidth: 250 }}\r\n        options={teachers}\r\n        getOptionLabel={(option) => option.name}\r\n        value={selectedTeacher}\r\n        onChange={(_, newValue) => setSelectedTeacher(newValue)}\r\n        loading={isLoading}\r\n        renderOption={(props, option) => (\r\n          <li {...props}>\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                width: \"100%\",\r\n              }}\r\n            >\r\n              <span>{option.name}</span>\r\n              <Chip\r\n                size=\"small\"\r\n                label={`${option.currentHours}h`}\r\n                sx={{\r\n                  bgcolor: getWorkloadColor(option.status),\r\n                  color: \"white\",\r\n                  ml: 1,\r\n                }}\r\n              />\r\n            </Box>\r\n          </li>\r\n        )}\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            label=\"เน€เธฅเธทเธญเธเธเธฃเธน\"\r\n            InputProps={{\r\n              ...params.InputProps,\r\n              endAdornment: (\r\n                <>\r\n                  {isLoading ? <CircularProgress size={20} /> : null}\r\n                  {params.InputProps.endAdornment}\r\n                </>\r\n              ),\r\n            }}\r\n          />\r\n        )}\r\n      />\r\n\r\n      <TextField\r\n        size=\"small\"\r\n        type=\"number\"\r\n        label=\"เธเธก./เธชเธฑเธเธ”เธฒเธซเน\"\r\n        value={hours}\r\n        onChange={(e) => setHours(Number(e.target.value))}\r\n        sx={{ width: 120 }}\r\n        inputProps={{ min: 1, max: 20 }}\r\n      />\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        size=\"small\"\r\n        startIcon={<AddIcon />}\r\n        onClick={handleAssign}\r\n        disabled={!selectedTeacher}\r\n      >\r\n        เธกเธญเธเธซเธกเธฒเธข\r\n      </Button>\r\n    </Box>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\teaching-assignment\\presentation\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\timeslot\\application\\actions\\timeslot.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\timeslot\\application\\schemas\\timeslot.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\timeslot\\domain\\services\\timeslot.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\features\\timeslot\\infrastructure\\repositories\\timeslot.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\functions\\apiErrorHandling.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\functions\\componentFunctions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\functions\\parseUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\functions\\randomHexColor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\global.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\roomAvailabilityUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\use-class-schedules.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\use-grade-levels.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\use-locked-schedules.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[719,722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[719,722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport useSWR from \"swr\";\r\nimport { getLockedSchedulesAction } from \"@/features/lock/application/actions/lock.actions\";\r\nimport type { GroupedLockedSchedule } from \"@/features/lock/domain/services/lock-validation.service\";\r\n\r\n/**\r\n * React hook for fetching locked schedules by academic term.\r\n * Uses SWR for caching and revalidation.\r\n *\r\n * @param academicYear - Academic year (e.g., 2567)\r\n * @param semester - Semester number (1 or 2)\r\n * @returns {Object} Locked schedules data with loading/error states\r\n * @example\r\n * const { data, isLoading, error, mutate } = useLockedSchedules(2567, 1)\r\n */\r\nexport const useLockedSchedules = (academicYear: number, semester: number) => {\r\n  const fetcher: any = async () => {\r\n    const result = await getLockedSchedulesAction({\r\n      AcademicYear: academicYear,\r\n      Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n    });\r\n    return result.success ? result.data : [];\r\n  };\r\n\r\n  const { data, error, mutate } = useSWR<GroupedLockedSchedule[]>(\r\n    `locked-schedules-${academicYear}-${semester}`,\r\n    fetcher,\r\n  );\r\n\r\n  return {\r\n    data: data ?? [],\r\n    isLoading: !error && !data,\r\n    error,\r\n    mutate,\r\n  };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\use-rooms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\use-subjects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\use-teacher-assignments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\use-teachers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\use-timeslots.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[658,661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[658,661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport useSWR from \"swr\";\r\nimport type { timeslot } from \"@/prisma/generated/client\";\r\nimport { getTimeslotsByTermAction } from \"@/features/timeslot/application/actions/timeslot.actions\";\r\n\r\n/**\r\n * React hook for fetching timeslots by academic term.\r\n * Uses SWR for caching and revalidation.\r\n *\r\n * @param academicYear - Academic year (e.g., 2567)\r\n * @param semester - Semester number (1 or 2)\r\n * @returns {Object} Timeslots data with loading/error states\r\n * @example\r\n * const { data, isLoading, error, mutate } = useTimeslots(2567, 1)\r\n */\r\nexport const useTimeslots = (academicYear: number, semester: number) => {\r\n  const fetcher: any = async () => {\r\n    const result = await getTimeslotsByTermAction({\r\n      AcademicYear: academicYear,\r\n      Semester: `SEMESTER_${semester}` as \"SEMESTER_1\" | \"SEMESTER_2\",\r\n    });\r\n    return result.success ? result.data : [];\r\n  };\r\n\r\n  const { data, error, mutate } = useSWR<timeslot[]>(\r\n    `timeslots-${academicYear}-${semester}`,\r\n    fetcher,\r\n  );\r\n\r\n  return {\r\n    data: data ?? [],\r\n    isLoading: !error && !data,\r\n    error,\r\n    mutate,\r\n  };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\useRoomAvailability.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLocked'. Either include it or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [academicYear, semester, enabled, fetchLocked]","fix":{"range":[1958,1991],"text":"[academicYear, semester, enabled, fetchLocked]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState, useMemo } from \"react\";\r\nimport type { class_schedule, semester } from \"@/prisma/generated/client\";\r\nimport { getRawLockedSchedulesAction } from \"@/features/lock/application/actions/lock.actions\";\r\nimport { computeAvailability } from \"@/hooks/roomAvailabilityUtils\";\r\n\r\nexport type RoomAvailabilityStatus = \"available\" | \"occupied\" | \"partial\";\r\n\r\nexport interface UseRoomAvailabilityParams {\r\n  academicYear?: number;\r\n  semester?: semester;\r\n  selectedTimeslots: Iterable<string>;\r\n  /** Skip fetch when false */\r\n  enabled?: boolean;\r\n}\r\n\r\nexport interface UseRoomAvailabilityResult {\r\n  availabilityMap: Record<number, RoomAvailabilityStatus>;\r\n  loading: boolean;\r\n  error: Error | null;\r\n  refresh: () => Promise<void>;\r\n}\r\n\r\nexport { computeAvailability };\r\n\r\nexport function useRoomAvailability({\r\n  academicYear,\r\n  semester,\r\n  selectedTimeslots,\r\n  enabled = true,\r\n}: UseRoomAvailabilityParams): UseRoomAvailabilityResult {\r\n  const [lockedSchedules, setLockedSchedules] = useState<\r\n    Array<Pick<class_schedule, \"RoomID\" | \"TimeslotID\">>\r\n  >([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<Error | null>(null);\r\n\r\n  const fetchLocked = async () => {\r\n    if (!academicYear || !semester || !enabled) return;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await getRawLockedSchedulesAction({\r\n        AcademicYear: academicYear,\r\n        Semester: semester,\r\n      });\r\n      if (Array.isArray(data)) {\r\n        setLockedSchedules(\r\n          data.map((d) => ({\r\n            RoomID: d.RoomID ?? null,\r\n            TimeslotID: d.TimeslotID,\r\n          })),\r\n        );\r\n      }\r\n    } catch (err) {\r\n      setError(\r\n        err instanceof Error\r\n          ? err\r\n          : new Error(\"Failed to load locked schedules\"),\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    void fetchLocked();\r\n  }, [academicYear, semester, enabled]);\r\n\r\n  const availabilityMap = useMemo(\r\n    () => computeAvailability(lockedSchedules, selectedTimeslots),\r\n    [lockedSchedules, selectedTimeslots],\r\n  );\r\n\r\n  return { availabilityMap, loading, error, refresh: fetchLocked };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\hooks\\useSemesterSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\instrumentation-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\instrumentation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\actions\\timetable-config.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\auth-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\authz.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\client-logger.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":41,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":41,"endColumn":22,"suggestions":[{"fix":{"range":[1294,1340],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":46,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":46,"endColumn":19,"suggestions":[{"fix":{"range":[1429,1474],"text":""},"messageId":"removeConsole","data":{"propertyName":"info"},"desc":"Remove the console.info()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Client-Side Logger Utility\r\n *\r\n * Lightweight structured logging for React client components.\r\n * Mirrors the server-side logger API for consistency.\r\n *\r\n * Usage:\r\n * ```typescript\r\n * import { createClientLogger } from '@/lib/client-logger';\r\n *\r\n * const log = createClientLogger('MyComponent');\r\n * log.error('Failed to save', { id: 123 });\r\n * log.logError(error, { action: 'save' });\r\n * ```\r\n */\r\n\r\nexport interface ClientLogContext {\r\n  [key: string]: unknown;\r\n}\r\n\r\nexport interface ClientLogger {\r\n  debug: (message: string, context?: ClientLogContext) => void;\r\n  info: (message: string, context?: ClientLogContext) => void;\r\n  warn: (message: string, context?: ClientLogContext) => void;\r\n  error: (message: string, context?: ClientLogContext) => void;\r\n  logError: (error: unknown, context?: ClientLogContext) => void;\r\n}\r\n\r\n/**\r\n * Create a client-side logger with component context\r\n *\r\n * @param component - Component name for log prefixing\r\n * @returns Logger instance with debug, info, warn, error, logError methods\r\n */\r\nexport function createClientLogger(component: string): ClientLogger {\r\n  const prefix = `[${component}]`;\r\n\r\n  return {\r\n    debug: (message: string, context?: ClientLogContext) => {\r\n      if (process.env.NODE_ENV !== \"production\") {\r\n        console.debug(prefix, message, context ?? \"\");\r\n      }\r\n    },\r\n\r\n    info: (message: string, context?: ClientLogContext) => {\r\n      console.info(prefix, message, context ?? \"\");\r\n    },\r\n\r\n    warn: (message: string, context?: ClientLogContext) => {\r\n      console.warn(prefix, message, context ?? \"\");\r\n    },\r\n\r\n    error: (message: string, context?: ClientLogContext) => {\r\n      console.error(prefix, message, context ?? \"\");\r\n    },\r\n\r\n    logError: (error: unknown, context?: ClientLogContext) => {\r\n      if (error instanceof Error) {\r\n        console.error(prefix, error.message, {\r\n          ...context,\r\n          errorName: error.name,\r\n          stack:\r\n            process.env.NODE_ENV !== \"production\" ? error.stack : undefined,\r\n        });\r\n      } else {\r\n        console.error(prefix, \"Unknown error\", { ...context, error });\r\n      }\r\n    },\r\n  };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\infrastructure\\repositories\\public-data.repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":310,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":310,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7853,7856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7853,7856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":310,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":310,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7861,7864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7861,7864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Infrastructure Layer: Public Data Repository\r\n *\r\n * Handles all database operations for public/unauthenticated data access.\r\n * Centralizes queries for teachers, statistics, and class information\r\n * that were previously scattered across src/lib/public/*.ts files.\r\n *\r\n * Pure data access layer with no business logic.\r\n *\r\n * @module public-data.repository\r\n */\r\n\r\nimport { cache } from \"react\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport type { Prisma, semester } from \"@/prisma/generated/client\";\r\n\r\n// ============================================================================\r\n// Type Definitions\r\n// ============================================================================\r\n\r\n/**\r\n * Public-safe teacher data (no PII)\r\n */\r\nexport interface PublicTeacher {\r\n  teacherId: number;\r\n  name: string;\r\n  department: string;\r\n  subjectCount: number;\r\n  weeklyHours: number;\r\n  utilization: number;\r\n}\r\n\r\n/**\r\n * Filters for public teacher queries\r\n */\r\nexport interface PublicTeacherFilters {\r\n  academicYear: number;\r\n  semester: string;\r\n  searchQuery?: string;\r\n  sortBy?: \"name\" | \"hours\" | \"utilization\";\r\n  sortOrder?: \"asc\" | \"desc\";\r\n}\r\n\r\nconst teacherResponsibilityInclude = {\r\n  subject: {\r\n    select: {\r\n      SubjectName: true,\r\n      SubjectCode: true,\r\n      Category: true,\r\n    },\r\n  },\r\n  gradelevel: {\r\n    select: {\r\n      GradeID: true,\r\n      Year: true,\r\n      Number: true,\r\n    },\r\n  },\r\n  class_schedule: {\r\n    include: {\r\n      timeslot: true,\r\n      subject: {\r\n        select: {\r\n          SubjectCode: true,\r\n          SubjectName: true,\r\n        },\r\n      },\r\n      gradelevel: {\r\n        select: {\r\n          GradeID: true,\r\n          Year: true,\r\n          Number: true,\r\n        },\r\n      },\r\n      room: {\r\n        select: {\r\n          RoomID: true,\r\n          RoomName: true,\r\n          Building: true,\r\n        },\r\n      },\r\n    },\r\n  },\r\n} as const;\r\n\r\ntype ResponsibilityWithSchedules = Prisma.teachers_responsibilityGetPayload<{\r\n  include: typeof teacherResponsibilityInclude;\r\n}>;\r\n\r\n/**\r\n * Quick statistics for dashboard\r\n */\r\nexport interface QuickStats {\r\n  totalTeachers: number;\r\n  totalClasses: number;\r\n  totalRooms: number;\r\n  totalSubjects: number;\r\n  totalPrograms: number;\r\n  periodsPerDay: number;\r\n  currentTerm: string;\r\n  lastUpdated: string;\r\n}\r\n\r\n/**\r\n * Period load by day\r\n */\r\nexport interface PeriodLoad {\r\n  day: string;\r\n  periods: number;\r\n}\r\n\r\n/**\r\n * Room occupancy statistics\r\n */\r\nexport interface RoomOccupancy {\r\n  day: string;\r\n  period: number;\r\n  occupancyPercent: number;\r\n}\r\n\r\n/**\r\n * Public-safe grade level data\r\n */\r\nexport interface PublicGradeLevel {\r\n  gradeId: string;\r\n  year: number;\r\n  number: number;\r\n  name: string;\r\n  studentCount: number;\r\n  subjectCount: number;\r\n}\r\n\r\n/**\r\n * Filters for public grade level queries\r\n */\r\nexport interface PublicGradeLevelFilters {\r\n  academicYear: number;\r\n  semester: semester;\r\n  searchQuery?: string;\r\n  sortBy?: \"year\" | \"number\" | \"students\";\r\n  sortOrder?: \"asc\" | \"desc\";\r\n}\r\n\r\n// ============================================================================\r\n// Type Definitions\r\n// ============================================================================\r\n\r\n/**\r\n * Type for public teacher data (excludes sensitive fields like Email and Role)\r\n */\r\ntype PublicTeacherData = Prisma.teacherGetPayload<{\r\n  select: {\r\n    TeacherID: true;\r\n    Prefix: true;\r\n    Firstname: true;\r\n    Lastname: true;\r\n    Department: true;\r\n    teachers_responsibility: {\r\n      select: {\r\n        SubjectCode: true;\r\n        TeachHour: true;\r\n      };\r\n    };\r\n  };\r\n}>;\r\n\r\ntype GradeLevelWithSchedules = Prisma.gradelevelGetPayload<{\r\n  include: {\r\n    class_schedule: {\r\n      select: {\r\n        SubjectCode: true;\r\n      };\r\n    };\r\n  };\r\n}>;\r\n\r\n// ============================================================================\r\n// Constants\r\n// ============================================================================\r\n\r\nconst MAX_WEEKLY_HOURS = 40;\r\n\r\n// ============================================================================\r\n// Helper Functions (Private)\r\n// ============================================================================\r\n\r\n/**\r\n * Convert string semester (\"1\", \"2\") to Prisma enum\r\n */\r\nfunction toSemesterEnum(semesterString: string): semester {\r\n  return semesterString === \"1\" ? \"SEMESTER_1\" : \"SEMESTER_2\";\r\n}\r\n\r\n/**\r\n * Get current academic term from latest config\r\n * Cached per request using React cache()\r\n */\r\nconst getCurrentTerm = cache(async () => {\r\n  return await prisma.table_config.findFirst({\r\n    orderBy: { AcademicYear: \"desc\" },\r\n    select: {\r\n      AcademicYear: true,\r\n      Semester: true,\r\n      Config: true,\r\n      updatedAt: true,\r\n    },\r\n  });\r\n});\r\n\r\n/**\r\n * Transform teacher database record to public-safe format\r\n */\r\nfunction transformTeacherToPublic(teacher: PublicTeacherData): PublicTeacher {\r\n  const weeklyHours = teacher.teachers_responsibility.reduce(\r\n    (sum, resp) => sum + (resp.TeachHour || 0),\r\n    0,\r\n  );\r\n\r\n  const utilization = Math.round((weeklyHours / MAX_WEEKLY_HOURS) * 100);\r\n\r\n  return {\r\n    teacherId: teacher.TeacherID,\r\n    name: `${teacher.Prefix}${teacher.Firstname} ${teacher.Lastname}`.trim(),\r\n    department: teacher.Department || \"เนเธกเนเธฃเธฐเธเธธ\",\r\n    subjectCount: teacher.teachers_responsibility.length,\r\n    weeklyHours,\r\n    utilization,\r\n  };\r\n}\r\n\r\n/**\r\n * Transform grade level database record to public-safe format\r\n */\r\nfunction transformGradeLevelToPublic(\r\n  gradeLevel: GradeLevelWithSchedules,\r\n): PublicGradeLevel {\r\n  // Count unique subjects for this grade\r\n  const uniqueSubjects = new Set(\r\n    gradeLevel.class_schedule.map((schedule) => schedule.SubjectCode),\r\n  );\r\n\r\n  return {\r\n    gradeId: gradeLevel.GradeID,\r\n    year: gradeLevel.Year,\r\n    number: gradeLevel.Number,\r\n    name: `${gradeLevel.Year}/${gradeLevel.Number}`,\r\n    studentCount: gradeLevel.StudentCount || 0,\r\n    subjectCount: uniqueSubjects.size,\r\n  };\r\n}\r\n\r\n// ============================================================================\r\n// Repository Methods\r\n// ============================================================================\r\n\r\nexport const publicDataRepository = {\r\n  // ==========================================================================\r\n  // Teachers\r\n  // ==========================================================================\r\n\r\n  /**\r\n   * Find all public teachers with optional filtering and sorting\r\n   * Cached per request using React cache()\r\n   */\r\n  async findPublicTeachers(\r\n    filters: PublicTeacherFilters,\r\n  ): Promise<PublicTeacher[]> {\r\n    const { academicYear, semester, searchQuery, sortBy, sortOrder } = filters;\r\n\r\n    // Build where clause\r\n    const where = searchQuery\r\n      ? {\r\n          OR: [\r\n            { Firstname: { contains: searchQuery } },\r\n            { Lastname: { contains: searchQuery } },\r\n            { Department: { contains: searchQuery } },\r\n          ],\r\n        }\r\n      : undefined;\r\n\r\n    // Query teachers with their teaching responsibilities\r\n    const teachers = await prisma.teacher.findMany({\r\n      where,\r\n      select: {\r\n        TeacherID: true,\r\n        Prefix: true,\r\n        Firstname: true,\r\n        Lastname: true,\r\n        Department: true,\r\n        // Explicitly exclude Email field for security\r\n        teachers_responsibility: {\r\n          where: {\r\n            AcademicYear: academicYear,\r\n            Semester: toSemesterEnum(semester),\r\n          },\r\n          select: {\r\n            SubjectCode: true,\r\n            TeachHour: true,\r\n          },\r\n        },\r\n      },\r\n      orderBy: { Firstname: \"asc\" },\r\n    });\r\n\r\n    // Transform to public format\r\n    const publicTeachers = teachers.map(transformTeacherToPublic);\r\n\r\n    // Apply sorting if specified\r\n    if (sortBy && sortOrder) {\r\n      publicTeachers.sort((a: any, b: any) => {\r\n        const order = sortOrder === \"asc\" ? 1 : -1;\r\n        switch (sortBy) {\r\n          case \"name\":\r\n            return order * a.name.localeCompare(b.name, \"th\");\r\n          case \"hours\":\r\n            return order * (a.weeklyHours - b.weeklyHours);\r\n          case \"utilization\":\r\n            return order * (a.utilization - b.utilization);\r\n          default:\r\n            return 0;\r\n        }\r\n      });\r\n    }\r\n\r\n    return publicTeachers;\r\n  },\r\n\r\n  /**\r\n   * Count all teachers\r\n   * Cached per request using React cache()\r\n   */\r\n  async countTeachers(): Promise<number> {\r\n    return await prisma.teacher.count();\r\n  },\r\n\r\n  /**\r\n   * Find a single public teacher by ID\r\n   * Cached per request using React cache()\r\n   */\r\n  async findPublicTeacherById(\r\n    teacherId: number,\r\n    academicYear: number,\r\n    semester: string,\r\n  ): Promise<PublicTeacher | null> {\r\n    const teacher = await prisma.teacher.findUnique({\r\n      where: { TeacherID: teacherId },\r\n      select: {\r\n        TeacherID: true,\r\n        Prefix: true,\r\n        Firstname: true,\r\n        Lastname: true,\r\n        Department: true,\r\n        // Explicitly exclude Email field for security\r\n        teachers_responsibility: {\r\n          where: {\r\n            AcademicYear: academicYear,\r\n            Semester: toSemesterEnum(semester),\r\n          },\r\n          select: {\r\n            SubjectCode: true,\r\n            TeachHour: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    if (!teacher) return null;\r\n\r\n    return transformTeacherToPublic(teacher);\r\n  },\r\n\r\n  async findTeacherResponsibilities(\n    teacherId: number,\n    academicYear: number,\n    semester: string,\n  ): Promise<ResponsibilityWithSchedules[]> {\n    const responsibilities = await prisma.teachers_responsibility.findMany({\r\n      where: {\r\n        TeacherID: teacherId,\r\n        AcademicYear: academicYear,\r\n        Semester: toSemesterEnum(semester),\r\n      },\r\n      include: teacherResponsibilityInclude,\r\n      orderBy: [{ gradelevel: { Year: \"asc\" } }, { SubjectCode: \"asc\" }],\r\n    });\r\n\r\n    return responsibilities as ResponsibilityWithSchedules[];\n  },\n\n  /**\n   * Find class schedule for a given grade and term\n   * Public-safe: joins only public fields\n   */\n  async findClassSchedule(\n    gradeId: string,\n    academicYear: number,\n    semester: semester,\n  ) {\n    return await prisma.class_schedule.findMany({\n      where: {\n        GradeID: gradeId,\n        timeslot: {\n          AcademicYear: academicYear,\n          Semester: semester,\n        },\n      },\n      include: {\n        timeslot: true,\n        subject: {\n          select: {\n            SubjectCode: true,\n            SubjectName: true,\n          },\n        },\n        room: {\n          select: {\n            RoomName: true,\n            Building: true,\n          },\n        },\n        gradelevel: {\n          select: {\n            GradeID: true,\n            Year: true,\n            Number: true,\n          },\n        },\n        teachers_responsibility: {\n          select: {\n            teacher: {\n              select: {\n                Prefix: true,\n                Firstname: true,\n                Lastname: true,\n              },\n            },\n          },\n        },\n      },\n      orderBy: [\n        { timeslot: { DayOfWeek: \"asc\" } },\n        { timeslot: { StartTime: \"asc\" } },\n      ],\n    });\n  },\n\r\n  // ==========================================================================\r\n  // Statistics\r\n  // ==========================================================================\r\n\r\n  /**\r\n   * Get quick stats for dashboard/homepage\r\n   * Cached per request using React cache()\r\n   */\r\n  async getQuickStats(): Promise<QuickStats> {\r\n    const config = await getCurrentTerm();\r\n\r\n    if (!config) {\r\n      // Return empty stats if no config found\r\n      return {\r\n        totalTeachers: 0,\r\n        totalClasses: 0,\r\n        totalRooms: 0,\r\n        totalSubjects: 0,\r\n        totalPrograms: 0,\r\n        periodsPerDay: 0,\r\n        currentTerm: \"N/A\",\r\n        lastUpdated: new Date().toLocaleDateString(\"th-TH\", {\r\n          day: \"numeric\",\r\n          month: \"short\",\r\n          year: \"numeric\",\r\n        }),\r\n      };\r\n    }\r\n\r\n    // Run all count queries in parallel\r\n    const [\r\n      teacherCount,\r\n      classCount,\r\n      roomCount,\r\n      subjectCount,\r\n      programCount,\r\n      periodsPerDay,\r\n    ] = await Promise.all([\r\n      prisma.teacher.count(),\r\n      prisma.gradelevel.count(),\r\n      prisma.room.count(),\r\n      prisma.subject.count(),\r\n      prisma.program.count(),\r\n      prisma.timeslot.count({\r\n        where: {\r\n          DayOfWeek: \"MON\",\r\n          AcademicYear: config.AcademicYear,\r\n          Semester: config.Semester,\r\n        },\r\n      }),\r\n    ]);\r\n\r\n    const semesterLabel =\r\n      config.Semester === \"SEMESTER_1\" ? \"เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน 1\" : \"เธ เธฒเธเน€เธฃเธตเธขเธเธ—เธตเน 2\";\r\n\r\n    // Format date in Thai locale (short format: 14 เธ.เธข. 2568)\r\n    const formattedDate = config.updatedAt.toLocaleDateString(\"th-TH\", {\r\n      day: \"numeric\",\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n    });\r\n\r\n    return {\r\n      totalTeachers: teacherCount,\r\n      totalClasses: classCount,\r\n      totalRooms: roomCount,\r\n      totalSubjects: subjectCount,\r\n      totalPrograms: programCount,\r\n      periodsPerDay,\r\n      currentTerm: `${semesterLabel} เธเธตเธเธฒเธฃเธจเธถเธเธฉเธฒ ${config.AcademicYear}`,\r\n      lastUpdated: formattedDate,\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Get period load distribution by day\r\n   */\r\n  async getPeriodLoad(\r\n    academicYear: number,\r\n    semester: semester,\r\n  ): Promise<PeriodLoad[]> {\r\n    const config = await prisma.table_config.findFirst({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semester,\r\n      },\r\n      select: { AcademicYear: true, Semester: true },\r\n    });\r\n\r\n    if (!config) return [];\r\n\r\n    const days = [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\"] as const;\r\n    const periodLoads: PeriodLoad[] = [];\r\n\r\n    for (const day of days) {\r\n      const count = await prisma.class_schedule.count({\r\n        where: {\r\n          timeslot: {\r\n            DayOfWeek: day,\r\n            AcademicYear: academicYear,\r\n            Semester: semester,\r\n          },\r\n        },\r\n      });\r\n\r\n      periodLoads.push({ day, periods: count });\r\n    }\r\n\r\n    return periodLoads;\r\n  },\r\n\r\n  /**\r\n   * Get room occupancy statistics\r\n   */\r\n  async getRoomOccupancy(\r\n    academicYear: number,\r\n    semester: semester,\r\n  ): Promise<RoomOccupancy[]> {\r\n    const config = await prisma.table_config.findFirst({\r\n      where: {\r\n        AcademicYear: academicYear,\r\n        Semester: semester,\r\n      },\r\n    });\r\n\r\n    if (!config) return [];\r\n\r\n    const [totalRooms, timeslots] = await Promise.all([\r\n      prisma.room.count(),\r\n      prisma.timeslot.findMany({\r\n        where: {\r\n          AcademicYear: academicYear,\r\n          Semester: semester,\r\n        },\r\n        select: {\r\n          TimeslotID: true,\r\n          DayOfWeek: true,\r\n        },\r\n        orderBy: [{ DayOfWeek: \"asc\" }, { StartTime: \"asc\" }],\r\n      }),\r\n    ]);\r\n\r\n    if (totalRooms === 0 || timeslots.length === 0) return [];\r\n\r\n    // Group by day and calculate occupancy percentage\r\n    const occupancyData: RoomOccupancy[] = [];\r\n    const periodCounter: Record<string, number> = {};\r\n\r\n    for (const slot of timeslots) {\r\n      const dayKey = slot.DayOfWeek;\r\n      if (!periodCounter[dayKey]) {\r\n        periodCounter[dayKey] = 1;\r\n      }\r\n\r\n      // Count schedules for this timeslot\r\n      const scheduleCount = await prisma.class_schedule.count({\r\n        where: {\r\n          TimeslotID: slot.TimeslotID,\r\n        },\r\n      });\r\n\r\n      const occupancyPercent =\r\n        totalRooms > 0 ? Math.round((scheduleCount / totalRooms) * 100) : 0;\r\n\r\n      occupancyData.push({\r\n        day: dayKey.slice(0, 3),\r\n        period: periodCounter[dayKey],\r\n        occupancyPercent,\r\n      });\r\n\r\n      periodCounter[dayKey]++;\r\n    }\r\n\r\n    return occupancyData;\r\n  },\r\n\r\n  // ==========================================================================\r\n  // Grade Levels / Classes\r\n  // ==========================================================================\r\n\r\n  /**\r\n   * Find all public grade levels with optional filtering and sorting\r\n   * Cached per request using React cache()\r\n   */\r\n  async findPublicGradeLevels(\r\n    filters: PublicGradeLevelFilters,\r\n  ): Promise<PublicGradeLevel[]> {\r\n    const { academicYear, semester, searchQuery, sortBy, sortOrder } = filters;\r\n\r\n    // Build where clause\r\n    const where: Prisma.gradelevelWhereInput = searchQuery\r\n      ? {\r\n          OR: [\r\n            { Year: { equals: parseInt(searchQuery, 10) || undefined } },\r\n            { Number: { equals: parseInt(searchQuery, 10) || undefined } },\r\n          ],\r\n        }\r\n      : {};\r\n\r\n    // Query grade levels with their schedules\r\n    const gradeLevels = await prisma.gradelevel.findMany({\r\n      where,\r\n      include: {\r\n        class_schedule: {\r\n          where: {\r\n            timeslot: {\r\n              AcademicYear: academicYear,\r\n              Semester: semester,\r\n            },\r\n          },\r\n          select: {\r\n            SubjectCode: true,\r\n          },\r\n        },\r\n      },\r\n      orderBy: [{ Year: \"asc\" }, { Number: \"asc\" }],\r\n    });\r\n\r\n    // Transform to public format\r\n    const publicGradeLevels = (gradeLevels as GradeLevelWithSchedules[]).map(\r\n      transformGradeLevelToPublic,\r\n    );\r\n\r\n    // Apply sorting if specified\r\n    if (sortBy && sortOrder) {\r\n      publicGradeLevels.sort((a, b) => {\r\n        const order = sortOrder === \"asc\" ? 1 : -1;\r\n        switch (sortBy) {\r\n          case \"year\":\r\n            return order * (a.year - b.year);\r\n          case \"number\":\r\n            return order * (a.number - b.number);\r\n          case \"students\":\r\n            return order * (a.studentCount - b.studentCount);\r\n          default:\r\n            return 0;\r\n        }\r\n      });\r\n    }\r\n\r\n    return publicGradeLevels;\r\n  },\r\n\r\n  /**\r\n   * Count all grade levels\r\n   * Cached per request using React cache()\r\n   */\r\n  async countGradeLevels(): Promise<number> {\r\n    return await prisma.gradelevel.count();\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\logger.ts","messages":[],"suppressedMessages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":133,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":133,"endColumn":22,"suggestions":[{"fix":{"range":[3786,3810],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":136,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":136,"endColumn":21,"suggestions":[{"fix":{"range":[3856,3879],"text":""},"messageId":"removeConsole","data":{"propertyName":"info"},"desc":"Remove the console.info()."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\prisma-transaction.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[441,444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[441,444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\";\r\n\r\nimport prisma from \"@/lib/prisma\";\r\n\r\n// Derive the interactive transaction client type directly from prisma.$transaction\r\nexport type TransactionClient = Parameters<\r\n  Parameters<typeof prisma.$transaction>[0]\r\n>[0];\r\n\r\nexport async function withPrismaTransaction<T>(\r\n  fn: (tx: TransactionClient) => Promise<T>,\r\n  options?: Parameters<typeof prisma.$transaction>[1],\r\n): Promise<T> {\r\n  return prisma.$transaction((tx: any) => fn(tx), options);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\prisma.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\public\\classes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\public\\stats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\public\\teachers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\thai-year-format.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\timetable-config.constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\lib\\timetable-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\models\\credit-titles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\models\\credit-value.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\models\\dayofWeek-textColor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\models\\dayofweek-color.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\models\\dayofweek-thai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\models\\semester-thai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\models\\subject-category.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\shared\\lib\\action-wrapper.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ServerActionError' is defined but never used.","line":30,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Action Wrapper - Reusable Server Action Infrastructure\r\n *\r\n * Provides automatic:\r\n * - Authentication checking\r\n * - Input validation with Valibot\r\n * - Error handling with structured responses\r\n * - Logging (can be extended)\r\n *\r\n * @example\r\n * ```typescript\r\n * const myAction = createAction(\r\n *   mySchema,\r\n *   async (input) => {\r\n *     // Just business logic here\r\n *     return result;\r\n *   }\r\n * );\r\n * ```\r\n */\r\n\r\nimport * as v from \"valibot\";\r\n// Use auth for session retrieval\r\nimport { auth } from \"@/lib/auth\";\r\nimport { headers } from \"next/headers\";\r\nimport {\r\n  isConflictError,\r\n  isValidationError,\r\n  isLockedScheduleError,\r\n  type ServerActionError,\r\n} from \"@/types\";\r\nimport { createLogger } from \"@/lib/logger\";\r\n\r\nconst log = createLogger(\"ActionWrapper\");\r\n\r\n/**\r\n * Standard result shape for all Server Actions\r\n */\r\nexport interface ActionResult<T> {\r\n  success: boolean;\r\n  data?: T;\r\n  error?: {\r\n    message: string;\r\n    code: string;\r\n    details?: unknown;\r\n    field?: string; // For validation errors\r\n  };\r\n}\r\n\r\n/**\r\n * Error codes for consistent error handling\r\n */\r\nexport const ActionErrorCode = {\r\n  UNAUTHORIZED: \"UNAUTHORIZED\",\r\n  VALIDATION_ERROR: \"VALIDATION_ERROR\",\r\n  NOT_FOUND: \"NOT_FOUND\",\r\n  CONFLICT: \"CONFLICT\",\r\n  FORBIDDEN: \"FORBIDDEN\",\r\n  INTERNAL_ERROR: \"INTERNAL_ERROR\",\r\n} as const;\r\n\r\nexport type ActionErrorCodeType =\r\n  (typeof ActionErrorCode)[keyof typeof ActionErrorCode];\r\n\r\n/**\r\n * Create a type-safe Server Action with automatic error handling\r\n *\r\n * @param schema - Valibot schema for input validation\r\n * @param handler - Business logic function (receives validated input)\r\n * @returns Server Action function that returns ActionResult<TOutput>\r\n *\r\n * @example\r\n * ```typescript\r\n * const createTeacherAction = createAction(\r\n *   createTeacherSchema,\r\n *   async (input) => {\r\n *     const teacher = await teacherRepository.create(input);\r\n *     return teacher;\r\n *   }\r\n * );\r\n * ```\r\n */\r\nexport function createAction<TInput, TOutput>(\r\n  schema: v.GenericSchema<TInput>,\r\n  handler: (input: TInput, userId: string) => Promise<TOutput>,\r\n) {\r\n  return async (input: unknown): Promise<ActionResult<TOutput>> => {\r\n    try {\r\n      // 1. Authentication check\r\n      const session = await auth.api.getSession({\r\n        headers: await headers(),\r\n        asResponse: false,\r\n      });\r\n\r\n      if (!session || !session.user) {\r\n        return {\r\n          success: false,\r\n          error: {\r\n            message: \"You must be logged in to perform this action\",\r\n            code: ActionErrorCode.UNAUTHORIZED,\r\n          },\r\n        };\r\n      }\r\n\r\n      // 2. Input validation with Valibot\r\n      const validationResult = v.safeParse(schema, input);\r\n\r\n      if (!validationResult.success) {\r\n        return {\r\n          success: false,\r\n          error: {\r\n            message: \"Invalid input data\",\r\n            code: ActionErrorCode.VALIDATION_ERROR,\r\n            details: validationResult.issues,\r\n          },\r\n        };\r\n      }\r\n\r\n      // 3. Execute business logic\r\n      const data = await handler(\r\n        validationResult.output,\r\n        session.user.id || \"\",\r\n      );\r\n\r\n      // 4. Return success\r\n      return {\r\n        success: true,\r\n        data,\r\n      };\r\n    } catch (error) {\r\n      // 5. Error handling\r\n      log.logError(error, { action: \"serverAction\" });\r\n\r\n      // Handle known error types with type guards\r\n      if (isConflictError(error)) {\r\n        return {\r\n          success: false,\r\n          error: {\r\n            message: error.message,\r\n            code: ActionErrorCode.CONFLICT,\r\n            details: error.conflictDetails,\r\n          },\r\n        };\r\n      }\r\n\r\n      // Handle validation errors\r\n      if (isValidationError(error)) {\r\n        return {\r\n          success: false,\r\n          error: {\r\n            message: error.message,\r\n            code: ActionErrorCode.VALIDATION_ERROR,\r\n            field: error.field,\r\n          },\r\n        };\r\n      }\r\n\r\n      // Handle locked schedule errors\r\n      if (isLockedScheduleError(error)) {\r\n        return {\r\n          success: false,\r\n          error: {\r\n            message: error.message,\r\n            code: ActionErrorCode.FORBIDDEN,\r\n          },\r\n        };\r\n      }\r\n\r\n      // Handle generic Error instances\r\n      if (error instanceof Error) {\r\n        if (error.message.includes(\"not found\")) {\r\n          return {\r\n            success: false,\r\n            error: {\r\n              message: error.message,\r\n              code: ActionErrorCode.NOT_FOUND,\r\n            },\r\n          };\r\n        }\r\n\r\n        if (\r\n          error.message.includes(\"conflict\") ||\r\n          error.message.includes(\"already exists\")\r\n        ) {\r\n          return {\r\n            success: false,\r\n            error: {\r\n              message: error.message,\r\n              code: ActionErrorCode.CONFLICT,\r\n            },\r\n          };\r\n        }\r\n\r\n        if (\r\n          error.message.includes(\"forbidden\") ||\r\n          error.message.includes(\"permission\")\r\n        ) {\r\n          return {\r\n            success: false,\r\n            error: {\r\n              message: error.message,\r\n              code: ActionErrorCode.FORBIDDEN,\r\n            },\r\n          };\r\n        }\r\n\r\n        // Generic error\r\n        return {\r\n          success: false,\r\n          error: {\r\n            message: error.message,\r\n            code: ActionErrorCode.INTERNAL_ERROR,\r\n          },\r\n        };\r\n      }\r\n\r\n      // Unknown error type\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: \"An unexpected error occurred\",\r\n          code: ActionErrorCode.INTERNAL_ERROR,\r\n          details: error,\r\n        },\r\n      };\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Variant of createAction that doesn't require authentication\r\n * Use sparingly - only for public actions\r\n */\r\nexport function createPublicAction<TInput, TOutput>(\r\n  schema: v.GenericSchema<TInput>,\r\n  handler: (input: TInput) => Promise<TOutput>,\r\n) {\r\n  return async (input: unknown): Promise<ActionResult<TOutput>> => {\r\n    try {\r\n      // 1. Input validation only (no auth check)\r\n      const validationResult = v.safeParse(schema, input);\r\n\r\n      if (!validationResult.success) {\r\n        return {\r\n          success: false,\r\n          error: {\r\n            message: \"Invalid input data\",\r\n            code: ActionErrorCode.VALIDATION_ERROR,\r\n            details: validationResult.issues,\r\n          },\r\n        };\r\n      }\r\n\r\n      // 2. Execute business logic\r\n      const data = await handler(validationResult.output);\r\n\r\n      // 3. Return success\r\n      return {\r\n        success: true,\r\n        data,\r\n      };\r\n    } catch (error) {\r\n      // 4. Error handling (same as createAction)\r\n      log.logError(error, { action: \"publicAction\" });\r\n\r\n      if (error instanceof Error) {\r\n        return {\r\n          success: false,\r\n          error: {\r\n            message: error.message,\r\n            code: ActionErrorCode.INTERNAL_ERROR,\r\n          },\r\n        };\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: \"An unexpected error occurred\",\r\n          code: ActionErrorCode.INTERNAL_ERROR,\r\n        },\r\n      };\r\n    }\r\n  };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\shared\\schemas\\common.schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\stores\\semesterStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\types\\better-auth.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\types\\errors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\types\\events.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\types\\jest-dom.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\types\\lock-schedule.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\types\\schedule.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\types\\ui-state.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\utils\\export.utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\utils\\grade-display.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\utils\\moe-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"B:\\Dev\\school-timetable-senior-project\\src\\utils\\type-transformers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
